<?php
$route = get_route();

if (isset($route[1])) {
    switch ($route[1]) {
        case 'elearner': $active_menu = 68;
            break;
        case 'collegiate': $active_menu = 67;
            break;
        case 'medical': $active_menu = 66;
            break;
        case 'intermediate': $active_menu = 65;
            break;
        case 'elementary': $active_menu = 64;
            break;
    }
}

$current_user = wp_get_current_user();
$is_user_logged_in = is_user_logged_in();

$cart_items = get_cart_items();

$locale_code = explode('_', get_locale());

// enqueue math specific css and js
function ik_enqueue_math_css() {
    wp_enqueue_style('common-math', get_stylesheet_directory_uri() . '/library/css/common-math.css');
    wp_enqueue_script('common-math', get_stylesheet_directory_uri() . '/library/js/common-math.js', array('common-js'));
}

add_action('wp_enqueue_scripts', 'ik_enqueue_math_css', '999');
?>
<!DOCTYPE html>

<!--[if lt IE 7]><html <?php language_attributes(); ?> class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html <?php language_attributes(); ?> class="no-js lt-ie9 lt-ie8"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html <?php language_attributes(); ?> class="no-js lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--> <html <?php language_attributes(); ?> class="no-js"><!--<![endif]-->

    <head>
        <meta charset="utf-8">

        <?php // force Internet Explorer to use the latest rendering engine available  ?>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title><?php wp_title(''); ?></title>

        <?php // <meta name="HandheldFriendly" content="True">  ?>
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, initial-scale=1"/>

        <?php // icons & favicons (for more: http://www.jonathantneal.com/blog/understand-the-favicon/)  ?>
        <link rel="apple-touch-icon" href="<?php echo get_template_directory_uri(); ?>/library/images/apple-touch-icon.png">
        <link rel="icon" href="<?php echo get_template_directory_uri(); ?>/favicon.png">
        <!--[if IE]>
                <link rel="shortcut icon" href="<?php echo get_template_directory_uri(); ?>/favicon.ico">
        <![endif]-->
        <?php // or, set /favicon.ico for IE10 win  ?>
        <meta name="msapplication-TileColor" content="#f01d4f">
        <meta name="msapplication-TileImage" content="<?php echo get_template_directory_uri(); ?>/library/images/win8-tile-icon.png">
        <meta name="theme-color" content="#121212">

        <link rel="pingback" href="<?php bloginfo('pingback_url'); ?>">

        <?php // wordpress head functions ?>
        <?php wp_head(); ?>
        <?php // end of wordpress head  ?>

        <?php if (!is_admin_panel()) : ?>
            <script src="<?php echo get_template_directory_uri(); ?>/library/js/iklearn.js"></script>
        <?php endif ?>
        <script>var home_url = "<?php echo locale_home_url() ?>", LANG_CODE = "<?php echo $locale_code[0] ?>", isuserloggedin = <?php echo $is_user_logged_in ? 1 : 0 ?>;</script>

        <?php // drop Google Analytics Here ?>
        <?php // end analytics  ?>		

        <?php if (is_admin_panel()) : ?>
            <style type="text/css">
                a.sign-up-link {
                    pointer-events: none !important;
                    cursor: default !important;
                    color: #999 !important;
                }
            </style>
        <?php endif ?>

        <?php if (isset($active_menu)) : ?>
            <style type="text/css">
                #main-nav nav .main-menu li#menu-item-<?php echo $active_menu ?> a {
                    color: #FFF;
                }
            </style>
        <?php endif ?>

    </head>
    <?php
    /* mathematic */


    // create or update a worksheet
    if (isset($task['create']) || isset($task['update'])) {
        $data['assignment_id'] = $_POST['math-assignments'];
        $data['homework_type_id'] = $_POST['homework-types'];
        $data['grade_id'] = $_POST['sublevel'];
        $data['sheet_name'] = $_REAL_POST['sheet-name'];
        $data['questions'] = $_REAL_POST['questions'];
        $data['description'] = $_REAL_POST['description'];
        $data['answer_time_limit'] = $_POST['answer-time-limit'];
        $data['show_answer_after'] = $_POST['show-answer-after'];
        $data['category_id'] = 5; // Set to Math category
        $data['active'] = 1;
        $data['created_on'] = date('Y-m-d', time());
        $data['lang'] = $_POST['lang'];
        switch ($data['assignment_id']) {
            case MATH_ASSIGNMENT_SINGLE_DIGIT_DIV:
            case MATH_ASSIGNMENT_TWO_DIGIT_DIV:
                $data['questions']['sign'] = '&divide;';
                $steps = explode("\r\n", $data['questions']['steps']);
                foreach ($steps as $key => $v) {
                    $data['questions']['step']['s' . ($key + 1)] = $v;
                }
                $total_step = count($steps);
                $data['questions']['step']['s' . ($total_step + 1)] = $data['questions']['remainder'];
                $data['questions']['step']['s' . ($total_step + 2)] = $data['questions']['answer'];
                break;

            case MATH_ASSIGNMENT_FLASHCARD:
            case MATH_ASSIGNMENT_FRACTION:
            case MATH_ASSIGNMENT_EQUATION:
                foreach ($data['questions']['q'] as $key => $item) {
                    $data['questions']['q'][$key]['op'] = htmlentities($item['op']);
                    if (trim($item['answer']) == '') {
                        unset($data['questions']['q'][$key]);
                    }
                }
                break;

            case MATH_ASSIGNMENT_WORD_PROB:
                foreach ($data['questions']['q'] as $key => $item) {
                    if (empty($item['image']) || trim($item['image']) == '') {
                        unset($data['questions']['q'][$key]);
                    }
                }
                break;
        }

        if (!empty($_POST['cid'])) {
            $data['id'] = $_POST['cid'];
        } else {
            $data['created_by'] = get_current_user_id();

            $hightest_order = $wpdb->get_col(
                    $wpdb->prepare('SELECT MAX(ordering) FROM ' . $wpdb->prefix . 'dict_sheets WHERE grade_id = %d', $data['grade_id'])
            );
            $data['ordering'] = $hightest_order[0] + 1;
        }

        $sel_level_category = $_POST['level-category'];
        $sel_level = $_POST['level'];

        if (MWDB::store_math_sheet($data)) {
            wp_redirect(home_url() . '/?r=admin-homework-creator/mathematics');
            exit;
        }
    }

    // change sheet order up
    if (isset($_POST['order-up'])) {
        MWDB::set_math_sheet_order_up($_POST['oid']);
        wp_redirect(locale_home_url() . '/?r=admin-homework-creator/mathematics');
        exit;
    }

    // change sheet order down
    if (isset($_POST['order-down'])) {
        MWDB::set_math_sheet_order_down($_POST['oid']);
        wp_redirect(locale_home_url() . '/?r=admin-homework-creator/mathematics');
        exit;
    }

    // toggle active a sheet
    if (isset($task['active'])) {
        $cid = $_REAL_POST['cid'];

        if (!empty($cid)) {
            if (MWDB::toggle_active_math_sheets($cid)) {
                ik_enqueue_messages('Successfully active/deactive ' . count($cid) . ' sheets', 'success');

                wp_redirect(home_url() . '/?r=admin-homework-creator/mathematics');
                exit;
            }
        } else {
            ik_enqueue_messages('Please select a sheet.', 'error');
        }
    }

    // delete math sheet
    if (isset($task['remove'])) {
        $cid = $_REAL_POST['cid'];

        if (MWDB::delete_math_sheets($cid)) {
            wp_redirect(home_url() . '/?r=admin-homework-creator/mathematics');
            exit;
        }
    }

    $main_categories = MWDB::get_grades(array('type' => 'MATH', 'level' => 0, 'admin_only' => 1, 'orderby' => 'ordering', 'order-dir' => 'asc'));
    $levels = MWDB::get_grades(array('type' => 'MATH', 'level' => 1, 'orderby' => 'ordering', 'order-dir' => 'asc'));
    $sublevels = MWDB::get_grades(array('type' => 'MATH', 'level' => 2, 'orderby' => 'ordering', 'order-dir' => 'asc'));

    $sel_levels_html = '';
    foreach ($main_categories as $item) {
        $sel_levels_html .= '<select class="hidden" id="_l' . $item->id . '">';
        foreach ($levels as $level) {
            if ($level->parent_id == $item->id) {
                $sel_levels_html .= '<option value="' . $level->id . '">' . $level->name . '</option>';
            }
        }
        $sel_levels_html .= '</select>';
    }

    $sel_sublevels_html = '';
    foreach ($levels as $level) {
        $sel_sublevels_html .= '<select class="hidden" id="_sl' . $level->id . '">';
        foreach ($sublevels as $sublevel) {
            if ($sublevel->parent_id == $level->id) {
                $sel_sublevels_html .= '<option value="' . $sublevel->id . '">' . $sublevel->name . '</option>';
            }
        }
        $sel_sublevels_html .= '</select>';
    }

    // page content
    if ($cid) { // view a sheet
        $current_sheet = MWDB::get_math_sheet_by_id($cid);

        $data['assignment_id'] = $current_sheet->assignment_id;
        $data['homework_type_id'] = $current_sheet->homework_type_id;
        $data['sublevel_id'] = $current_sheet->grade_id;
        $data['sheet_name'] = $current_sheet->sheet_name;
        $data['questions'] = json_decode($current_sheet->questions, true);
        $data['description'] = $current_sheet->description;
        $data['answer_time_limit'] = $current_sheet->answer_time_limit;
        $data['show_answer_after'] = $current_sheet->show_answer_after;
        $sel_level_category = $current_sheet->category_level_id;
        $sel_level = $current_sheet->level_id;
        $data['lang'] = $current_sheet->lang;
    } else { // sheet list
        $current_page = max(1, get_query_var('page'));
        $filter = get_page_filter_session();
        if (empty($filter) && !isset($_REAL_POST['filter'])) {
            $filter['orderby'] = 'ordering';
            $filter['order-dir'] = 'asc';
            $filter['items_per_page'] = 20;
            $filter['offset'] = $filter['items_per_page'] * ($current_page - 1);
        } else {
            if (isset($_REAL_POST['filter']['search'])) {
                $filter['lang'] = $_POST['filter']['lang'];
                $filter['sheet-name'] = $_REAL_POST['filter']['sheet-name'];
                $filter['assignment-id'] = $_REAL_POST['filter']['math-assignments'];
                $filter['homework-types'] = $_REAL_POST['filter']['homework-types'];
                $filter['active'] = $_REAL_POST['filter']['active'];
                $filter['cat-level'] = $_REAL_POST['filter']['cat-level'];
                $filter['level'] = $_REAL_POST['filter']['level'];
                $filter['sublevel'] = $_REAL_POST['filter']['sublevel'];
            }

            if (isset($_REAL_POST['filter']['orderby'])) {
                $filter['orderby'] = $_REAL_POST['filter']['orderby'];
                $filter['order-dir'] = $_REAL_POST['filter']['order-dir'];
            }

            $filter['offset'] = $filter['items_per_page'] * ($current_page - 1);
        }

        set_page_filter_session($filter);
        $filter['offset'] = 0;
        $filter['items_per_page'] = 99999999;
        $sheets_obj = MWDB::get_math_sheets($filter, $filter['offset'], $filter['items_per_page']);
        $avail_sheets = $sheets_obj->items;
        $total_rows = $sheets_obj->total;

        $total_pages = ceil($total_rows / $filter['items_per_page']);
        $pagination = paginate_links(array(
            'format' => '?page=%#%',
            'current' => $current_page,
            'total' => $total_pages
        ));
    }
    // end mathematics
    ?>

    <body <?php body_class('body-math'); ?> itemscope itemtype="http://schema.org/WebPage">
        <div class="mdl-create modal-yesno" id="modal-alert-yesno" >
            <div class="modal-yesno-body">  
                <h5 class="box-title-1"></h5>
                <button style="margin-top: 4px;" id="yes-delete" type="submit" class="btn-orange2-yes btn-create-lesson nopadding-r style-btn-del border-btn" data-del="" name="">Yes</button>
                <button id="no-delete" type="submit" style="padding:0px !important; margin-left: 10px !important;" class="btn-cancel-grey btn-create-lesson nopadding-r style-btn-del border-btn" name="">No</button>
            </div>
        </div>
        <div class="mdl-create modal-yesno" id="modal-active-yesno" >
            <div class="modal-yesno-body">  
                <h5 class="box-title-active" style="padding-left: 83px;padding-right: 178px"></h5>
                <button style="margin-top: 4px;" id="yes-active" type="submit" class="btn-orange2-yes btn-create-lesson nopadding-r style-btn-del border-btn" data-del="" name="">Yes</button>
                <button id="no-active" type="submit" style="padding:0px !important; margin-left: 10px !important;" class="btn-cancel-grey btn-create-lesson nopadding-r style-btn-del border-btn" name="">No</button>
            </div>
        </div>
        <div class="mdl-create modal-yesno" id="modal-alert" >          
            <div class="modal-yesno-body">
                <h5 class="box-title-1" style="padding-left: 80px;padding-right: 150px"></h5>
                <button style="margin-top: 4px;" id="done-btn" type="submit" class="btn-orange2-yes btn-create-lesson nopadding-r border-btn"></span>Done</button>
            </div> 
        </div>
        <div class="mdl-create modal-yesno" id="modal-redirect-alert" >          
            <div class="modal-yesno-body">
                <h5 class="box-title-redirect" style="padding-left: 83px;padding-right: 155px">Are you sure you want to leave this page?</h5>
                <button style="margin-top: 4px;" id="agree-redirect" type="submit" class="btn-orange2-yes btn-create-lesson nopadding-r style-btn-del border-btn" name="">Yes</button>
                <button id="disagree-redirect" type="submit" style="padding:0px !important; margin-left: 10px !important;" class="btn-cancel-grey btn-create-lesson nopadding-r style-btn-del border-btn" name="">No</button>
            </div> 
        </div>
        <div class="mdl-create modal-yesno" id="modal-redirect-close" >          
            <div class="modal-yesno-body">
                <h5 class="box-title-redirect" style="padding-left: 83px;padding-right: 155px">Are you sure you want to leave this page?</h5>
                <button style="margin-top: 4px;" id="agree-close" type="submit" class="btn-orange2-yes btn-create-lesson nopadding-r style-btn-del border-btn" name="">Yes</button>
                <button id="disagree-close" type="submit" style="padding:0px !important; margin-left: 10px !important;" class="btn-cancel-grey btn-create-lesson nopadding-r style-btn-del border-btn" name="">No</button>
            </div> 
        </div>
        <div class="mdl-create modal-yesno" id="modal-reload" >          
            <div class="modal-yesno-body">
                <h5 class="box-title-redirect" style="padding-left: 83px;padding-right: 155px">Are you sure you want to leave this page?</h5>
                <button style="margin-top: 4px;" id="agree-reload" type="submit" class="btn-orange2-yes btn-create-lesson nopadding-r style-btn-del border-btn" name="">Yes</button>
                <button id="disagree-reload" type="submit" style="padding:0px !important; margin-left: 10px !important;" class="btn-cancel-grey btn-create-lesson nopadding-r style-btn-del border-btn" name="">No</button>
            </div> 
        </div>

        <div class="mdl-create modal-yesno" id="modal-delete-message" >          
            <div class="modal-yesno-body">
                <h5 class="box-title-redirect" style="padding-left: 83px;padding-right: 155px">Are you sure you want to delete the message?</h5>
                <button style="margin-top: 4px;" id="btn-del-message" type="submit" class="btn-orange2-yes btn-create-lesson nopadding-r style-btn-del border-btn" name="">Yes</button>
                <button id="btn-cancel-message" type="submit" style="padding:0px !important; margin-left: 10px !important;" class="btn-cancel-grey btn-create-lesson nopadding-r style-btn-del border-btn" name="">No</button>
            </div> 
        </div>
 
        <div class="modal fade modal-signup" id="my-account-modal" role="dialog" >
            <div class="modal-dialog modal-lg modal-signup">
                <div class="modal-content modal-content-signup">

                    <div class="title-div">
                        <img class="icon-close-classes-created ic-close7" id="close-modal" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Close.png">
                        <img id="menu_Taggle" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Menu_Trigger.png">
                        <span class="modal-title text-uppercase">
                            <a href="#">
                                <img data-dismiss="modal" src="<?php echo get_template_directory_uri(); ?>/library/images/ikTeach_Logo.png">
                            </a>
                        </span>
                    </div>
                    <hr class="line-modal">
                    <div class="modal-body-signup">
                        <div class="section-right">
                            <div class="tab-content">

                                <div id="login-user" class="style-form tab-pane fade in active">
                                    <h3>Login</h3>

                                    <div class="col-md-12">


                                        <form action="<?php echo locale_home_url() ?>/?r=login" name="loginform" method="post">
                                            <div class="row">
                                                <div class="row md-login-r">
                                                    <div class="col-xs-12 col-sm-6 col-md-6">
                                                        <div class="form-group">
                                                            <label for="username"><?php _e('Username (e-mail address)', 'iii-dictionary') ?></label>
                                                            <input type="text" class="form-control border-ras" id="username" name="log" value="" style="border-radius:0px;">
                                                        </div>     
                                                    </div>
                                                    <div class="col-xs-12 col-sm-6 col-md-6">
                                                        <div class="form-group">
                                                            <label for="password"><?php _e('Password', 'iii-dictionary') ?></label>
                                                            <input type="password" class="form-control border-ras" id="password" name="pwd" value="">
                                                        </div>     
                                                    </div>
                                                    <div class="clearfix" style="margin-bottom: 20px;"></div>
                                                    <div class="col-sm-6 col-md-6">
                                                        <div class="form-group">

                                                            <button type="button" id="btn-login" class="btn-orange form-control border-btn" name="wp-submit"></span><?php _e('Login', 'iii-dictionary') ?></button>
                                                        </div>     
                                                    </div>
                                                    <div class="col-sm-6 col-md-6">
                                                        <div class="form-group">
                                                            <button type="button" class="btn-cancel-grey sign-up border-btn"><?php _e('Create Account', 'iii-dictionary') ?></button>
                                                        </div>

                                                    </div>
                                                    <div class="forgot-pass">

                                                        <div class="form-group forgot-password-form">
                                                            <a class="forgot-password-a lblForgot"><?php _e('Forgot password?', 'iii-dictionary') ?></a>
                                                        </div>

                                                    </div>

                                                </div>
                                                <div class="clearfix"></div>
                                            </div>  
                                            <input name="redirect_to" value="<?php echo locale_home_url() ?>" type="hidden">
                                        </form>
                                    </div>
                                </div>

                                <div id="lost-password" class="hidden style-form tab-pane fade in">
                                    <h3>Lost Password</h3>
                                    <div class="">
                                        <form name="lostpasswordform" id="lostpasswordform" action="<?php echo esc_url(network_site_url('?r=login&action=forgotpassword')); ?>" method="post">
                                            <div class="row" style="margin-bottom: 20px;">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label for="user_login" ><?php _e('Email Address for Receiving a New Password', 'iii-dictionary') ?></label>

                                                        <input type="text" name="user_login" id="user_login" class="form-control border-ras" value="">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-6 col-md-6">
                                                    <div class="form-group">
                                                        <button type="submit" name="wp-submit"  class="btn-orange form-control border-btn"><?php esc_attr_e('Receive New Password', 'iii-dictionary') ?>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-sm-6 col-md-6">
                                                    <div class="form-group">
                                                        <button type="submit"  data-dismiss="modal" name="wp-submit"  name="cancel" class="btn-cancel-grey border-btn"><?php _e('Cancel', 'iii-dictionary') ?></button>
                                                    </div>

                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>

                                <div id="create-account" class="tab-pane fade in">
                                    <h3>Create Basic Account <span id="create-overview">overview</span></h3>
                                    <form method="post" id="createAccount" action="" name="registerform" enctype="multipart/form-data">
                                        <div class="row">
                                            <div class="col-sm-10 col-md-10 refreshclass">
                                                <div class="form-group">
                                                    <input id="user_login_signup" class="form-control" name="user_login" type="text" value="" required>
                                                    <span class="placeholder"><?php _e('User Name', 'iii-dictionary') ?>:</span>
                                                    <span id="checked-availability" class="not-check-available"><span></span></span>
                                                </div>
                                            </div>
                                            <div class="col-sm-2 col-md-2">
                                                <button class="btn-dark-blue border-btn check-availability" id="check-availability" style="background: #FFA523;" type="button" name="wp-submit">Availability</button>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-sm-5 col-md-5 mt-top-14 refreshclass">
                                                <div class="form-group">
                                                    <input id="user_password_signup" class="form-control border-ras" name="user_password" type="text" value="" required>
                                                    <span class="placeholder"><?php _e('Password', 'iii-dictionary') ?>:</span>
                                                </div>
                                            </div>
                                            <div class="col-sm-5 col-md-5 mt-top-14 refreshclass">
                                                <div class="form-group">
                                                    <input id="confirm_password" class="form-control border-ras" name="confirm_password" type="text" value="" required>
                                                    <span class="placeholder"><?php _e('Confirm Password', 'iii-dictionary') ?>:</span>
                                                </div>
                                            </div>
                                            
                                            <div class="col-sm-2 col-md-2 mt-top-14 gender-pc">
                                                <div id="gender-pc">
                                                    <div class="form-group">
                                                        <div class="border-ras select-style" id="gender">
                                                            <select id="birth_g_pc" class="select-box-it form-control" name="birth_g_pc">
                                                                <option value="">Gender</option>
                                                                <option value="Male">Male</option>
                                                                <option value="Female">Female</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>                                            
                                            <div class="clearfix"></div>
                                            <div class="col-sm-6 col-md-6 mt-top-14 refreshclass">
                                                <div class="form-group">
                                                    <input id="first_name" class="form-control" name="first_name" type="text" value="" required>
                                                    <span class="placeholder"><?php _e('First Name', 'iii-dictionary') ?>:</span>
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-md-6 mt-top-14 refreshclass">
                                                <div class="form-group">
                                                    <input id="last_name" class="form-control" name="last_name" type="text" value="" required>
                                                    <span class="placeholder"><?php _e('Last Name', 'iii-dictionary') ?>:</span>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-sm-12 col-md-12 mt-top-9">
                                                <div class="form-group">
                                                    <label class="create-label mt-bottom-11"><?php _e('Date of Birth', 'iii-dictionary') ?></label>
                                                    <div class="row tiny-gutter">
                                                        <div class="col-xs-12 col-sm-4 col-md-4 border-ras select-style" id="month">
                                                            <select id="birth_m" class="select-box-it form-control" name="birth-m">
                                                                <option value="">(Month)</option>
                                                                <?php for ($i = 1; $i <= 12; $i++) : ?>
                                                                    <?php $pad_str = str_pad($i, 2, '0', STR_PAD_LEFT) ?>
                                                                    <option value="<?php echo $pad_str ?>"><?php echo $pad_str ?></option>
                                                                <?php endfor ?>
                                                            </select>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-4 col-md-4 border-ras select-style" id="date">
                                                            <select id="birth_d" class="select-box-it form-control" name="birth-d">
                                                                <option value="">(Day)</option>
                                                                <?php for ($i = 1; $i <= 31; $i++) : ?>
                                                                    <?php $pad_str = str_pad($i, 2, '0', STR_PAD_LEFT) ?>
                                                                    <option value="<?php echo $pad_str ?>"><?php echo $pad_str ?></option>
                                                                <?php endfor ?>
                                                            </select>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-4 col-md-4 refreshclass year-mb">
                                                            <input id="birth_y" class="form-control" name="birth-y" type="text" value="" required>
                                                            <span class="placeholder"><?php _e('Year', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                        
                                                        <div class="col-xs-12 col-sm-4 col-md-4 gender-mb">
                                                            <div id="gender-mb">
                                                                <div class="form-group">
                                                                    <div class="border-ras select-style" id="gender">
                                                                        <select id="birth-g_mb" class="select-box-it form-control" name="birth-g_mb">
                                                                            <option value="">Gender</option>
                                                                            <option value="Male">Male</option>
                                                                            <option value="Female">Female</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-sm-12 col-md-12 refreshclass">
                                                <label class="create-label mt-top-10"><?php _e('Language', 'iii-dictionary') ?></label>
                                                <div class="form__boolean mt-bottom-10 clearfix" id="checkBoxSearch" style="margin-top: 0">
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 radio" value="en" data-lang="en" name="cb-lang"/>
                                                            English
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 radio" value="ja" data-lang="ja" name="cb-lang"/>
                                                            Japanese
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 radio" value="ko" data-lang="ko" name="cb-lang"/>
                                                            Korean
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 radio" value="zh" data-lang="zh" name="cb-lang"/>
                                                            Chinese
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 radio" value="zh-tw" data-lang="zh-tw" name="cb-lang"/>
                                                            Traditional Chinese
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 radio" value="vi" data-lang="vi" name="cb-lang"/>
                                                            Vietnamese
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 radio" value="ot" data-lang="ot" name="cb-lang"/>
                                                            Others
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-12 col-md-12 profile-pic refreshclass mt-top-14" style="clear: both;">                                                
                                                    <label class="create-label img-profile">Profile Picture (optional)</label>
                                                <div class="row">
                                                    <div class="col-sm-4 col-md-4 mt-top-9">
                                                        <div class="form-group">
                                                            <img id="user-upload-avatar" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Image_Person.png" alt="Profile Picture" style="display: inline-block; margin-right: 14px;">
                                                            <input class="form-control input-file" type="file" id="input-avatar" value="" >
                                                            <button class="btn-dark-blue border-btn" style="background: #cecece; display: inline-block; width: 82%" type="button" name="upload"  onclick="document.getElementById('input-avatar').click();"><?php _e('Browse', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-8 col-md-8 mt-top-9" >
                                                        <div class="form-group">
                                                            <input class="form-control input-path" id="profile-avatar" type="text">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-xs-12 col-sm-6 col-md-6 mt-bottom-24">
                                                <div class="form-group">
                                                    <button class="btn-dark-blue border-btn" id="create-acc" style="background: #65C762; margin-top: 20px;" type="button" name="wp-submit"><?php _e('Create Account', 'iii-dictionary') ?></button>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-6 col-md-6 mt-bottom-24">
                                                <div class="form-group">
                                                    <button class="btn-dark-blue cancel-btn border-btn" style="background: #CECECE; margin-top: 20px !important;" type="submit" name="cancel">
                                                        <?php _e('Cancel', 'iii-dictionary') ?>
                                                    </button>

                                                </div>
                                            </div>
                                            <div class="clearfix"></div>                                            
                                        </div>
                                    </form>
                                </div>

                                <div id="profile" class="tab-pane fade">
                                    <h3>Profile</h3>
                                    <form method="post" id="myProfile" action="" name="registerform" enctype="multipart/form-data">
                                        <div class="row profile-pic">
                                            <div class="col-sm-1 col-md-1">
                                                <div class="form-group">
                                                    <?php
                                                    $user_avatar = ik_get_user_avatar($current_user->ID);

                                                    if (!empty($user_avatar)) :
                                                        ?>
                                                        <img id="profile-user-avatar" src="<?php echo $user_avatar ?>" alt="<?php echo $current_user->display_name ?>">
                                                        <?php
                                                    else :
                                                        ?>
                                                        <img id="profile-user-avatar" src="<?php echo get_template_directory_uri(); ?>/library/images/Profile_Image.png" alt="Profile Picture">
                                                    <?php
                                                    endif
                                                    ?>                                           
                                                </div>
                                            </div>
                                            <div class="col-sm-10 col-md-10">
                                                <div class="form-group">
                                                    <label>My Name</label>
                                                    <span class="color-black" id="profile-my-name"><?php
                                                        if ($is_user_logged_in) {
                                                            $display_name = get_user_meta($current_user->ID, 'display_name', true);
                                                            if (!empty($display_name) && $display_name != '')
                                                                echo $display_name;
                                                            else
                                                                _e('N/A', 'iii-dictionary');
                                                        } else
                                                            _e('N/A', 'iii-dictionary');
                                                        ?></span>
                                                </div>
                                            </div>
                                            <hr>
                                        </div>
                                        <div class="row line-profile">
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Points Balance', 'iii-dictionary') ?></label>
                                                    <span class="color-yellow" id="profile-point-balance"><?php
                                                        if ($is_user_logged_in)
                                                            _e(ik_get_user_points($current_user->ID));
                                                        else
                                                            _e('N/A', 'iii-dictionary');
                                                        ?> (USD)</span>
                                                </div>
                                                <hr>
                                            </div>
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Points Earned', 'iii-dictionary') ?></label>
                                                    <span class="color-yellow" id="profile-point-earned"><?php
                                                        if ($is_user_logged_in)
                                                            _e(ik_get_user_earned($current_user->ID));
                                                        else
                                                            _e('N/A', 'iii-dictionary');
                                                        ?> (USD)</span>
                                                </div>
                                                <hr>
                                            </div>
                                        </div>
                                        <div class="row line-profile">
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('English (Writting) Tutor Qualification', 'iii-dictionary') ?></label>
                                                    <span class="color-yellow" id="profile-english-writting"><?php
                                                        if ($is_user_logged_in && is_mw_registered_teacher($current_user->ID, 0))
                                                            _e('Qualified', 'iii-dictionary');
                                                        else
                                                            _e('Not Qualified Yet', 'iii-dictionary');
                                                        ?></span>
                                                </div>
                                                <hr>
                                            </div>
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('English (Conversation) Tutor Qualification', 'iii-dictionary') ?></label>
                                                    <span class="color-yellow" id="profile-english-conversation"><?php
                                                        if ($is_user_logged_in && is_mw_qualified_teacher($current_user->ID, 0))
                                                            _e('Qualified', 'iii-dictionary');
                                                        else
                                                            _e('Not Qualified Yet', 'iii-dictionary');
                                                        ?></span>
                                                </div>
                                                <hr>
                                            </div>
                                        </div>
                                        <div class="row line-profile">
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Math (Up to Middle School) Tutor Qualification', 'iii-dictionary') ?></label>
                                                    <span class="color-yellow" id="profile-math-up"><?php
                                                        if ($is_user_logged_in && is_mw_registered_teacher($current_user->ID, 1))
                                                            _e('Qualified', 'iii-dictionary');
                                                        else
                                                            _e('Not Qualified Yet', 'iii-dictionary');
                                                        ?></span>
                                                </div>
                                                <hr>
                                            </div>
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Math (Conversation) Tutor Qualification', 'iii-dictionary') ?></label>
                                                    <span class="color-yellow" id="profile-math-conversation"><?php
                                                        if ($is_user_logged_in && is_mw_qualified_teacher($current_user->ID, 1))
                                                            _e('Qualified', 'iii-dictionary');
                                                        else
                                                            _e('Not Qualified Yet', 'iii-dictionary');
                                                        ?></span>
                                                </div>
                                                <hr>
                                            </div>
                                        </div>
                                        <div class="row line-profile">
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Email Address (for login)', 'iii-dictionary') ?></label>
                                                    <span class="color-black" id="profile-user-email"><?php
                                                        if ($is_user_logged_in)
                                                            echo $current_user->user_email;
                                                        else
                                                            _e('N/A', 'iii-dictionary');
                                                        ?></span>
                                                </div>
                                                <hr>
                                            </div>
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Date of Birth (month/date/year)', 'iii-dictionary') ?></label>
                                                    <span class="color-black" id="profile-date-birth">
                                                        <?php
                                                        if ($is_user_logged_in) {
                                                            $date_of_birth = get_user_meta($current_user->ID, 'date_of_birth', true);
                                                            if (!empty($date_of_birth) && $date_of_birth != '')
                                                                echo $date_of_birth;
                                                            else
                                                                _e('N/A', 'iii-dictionary');
                                                        }else {
                                                            _e('N/A', 'iii-dictionary');
                                                        }
                                                        ?>
                                                    </span>
                                                </div>
                                                <hr>
                                            </div>

                                        </div>
                                        <div class="row line-profile">

                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Language', 'iii-dictionary') ?></label>
                                                    <span class="color-black" id="profile-language">
                                                        <?php
                                                        if ($is_user_logged_in) {
                                                            $language_type = get_user_meta($current_user->ID, 'language_type', true);
                                                            if (!empty($language_type) && $language_type != '') {

                                                                $langs = array(
                                                                    'en' => 'English',
                                                                    'ja' => '日本語',
                                                                    'ko' => '한국어',
                                                                    'vi' => 'Tiếng Việt',
                                                                    'zh' => '中文',
                                                                    'zh-tw' => '中國',
                                                                    'ot' => 'Others'
                                                                );
                                                                $languages_t = explode(',', $language_type);
                                                                if (count($languages_t) > 0) {
                                                                    $n = count($languages_t) - 1;
                                                                    for ($i = 0; $i < count($languages_t); $i++) {
                                                                        $key = $languages_t[$i];
                                                                        echo $langs[$key];
                                                                        if (count($languages_t) > 1 && $i < $n)
                                                                            echo ', ';
                                                                    }
                                                                }
                                                            } else
                                                                _e('N/A', 'iii-dictionary');
                                                        }else {
                                                            _e('N/A', 'iii-dictionary');
                                                        }
                                                        ?>                                               
                                                    </span>
                                                </div>
                                                <hr>
                                            </div>
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Mobile Phone Number', 'iii-dictionary') ?></label>
                                                    <span class="color-black" id="profile-mobile-phone">
                                                        <?php
                                                        if ($is_user_logged_in) {
                                                            $mobile_number = get_user_meta($current_user->ID, 'mobile_number', true);
                                                            if (!empty($mobile_number) && $mobile_number != '')
                                                                echo $mobile_number;
                                                            else
                                                                _e('N/A', 'iii-dictionary');
                                                        }else {
                                                            _e('N/A', 'iii-dictionary');
                                                        }
                                                        ?>
                                                    </span>
                                                </div>
                                                <hr>
                                            </div>
                                        </div>  
                                        <div class="row line-profile">

                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Last School Attended', 'iii-dictionary') ?></label>
                                                    <span class="color-black" id="profile-last-attended">
                                                        <?php
                                                        if ($is_user_logged_in) {
                                                            $last_school = get_user_meta($current_user->ID, 'last_school', true);
                                                            if (!empty($last_school) && $last_school != '')
                                                                echo $last_school;
                                                            else
                                                                _e('N/A', 'iii-dictionary');
                                                        }else {
                                                            _e('N/A', 'iii-dictionary');
                                                        }
                                                        ?>
                                                    </span>
                                                </div>
                                                <hr>
                                            </div>
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Last School You Tought (if any)', 'iii-dictionary') ?></label>
                                                    <span class="color-black" id="profile-last-tought">
                                                        <?php
                                                        if ($is_user_logged_in) {
                                                            $previous_school = get_user_meta($current_user->ID, 'previous_school', true);
                                                            if (!empty($previous_school) && $previous_school != '')
                                                                echo $previous_school;
                                                            else
                                                                _e('N/A', 'iii-dictionary');
                                                        }else {
                                                            _e('N/A', 'iii-dictionary');
                                                        }
                                                        ?>
                                                    </span>
                                                </div>
                                                <hr>
                                            </div>
                                        </div> 
                                        <div class="row line-profile">
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Skype ID', 'iii-dictionary') ?></label>
                                                    <span class="color-black" id="profile-skype-id">
                                                        <?php
                                                        if ($is_user_logged_in) {
                                                            $skype_id = get_user_meta($current_user->ID, 'skype_id', true);
                                                            if (!empty($skype_id) && $skype_id != '')
                                                                echo $skype_id;
                                                            else
                                                                _e('N/A', 'iii-dictionary');
                                                        }else {
                                                            _e('N/A', 'iii-dictionary');
                                                        }
                                                        ?>
                                                    </span>
                                                </div>
                                                <hr>
                                            </div>
                                            <div class="col-sm-6 col-md-6">
                                                <div class="form-group">
                                                    <label><?php _e('Profession', 'iii-dictionary') ?></label>
                                                    <span class="color-black" id="profile-profession">
                                                        <?php
                                                        if ($is_user_logged_in) {
                                                            $user_profession = get_user_meta($current_user->ID, 'user_profession', true);
                                                            if (!empty($user_profession) && $user_profession != '')
                                                                echo $user_profession;
                                                            else
                                                                _e('N/A', 'iii-dictionary');
                                                        }else {
                                                            _e('N/A', 'iii-dictionary');
                                                        }
                                                        ?>
                                                    </span>
                                                </div>
                                                <hr>
                                            </div>
                                        </div>                               
                                    </form>
                                </div>

                                <div id="updateinfo" class="tab-pane fade">
                                    <?php
                                    $update_username = '';
                                    $update_user_password = '';
                                    $update_birth_g = '';
                                    $update_first_name = '';
                                    $update_last_name = '';
                                    $update_birth_m = '';
                                    $update_birth_d = '';
                                    $update_birth_y = '';
                                    $update_language = array();
                                    $profile_value = '';
                                    $update_mobile_number = '';
                                    $update_profession = '';
                                    $update_last_school = '';
                                    $update_previous_school = '';
                                    $update_skype = '';
                                    $desc_tell_update = '';
                                    $subject_type_update = array();
                                    $update_school_name = '';
                                    $update_teaching_link = '';
                                    $update_teaching_subject = '';
                                    $update_years = '';
                                    $update_school_attend = '';
                                    $update_gpa = '';
                                    $update_grade = '';
                                    $update_major = '';
                                    $update_school_name1 = '';
                                    $update_school_name2 = '';
                                    $update_school_link1 = '';
                                    $update_school_link2 = '';
                                    $update_any_other = '';
                                    $update_description = '';
                                    $update_student_link = '';
                                    if ($is_user_logged_in) {
                                        $update_username = $current_user->user_email;
                                        $update_first_name = get_user_meta($current_user->ID, 'first_name', true);
                                        $update_last_name = get_user_meta($current_user->ID, 'last_name', true);
                                        $update_user_password = get_user_meta($current_user->ID, 'user_password', true);
                                        $update_birth_g = get_user_meta($current_user->ID, 'gender', true);
                                        $date_of_birth = get_user_meta($current_user->ID, 'date_of_birth', true);
                                        if($date_of_birth != ''){
                                            $arr_birth = explode('/', $date_of_birth);
                                            $update_birth_m = isset($arr_birth[0])?$arr_birth[0]:'';
                                            $update_birth_d = isset($arr_birth[1])?$arr_birth[1]:'';
                                            $update_birth_y = isset($arr_birth[2])?$arr_birth[2]:'';
                                        }
                                        $language_type = get_user_meta($current_user->ID, 'language_type', true);
                                        if($language_type != '') $update_language = explode(',', $language_type);

                                        $profile_value = get_user_meta($current_user->ID, 'ik_user_avatar', true);

                                        $update_mobile_number = get_user_meta($current_user->ID, 'mobile_number', true);
                                        $update_profession = get_user_meta($current_user->ID, 'user_profession', true);
                                        $update_last_school = get_user_meta($current_user->ID, 'last_school', true);
                                        $update_previous_school = get_user_meta($current_user->ID, 'previous_school', true);
                                        $update_skype = get_user_meta($current_user->ID, 'skype_id', true);
                                        $desc_tell_update = get_user_meta($current_user->ID, 'desc_tell_me', true);
                                        $subject_type = get_user_meta($current_user->ID, 'subject_type', true);
                                        if($subject_type != '') $subject_type_update = explode(',', $subject_type);
                                        $update_school_name = get_user_meta($current_user->ID, 'school_name', true);
                                        $update_teaching_link = get_user_meta($current_user->ID, 'teaching_link', true);
                                        $update_teaching_subject = get_user_meta($current_user->ID, 'teaching_subject', true);
                                        $update_student_link = get_user_meta($current_user->ID, 'student_link', true);
                                        $update_years = get_user_meta($current_user->ID, 'user_years', true);
                                        $update_school_attend = get_user_meta($current_user->ID, 'school_attend', true);
                                        $update_gpa = get_user_meta($current_user->ID, 'user_gpa', true);
                                        $update_grade = get_user_meta($current_user->ID, 'user_grade', true);
                                        $update_major = get_user_meta($current_user->ID, 'user_major', true);
                                        $update_school_name1 = get_user_meta($current_user->ID, 'school_name1', true);
                                        $update_school_name2 = get_user_meta($current_user->ID, 'school_name2', true);
                                        $update_school_link1 = get_user_meta($current_user->ID, 'school_link1', true);
                                        $update_school_link2 = get_user_meta($current_user->ID, 'school_link2', true);
                                        $update_any_other = get_user_meta($current_user->ID, 'any_other', true);
                                        $update_description = get_user_meta($current_user->ID, 'subject_description', true);
                                    }
                                    ?>
                                    <h3>Update My Account</h3>                                    
                                    <form method="post" id="myUpdate" action="" name="updateAccount" enctype="multipart/form-data">
                                        <h4>Basic Account Info:</h4>
                                        <div class="row">
                                            <div class="col-sm-12 col-md-12">
                                                <div class="form-group">
                                                    <input id="update_username" class="form-control" name="update_username" type="text" value="<?php echo $update_username ?>" readonly="">
                                                    <span class="placeholder"><?php _e('User Name', 'iii-dictionary') ?>:</span>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-sm-5 col-md-5 mt-top-14">
                                                <div class="form-group">
                                                    <input id="update_password" class="form-control border-ras" name="update_password" type="text" value="<?php echo $update_user_password ?>" required>
                                                    <span class="placeholder"><?php _e('Password', 'iii-dictionary') ?>:</span>
                                                </div>
                                            </div>
                                            <div class="col-sm-5 col-md-5 mt-top-14 mt-top-mb-24">
                                                <div class="form-group">
                                                    <input id="update_confirmpass" class="form-control border-ras" name="update_confirmpass" type="text" value="<?php echo $update_user_password ?>" required>
                                                    <span class="placeholder"><?php _e('Confirm Password', 'iii-dictionary') ?>:</span>
                                                </div>
                                            </div>
                                            
                                            <div class="col-sm-2 col-md-2 mt-top-14 gender-pc">
                                                <div id="update-gender-pc">
                                                    <div class="form-group">
                                                        <div class="border-ras select-style" id="gender">
                                                            <input type="text" class="form-control" name="update_birth_g_pc" value="<?php if($update_birth_g != '') echo $update_birth_g; else echo 'Gender'; ?>" id="update_birth_g_pc" readonly="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>                                            
                                            <div class="clearfix"></div>
                                            <div class="col-sm-6 col-md-6 mt-top-14">
                                                <div class="form-group">
                                                    <input id="update_first_name" class="form-control" name="update_first_name" type="text" value="<?php echo $update_first_name ?>" required>
                                                    <span class="placeholder"><?php _e('First Name', 'iii-dictionary') ?>:</span>
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-md-6 mt-top-14 mt-top-mb-24">
                                                <div class="form-group">
                                                    <input id="update_last_name" class="form-control" name="update_last_name" type="text" value="<?php echo $update_last_name ?>" required>
                                                    <span class="placeholder"><?php _e('Last Name', 'iii-dictionary') ?>:</span>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-sm-12 col-md-12 mt-top-9">
                                                <div class="form-group">
                                                    <label class="create-label mt-bottom-11"><?php _e('Date of Birth', 'iii-dictionary') ?></label>
                                                    <div class="row tiny-gutter">
                                                        <div class="col-xs-12 col-sm-4 col-md-4 border-ras select-style" id="update_month">
                                                            <select id="update_birth_m" class="select-box-it form-control" name="update-birth-m">
                                                                <option value="">(Month)</option>
                                                                <?php 
                                                                for ($i = 1; $i <= 12; $i++) : 
                                                                    $pad_str = str_pad($i, 2, '0', STR_PAD_LEFT);
                                                                    if($pad_str == $update_birth_m)
                                                                        $sel_um = 'selected="selected"';
                                                                    else
                                                                        $sel_um = ''; 
                                                                ?>
                                                                    <option value="<?php echo $pad_str ?>" <?php echo $sel_um ?>><?php echo $pad_str ?></option>
                                                                <?php endfor ?>
                                                            </select>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-4 col-md-4 border-ras select-style" id="update_date">
                                                            <select id="update_birth_d" class="select-box-it form-control" name="update-birth-d">
                                                                <option value="">(Day)</option>
                                                                <?php 
                                                                for ($i = 1; $i <= 31; $i++): 
                                                                    $pad_str = str_pad($i, 2, '0', STR_PAD_LEFT);
                                                                    if($pad_str == $update_birth_d)
                                                                        $sel_ud = 'selected="selected"';
                                                                    else
                                                                        $sel_ud = ''; 
                                                                ?>
                                                                    <option value="<?php echo $pad_str ?>" <?php echo $sel_ud ?>><?php echo $pad_str ?></option>
                                                                <?php endfor ?>
                                                            </select>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-4 col-md-4 year-mb">
                                                            <input id="update_birth_y" class="form-control" name="update-birth-y" type="text" value="<?php echo $update_birth_y ?>" required>
                                                            <span class="placeholder"><?php _e('Year', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                        
                                                        <div class="col-xs-12 col-sm-4 col-md-4 gender-mb">
                                                            <div id="update-gender-mb">
                                                                <div class="form-group">
                                                                    <div class="border-ras select-style" id="update_gender">
                                                                        <input readonly="" type="text" name="update_birth_g_mb" class="form-control" value="<?php if($update_birth_g != '') echo $update_birth_g; else echo 'Gender'; ?>" id="update_birth_g_mb">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-sm-12 col-md-12">
                                                <label class="create-label mt-top-10"><?php _e('Language', 'iii-dictionary') ?></label>
                                                <div class="form__boolean mt-bottom-10 clearfix" id="checkBoxSearch" style="margin-top: 0">
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons option-input-2 radio" value="en" <?php if(count($update_language) > 0 && in_array("en", $update_language)) echo 'checked="checked"'; ?> name="update-cb-lang"/>
                                                            English
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons option-input-2 radio" value="ja" <?php if(count($update_language) > 0 && in_array("ja", $update_language)) echo 'checked="checked"'; ?> name="update-cb-lang"/>
                                                            Japanese
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox"  class="radio_buttons option-input-2 radio" value="ko" <?php if(count($update_language) > 0 && in_array("ko", $update_language)) echo 'checked="checked"'; ?> name="update-cb-lang"/>
                                                            Korean
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons option-input-2 radio" value="zh" <?php if(count($update_language) > 0 && in_array("zh", $update_language)) echo 'checked="checked"'; ?> name="update-cb-lang"/>
                                                            Chinese
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons option-input-2 radio" value="zh-tw" <?php if(count($update_language) > 0 && in_array("zh-tw", $update_language)) echo 'checked="checked"'; ?> name="update-cb-lang"/>
                                                            Traditional Chinese
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons option-input-2 radio" value="vi" <?php if(count($update_language) > 0 && in_array("vi", $update_language)) echo 'checked="checked"'; ?> name="update-cb-lang"/>
                                                            Vietnamese
                                                        </label>
                                                    </div>
                                                    <div class="col-md-2 col-xs-4 cb-type2">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons option-input-2 radio" value="ot" <?php if(count($update_language) > 0 && in_array("ot", $update_language)) echo 'checked="checked"'; ?> name="update-cb-lang"/>
                                                            Others
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-12 col-md-12 profile-pic mt-top-14" style="clear: both;">
                                                <label class="create-label img-profile">Profile Picture (optional)</label>
                                                <div class="row">
                                                    <div class="col-sm-4 col-md-4 mt-top-9">
                                                        <div class="form-group">
                                                            <img id="user-upload-img" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Image_Person.png" alt="Profile Picture" style="display: inline-block; margin-right: 14px;">
                                                            <input class="form-control input-file" type="file" id="input-image" value="" >
                                                            <button class="btn-dark-blue border-btn" style="background: #cecece; display: inline-block; width: 82%" type="button" name="upload"  onclick="document.getElementById('input-image').click();"><?php _e('Browse', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-8 col-md-8 mt-top-9" >
                                                        <div class="form-group">
                                                            <input class="form-control input-path" id="profile-value" type="text" value="<?php echo $profile_value ?>">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <?php 
                                            if ($is_user_logged_in && (is_mw_qualified_teacher($current_user->ID) || is_mw_registered_teacher($current_user->ID)))
                                                $style = 'style="display: block;"';
                                            else
                                                $style = 'style="display: none;"';
                                            ?>
                                            <div id="tutor-regis-update" class="col-md-12" <?php echo $style ?>>
                                                <h4>Teacher and Tutor Account Info:</h4>
                                                <div id="info-update">
                                                    <div class="row">                                                    
                                                        <div class="col-sm-6 col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="mobile_number" value="<?php echo $update_mobile_number ?>" id="mobile-number-update">
                                                                <span class="placeholder"><?php _e('Mobile Number', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="profession" value="<?php echo $update_profession ?>" id="profession-update">
                                                                <span class="placeholder"><?php _e('Profession', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="last_school" value="<?php echo $update_last_school ?>" id="last-school-update">
                                                                <span class="placeholder"><?php _e('Last School Attended', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="previous_school" value="<?php echo $update_previous_school ?>" id="previous-school-update">
                                                                <span class="placeholder"><?php _e('School Taught (if any)', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="skype" value="<?php echo $update_skype ?>" id="skype-update">
                                                                <span class="placeholder"><?php _e('Skype ID (if any)', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <label class="mt-top-10 mt-bottom-12">Tell me why you like Tutoring and Teaching</label>
                                                <div id="desc-class2" class="mt-bottom-10">
                                                    <span class="editor-top-left"></span>
                                                    <span class="editor-top-right"></span>
                                                    <span class="editor-bottom-left"></span>
                                                    <span class="editor-bottom-right"></span>
                                                    <?php
                                                    $editor_settings = array(
                                                        'wpautop' => false,
                                                        'media_buttons' => false,
                                                        'quicktags' => false,
                                                        'editor_height' => 50,
                                                        'textarea_rows' => 3,
                                                        'tinymce' => array(
                                                            'toolbar1' => 'bold,italic,strikethrough,image,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,spellchecker,fullscreen,wp_adv'
                                                        )
                                                    );
                                                    ?>
                                                    <?php wp_editor($desc_tell_update, 'desc_tell_update', $editor_settings); ?>
                                                    <div class="clear-both"></div>
                                                </div>

                                                <label class="mt-top-12">Subjects you Interested in Tutor (check to all applied)</label>
                                                <div class="row">
                                                    <div class="form__boolean chk-subject-type mt-bottom-10 clearfix" id="checkBoxSearch" style="margin-top: 0">
                                                        <div class="col-sm-4 col-md-3 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons option-input-2 radio" value="english_writting" <?php if(count($subject_type_update) > 0 && in_array("english_writting", $update_language)) echo 'checked="checked"'; ?> name="subject_type_update"/>
                                                                English Writting
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-4 col-md-3 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons option-input-2 radio" value="english_conversation" <?php if(count($subject_type_update) > 0 && in_array("english_conversation", $update_language)) echo 'checked="checked"'; ?> name="subject_type_update"/>
                                                                English Conversation
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-4 col-md-3 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox"  class="radio_buttons option-input-2 radio" value="math_elementary" <?php if(count($subject_type_update) > 0 && in_array("math_elementary", $update_language)) echo 'checked="checked"'; ?> name="subject_type_update"/>
                                                                Math (upto elementary)
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-3 col-md-3 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons option-input-2 radio" value="math_any_level" <?php if(count($subject_type_update) > 0 && in_array("math_any_level", $update_language)) echo 'checked="checked"'; ?> name="subject_type_update"/>
                                                                Math (any level)
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-2 col-md-2 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons option-input-2 radio" value="other" <?php if(count($subject_type_update) > 0 && in_array("other", $update_language)) echo 'checked="checked"'; ?> name="subject_type_update"/>
                                                                Others
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-7 col-md-10 col-xs-12 mt-top-14">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="description" value="<?php echo $update_description ?>" id="description-update">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <label class="mt-top-9 mt-bottom-7">Teaching Experience at School</label>
                                                <div class="row mt-top-9">
                                                    <div class="col-sm-6 col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_name" value="<?php echo $update_school_name ?>" id="school-name-update">
                                                            <span class="placeholder"><?php _e('School Name', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="teaching_link" value="<?php echo $update_teaching_link ?>" id="teaching-link-update">
                                                            <span class="placeholder"><?php _e('Link (if any)', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="teaching_subject" value="<?php echo $update_teaching_subject ?>" id="subject-update">
                                                            <span class="placeholder"><?php _e('Subject', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="years" value="<?php echo $update_years ?>" id="years-update">
                                                            <span class="placeholder"><?php _e('Years', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <label class="mt-top-9 mt-bottom-7">Teaching Experience at Student</label>
                                                <div class="row mt-top-9">
                                                    <div class="col-sm-6 col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_attend" value="<?php echo $update_school_attend ?>" id="school-attend-update">
                                                            <span class="placeholder"><?php _e('Attending', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="student_link" value="<?php echo $update_student_link ?>" id="student-link-update">
                                                            <span class="placeholder"><?php _e('Link (if any)', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt-top-14">
                                                    <div class="col-sm-4 col-md-4 cb-type4">
                                                        <div class="form-group border-ras select-style">
                                                            <select class="select-box-it form-control" name="birth-m" id="grade-update">
                                                                <option value="1" <?php if($update_grade == '1') echo 'selected="selected"'; ?>>Freshman</option>
                                                                <option value="2" <?php if($update_grade == '2') echo 'selected="selected"'; ?>>Sophomore</option>
                                                                <option value="3" <?php if($update_grade == '3') echo 'selected="selected"'; ?>>Junior</option>
                                                                <option value="4" <?php if($update_grade == '4') echo 'selected="selected"'; ?>>Senior</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4 col-md-4 cb-type4">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="gpa" value="<?php echo $update_gpa ?>" id="gpa-update">
                                                            <span class="placeholder"><?php _e('GPA', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4 col-md-4 cb-type4 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="major" value="<?php echo $update_major ?>" id="major-update">
                                                            <span class="placeholder"><?php _e('Major', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <label class="mt-top-9 mt-bottom-7">Educational Background</label>
                                                <div class="row mt-top-9">
                                                    <div class="col-sm-6 col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_name1" value="<?php echo $update_school_name1 ?>" id="school-name1-update">
                                                            <span class="placeholder"><?php _e('School Name 1', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_link1" value="<?php echo $update_school_link1 ?>" id="school-link1-update">
                                                            <span class="placeholder"><?php _e('Link (if any)', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt-top-14">
                                                    <div class="col-sm-6 col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_name2" value="<?php echo $update_school_name2 ?>" id="school-name2-update">
                                                            <span class="placeholder"><?php _e('School Name 2', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_link2" value="<?php echo $update_school_link2 ?>" id="school-link2-update">
                                                            <span class="placeholder"><?php _e('Link (if any)', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt-top-14">
                                                    <div class="col-sm-12 col-md-12 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="any_other" value="<?php echo $update_any_other ?>" id="any-other-update">
                                                            <span class="placeholder"><?php _e('Others', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                        </div>                                        
                                        <div class="row mt-top-14">
                                            <div class="col-sm-6 col-md-6 col-xs-12 mt-top-4">
                                                <div class="form-group">
                                                    <button id="update-teacher" class="btn-dark-blue border-btn" style="background: #65C762;" type="button" name="send-tutor">
                                                        <?php _e('Update', 'iii-dictionary') ?>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-md-6 col-xs-12 mt-top-4">
                                                <div class="form-group">
                                                    <button id="cancel-update-teacher" class="btn-dark-blue border-btn cancel-update-teacher" data-id="sub-update-info" data-tab="updateinfo" style="background: #CECECE;" type="button" name="cancel">
                                                        <?php _e('Cancel', 'iii-dictionary') ?>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <input type="hidden" value="" id="chk-tutor-teacher">
                                    </form>                                    
                                </div>
                                <div id="tutor-regis-tab" class="tab-pane fade in">
                                    <h3>Teacher & Tutor Account</h3>
                                    <form method="post" id="tutorForm" action="" name="registerform" enctype="multipart/form-data">
                                        <div class="row">
                                            <div id="tutor-regis" class="col-md-12">
                                                <div id="info2">
                                                    <label class="mt-bottom-10">Personal Information</label>
                                                    <div class="row">                                                    
                                                        <div class="col-sm-6 col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="mobile_number" value="" id="mobile-number">
                                                                <span class="placeholder"><?php _e('Mobile Number', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="last_school" value="" id="last-school">
                                                                 <span class="placeholder"><?php _e('Last School Attended', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="previous_school" value="" id="previous-school">
                                                                <span class="placeholder"><?php _e('School Taught (if any)', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="skype_id" value="" id="skype-id">
                                                                <span class="placeholder"><?php _e('Skype ID (if any)', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="profession" value="" id="user-profession">
                                                                <span class="placeholder"><?php _e('Profession', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <label class="mt-top-10 mt-bottom-12">Tell me why you like Tutoring and Teaching</label>
                                                <div id="desc-class2" class="mt-bottom-10">
                                                    <span class="editor-top-left"></span>
                                                    <span class="editor-top-right"></span>
                                                    <span class="editor-bottom-left"></span>
                                                    <span class="editor-bottom-right"></span>
                                                    <?php
                                                    $editor_settings = array(
                                                        'wpautop' => false,
                                                        'media_buttons' => false,
                                                        'quicktags' => false,
                                                        'editor_height' => 50,
                                                        'textarea_rows' => 3,
                                                        'tinymce' => array(
                                                            'toolbar1' => 'bold,italic,strikethrough,image,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,spellchecker,fullscreen,wp_adv'
                                                        )
                                                    );
                                                    ?>
                                                    <?php wp_editor('', 'desc_tell_me', $editor_settings); ?>
                                                    <div class="clear-both"></div>
                                                </div>

                                                <label class="mt-top-12">Subjects you Interested in Tutor (check to all applied)</label>
                                                <div class="row">
                                                    <div class="form__boolean chk-subject-type mt-bottom-10 clearfix" id="checkBoxSearch" style="margin-top: 0">
                                                        <div class="col-sm-4 col-md-3 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons class_cb_search option-input-2 radio" value="english_writting" data-subject="english_writting" name="subject_type"/>
                                                                English Writing
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-4 col-md-3 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons required class_cb_search option-input-2 radio" value="english_conversation" data-subject="english_conversation" name="subject_type"/>
                                                                English Conversation
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-4 col-md-3 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox"  class="radio_buttons required class_cb_search option-input-2 radio" value="math_elementary" data-subject="math_elementary" name="subject_type"/>
                                                                Math (upto Elementary)
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-3 col-md-3 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons required class_cb_search option-input-2 radio" value="math_any_level" data-subject="math_any_level" name="subject_type"/>
                                                                Math (any level)
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-2 col-md-2 col-xs-4 cb-type3">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons required class_cb_search option-input-2 radio" value="other" data-subject="other" name="subject_type"/>
                                                                Others
                                                            </label>
                                                        </div>
                                                        <div class="col-sm-7 col-md-10 col-xs-12 mt-top-14">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control" name="subject_description" value="" id="subject-description">
                                                                <span class="placeholder"><?php _e('Description', 'iii-dictionary') ?>:</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <label class="mt-top-9 mt-bottom-7">Teaching Experience at School (if any)</label>
                                                <div class="row mt-top-9">
                                                    <div class="col-sm-6 col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_name" value="" id="school-name">
                                                            <span class="placeholder"><?php _e('School Name', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="teaching_link" value="" id="teaching-link">
                                                            <span class="placeholder"><?php _e('Link (if any)', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="teaching_subject" value="" id="teaching-subject">
                                                            <span class="placeholder"><?php _e('Subject', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-14">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="user_years" value="" id="user-years">
                                                            <span class="placeholder"><?php _e('Years', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <label class="mt-top-9 mt-bottom-7">Teaching Experience at Student (if any)</label>
                                                <div class="row mt-top-9">
                                                    <div class="col-sm-6 col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_attend" value="" id="school_attend">
                                                            <span class="placeholder"><?php _e('Attending', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="student_link" value="" id="student-link">
                                                            <span class="placeholder"><?php _e('Link (if any)', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt-top-14">
                                                    <div class="col-sm-4 col-md-4 cb-type4">
                                                        <div class="form-group border-ras select-style">
                                                            <select class="select-box-it form-control" id="user-grade" name="user_grade">
                                                                <option value="1">Freshman</option>
                                                                <option value="2">Sophomore</option>
                                                                <option value="3">Junior</option>
                                                                <option value="4">Senior</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4 col-md-4 cb-type4">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="user_gpa" value="" id="user-gpa">
                                                            <span class="placeholder"><?php _e('GPA', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4 col-md-4 cb-type4 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="user_major" value="" id="user-major">
                                                            <span class="placeholder"><?php _e('Major', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <label class="mt-top-9 mt-bottom-7">Educational Background</label>
                                                <div class="row mt-top-9">
                                                    <div class="col-sm-6 col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_name1" value="" id="school-name1">
                                                            <span class="placeholder"><?php _e('School Name 1', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_link1" value="" id="school-link1">
                                                            <span class="placeholder"><?php _e('Link (if any)', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt-top-14">
                                                    <div class="col-sm-6 col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_name2" value="" id="school-name2">
                                                            <span class="placeholder"><?php _e('School Name 2', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-mb">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="school_link2" value="" id="school-link2">
                                                            <span class="placeholder"><?php _e('Link (if any)', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt-top-14">
                                                    <div class="col-sm-12 col-md-12 col-xs-12">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" name="any_other" value="" id="any-other">
                                                            <span class="placeholder"><?php _e('Others', 'iii-dictionary') ?>:</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <label class="mt-top-9 mt-bottom-7">Distribution Agreement</label>
                                                <?php
                                                $is_teaching_agreement_uptodate_math = ik_is_teacher_agreement_uptodate('MATH');
                                                $is_teaching_agreement_uptodate = ik_is_teacher_agreement_uptodate();
                                                ?>
                                                <div class="form-group box_english">
                                                    <hr style="color: #E1E1E1;margin: 14px 0 0;">
                                                    <div class="box-dis" style="max-height: 200px;">
                                                        <?php echo mw_get_option('registration-agreement') ?>
                                                    </div>
                                                    <hr style="color: #E1E1E1;margin: 19px 0 14px;">
                                                    <div class="row">
                                                        <div class="col-sm-12 col-xs-12 col-md-12">
                                                            <div class="form-group">
                                                                <input id="rdo-agreed2" class="checkboxagree option-input-2"  type="checkbox" name="agree-english-teacher" value="1" >
                                                                <label for="rdo-agreed2" style="font-size: 13px !important; margin-bottom: 0px !important; display: inline-block; color: #a4a4a4;">I agree to the terms and conditions</label>
                                                            </div>                                                            
                                                        </div>   
                                                    </div>   
                                                </div>

                                                <div class="row mt-top-14">
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-4">
                                                        <div class="form-group">
                                                            <button id="btn-sent-tutor" class="btn-dark-blue border-btn" style="background: #65C762;" type="button" name="send-tutor">
                                                                <?php _e('Create Account', 'iii-dictionary') ?>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-xs-12 mt-top-4">
                                                        <div class="form-group">
                                                            <button class="btn-dark-blue border-btn cancel-update-teacher" style="background: #CECECE;" type="button" name="cancel" data-id="tutor-regist" data-tab="tutor-regis-tab">
                                                                <?php _e('Cancel', 'iii-dictionary') ?>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <?php
                                if (is_mw_qualified_teacher($current_user->ID, 1) && ik_is_teaching_agreement_agreed(1)) {
                                    $tab_title = __('My Earnings', 'iii-dictionary');
                                    $tab_info_url = get_info_tab_cloud_url('Popup_info_29.jpg');
                                    $current_user_points = ik_get_user_points($current_user->ID);
                                    $point_ex_rate = mw_get_option('point-exchange-rate');

                                    // user want to request payment
                                    // validate data
                                    $form_valid = true;
                                    if (empty($_POST['receiving-method'])) {
//                    ik_enqueue_messages(__('Please choose a Receiving method.', 'iii-dictionary'), 'error');
                                        $form_valid = false;
                                    }

                                    if (empty($_POST['amount-request']) || !is_numeric($_POST['amount-request']) || $_POST['amount-request'] < 1) {
//                    ik_enqueue_messages(__('Amount requested is invalid.', 'iii-dictionary'), 'error');
                                        $form_valid = false;
                                    } else {
                                        $amount = $_POST['amount-request'] * 100 / $point_ex_rate;
                                        if ($current_user_points < $amount) {
//                        ik_enqueue_messages(__('You don\'t have enough points for this request.', 'iii-dictionary'), 'notice');
                                            $form_valid = false;
                                        }
                                    }

                                    if (empty($_POST['receiving-email']) || !is_email($_POST['receiving-email'])) {
//                    ik_enqueue_messages(__('Email for receiving payment is invalid.', 'iii-dictionary'), 'error');
                                        $form_valid = false;
                                    }

                                    if ($form_valid) {
                                        $data = array(
                                            'requested_by' => $current_user->ID,
                                            'receiving_method_id' => $_POST['receiving-method'],
                                            'status_id' => TEACHER_REQ_PENDING,
                                            'amount' => $amount,
                                            'receiving_email' => $_POST['receiving-email'],
                                            'requested_on' => date('Y-m-d H:i:s', time())
                                        );

                                        if (ik_deduct_user_points($amount, $current_user->ID)) {
                                            if (MWDB::store_payment_request($data)) {
                                                ik_enqueue_messages(__('Your payment request has been sent.', 'iii-dictionary'), 'success');
//                            wp_redirect(locale_home_url() . '/?r=teaching/request-payment');
                                                exit;
                                            } else {
                                                ik_enqueue_messages(__('An error occured, cannot request payment.', 'iii-dictionary'), 'error');
                                            }
                                        } else {
                                            ik_enqueue_messages(__('You don\'t have enough points for this request.', 'iii-dictionary'), 'error');
                                        }
                                    }


                                    $receiving_methods = MWDB::get_payment_receiving_methods();

                                    $current_page = max(1, get_query_var('page'));
                                    $filter = get_page_filter_session();
                                    if (empty($filter) && !isset($_POST['filter'])) {
                                        $filter['items_per_page'] = 20;
                                        $filter['offset'] = $filter['items_per_page'] * ($current_page - 1);
                                    } else {
                                        if (isset($_POST['filter']['search'])) {
                                            $filter['grade'] = $_POST['filter']['grade'];
                                        }
                                        $filter['offset'] = $filter['items_per_page'] * ($current_page - 1);
                                    }

                                    set_page_filter_session($filter);
                                    $user_transactions = MWDB::get_user_point_transactions($filter, $filter['offset'], $filter['items_per_page']);
                                    $total_pages = ceil($user_transactions->total / $filter['items_per_page']);

                                    $pagination = paginate_links(array(
                                        'format' => '?page=%#%',
                                        'current' => $current_page,
                                        'total' => $total_pages
                                    ));
                                } else {
//                                    $title = __('Message', 'iii-dictionary');
//                                    $body = __('You need to pass the qualification test to access this panel.', 'iii-dictionary');
//                                    $return_url = locale_home_url() . '/?r=my-account#6';
                                    //if ($is_registered_teacher == FALSE) {
//                $title = __('Registration Required', 'iii-dictionary');
//                $body = __('Please register as the teacher before Earn Money by Teaching Math in this panel.', 'iii-dictionary');
//                $return_url = locale_home_url() . '/?r=my-account#4';
                                    //}
//                                    set_lockpage_dialog($title, $body, $return_url);
                                }
                                ?>
                                <div id="earn-pay" class="tab-pane fade in">
                                    <h3>Earning and Payment</h3>
                                    <form method="post" id="earningForm" action="" name="registerform" enctype="multipart/form-data">
                                        <div class="row">

                                            <div id="tutor-regis" class="col-md-12">


                                                <div id="step4-collapse">
                                                    <div class="row">

                                                        <div class="col-sm-12">
                                                            <div class="form-group box_english">

                                                                <div id="info" class="my-earning">
                                                                    <h3>My Earnings</h3>

                                                                    <div class="form-group">
                                                                        <label>
                                                                            <?php _e('Current Points Earned', 'iii-dictionary') ?>                            
                                                                        </label>
                                                                        <div class="color-yellow background-f4f7f7"><?php echo number_format($current_user_points, 2) ?></div>
                                                                    </div>


                                                                </div>
                                                            </div>

                                                            <div id="totutor" class="my-earning">
                                                                <h3>Details of Earning and Spending</h3>

                                                                <div class="col-sm-12 detail-earning" style="max-height: 500px; overflow: auto;">

                                                                    <table class="table table-condensed" id="list-sheets">
                                                                        <thead>
                                                                            <tr>
                                                                                <th><?php _e('Transaction', 'iii-dictionary') ?></th>
                                                                                <th class="hidden-xs"><?php _e('Points', 'iii-dictionary') ?></th>
                                                                                <th><?php _e('Note', 'iii-dictionary') ?></th>
                                                                                <th><?php _e('Date', 'iii-dictionary') ?></th>

                                                                            </tr>
                                                                        </thead>

                                                                        <tbody><?php if (empty($user_transactions->items)) : ?>
                                                                                <tr><td colspan="4"><?php _e('No transactions', 'iii-dictionary') ?></td></tr>
                                                                                <?php
                                                                            else :
                                                                                $total_point = 0;
                                                                                foreach ($user_transactions->items as $item) :
                                                                                    $total_point = $total_point + $item->amount;
                                                                                    ?>
                                                                                    <tr>
                                                                                        <td><?php echo $item->txn_type ?></td>
                                                                                        <?php
                                                                                        if ($item->txn_type == 'Payment') {
                                                                                            ?>
                                                                                            <td style="color: #a7a7a7 !important; font-size: 14px; font-weight: bold;" class="<?php echo in_array($item->txn_type_id, array(POINT_TXN_GRADING_WORKSHEET, POINT_TXN_GIFT)) ? 'positive' : 'negative' ?>-amount"><?php echo $item->amount ?></td>
                                                                                            <?php
                                                                                        } else {
                                                                                            ?>

                                                                                            <td style="color: #ce851f !important; font-size: 14px; font-weight: bold;" class="<?php echo in_array($item->txn_type_id, array(POINT_TXN_GRADING_WORKSHEET, POINT_TXN_GIFT)) ? 'positive' : 'negative' ?>-amount"><?php echo $item->amount ?></td>
                                                                                        <?php } ?>

                                                                                        <td class="note"><?php echo $item->note ?>
                                                                                            <div class="detail-note"><?php echo $item->note ?></div></td>

                                                                                        <td><?php echo ik_date_format($item->txn_date, 'm/d/Y H:i:s') ?></td>

                                                                                    </tr>
                                                                                <?php endforeach; ?>

                                                                            <?php endif ?>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <div class="paginate-f">
                                                                    <?php echo $pagination ?>
                                                                </div>      
                                                            </div>
                                                            <div class="clearfix"></div>
                                                            <div class="sub-col" class="my-earning">
                                                                <h3>Receiving Payments</h3>
                                                                <hr style="color: #d6d6d6;margin: 10px 0px;">
                                                                <div style=" font-size: 13px; color: #9c9c9c;">When teachers have a balance of at least $100, they can request to be paid.</div>
                                                                <hr style="color: #d6d6d6; margin: 10px 0px;">
                                                                <div class="col-md-6 receive-pay" style="padding-right: 20px !important;">
                                                                    <p class="tit-receive-pay">By <span>Paypal</span></p>
                                                                    <p>Send a Paypal invoice with the amount in multiples of $100 to <a href="#">payment@innovative-knowledge.com</a>. The payment will be sent to you within one week.</p>
                                                                </div>
                                                                <div class="col-md-6 receive-pay">
                                                                    <p class="tit-receive-pay">By <span>Amazon Gift Card</span></p>
                                                                    <p>Send the request to <a href="#">payment@innovative-knowledge.com</a> using paypal's email address. Indicate the amount (multiple of $100). The admin will send the amazon gift card to the email address.</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div id="subscription" class="tab-pane fade">  
                                    <h3>Subscription & Points</h3>
                                    <div class="subscription">
                                        <h3>Subscription Status & Purchase History</h3>
                                        <div id="tab-subs-purchase" class="tab-style">
                                            <ul class="nav nav-tabs">
                                                <li class="active tab-subs-purchase" id="subscription-status"><a data-toggle="tab" href="#tab-subs">Subscription Status</a></li>
                                                <li class="tab-subs-purchase" id="purchase-history"><a data-toggle="tab" href="#tab-purchase">Purchase History</a></li>

                                            </ul>
                                            <?php
                                            $current_user_id = get_current_user_id();

                                            $current_page2 = max(1, get_query_var('page'));

                                            $filter2 = get_page_filter_session();

                                            if (empty($filter2) && !isset($_POST['filter'])) {

                                                $filter2['orderby'] = 'ct.name';

                                                $filter2['order-dir'] = 'asc';

                                                $filter2['items_per_page'] = 9999;

                                                $filter2['offset'] = $filter2['items_per_page'] * ($current_page2 - 1);
                                            } else {

                                                $filter2['items_per_page'] = 99999999;

                                                if (isset($_REAL_POST['filter']['orderby'])) {

                                                    $filter2['orderby'] = $_REAL_POST['filter']['orderby'];



                                                    $filter2['order-dir'] = $_REAL_POST['filter']['order-dir'];
                                                }

                                                $filter2['offset'] = $filter2['items_per_page'] * ($current_page2 - 1);
                                            }

                                            set_page_filter_session($filter2);

                                            $user_subscriptions = MWDB::get_user_subscriptions($current_user_id, $filter2);

                                            $total_pages2 = ceil($user_subscriptions->total / $filter2['items_per_page']);

                                            $pagination2 = paginate_links(array(
                                                'format' => '?page=%#%',
                                                'current' => $current_page2,
                                                'total' => $total_pages2
                                            ));
                                            ?>
                                            <div class="tab-content">
                                                <div id="tab-subs" class="tab-pane fade in active">

                                                    <div style="max-height: 450px; overflow-y: auto; overflow-x:hidden;">

                                                        <table class="table table-condensed table-subscription" id="user-subscriptions">

                                                            <thead>

                                                                <tr>

                                                                    <th><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                    <th><?php _e('Students', 'iii-dictionary') ?></th>
                                                                    <th><?php _e('Dictionary', 'iii-dictionary') ?></th>
                                                                    <!--<th class="hidden-xs" style="width:11%"><?php _e('No. of Users', 'iii-dictionary') ?></th>-->

                                                                    <th><?php _e('Sub. End', 'iii-dictionary') ?> <span class="sorting-indicator"></span></th>



                                                                    <th><?php _e('Class (group)', 'iii-dictionary') ?></th>

                                                                    <th></th>

                                                                </tr>

                                                            </thead>

                                                            <tfoot>

                                                                <tr><td colspan="8"><?php echo $pagination2 ?></td></tr>

                                                            </tfoot>

                                                            <tbody>

                                                                <?php if (empty($user_subscriptions->items)) : ?>

                                                                    <tr><td colspan="8"><?php _e('You haven\'t subscribed yet.', 'iii-dictionary') ?></td></tr>

                                                                <?php else : ?>

                                                                    <?php
                                                                    foreach ($user_subscriptions->items as $code) :

                                                                        $date_a = date("Y-m-d");

                                                                        if (ik_date_format($code->expired_on) < $date_a) {
                                                                            ?>

                                                                            <tr <?php //echo $code->expired_on < date('Y-m-d', time()) ? ' class="text-muted"' : ''                                                                                                                                       ?>>

                                                                                <td class="note" style="width: 30%;"><?php if (!$code->inherit) : ?>

                                                                                        <?php echo $code->type ?><?php echo in_array($code->typeid, array(SUB_SAT_PREPARATION, SUB_MATH_SAT_I_PREP, SUB_MATH_SAT_II_PREP)) ? ' - ' . $code->sat_class : '' ?>
                                                                                        <div class="detail-note"> <?php echo $code->type ?><?php echo in_array($code->typeid, array(SUB_SAT_PREPARATION, SUB_MATH_SAT_I_PREP, SUB_MATH_SAT_II_PREP)) ? ' - ' . $code->sat_class : '' ?></div>
                                                                                    <?php else : ?>

                                                                                        <?php echo $code->type ?>
                                                                                        <div class="detail-note"><?php echo $code->type ?></div>
                                                                                    <?php endif ?>


                                                                                </td>

                                                                                <td style="width: 10%;"><?php echo in_array($code->typeid, array(SUB_TEACHER_TOOL, SUB_TEACHER_TOOL_MATH, SUB_GROUP)) ? $code->number_of_students : 'N/A' ?></td>
                                                                                <td style="width: 10%;"><?php echo $code->dictionary ?></td>
                                                                                <td style="width: 10%;"><?php echo ik_date_format($code->expired_on) ?></td>
                                                                                <td style="width: 30%;" class="note"><?php echo is_null($code->group_name) ? 'N/A' : $code->group_name ?>
                                                                                    <div class="detail-note"><?php echo is_null($code->group_name) ? 'N/A' : $code->group_name ?></div>
                                                                                </td>
                                                                              <!--<td style="color:#7F7D7E" class="hidden-xs"><?php echo in_array($code->typeid, array(SUB_DICTIONARY, SUB_SELF_STUDY, SUB_SELF_STUDY_MATH, SUB_GROUP)) ? $code->number_of_students : 'N/A' ?></td>-->



                                                                                <?php
                                                                                $date1 = new DateTime();

                                                                                $date2 = new DateTime($code->expired_on);

                                                                                $interval = $date1->diff($date2);

                                                                                $months_left = $interval->d > 0 ? $interval->m + 1 : $interval->m;

                                                                                $checked_out_state = '';

                                                                                foreach ($cart_items as $item) {

                                                                                    if ($item->sub_id == $code->id) {

                                                                                        $checked_out_state = ' disabled';
                                                                                    }
                                                                                }
                                                                                ?><td style="width: 10%;"  data-subid="<?php echo $code->id ?>" data-type="<?php echo $code->typeid ?>" data-did="<?php echo $code->dictionary_id ?>" data-size="<?php echo $code->number_of_students ?>" data-months="<?php echo $months_left ?>"<?php echo!is_null($code->group_name) ? ' data-group="' . $code->group_name . '"' : '' ?> data-sat-class="<?php echo $code->sat_class ?>" data-sat-class-id="<?php echo $code->sat_class_id ?>"  data-gid="<?php echo $code->group_id ?>">

                                                                                    <?php if (!$code->inherit) : ?>

                                                                                        <?php if (in_array($code->typeid, array(SUB_TEACHER_TOOL_MATH, SUB_TEACHER_TOOL))) : ?>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!--<button type="button" class="btn btn-default btn-block btn-tiny grey extend-sub-btn" data-task="add"<?php echo $checked_out_state ?>><?php _e('Add Members', 'iii-dictionary') ?></button>-->

                                                                                        <?php endif ?>

                                                                                        <?php if (!in_array($code->typeid, array(SUB_GROUP))) : ?>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!--<button type="button" class="btn btn-default btn-block btn-tiny grey extend-sub-btn" <?php echo $checked_out_state ?>><?php _e('Renew Subscription', 'iii-dictionary') ?></button>-->

                                                                                        <?php endif ?>         
                                                                                        <a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_Grey_1.png" class="" alt="setting my account" style="width: 23px; margin-right: 5px;"></a>
                                                                                        <a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Subscription.png" class="" alt="setting my account" style="width: 23px;"></a>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <!--                                                                                                        <a href="<?php echo locale_home_url() ?>/?r=view-subscription&amp;cid=<?php echo $code->id ?>" class="btn btn-default btn-block btn-tiny grey"><?php _e('Detail', 'iii-dictionary') ?></a>-->

                                                                                    <?php endif ?>

                                                                                </td>

                                                                            </tr>

                                                                        <?php }else { ?>

                                                                            <tr <?php //echo $code->expired_on < date('Y-m-d', time()) ? ' class="text-muted"' : ''                                                                                                                                        ?>>

                                                                                <td><?php if (!$code->inherit) : ?>

                                                                                        <?php echo $code->type ?><?php echo in_array($code->typeid, array(SUB_SAT_PREPARATION, SUB_MATH_SAT_I_PREP, SUB_MATH_SAT_II_PREP)) ? ' - ' . $code->sat_class : '' ?>

                                                                                    <?php else : ?>

                                                                                        <?php echo $code->type ?>

                                                                                    <?php endif ?>

                                                                                </td>

                                                                                <td ><?php echo in_array($code->typeid, array(SUB_TEACHER_TOOL, SUB_TEACHER_TOOL_MATH, SUB_GROUP)) ? $code->number_of_students : 'N/A' ?></td>
                                                                                <td ><?php echo $code->dictionary ?></td>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <!--                                                                                <td ><?php echo in_array($code->typeid, array(SUB_DICTIONARY, SUB_SELF_STUDY, SUB_SELF_STUDY_MATH, SUB_GROUP)) ? $code->number_of_students : 'N/A' ?></td>-->

                                                                                <td ><?php echo ik_date_format($code->expired_on) ?></td>





                                                                                <td><?php echo is_null($code->group_name) ? 'N/A' : $code->group_name ?></td>

                                                                                <?php
                                                                                $date1 = new DateTime();

                                                                                $date2 = new DateTime($code->expired_on);

                                                                                $interval = $date1->diff($date2);

                                                                                $months_left = $interval->d > 0 ? $interval->m + 1 : $interval->m;

                                                                                $checked_out_state = '';

                                                                                foreach ($cart_items as $item) {

                                                                                    if ($item->sub_id == $code->id) {

                                                                                        $checked_out_state = ' disabled';
                                                                                    }
                                                                                }
                                                                                ?><td data-subid="<?php echo $code->id ?>" data-type="<?php echo $code->typeid ?>" data-did="<?php echo $code->dictionary_id ?>" data-size="<?php echo $code->number_of_students ?>" data-months="<?php echo $months_left ?>"<?php echo!is_null($code->group_name) ? ' data-group="' . $code->group_name . '"' : '' ?> data-sat-class="<?php echo $code->sat_class ?>" data-sat-class-id="<?php echo $code->sat_class_id ?>"  data-gid="<?php echo $code->group_id ?>">

                                                                                    <?php if (!$code->inherit) : ?>

                                                                                        <?php if (in_array($code->typeid, array(SUB_TEACHER_TOOL_MATH, SUB_TEACHER_TOOL))) : ?>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!--<button type="button" class="btn btn-default btn-block btn-tiny grey extend-sub-btn" data-task="add"<?php echo $checked_out_state ?>><?php _e('Add Members', 'iii-dictionary') ?></button>-->

                                                                                        <?php endif ?>

                                                                                        <?php if (!in_array($code->typeid, array(SUB_GROUP))) : ?>
                                                                                            <a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_Grey_1.png" class="" alt="setting my account" style="width: 23px; margin-right: 5px;"></a>
                                                                                                                                                                   <!--<button type="button" class="btn btn-default btn-block btn-tiny grey extend-sub-btn" <?php echo $checked_out_state ?>><?php _e('Renew Subscription', 'iii-dictionary') ?></button>-->
                                                                                            <a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Subscription.png" class="" alt="setting my account" style="width: 23px;"></a>
                                                                                        <?php endif ?>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <!--<a href="<?php echo locale_home_url() ?>/?r=view-subscription&amp;cid=<?php echo $code->id ?>" class="btn btn-default btn-block btn-tiny grey"><?php _e('Detail', 'iii-dictionary') ?></a>-->

                                                                                    <?php endif ?>

                                                                                </td>

                                                                            </tr>

                                                                            <?php
                                                                        }

                                                                    endforeach
                                                                    ?>

                                                                <?php endif ?>

                                                            </tbody>

                                                        </table>

                                                    </div>
                                                    <div style="clear: both;"></div>
                                                    <div class="detail-subs">

                                                        <a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_Grey_1.png" class="" alt="setting my account" style="width: 23px; margin-right: 5px;">Detail</a>
                                                        <a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Subscription.png" class="" alt="setting my account" style="width: 23px;">Subscription</a>
                                                    </div>

                                                </div>
                                                <div id="tab-purchase" class="tab-pane fade">
                                                    <div  style="max-height: 450px; overflow: auto;">

                                                        <table class="table table-condensed table-subscription">

                                                            <thead>

                                                                <tr>

                                                                    <th><?php _e('Purchase Item', 'iii-dictionary') ?></th>

                                                                    <th><?php _e('Activation Code', 'iii-dictionary') ?></th>

                                                                    <th><?php _e('Payment Method', 'iii-dictionary') ?></th>

                                                                    <th><?php _e('Paid Amount', 'iii-dictionary') ?></th>

                                                                    <th><?php _e('Purchased On', 'iii-dictionary') ?></th>

                                                                </tr>

                                                            </thead>
                                                            <?php
                                                            $purchased_history = MWDB::get_user_purchase_history($current_user_id);
                                                            ?>
                                                            <tbody><?php if (empty($purchased_history)) : ?>

                                                                    <tr><td colspan="5"><?php _e('No history', 'iii-dictionary') ?></td></tr>

                                                                    <?php
                                                                else :

                                                                    foreach ($purchased_history as $item) :
                                                                        ?>

                                                                        <tr>

                                                                            <td><?php echo $item->purchased_item_name ?></td>

                                                                            <td><?php echo!empty($item->encoded_code) ? $item->encoded_code : 'NULL'; ?></td>

                                                                            <td><?php echo $item->payment_method ?></td>

                                                                            <td>$ <?php echo $item->amount ?></td>

                                                                            <td><?php echo ik_date_format($item->purchased_on, 'm/d/Y H:m:i') ?></td>

                                                                        </tr>

                                                                        <?php
                                                                    endforeach;

                                                                endif
                                                                ?>

                                                            </tbody>

                                                        </table>

                                                    </div>
                                                </div>
                                                <form  method="post" action="">
                                                    <input type="hidden" name="dictionary-id" id="dictionary-id" value="">
                                                    <input type="hidden" name="starting-date" id="starting-date-txt" value="">
                                                    <input type="hidden" name="assoc-group" id="assoc-group" value="">
                                                    <input type="hidden" name="group-name" id="group-name" value="">
                                                    <input type="hidden" name="group-pass" id="group-pass" value="">
                                                    <input type="hidden" id="activation-code" name="activation-code" value="">
                                                </form>
                                                <div class="activation">
                                                    <h3>Activation Code</h3>
                                                    <div class="form-group col-md-6" style="padding-left: 0px !important;">
                                                        <label for="credit-code">Enter a Credit Code <span style="font-style: italic;">(if you have any)</span></label>
                                                        <input class="form-control border-ras" id="credit-code" name="credit-code">
                                                    </div>
                                                    <div class="form-group col-md-6" style="padding-right: 0px !important;">
                                                        <button class="btn-dark-blue border-btn" id="val-credit-code" style="background: #f7b555; margin-top: 25px;margin-bottom: 50px;" type="button" data-loading-text="<?php _e('Checking...', 'iii-dictionary') ?>" data-error-text="<?php _e('Please enter a credit code', 'iii-dictionary') ?>"><?php _e('Apply', 'iii-dictionary') ?></button>
                                                        <span data-toggle="popover" data-placement="bottom" data-container="body"  data-html="true" data-max-width="420px"></span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>


                                    </div>
                                </div>


                                <!--my subject-->
                                <div id="my-subject" class="style-form tab-pane fade">  
                                    <h3>My Subject</h3>
                                    <div class="subscription">
                                        <p class="text-intro-tab">My Subject are collections of Lessons you create for your classes. You can create a Subject by putting together a series of Lessons from the <span>My Lesson</span></p>
                                        <div class="my-lesson-body">
                                            <div class="border-selectall">
                                                <div class="col-md-9 col-sm-12 col-xs-12 cb-type-lesson">
                                                    <label>
                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-subject" value="" name="select-all-lesson"/>
                                                        <span style="padding-left: 18px">Select All</span>
                                                    </label>
                                                </div>
                                                <div class="col-md-3 col-sm-12 col-xs-12 search-assign">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-assign-subject"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                        <button type="submit" class="btn-down form-control hidden" name="assign-lesson-2" id="btn-down-subject"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                    </div>
                                                </div>

                                                <div class="clearfix"></div>
                                                <div class="select-style open-search" id="select-search-subject" style="display:none;">
                                                    <div class="search-box">
                                                        <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                            <div class="form-group">
                                                                <input  id="search-subject" name="search-subject" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                <p class="link-clear">Clear</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-lesson" id="search-btn-subject"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </div>
                                                    <div class="col-md-9 col-sm-9 col-xs-12 border-ras" id="select-sub" style="padding-left: 0px !important;">
                                                        <form method="get">
                                                            <select class="select-box-it form-control" id="select-class-subject" name="sl-class">
                                                                <option selected value="" >Select a Class to Assign</option>

                                                            </select>
                                                        </form>
                                                    </div>
                                                    <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-orange2 form-control border-ras" name="assign-now"></span><?php _e('Assign Now', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>


                                            <div class="table-my-lesson">
                                                <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                    <table class="table table-condensed table-subscription" >
                                                        <thead>
                                                            <tr>
                                                                <th class="table-img-icon" id="icon-option-subject" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-subject" alt="option subject" ></th>
                                                                <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                <th style="width: 60%;"><?php _e('Subject', 'iii-dictionary') ?></th>
                                                                <th style="width: 15%;"><?php _e('Test or Practice', 'iii-dictionary') ?></th>
                                                                <th style="width: 15%;"></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="table-my-subject">

                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>
                                        </div>
                                        <div id="add-worksheet-subject" class="hidden add-worksheet">
                                            <div class="">
                                                <div class="head-addws col-md-12">
                                                    <p class="lesson-icon"><span>Add Lessons: </span> <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Right.png"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MySubject.png"><span class="name-sub"></span></p>
                                                    <div class="close-icon"> <img  id="close-add-subject"   aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png"></div>   
                                                </div>
                                                <div class="col-md-9">Where would you like to get Lessons from?</div>
                                                <div class="btn-add-ws col-md-3 nopadding-r" id="">
                                                    <button id="btn-add-less" type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-ras" ></span><?php _e('Add', 'iii-dictionary') ?></button>
                                                </div>
                                                <div class="body-addws">
                                                    <div class="get-ws-choise col-md-12">
                                                        <div class="get-ws-choise-icon"><img id="icon-open-sub"  aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png"></div>
                                                        <div class="get-ws-choise-text border-ras" id="from-my-sub">From <span>My Lesson</span></div>
                                                        <div class="clearfix"></div>
                                                        <div class="lesson-detail-sub" style="display:none;">
                                                            <div class="border-selectall" style="border-top:none !important;">
                                                                <div class="col-md-8 col-sm-12 col-xs-12 cb-type-lesson">
                                                                    <label>
                                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-less4" value="" name="select-all-lesson"/>
                                                                        <span style="padding-left: 18px">Select All</span>
                                                                    </label>
                                                                </div>
                                                                <div class="col-md-4 col-sm-12 col-xs-12 search-assign">
                                                                    <div class="form-group">
                                                                        <button type="submit" class="btn-assign form-control" name="assign-lesson" id="search-my-less"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                                        <button type="submit" class="btn-down form-control hidden" name="assign-lesson-2" id="search-my-less-3"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                                    </div>
                                                                </div>
                                                                <div class="clearfix"></div>
                                                                <div class="select-style open-search" id="select-search-addlesson" style="display:none;">
                                                                    <div class="search-box">
                                                                        <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                            <div class="form-group">
                                                                                <input  id="search-sub" name="search-lesson" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                                <p class="link-clear">Clear</p>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                            <div class="form-group">
                                                                                <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-lesson" id="search-btn-sub"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="clearfix"></div>
                                                                    </div>
                                                                    <div class="col-md-9 col-sm-9 col-xs-12 border-ras arrow-stl" style="padding-left: 0px !important;">
                                                                        <form method="get">
                                                                            <select class="select-box-it form-control border-ras" id="select-class-lesson3" name="sl-class" >
                                                                                <option selected disabled value="" >Select a Class to Assign</option>
                                                                                <option value="2" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                                <option value="3" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                                <option value="4" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                            </select>
                                                                        </form>
                                                                    </div>
                                                                    <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                        <div class="form-group">
                                                                            <button type="submit" class="btn-orange2 form-control border-ras" name="assign-now"></span><?php _e('Assign Now', 'iii-dictionary') ?></button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="clearfix"></div>
                                                                </div>
                                                                <div class="clearfix"></div>
                                                            </div>

                                                            <div class="table-my-lesson active">
                                                                <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                                    <table class="table table-condensed table-subscription" >

                                                                        <thead>

                                                                            <tr>
                                                                                <th class="table-img-icon" id="icon-option-less2" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-lesson2" alt="option lesson" ></th>
                                                                                <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                                <th style="width: 70%;"><?php _e('Lesson', 'iii-dictionary') ?></th>

                                                                                <th style="width: 20%;"></th>

                                                                            </tr>

                                                                        </thead>
                                                                        <tbody id="table-less2">


                                                                        </tbody>

                                                                    </table>


                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end of my subject-->

                                <!--my lesson-->
                                <div id="my-lesson" class="style-form tab-pane fade">  
                                    <h3>My Lesson</h3>
                                    <div class="subscription">
                                        <p class="text-intro-tab">My Lesson are collections of worksheets you create for your classes. You can create a lesson by putting together a series of worksheets from the <span>Public Library</span> and <span>My Library</span>.</p>
                                        <div class="my-lesson-body">
                                            <div class="border-selectall">
                                                <div class="col-md-6 col-sm-12 col-xs-12 cb-type-lesson">
                                                    <label>
                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-lesson" value="" name="select-all-lesson"/>
                                                        <span style="padding-left: 18px">Select All</span>
                                                    </label>
                                                </div>
                                                <div class="col-md-3 col-sm-12 col-xs-12 search-assign">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-assign"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                        <button type="submit" class="btn-down form-control hidden" name="assign-lesson-2" id="btn-assign-down"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-sm-12 col-xs-12" style="padding-right: 0 !important">
                                                    <div class="form-group">
                                                        <button id="btn-create-subject" type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" name="create-subject"></span><?php _e('Create Subject', 'iii-dictionary') ?></button>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                                <div class="select-style open-search" id="select-assign">
                                                    <div class="search-box">
                                                        <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                            <div class="form-group">
                                                                <input  id="search-lesson" name="search-lesson" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                <p class="link-clear">Clear</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-lesson" id="search-btn"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </div>
                                                    <div class="col-md-9 col-sm-9 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                        <form method="get">
                                                            <select class="select-box-it form-control" name="sl-class" id="select-class-lesson" >
                                                                <option selected disabled value="" >Select a Class to Assign</option>

                                                            </select>
                                                        </form>
                                                    </div>
                                                    <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-orange2 form-control border-ras" name="assign-now"></span><?php _e('Assign Now', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>

                                            <div class="create-subject-content hidden">
                                                <div class="header-create-lesson">
                                                    <h4 class="title-create">Creating a Subject<img id="close-icon-sub" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right"></h4>  
                                                </div>
                                                <div class="col-md-6">
                                                    <h5 class="lesson-name">Subject Name</h5>
                                                    <input class="form-control border-ras" value="" id="input-style-sub">
                                                </div>
                                                <div class="col-md-3 border-ras select-style select-style36">
                                                    <h5 class="lesson-name">Test or Practice?</h5>
                                                    <form method="get">
                                                        <select class="select-box-it form-control arrow-stl" name="sl-class" id="select-type" data-selected="" >
                                                            <option selected disabled value="">-Select Type-</option>
                                                            <option value="T">Test</option>
                                                            <option value="P">Practice</option>
                                                        </select>
                                                    </form>
                                                </div>
                                                <div class="col-md-3 border-ras select-style select-style36">
                                                    <h5 class="lesson-name">Type of the Subject</h5>
                                                    <form method="get">
                                                        <select class="select-box-it form-control arrow-stl" name="sl-class" id="select-my-sub" data-selected="" >
                                                            <option disabled selected value="">-Select Lesson Type-</option>
                                                            <option id="option-mysub" value="1">English</option>

                                                        </select>
                                                    </form>
                                                </div>

                                                <div class=" col-nopadding" style="margin-top: 100px; width: 100%" >
                                                    <label for="about-class"><?php _e('Short description of the Subject', 'iii-dictionary') ?></label>
                                                    <div id="desc-mysubject">
                                                        <?php
                                                        $editor_settings = array(
                                                            'wpautop' => false,
                                                            'media_buttons' => false,
                                                            'quicktags' => false,
                                                            'editor_height' => 81,
                                                            'textarea_rows' => 15,
                                                            'tinymce' => array(
                                                                'toolbar1' => 'bold,italic,strikethrough,image,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,spellchecker,fullscreen,wp_adv'
                                                            )
                                                        );
                                                        ?>
                                                        <?php wp_editor('', 'post_mysubject', $editor_settings); ?>
                                                        <div class="clear-both"></div>
                                                    </div>
                                                </div>

                                                <h5 class="lesson-name2">Confirm Lessons</h5>
                                                <table style="width: 100%;margin-bottom: 20px;" id="table-confirm-subject">


                                                </table>
                                                <button id="cancel-sub" type="submit" class="btn-gray btn-create-lesson form-control nopadding-r border-btn" name="create-lesson"></span><?php _e('Cancel', 'iii-dictionary') ?></button>
                                                <button id="create-sub" type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" name="create-lesson"></span><?php _e('Create Subject', 'iii-dictionary') ?></button>
                                            </div>

                                            <div class="table-my-lesson active">
                                                <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                    <table class="table table-condensed table-subscription" >

                                                        <thead>

                                                            <tr>
                                                                <th class="table-img-icon" id="icon-option-lesson" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-lesson" alt="option lesson" ></th>

                                                                <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                <th style="width: 60%;"><?php _e('Lesson', 'iii-dictionary') ?></th>
                                                                <th style="width: 15%;"><?php _e('Test or Practice', 'iii-dictionary') ?></th>
                                                                <th style="width: 15%;"></th>

                                                            </tr>

                                                        </thead>
                                                        <tbody id="table-my-lesson">


                                                        </tbody>

                                                    </table>


                                                </div>

                                            </div>
                                        </div>
                                        <div id="add-worksheet" class="hidden add-worksheet">
                                            <div class="">
                                                <div class="head-addws col-md-12">
                                                    <p class="lesson-icon"><span>Add Worksheets: </span> <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Right.png"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png"><span class="name-lesson"></span></p>
                                                    <div class="close-icon"> <img  id="icon-close-addws"   aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png"></div>   
                                                </div>
                                                <div class="col-md-9">Where would you like to get worksheets from?</div>
                                                <div class="btn-add-ws col-md-3 nopadding-r" id="">
                                                    <button id="btn-add-ws" type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" ></span><?php _e('Add', 'iii-dictionary') ?></button>
                                                </div>
                                                <div class="body-addws">
                                                    <div class="get-ws-choise col-md-12">
                                                        <div class="get-ws-choise-icon"><img id="icon-open-lib"  aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png"></div>
                                                        <div class="get-ws-choise-text border-ras" id="from-my-lib">From <span>My Library</span></div>
                                                        <div class="clearfix"></div>
                                                        <div class="lesson-detail-lib" style="display:none;">
                                                            <div class="border-selectall border-selectall-1 active">
                                                                <div class="col-md-6 col-sm-12 col-xs-12 cb-type-lesson">
                                                                    <label>
                                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-mylibrary2" value="" name="select-all-mylibrary"/>
                                                                        <span style="padding-left: 18px">Select All</span>
                                                                    </label>

                                                                </div>
                                                                <div class="col-md-3 col-sm-6 col-xs-6" style="float:right;">
                                                                    <div class="form-group">
                                                                        <button type="submit" class="btn-assign form-control" name="my-library" id="search-my-lib2"></span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                    </div>

                                                                </div>
                                                                <div class="clearfix"></div>
                                                                <div class="select-style open-search" id="open-search-my-lib2">
                                                                    <div class="search-box">
                                                                        <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                            <div class="form-group">
                                                                                <input  id="search-tit-lib2" name="filter[sheet-name]" class="form-control search-tit border-ras" placeholder="Search Title from Here...">
                                                                                <p class="link-clear">Clear</p>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                            <div class="form-group">
                                                                                <button type="submit" class="btn-orange2 form-control border-ras" name="filter[search]" id="btn-search-my-lib2"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="clearfix"></div>
                                                                </div>


                                                                <div class="clearfix"></div>
                                                            </div>

                                                            <div class="table-my-lesson active">
                                                                <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                                    <table class="table table-condensed table-subscription" >

                                                                        <thead>

                                                                            <tr>
                                                                                <th class="table-img-icon" id="icon-option-library2" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort2" alt="option lesson" ></th>

                                                                                <th style="width: 20%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                                <th style="width: 55%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>

                                                                                <th style="width: 20%;"></th>

                                                                            </tr>

                                                                        </thead>
                                                                        <tbody id="table-library2">


                                                                        </tbody>

                                                                    </table>


                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 get-ws-choise">
                                                        <div class="get-ws-choise-icon"><img  id="icon-open-pub"  aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png"></div>
                                                        <div class="get-ws-choise-text border-ras" id="from-pub">From <span>Public Library</span></div>
                                                        <div class="clearfix"></div>
                                                        <div id="tab-public-lib" class="tab-style from-public-lib" style="display:none; margin-top: 10px !important;">
                                                            <ul class="nav nav-tabs">
                                                                <li class="active tab-subs-purchase" id="tab-public-lib-eng2"><a data-toggle="tab"  href="#tab-eng-lib2" id="eng-tab">English</a></li>
                                                                <li class="tab-subs-purchase" id="tab-public-lib-math2"><a data-toggle="tab"  href="#tab-math-lib2" id="math-tab">Math</a></li>
                                                            </ul>

                                                            <div class="tab-content">
                                                                <div id="tab-eng-lib2" class="tab-pane fade in active">
                                                                    <div class="border-selectall border-selectall-1">
                                                                        <div class="col-md-9 col-sm-12 col-xs-12 cb-type-lesson">
                                                                            <label>
                                                                                <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-eng2" value="" name="select-all"/>
                                                                                <span style="padding-left: 18px">Select All</span>
                                                                            </label>
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-6 col-xs-6">
                                                                            <div class="form-group">
                                                                                <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-open-search-eng2"></span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                            </div>
                                                                        </div>

                                                                        <div class="clearfix"></div>
                                                                        <div class="select-style open-search" id="open-search-eng2" style="display:none;">
                                                                            <div class="search-box">
                                                                                <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                                    <div class="form-group">
                                                                                        <input  id="search-tit-eng2" name="filter[sheet-name]" class="form-control search-tit border-ras" placeholder="Search Title from Here...">
                                                                                        <p class="link-clear">Clear</p>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                                    <div class="form-group">
                                                                                        <button type="submit" class="btn-orange2 form-control border-ras" name="filter[search]" id="btn-search-eng2"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="select-box">


                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-left: 0px !important;">

                                                                                    <form method="get">
                                                                                        <?php MWHtml::select_grades('ENGLISH', $filter['grade'], array('first_option' => '- Subject -', 'class' => 'form-control', 'name' => 'filter[grade]', 'id' => 'grade-en2')) ?>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-right: 0px !important;">

                                                                                    <form method="get">
                                                                                        <?php MWHtml::sel_assignments($filter['assignment-id'], false, array(), '- Lesson -', 'filter[assignment-id]', 'form-control', 'filter-assignment-en2') ?>
                                                                                    </form>
                                                                                </div>
                                                                            </div>
                                                                            <div class="clearfix"></div>
                                                                        </div>
                                                                        <div class="clearfix"></div>
                                                                    </div>

                                                                    <div class="table-my-lesson">
                                                                        <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                                            <table class="table table-condensed table-subscription" >

                                                                                <thead>

                                                                                    <tr>
                                                                                        <th class="table-img-icon" id="icon-option-eng2" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_option.png" class="" alt="option lesson" ></th>
                                                                                <div class="hidden option-detail" id="option-detail-eng2">
                                                                                    <p>Sort by</p>
                                                                                    <ul>
                                                                                        <li id="sort-alphabet-eng">Alphabetical</li>
                                                                                        <li id="sort-type-eng">Type</li>
                                                                                        <li id="sort-new-eng">Newest</li>
                                                                                        <li id="sort-old-eng">Oldest</li>
                                                                                    </ul>
                                                                                </div>
                                                                                <th style="width:20%;"><?php _e('Lesson', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                                <th style="width: 45%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>

                                                                                <th style="width: 15%;"><?php _e('Dictionary', 'iii-dictionary') ?></th>
                                                                                <th style="width: 15%;"></th>

                                                                                </tr>

                                                                                </thead>
                                                                                <tbody  class="table-eng-worksheet">



                                                                                </tbody>

                                                                            </table>


                                                                        </div>

                                                                    </div>
                                                                    <div id="pagination-result2" class="pagination-result">

                                                                    </div>
                                                                </div>
                                                                <div id="tab-math-lib2" class="tab-pane fade">
                                                                    <div class="border-selectall border-selectall-1">
                                                                        <div class="col-md-9 col-sm-12 col-xs-12 cb-type-lesson">
                                                                            <label>
                                                                                <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-math2" value="" name="select-all"/>
                                                                                <span style="padding-left: 18px">Select All</span>
                                                                            </label>
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-6 col-xs-6">
                                                                            <div class="form-group">
                                                                                <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-open-search2"></span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                            </div>
                                                                        </div>

                                                                        <div class="clearfix"></div>
                                                                        <div class="select-style open-search" id="open-search-math2" style="display:none;">
                                                                            <div class="search-box">
                                                                                <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                                    <div class="form-group">
                                                                                        <input  id="filter-sheet-name2" name="filter[sheet-name]" class="form-control search-tit border-ras" placeholder="Search Title from Here...">
                                                                                        <p class="link-clear">Clear</p>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                                    <div class="form-group">
                                                                                        <button type="submit" class="btn-orange2 form-control border-ras" name="filter[search]" id="btn-search-math2"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="select-box">
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-left: 0px !important;">

                                                                                    <form method="get">
                                                                                        <select class="select-box-it form-control" name="filter[cat-level]" id="filter-level-categories2">
                                                                                            <option selected value="">-Category-</option>

                                                                                        </select>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-right: 0px !important;">
                                                                                    <form method="get">
                                                                                        <select class="select-box-it form-control" name="filter[level]" id="filter-levels2" data-selected="<?php echo $filter['level'] ?>" >
                                                                                            <option selected value="" >-Subject-</option>

                                                                                        </select>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                                                    <form method="get">
                                                                                        <select class="select-box-it form-control" id="filter-sublevels2" name="filter[sublevel]" data-selected="<?php echo $filter['sublevel'] ?>">
                                                                                            <option selected value="" >-Lesson-</option>

                                                                                        </select>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-right: 0px !important;">

                                                                                    <form method="get">
                                                                                        <select class="select-box-it form-control" name="worksheet-format" id="worksheet-format2" >
                                                                                            <option selected value="">-Worksheet Format- </option>
                                                                                            <?php
                                                                                            $worksheet = MWHtml::sel_math_assignments($filter['assignment-id']);
                                                                                            foreach ($worksheet as $item):
                                                                                                ?>
                                                                                                <option value="<?php echo $item->id ?>"<?php echo $selected == $item->id ? ' selected' : '' ?>><?php echo $item->name ?></option>
                                                                                            <?php endforeach ?>
                                                                                        </select>
                                                                                    </form>
                                                                                </div>
                                                                            </div>
                                                                            <div class="clearfix"></div>
                                                                        </div>

                                                                        <div class="clearfix"></div>
                                                                    </div>

                                                                    <div class="table-my-lesson">
                                                                        <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                                            <table class="table table-condensed table-subscription" >

                                                                                <thead>

                                                                                    <tr>
                                                                                        <th class="table-img-icon" id="icon-option-math2" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_option.png" class="" alt="option lesson" ></th>
                                                                                <div class="hidden option-detail" id="option-detail-math2">
                                                                                    <p>Sort by</p>
                                                                                    <ul>
                                                                                        <li id="sort-alphabet-math">Alphabetical</li>
                                                                                        <li id="sort-type-math">Type</li>
                                                                                        <li id="sort-new-math">Newest</li>
                                                                                        <li id="sort-old-math">Oldest</li>
                                                                                    </ul>
                                                                                </div>
                                                                                <th style="width:20%;"><?php _e('Category', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                                <th style="width: 55%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>

                                                                                <th style="width: 15%;"></th>

                                                                                </tr>

                                                                                </thead>
                                                                                <tbody  class="table-math-worksheet">

                                                                                </tbody>

                                                                            </table>


                                                                        </div>

                                                                    </div>
                                                                    <div id="pagination-result-math2" class="pagination-result">

                                                                    </div>

                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <!--public library-->
                                <div id="public-lib" class="style-form tab-pane fade">  
                                    <h3>Public Worksheet</h3>
                                    <div class="subscription">
                                        <p class="text-intro-tab">Public Library has pre-made worksheets created for you to use. Save the worksheets into your <span>My Library</span> to use them. </p>
                                        <div id="tab-public-lib" class="tab-style">
                                            <ul class="nav nav-tabs">
                                                <li class="active tab-subs-purchase" id="tab-public-lib-eng"><a data-toggle="tab"  href="#tab-eng-lib" id="eng-tab">English</a></li>
                                                <li class="tab-subs-purchase" id="tab-public-lib-math"><a data-toggle="tab"  href="#tab-math-lib" id="math-tab">Math</a></li>

                                            </ul>

                                            <div class="tab-content">
                                                <div id="tab-eng-lib" class="tab-pane fade in active">
                                                    <div class="border-selectall border-selectall-1">
                                                        <div class="col-md-6 col-sm-12 col-xs-12 cb-type-lesson">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-eng" value="" name="select-all"/>
                                                                <span style="padding-left: 18px">Select All</span>
                                                            </label>
                                                        </div>
                                                        <div class="col-md-3 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-open-search-eng"></span><?php _e('Search', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-6 col-xs-6 nopadding-r">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" name="save-to-lib" id="save-eng-lib"></span><?php _e('Save to My Library', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="select-style open-search" id="open-search-eng">
                                                            <div class="search-box">
                                                                <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                    <div class="form-group">
                                                                        <input  id="search-tit-eng" name="filter[sheet-name]" class="form-control search-tit border-ras" placeholder="Search Title from Here...">
                                                                        <p class="link-clear">Clear</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                    <div class="form-group">
                                                                        <button type="submit" class="btn-orange2 form-control border-ras" name="filter[search]" id="btn-search-eng"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="select-box">


                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-left: 0px !important;">

                                                                    <form method="get">
                                                                        <?php MWHtml::select_grades('ENGLISH', $filter['grade'], array('first_option' => '- Subject -', 'class' => 'form-control', 'name' => 'filter[grade]', 'id' => 'grade-en')) ?>
                                                                    </form>
                                                                </div>
                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-right: 0px !important;">

                                                                    <form method="get">
                                                                        <?php MWHtml::sel_assignments($filter['assignment-id'], false, array(), '- Lesson -', 'filter[assignment-id]', 'form-control', 'filter-assignment-en') ?>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </div>

                                                    <div class="table-my-lesson">
                                                        <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                            <table class="table table-condensed table-subscription" >

                                                                <thead>

                                                                    <tr>
                                                                        <th class="table-img-icon" id="icon-option-eng" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_option.png" class="" alt="option lesson" ></th>
                                                                <div class="hidden option-detail" id="option-detail-eng">
                                                                    <p>Sort by</p>
                                                                    <ul>
                                                                        <li id="sort-alphabet-eng">Alphabetical</li>
                                                                        <li id="sort-type-eng">Type</li>
                                                                        <li id="sort-new-eng">Newest</li>
                                                                        <li id="sort-old-eng">Oldest</li>
                                                                    </ul>
                                                                </div>
                                                                <th style="width:20%;"><?php _e('Lesson', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                <th style="width: 45%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>

                                                                <th style="width: 15%;"><?php _e('Dictionary', 'iii-dictionary') ?></th>
                                                                <th style="width: 15%;"></th>

                                                                </tr>

                                                                </thead>
                                                                <tbody id="table-eng-worksheet">



                                                                </tbody>

                                                            </table>


                                                        </div>

                                                    </div>
                                                    <div id="pagination-result" class="pagination-result">

                                                    </div>

                                                </div>
                                                <div id="tab-math-lib" class="tab-pane fade">
                                                    <div class="border-selectall">
                                                        <div class="col-md-6 col-sm-12 col-xs-12 cb-type-lesson">
                                                            <label>
                                                                <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-math" value="" name="select-all"/>
                                                                <span style="padding-left: 18px">Select All</span>
                                                            </label>
                                                        </div>
                                                        <div class="col-md-3 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-open-search"></span><?php _e('Search', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-6 col-xs-6 nopadding-r">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" name="save-to-lib" id="save-math-lib"></span><?php _e('Save to My Library', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="select-style open-search" id="open-search-math">
                                                            <div class="search-box">
                                                                <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                    <div class="form-group">
                                                                        <input  id="filter-sheet-name" name="filter[sheet-name]" class="form-control search-tit border-ras" placeholder="Search Title from Here...">
                                                                        <p class="link-clear">Clear</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                    <div class="form-group">
                                                                        <button type="submit" class="btn-orange2 form-control border-ras" name="filter[search]" id="btn-search-math"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="select-box">
                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                                    <form method="get">
                                                                        <select class="select-box-it form-control" name="filter[cat-level]" id="filter-level-categories">
                                                                            <option selected value="">-Category-</option>

                                                                        </select>
                                                                    </form>
                                                                </div>
                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-right: 0px !important;">
                                                                    <form method="get">
                                                                        <select class="select-box-it form-control" name="filter[level]" id="filter-levels" data-selected="<?php echo $filter['level'] ?>" >
                                                                            <option selected value="" >-Subject-</option>

                                                                        </select>
                                                                    </form>
                                                                </div>
                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                                    <form method="get">
                                                                        <select class="select-box-it form-control" id="filter-sublevels" name="filter[sublevel]" data-selected="<?php echo $filter['sublevel'] ?>">
                                                                            <option selected value="" >-Lesson-</option>

                                                                        </select>
                                                                    </form>
                                                                </div>
                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-right: 0px !important;">
                                                                    <form method="get">
                                                                        <select class="select-box-it form-control" name="worksheet-format" id="worksheet-format" >
                                                                            <option selected value="">-Worksheet Format- </option>
                                                                            <?php
                                                                            $worksheet = MWHtml::sel_math_assignments($filter['assignment-id']);
                                                                            foreach ($worksheet as $item):
                                                                                ?>
                                                                                <option value="<?php echo $item->id ?>"<?php echo $selected == $item->id ? ' selected' : '' ?>><?php echo $item->name ?></option>
                                                                            <?php endforeach ?>
                                                                        </select>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>

                                                    <div class="table-my-lesson">
                                                        <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                            <table class="table table-condensed table-subscription" >

                                                                <thead>

                                                                    <tr>
                                                                        <th class="table-img-icon" id="icon-option-math" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_option.png" class="" alt="option lesson" ></th>
                                                                <div class="hidden option-detail" id="option-detail-math">
                                                                    <p>Sort by</p>
                                                                    <ul>
                                                                        <li id="sort-alphabet-math">Alphabetical</li>
                                                                        <li id="sort-type-math">Type</li>
                                                                        <li id="sort-new-math">Newest</li>
                                                                        <li id="sort-old-math">Oldest</li>
                                                                    </ul>
                                                                </div>
                                                                <th style="width:20%;"><?php _e('Category', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                <th style="width: 55%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>

                                                                <th style="width: 15%;"></th>

                                                                </tr>

                                                                </thead>
                                                                <tbody id="table-math-worksheet">

                                                                </tbody>

                                                            </table>


                                                        </div>

                                                    </div>
                                                    <div id="pagination-result-math" class="pagination-result">

                                                    </div>


                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <!--end public library-->
                                <!--My Library-->
                                <div id="my-library" class="style-form tab-pane fade">  
                                    <h3>My Worksheet</h3>
                                    <div class="subscription">
                                        <p class="text-intro-tab">My Library are collections of worksheets, both yours and from the <span>Public Library</span>. Use these worksheets in your library to create a lesson. You can create your own worksheet using the worksheet tool.</p>
                                        <div class="library-lib">
                                            <hr style="border-top: 1px solid #8e8e8e;margin-bottom: 10px">
                                            <div class="lesson-detail2">
                                                <div class="border-selectall active" style="padding-bottom: 0;">
                                                    <div class="col-md-3 col-sm-6 col-xs-6 cb-type-lesson">
                                                        <label>
                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-mylibrary" value="" name="select-all-mylibrary"/>
                                                            <span style="padding-left: 18px">Select All</span>
                                                        </label>
                                                    </div>
                                                    <div class="col-md-3 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-assign form-control" name="my-library" id="search-my-lib"></span><?php _e('Search', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            <button id="btn-create-library" type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" name="create-lesson"></span><?php _e('Create Lesson', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3 col-sm-6 col-xs-6 nopadding-r">
                                                        <div class="form-group">
                                                            <button id="add-more-btn" type="submit" class="btn-gray btn-create-lesson form-control nopadding-r border-btn" name="create-lesson"></span><?php _e('Add more', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <div class="select-style open-search" id="open-search-my-lib" style="display:none;">
                                                        <div class="search-box">
                                                            <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                <div class="form-group">
                                                                    <input  id="search-tit-lib" name="filter[sheet-name]" class="form-control search-tit border-ras" placeholder="Search Title from Here...">
                                                                    <p class="link-clear">Clear</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                <div class="form-group">
                                                                    <button type="submit" class="btn-orange2 form-control border-ras" name="filter[search]" id="btn-search-my-lib"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="create-lesson-content hidden">
                                                    <div class="header-create-lesson">
                                                        <h4 class="title-create">Creating a Lesson<img id="close-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right"></h4>  
                                                    </div>
                                                    <div style="" class="col-md-6">

                                                        <h5 class="lesson-name">Lesson Name</h5>
                                                        <input class="form-control border-ras" value="" id="input-style">
                                                    </div>
                                                    <div class="col-md-3 border-ras select-style select-style36">
                                                        <h5 class="lesson-name">Test or Practice?</h5>
                                                        <form method="get">
                                                            <select class="select-box-it form-control arrow-stl" name="sl-class" id="select-type-lesson" data-selected="" >
                                                                <option selected disabled value="">-Select Type-</option>
                                                                <option value="T">Test</option>
                                                                <option value="P">Practice</option>
                                                            </select>
                                                        </form>
                                                    </div>
                                                    <div style="" class="border-ras col-md-3 select-style select-style36">
                                                        <h5 class="lesson-name">Type of the Lesson</h5>
                                                        <form method="get">
                                                            <select class="select-box-it form-control arrow-stl" name="sl-class" id="select-my-lib" data-selected="" >
                                                                <option id="option-mylib" value="1">English</option>

                                                            </select>
                                                        </form>
                                                    </div>
                                                    <div class=" col-nopadding" style="margin-top: 100px; width: 100%" >
                                                        <label for="about-class"><?php _e('Short description of the class', 'iii-dictionary') ?></label>
                                                        <div id="desc-mylibrary">
                                                            <?php
                                                            $editor_settings = array(
                                                                'wpautop' => false,
                                                                'media_buttons' => false,
                                                                'quicktags' => false,
                                                                'editor_height' => 81,
                                                                'textarea_rows' => 15,
                                                                'tinymce' => array(
                                                                    'toolbar1' => 'bold,italic,strikethrough,image,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,spellchecker,fullscreen,wp_adv'
                                                                )
                                                            );
                                                            ?>
                                                            <?php wp_editor('', 'post_mylibrary', $editor_settings); ?>
                                                            <div class="clear-both"></div>
                                                        </div>
                                                    </div>

                                                    <h5 class="lesson-name2">Confirm Worksheets</h5>
                                                    <table style="width: 100%;margin-bottom: 20px;" id="table-confirm-worksheet">


                                                    </table>
                                                    <button id="cancel-btn1" type="submit" class="btn-gray btn-create-lesson form-control nopadding-r border-btn" name="create-lesson"></span><?php _e('Cancel', 'iii-dictionary') ?></button>
                                                    <button id="create-btn1" type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-ras" name="create-lesson"></span><?php _e('Create Lesson', 'iii-dictionary') ?></button>
                                                </div>
                                                <div class="table-my-lesson active">
                                                    <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                        <table class="table table-condensed table-subscription" >

                                                            <thead>

                                                                <tr>
                                                                    <th class="table-img-icon" id="icon-option-library" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort" alt="option lesson" ></th>

                                                                    <th style="width: 20%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                    <th style="width: 55%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>

                                                                    <th style="width: 20%;"></th>

                                                                </tr>

                                                            </thead>
                                                            <tbody id="table-library">


                                                            </tbody>

                                                        </table>


                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div id="add-worksheet-mylib" class="hidden add-worksheet">
                                            <div class="">
                                                <div class="head-addws col-md-12">
                                                    <p class="lesson-icon" style="font-family:Myriad_regular;"><span>Add Lessons: </span> <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Right.png">My Library</p>
                                                    <div class="close-icon"> <img  id="icon-close-addws-lib"  aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png"></div>   
                                                </div>
                                                <div class="col-md-9">Where would you like to get worksheets from?</div>
                                                <div class="btn-add-ws col-md-3 nopadding-r" id="">
                                                    <button id="btn-add-ws-lib" type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" ></span><?php _e('Add', 'iii-dictionary') ?></button>
                                                </div>
                                                <div class="body-addws">

                                                    <div class="col-md-12 get-ws-choise">
                                                        <div class="get-ws-choise-icon"><img  id="icon-open-pub2"  aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png"></div>
                                                        <div class="get-ws-choise-text border-ras" id="from-pub2">From <span>Public Library</span></div>
                                                        <div class="clearfix"></div>
                                                        <div id="tab-public-lib2" class="tab-style from-public-lib2" style="display:none; margin-top: 10px !important;">
                                                            <ul class="nav nav-tabs">
                                                                <li class="active tab-subs-purchase" id="tab-public-lib-eng3"><a data-toggle="tab"  href="#tab-eng-lib3" id="eng-tab">English</a></li>
                                                                <li class="tab-subs-purchase" id="tab-public-lib-math3"><a data-toggle="tab"  href="#tab-math-lib3" id="math-tab">Math</a></li>
                                                            </ul>

                                                            <div class="tab-content">
                                                                <div id="tab-eng-lib3" class="tab-pane fade in active">
                                                                    <div class="border-selectall" style="border-top: none !important;">
                                                                        <div class="col-md-9 col-sm-12 col-xs-12 cb-type-lesson">
                                                                            <label>
                                                                                <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-eng3" value="" name="select-all"/>
                                                                                <span style="padding-left: 18px">Select All</span>
                                                                            </label>
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-6 col-xs-6">
                                                                            <div class="form-group">
                                                                                <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-open-search-eng3"></span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                            </div>
                                                                        </div>

                                                                        <div class="clearfix"></div>
                                                                        <div class="select-style open-search" id="open-search-eng3" style="display:none;">
                                                                            <div class="search-box">
                                                                                <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                                    <div class="form-group">
                                                                                        <input  id="search-tit-eng3" name="filter[sheet-name]" class="form-control search-tit border-ras" placeholder="Search Title from Here...">
                                                                                        <p class="link-clear">Clear</p>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                                    <div class="form-group">
                                                                                        <button type="submit" class="btn-orange2 form-control border-ras"  name="filter[search]" id="btn-search-eng3"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="select-box">


                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-left: 0px !important;">

                                                                                    <form method="get">
                                                                                        <?php MWHtml::select_grades('ENGLISH', $filter['grade'], array('first_option' => '- Subject -', 'class' => 'form-control', 'name' => 'filter[grade]', 'id' => 'grade-en3')) ?>

                                                                                    </form>
                                                                                </div>
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-right: 0px !important;">

                                                                                    <form method="get">
                                                                                        <?php MWHtml::sel_assignments($filter['assignment-id'], false, array(), '- Lesson -', 'filter[assignment-id]', 'form-control', 'filter-assignment-en3') ?>
                                                                                    </form>
                                                                                </div>
                                                                            </div>
                                                                            <div class="clearfix"></div>
                                                                        </div>
                                                                        <div class="clearfix"></div>
                                                                    </div>

                                                                    <div class="table-my-lesson">
                                                                        <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                                            <table class="table table-condensed table-subscription" >

                                                                                <thead>

                                                                                    <tr>
                                                                                        <th class="table-img-icon" id="icon-option-eng3" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_option.png" class="" alt="option lesson" ></th>
                                                                                <div class="hidden option-detail" id="option-detail-eng3">
                                                                                    <p>Sort by</p>
                                                                                    <ul>
                                                                                        <li id="sort-alphabet-eng">Alphabetical</li>
                                                                                        <li id="sort-type-eng">Type</li>
                                                                                        <li id="sort-new-eng">Newest</li>
                                                                                        <li id="sort-old-eng">Oldest</li>
                                                                                    </ul>
                                                                                </div>
                                                                                <th style="width:20%;"><?php _e('Level Category', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                                <th style="width: 45%;"><?php _e('Worksheet Name', 'iii-dictionary') ?></th>

                                                                                <th style="width: 15%;"><?php _e('Dictionary', 'iii-dictionary') ?></th>
                                                                                <th style="width: 15%;"></th>

                                                                                </tr>

                                                                                </thead>
                                                                                <tbody  class="table-eng-worksheet">



                                                                                </tbody>

                                                                            </table>


                                                                        </div>

                                                                    </div>
                                                                    <div id="pagination-result3" class="pagination-result">

                                                                    </div>

                                                                </div>
                                                                <div id="tab-math-lib3" class="tab-pane fade">
                                                                    <div class="border-selectall" style="border-top: none !important;">
                                                                        <div class="col-md-9 col-sm-12 col-xs-12 cb-type-lesson">
                                                                            <label>
                                                                                <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-math3" value="" name="select-all"/>
                                                                                <span style="padding-left: 18px">Select All</span>
                                                                            </label>
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-6 col-xs-6">
                                                                            <div class="form-group">
                                                                                <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-open-search3"></span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                            </div>
                                                                        </div>

                                                                        <div class="clearfix"></div>
                                                                        <div class="select-style open-search" id="open-search-math3" style="display:none;">
                                                                            <div class="search-box">
                                                                                <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                                    <div class="form-group">
                                                                                        <input  id="filter-sheet-name3" name="filter[sheet-name]" class="form-control search-tit border-ras" placeholder="Search Title from Here...">
                                                                                        <p class="link-clear">Clear</p>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                                    <div class="form-group">
                                                                                        <button type="submit" class="btn-orange2 form-control border-ras" name="filter[search]" id="btn-search-math3"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="select-box">
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                                                    <form method="get">
                                                                                        <select class="select-box-it form-control" name="filter[cat-level]" id="filter-level-categories3">
                                                                                            <option selected value="">-Category-</option>

                                                                                        </select>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-right: 0px !important;">
                                                                                    <form method="get">
                                                                                        <select class="select-box-it form-control" name="filter[level]" id="filter-levels3" data-selected="<?php echo $filter['level'] ?>" >
                                                                                            <option selected value="" >-Subject-</option>

                                                                                        </select>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                                                    <form method="get">
                                                                                        <select class="select-box-it form-control" id="filter-sublevels3" name="filter[sublevel]" data-selected="<?php echo $filter['sublevel'] ?>">
                                                                                            <option selected value="" >-Lesson-</option>

                                                                                        </select>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="col-md-6 col-sm-6 col-xs-12 border-ras" style="padding-right: 0px !important;">
                                                                                    <form method="get">
                                                                                        <select class="select-box-it form-control" name="worksheet-format" id="worksheet-format3" >
                                                                                            <option selected value="">-Worksheet Format- </option>
                                                                                            <?php
                                                                                            $worksheet = MWHtml::sel_math_assignments($filter['assignment-id']);
                                                                                            foreach ($worksheet as $item):
                                                                                                ?>
                                                                                                <option value="<?php echo $item->id ?>"<?php echo $selected == $item->id ? ' selected' : '' ?>><?php echo $item->name ?></option>
                                                                                            <?php endforeach ?>
                                                                                        </select>
                                                                                    </form>
                                                                                </div>
                                                                            </div>
                                                                            <div class="clearfix"></div>
                                                                        </div>

                                                                        <div class="clearfix"></div>
                                                                    </div>

                                                                    <div class="table-my-lesson">
                                                                        <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                                            <table class="table table-condensed table-subscription" >

                                                                                <thead>

                                                                                    <tr>
                                                                                        <th class="table-img-icon" id="icon-option-math3" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_option.png" class="" alt="option lesson" ></th>
                                                                                <div class="hidden option-detail" id="option-detail-math3">
                                                                                    <p>Sort by</p>
                                                                                    <ul>
                                                                                        <li id="sort-alphabet-math">Alphabetical</li>
                                                                                        <li id="sort-type-math">Type</li>
                                                                                        <li id="sort-new-math">Newest</li>
                                                                                        <li id="sort-old-math">Oldest</li>
                                                                                    </ul>
                                                                                </div>
                                                                                <th style="width:20%;"><?php _e('Level Category', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                                <th style="width: 55%;"><?php _e('Worksheet Name', 'iii-dictionary') ?></th>

                                                                                <th style="width: 15%;"></th>

                                                                                </tr>

                                                                                </thead>
                                                                                <tbody  class="table-math-worksheet">

                                                                                </tbody>

                                                                            </table>


                                                                        </div>

                                                                    </div>
                                                                    <div id="pagination-result-math3" class="pagination-result">

                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end of My Library-->

                                <!--Public lesson-->
                                <div id="ready-lesson" class="style-form tab-pane fade">  
                                    <h3>Public Subjects and Lessons</h3>
                                    <div class="subscription">
                                        <p class="text-intro-tab">Public lessons in the list below are available for offering to your class. They have a subscription price that the student needs to pay when a student joins your class. If you wish to make your class free to your students, do not include it in your lesson content.</p>
                                        <div id="tab-public-les" class="tab-style1">
                                            <ul class="nav nav-tabs">
                                                <li class="active tab-pub-les refresh-public-lesson" id="tab-public-les-cri"><a data-toggle="tab"  href="#tab-cri-les" id="cri-tab">Critical Lesson</a></li>
                                                <li class="tab-pub-les" id="tab-public-les-ess"><a data-toggle="tab"  href="#tab-ess-les" id="ess-tab">Essentials</a></li>
                                                <li class="tab-pub-les" id="tab-public-les-sat"><a data-toggle="tab"  href="#tab-sat-les" id="sat-tab">SAT</a></li>
                                                <li class="tab-pub-les" id="tab-public-les-cou"><a data-toggle="tab"  href="#tab-cou-les" id="cou-tab">Courses</a></li>
                                            </ul>
                                        </div>
                                        <div class="eng-math-les active" id="eng-math">
                                            <div class="col-md-1" style="padding-left: 0px !important;">
                                                <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_curve_arrow.png" class="" alt="" id="sub-menu-pub-les">
                                            </div>
                                            <ul class="sub-menu-public">
                                                <li class="col-md-1 cri-eng-math active" id="menu-eng">
                                                    <a data-toggle="tab" class="sub-menu-title" id="eng-menu">English</a>
                                                </li>
                                                <li class="col-md-1 cri-eng-math" id="menu-math">
                                                    <a data-toggle="tab" class="sub-menu-title" id="math-menu">Math</a>
                                                </li>

                                                <div class="clearfix"></div>
                                            </ul>
                                        </div>
                                        <div class="eng-math-les hidden" id="dic-sel-stu">
                                            <div class="col-md-1" style="padding-left: 0px !important;">
                                                <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_curve_arrow.png" class="" alt="" id="sub-menu-dic-sel">
                                            </div>
                                            <ul class="sub-menu-public">
                                                <li class="col-md-2 cri-eng-math active" id="dict">
                                                    <a data-toggle="tab" class="sub-menu-title" id="dictionary-menu">Dictionary</a>
                                                </li>
                                                <li class="col-md-2 cri-eng-math" id="self-study">
                                                    <a data-toggle="tab" class="sub-menu-title" id="self-study-menu">Self-study</a>
                                                </li>
                                                <div class="clearfix"></div>
                                            </ul>
                                        </div>
                                        <div class="eng-math-les hidden" id="sat">
                                            <div class="col-md-1" style="padding-left: 0px !important;">
                                                <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_curve_arrow.png" class="" alt="" id="sub-menu-sat">
                                            </div>
                                            <ul class="sub-menu-public">
                                                <li class="col-md-1 cri-eng-math active" id="sat-eng">
                                                    <a data-toggle="tab" class="sub-menu-title" id="eng-sat">English</a>
                                                </li>
                                                <li class="col-md-1 cri-eng-math" id="sat-math">
                                                    <a data-toggle="tab" class="sub-menu-title" id="math-sat">Math</a>
                                                </li>
                                                <div class="clearfix"></div>
                                            </ul>
                                        </div>
                                        <div class="eng-math-les hidden" id="courses">
                                            <div class="col-md-1" style="padding-left: 0px !important;">
                                                <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_curve_arrow.png" class="" alt="" id="sub-menu-sat">
                                            </div>
                                            <ul class="sub-menu-public">
                                                <li class="cri-eng-math active">
                                                    <a data-toggle="tab" class="sub-menu-title" id="course-menu">ikMath Course</a>
                                                </li>

                                                <div class="clearfix"></div>
                                            </ul>
                                        </div>
                                        <div id="eng-public" class="active set-hide-tab">
                                            <div class="border-selectall">
                                                <div class="col-md-5 col-sm-12 col-xs-12 cb-type-lesson">
                                                    <label>
                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-ready-eng" value="" name="select-all-eng"/>
                                                        <span style="padding-left: 18px">Select All</span>
                                                    </label>
                                                </div>
                                                <div class="col-md-4 col-sm-3 col-xs-3" style="padding-right: 0px !important">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-ready-lesson-down form-control" name="ready-lesson-down" id="btn-ready-eng-down"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                        <button type="submit" class="btn-ready-lesson-up form-control hidden" name="ready-lesson-up" id="btn-ready-eng-up"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                    </div>           
                                                </div>
                                                <div class="col-md-3 col-sm-6 col-xs-6 nopadding-r">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-orange btn-create-lesson form-control nopadding-r save-to-lesson border-btn" data-id="critical lesson" name="create-lesson"></span><?php _e('Save to My Lesson', 'iii-dictionary') ?></button>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>

                                                <div class="select-style" id="open-search-ready-eng">
                                                    <div class="search-box">
                                                        <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                            <div class="form-group">
                                                                <input  id="search-ready-les-eng" name="search-ready-les" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                <p class="link-clear">Clear</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-ready" id="search-ready-btn-eng"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </div>
                                                    <div class="col-md-9 col-sm-9 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                        <form method="get">
                                                            <select class="select-box-it form-control " name="sl-class" id="select-lesson-eng" >
                                                                <option selected value="1">- Select a Class to Assign -</option>
                                                                <option value="2" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                <option value="3" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                <option value="4" >Intermediate Algebra Math Class - Middle to High School</option>
                                                            </select>
                                                        </form>
                                                    </div>
                                                    <div class="col-md-3 col-sm-3 col-xs-12" style="padding-right: 0px !important;">
                                                        <div class="form-group">
                                                            <button type="submit" id="assign-btn-eng" class="btn-orange2 form-control nopadding-r border-ras" name="assign-now"></span><?php _e('Assign Now', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>

                                                    <div class="clearfix"></div>      
                                                </div>
                                            </div>
                                            <div class="table-my-lesson">
                                                <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                    <table class="table table-condensed table-subscription" >
                                                        <thead>
                                                            <tr>
                                                                <th class="table-img-icon" id="icon-option-ready-eng" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-eng" alt="option lesson" ></th>
                                                                <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                <th style="width: 83%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>
                                                                <th style="width: 7%;"><?php _e('Price', 'iii-dictionary') ?></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="table-ready-lesson-eng">

                                                        </tbody>

                                                    </table>


                                                </div>

                                            </div>
                                        </div>

                                        <div id="dict-public" class="hidden set-hide-tab">
                                            <div class="border-selectall">
                                                <div class="col-md-5 col-sm-12 col-xs-12 cb-type-lesson">
                                                    <label>
                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-dict" value="" name="select-all-dictionary"/>
                                                        <span style="padding-left: 18px">Select All</span>
                                                    </label>
                                                </div>
                                                <div class="col-md-4 col-sm-3 col-xs-3" style="padding-right: 0px !important">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-ready-lesson-down form-control" name="dict-down" id="btn-dict-down"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                        <button type="submit" class="btn-ready-lesson-up form-control hidden" name="dict-up" id="btn-dict-up"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                    </div>           
                                                </div>
                                                <div class="col-md-3 col-sm-6 col-xs-6 nopadding-r">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-orange btn-create-lesson form-control nopadding-r save-to-lesson border-btn" data-id="essential" name="create-lesson"></span><?php _e('Save to My Lesson', 'iii-dictionary') ?></button>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                                <div class="select-style" id="open-search-dictionary">
                                                    <div class="search-box">
                                                        <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                            <div class="form-group">
                                                                <input  id="text-search-essential" name="search-ready-les" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                <p class="link-clear">Clear</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-ready" id="search-essential-btn"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </div>
                                                    <div class="col-md-9 col-sm-9 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                        <form method="get">
                                                            <select class="select-box-it form-control" name="sl-class" id="select-dict" >
                                                                <option selected value="1">- Select a Class to Assign -</option>
                                                                <option value="2" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                <option value="3" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                <option value="4" >Intermediate Algebra Math Class - Middle to High School</option>
                                                            </select>
                                                        </form>
                                                    </div>
                                                    <div class="col-md-3 col-sm-3 col-xs-12" style="padding-right: 0px !important;">
                                                        <div class="form-group">
                                                            <button type="submit" id="assign-dict-btn" class="btn-orange2 form-control nopadding-r border-ras" name="assign-now"></span><?php _e('Assign Now', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>

                                                    <div class="clearfix"></div>      
                                                </div>
                                            </div>
                                            <div class="table-my-lesson">
                                                <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                    <table class="table table-condensed table-subscription" >
                                                        <thead>
                                                            <tr>
                                                                <th class="table-img-icon" id="icon-option-essential" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-dict" alt="option lesson" ></th>
                                                                <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                <th style="width: 83%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>
                                                                <th style="width: 7%;"><?php _e('Price', 'iii-dictionary') ?></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="table-dict">

                                                        </tbody>

                                                    </table>


                                                </div>

                                            </div>
                                        </div>
                                        <div id="sat-public" class="hidden set-hide-tab">
                                            <div class="border-selectall">
                                                <div class="col-md-5 col-sm-12 col-xs-12 cb-type-lesson">
                                                    <label>
                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-sat" value="" name="select-all-sat"/>
                                                        <span style="padding-left: 18px">Select All</span>
                                                    </label>
                                                </div>
                                                <div class="col-md-4 col-sm-3 col-xs-3" style="padding-right: 0px !important">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-ready-lesson-down form-control" name="ready-lesson-down" id="btn-sat-down"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                    </div>           
                                                </div>
                                                <div class="col-md-3 col-sm-6 col-xs-6 nopadding-r">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-orange btn-create-lesson form-control nopadding-r save-to-lesson border-btn" data-id="sat" name="create-lesson"></span><?php _e('Save to My Lesson', 'iii-dictionary') ?></button>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>

                                                <div class="select-style" id="open-search-sat">
                                                    <div class="search-box">
                                                        <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                            <div class="form-group">
                                                                <input  id="search-sat" name="search-sat" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                <p class="link-clear">Clear</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-ready" id="search-sat-btn"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </div>
                                                    <div class="col-md-9 col-sm-9 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                        <form method="get">
                                                            <select class="select-box-it form-control" name="sl-class" id="select-sat" >
                                                                <option selected value="1">- Select a Class to Assign -</option>
                                                                <option value="2" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                <option value="3" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                <option value="4" >Intermediate Algebra Math Class - Middle to High School</option>
                                                            </select>
                                                        </form>
                                                    </div>
                                                    <div class="col-md-3 col-sm-3 col-xs-12" style="padding-right: 0px !important;">
                                                        <div class="form-group">
                                                            <button type="submit" id="assign-btn-sat" class="btn-orange2 form-control nopadding-r border-ras" name="assign-now"></span><?php _e('Assign Now', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>

                                                    <div class="clearfix"></div>      
                                                </div>
                                            </div>
                                            <div class="table-my-lesson">
                                                <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                    <table class="table table-condensed table-subscription" >
                                                        <thead>
                                                            <tr>
                                                                <th class="table-img-icon" id="icon-option-sat" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-sat" alt="option lesson" ></th>
                                                                <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                <th style="width: 83%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>
                                                                <th style="width: 7%;"><?php _e('Price', 'iii-dictionary') ?></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="table-sat">

                                                        </tbody>

                                                    </table>


                                                </div>

                                            </div>
                                        </div>
                                        <div id="course-public" class="hidden set-hide-tab">
                                            <div class="border-selectall">
                                                <div class="col-md-5 col-sm-12 col-xs-12 cb-type-lesson">
                                                    <label>
                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-course" value="" name="select-all-course"/>
                                                        <span style="padding-left: 18px">Select All</span>
                                                    </label>
                                                </div>
                                                <div class="col-md-4 col-sm-3 col-xs-3" style="padding-right: 0px !important">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-ready-lesson-down form-control" name="ready-lesson-down" id="btn-course-down"></span><?php _e('Search & Assign Lesson', 'iii-dictionary') ?></button>
                                                    </div>           
                                                </div>
                                                <div class="col-md-3 col-sm-6 col-xs-6 nopadding-r">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-orange btn-create-lesson form-control nopadding-r save-to-lesson border-btn" data-id="courses" name="create-lesson"></span><?php _e('Save to My Subject', 'iii-dictionary') ?></button>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>

                                                <div class="select-style" id="open-search-course">
                                                    <div class="search-box">
                                                        <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                            <div class="form-group">
                                                                <input  id="search-course" name="search-sat" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                <p class="link-clear">Clear</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                            <div class="form-group">
                                                                <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-ready" id="search-course-btn"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                    <div class="col-md-9 col-sm-9 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                        <form method="get">
                                                            <select class="select-box-it form-control" name="sl-class" id="select-class-course" >
                                                                <option selected value="1">- Select a Class to Assign -</option>
                                                                <option value="2" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                <option value="3" >Intermediate Algebra Math Class - Middle to High School</option>
                                                                <option value="4" >Intermediate Algebra Math Class - Middle to High School</option>
                                                            </select>
                                                        </form>
                                                    </div>
                                                    <div class="col-md-3 col-sm-3 col-xs-12" style="padding-right: 0px !important;">
                                                        <div class="form-group">
                                                            <button type="submit" id="assign-btn-course" class="btn-orange2 form-control nopadding-r border-ras" name="assign-now"></span><?php _e('Assign Now', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>

                                                    <div class="clearfix"></div>      
                                                </div>
                                            </div>
                                            <div class="table-my-lesson">
                                                <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                    <table class="table table-condensed table-subscription" >
                                                        <thead>
                                                            <tr>
                                                                <th class="table-img-icon" id="icon-option-course" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-course" alt="option lesson" ></th>
                                                                <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                <th style="width: 83%;"><?php _e('Worksheet', 'iii-dictionary') ?></th>
                                                                <th style="width: 7%;"><?php _e('Price', 'iii-dictionary') ?></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="table-course">

                                                        </tbody>

                                                    </table>


                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!--create class-->
                                <div id="create-class" class="style-form tab-pane fade">  
                                    <h3 class="clearfix">
                                        Create Class <span id="class-overview">overview</span>
                                    </h3>
                                    <div class="subscription">
                                        
                                        <div class="col-md-12 title-bars-stl clearfix">
                                            <div class="col-sm-11 col-md-11">
                                                <span class="arrow-explain-class">Explain Class to Your Students</span>
                                                <img class="icon-more-info" data-type="explain-class" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MoreInfo.png">
                                            </div>
                                            <div class="col-sm-1 col-md-1 arrow-explain-class"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>
                                        </div>
                                        <div class="explain-class">

                                            <div class="col-sm-6 col-md-6 col-nopadding">
                                                <div class="form-group">                           
                                                    <input type="text" class="form-control border-ras clear-text" id="group-name2" name="group-name" value="<?php echo $gname ?>" placeholder="Class Name...">
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-md-6 col-nopadding border-ras select-style" style="padding-left: 0px !important; margin-top: 0; margin-bottom: 24px;">
                                                <form method="get">
                                                    <select class="select-box-it form-control arrow-stl" name="sl-class" id="select-type-explain-class" >
                                                        <option selected value="1">Type of Class</option>
                                                    </select>
                                                </form>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-nopadding" style="margin-bottom: 24px;" >                                   
                                                <div id="desc-class2">
                                                    <span class="editor-top-left"></span>
                                                    <span class="editor-top-right"></span>
                                                    <span class="editor-bottom-left"></span>
                                                    <span class="editor-bottom-right"></span>
                                                    <?php
                                                    $editor_settings = array(
                                                        'wpautop' => false,
                                                        'media_buttons' => false,
                                                        'quicktags' => false,
                                                        'editor_height' => 50,
                                                        'textarea_rows' => 3,
                                                        'tinymce' => array(
                                                            'toolbar1' => 'bold,italic,strikethrough,image,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,spellchecker,fullscreen,wp_adv'
                                                        )
                                                    );
                                                    ?>
                                                    <?php wp_editor('', 'post_message2', $editor_settings); ?>
                                                    <div class="clear-both"></div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="form-group">
                                                <div class="usepass">
                                                    <div class="col-sm-5 col-md-5 col-nopadding label-checkbox">
                                                        <input type="text" class="form-control border-ras clear-text" id="type-password2" name="type-password" value="<?php echo $gpass ?>" placeholder="Set password for your class...">
                                                    </div>
                                                    <div class="col-sm-6 col-md-6 col-nopadding label-checkbox ">
                                                        <input type="text" class="form-control border-ras clear-text" id="retype-password2" name="retypepassword" placeholder="Retype Password..." value="<?php echo $gpass ?>">
                                                    </div>
                                                </div>

                                                <div class="col-sm-1 col-md-1 toggle-btn">

                                                    <input type="checkbox" name="cbyesno" id="cbyesno" class="hidden" checked>
                                                    <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png" alt="Toggle_on" onclick="document.getElementById('cbyesno').click();">
                                                </div>
                                            </div>
                                            <div style="clear: both;"></div>   
                                        </div>
                                        
                                        <div class="col-md-12 title-bars-stl clearfix" style="margin-bottom: 20px; margin-top: 12px;">
                                            <div class="col-sm-11 col-md-11">
                                                <span class="arrow-add-sub-lesson">Class Assignments</span>
                                                <img class="icon-more-info" data-type="class-assignment" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MoreInfo.png">
                                            </div>
                                            <div class="col-sm-1 col-md-1 arrow-add-sub-lesson"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>
                                        </div>

                                        <!--detail-->
                                        <div  class="add-sub-lesson">
                                            <div class="col-md-12 color-4b" style="margin-bottom: 21px;">Create Sets of Main and/or Prerequisite Assignments</div>           
                                            <div class="btn-add-ws col-sm-6 col-md-6 nopadding-r" id="">
                                                <button id="btn-add-prerequisite"  type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn btn-prerequisite"></span><?php _e('Add to Prerequisite', 'iii-dictionary') ?></button>
                                            </div>
                                            <div class="btn-add-ws col-sm-6 col-md-6 nopadding-r" id="">
                                                <button id="btn-add-list" type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" ></span><?php _e('Add to Main', 'iii-dictionary') ?></button>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="body-addws">
                                                <div class="get-ws-choise col-md-12">
                                                    <div class="get-ws-choise-icon"><img id="icon-open-from-lesson"  aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png"></div>
                                                    <div class="get-ws-choise-text border-btn" id="from-my-lesson">From <span>My Lesson</span></div>
                                                    <div class="clearfix"></div>
                                                    <div class="lesson-detail-sub" style="display:none;">
                                                        <div class="border-selectall" style="border-top:none !important;">
                                                            <div class="col-md-10 col-sm-12 col-xs-12 cb-type-lesson">
                                                                <label>
                                                                    <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-less5" value="" name="select-all-lesson"/>
                                                                    <span style="padding-left: 18px">Select All</span>
                                                                </label>
                                                            </div>
                                                            <div class="col-md-2 col-sm-2 col-xs-12 search-assign">
                                                                <div class="form-group">
                                                                    <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-assign-lesson-down"><?php _e('Search', 'iii-dictionary') ?></button>
                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                            <div class="select-style open-search" id="select-assign-lesson">
                                                                <div class="search-box">
                                                                    <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                        <div class="form-group">
                                                                            <input  id="search-lesson2" name="search-lesson" class="form-control search-tit  border-ras" placeholder="Type here...">
                                                                            <p class="link-clear">Clear</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                        <div class="form-group">
                                                                            <button type="submit" class="btn-orange2 form-control border-btn" name="btn-search-lesson" id="search-btn-lesson"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="clearfix"></div>
                                                                </div>


                                                                <div class="clearfix"></div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>

                                                        <div class="table-my-lesson active">
                                                            <div style="max-height: 393px; overflow-y: auto; overflow-x:hidden;">

                                                                <table class="table table-condensed table-subscription" >

                                                                    <thead>

                                                                        <tr>
                                                                            <th class="table-img-icon" id="icon-option-less3" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-lesson3" alt="option lesson" ></th>
                                                                            <th style="width: 8%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                            <th style="width: 87%;"><?php _e('Name', 'iii-dictionary') ?></th>
                                                                        </tr>

                                                                    </thead>
                                                                    <tbody id="table-less3">


                                                                    </tbody>

                                                                </table>


                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="get-ws-choise col-md-12 border-bottom" style="padding-bottom: 16px!important;">
                                                    <div class="get-ws-choise-icon"><img id="icon-add-sub"  aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png"></div>
                                                    <div class="get-ws-choise-text border-btn" id="from-my-subject">From <span>My Subject</span></div>
                                                    <div class="clearfix"></div>
                                                    <div class="sub-detail" style="display:none;">
                                                        <div class="border-selectall" style="border-top:none !important;">
                                                            <div class="col-md-10 col-sm-12 col-xs-12 cb-type-lesson">
                                                                <label>
                                                                    <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-add-sub" value="" name="select-all-lesson"/>
                                                                    <span style="padding-left: 18px">Select All</span>
                                                                </label>
                                                            </div>
                                                            <div class="col-md-2 col-sm-2 col-xs-12 search-assign">
                                                                <div class="form-group">
                                                                    <button type="submit" class="btn-assign form-control" name="assign-lesson" id="search-add-sub"><?php _e('Search', 'iii-dictionary') ?></button>

                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                            <div class="select-style open-search" id="select-assign-sub2">
                                                                <div class="search-box">
                                                                    <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                        <div class="form-group">
                                                                            <input  id="val-search-subject" name="search-lesson" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                            <p class="link-clear">Clear</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                        <div class="form-group">
                                                                            <button type="submit" class="btn-orange2 form-control border-btn" name="btn-search-lesson" id="search-btn-subject2"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="clearfix"></div>
                                                                </div>

                                                                <div class="clearfix"></div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>

                                                        <div class="table-my-lesson active">
                                                            <div style="max-height: 393px; overflow-y: auto; overflow-x:hidden;">

                                                                <table class="table table-condensed table-subscription" >

                                                                    <thead>

                                                                        <tr>
                                                                            <th class="table-img-icon" id="icon-option-subject2" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-subject2" alt="option lesson" ></th>
                                                                            <th style="width: 8%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                            <th style="width: 87%;"><?php _e('Name', 'iii-dictionary') ?></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody id="table-sub">

                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>

                                            </div>
                                            <div class="table-prerequisite">
                                                <div class="color-4b col-md-12 no-padding" style="margin:18px 0px 20px;">Set of Prerequisite Assignments</div>
                                                <div class="col-md-12 no-padding" style="max-height: 328px; overflow-y: auto; overflow-x:hidden; position: relative;">
                                                    <table class="table table-condensed table-subscription table-sub-less-prerequisite" >
                                                        <tr>
                                                            <td style="width:5%; padding-left: 30px!important;border: 0;" class="table-img-icon">
                                                                <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_No_Assignment.png" class="" alt="lesson" >
                                                            </td>
                                                            <td class="currently-no-assignments" style="border: 0;">Currently, there are no Assignments</td>
                                                            <td style="width:5%; border: 0;" class="table-img-icon">
                                                                
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <button type="button" id="btn-open-detail-pra" class="btn-open-detail">
                                                        <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_OPEN-CLOSE_Open.png" style="width: 20px;">
                                                    </button>
                                                    <table class="table table-condensed table-subscription table-sub-less-prerequisite-ass" >
                                                        
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="table-noprerequisite">
                                                <div class="color-4b col-md-12 no-padding" style="margin:20px 0px;">Set of Main Assignments</div>
                                                <div class="col-md-12 no-padding" style="max-height: 328px; overflow-y: auto; overflow-x:hidden; position: relative;">
                                                    <table class="table table-condensed table-subscription table-sub-less" >
                                                        <tr>
                                                            <td style="width:5%; padding-left: 30px!important; border: 0;" class="table-img-icon">
                                                                <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_No_Assignment.png" class="" alt="lesson" >
                                                            </td>
                                                            <td class="currently-no-assignments" style="border: 0;">Currently, there are no Assignments</td>
                                                            <td style="width:5%; border: 0;" class="table-img-icon">
                                                                
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <button type="button" id="btn-open-detail-npra" class="btn-open-detail">
                                                        <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_OPEN-CLOSE_Open.png" style="width: 20px;">
                                                    </button>
                                                    <table class="table table-condensed table-subscription table-sub-less-ass" >                                                        
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="clearfix"></div>
                                        <div class="col-md-12 title-bars-stl clearfix margin-tutoring">
                                            <div class="col-sm-11 col-md-11">
                                                <span class="arrow-tutoring-class">Tutoring</span>
                                                <img class="icon-more-info" data-type="tutoring" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MoreInfo.png">
                                            </div>
                                            <div class="col-sm-1 col-md-1 arrow-tutoring-class"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>

                                        </div>
                                        <!--detail-->
                                        <div id="detail-tutoring2" class="detail-tutoring">
                                            <div class="option-tutoring2">
                                                <div class="col-md-12">
                                                    <h4>English Writing</h4>
                                                </div>
                                                <div class="col-sm-9 col-md-9">
                                                    <input type="text" name="add-eng-writing" class="form-control border-ras set-disable add-subject-tutor clear-text" readonly id="add-eng-writing" placeholder="Additional Info">
                                                </div>
                                                <div class="col-sm-2 col-md-2 nopadding-r unit-position">
                                                    <div class="toggle-btn">
                                                        <div class="charse">
                                                            <input type="number" name="price-eng-writing" class="form-control border-ras price_subject set-disable clear-text" readonly id="price-eng-writing" placeholder="Per Minute">
                                                            <span class="unit">$</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 unit-check">
                                                    <input type="checkbox" name="cbcharse-engskill" id="cbcharse-engskill" class="hidden check-toggle" value="1">
                                                    <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-engskill').click();">
                                                </div>
                                                <div class="clear-both"></div>

                                            </div>
                                            <div class="option-tutoring2">
                                                <div class="col-md-12">
                                                    <h4>English Conversation Practice</h4>
                                                </div>
                                                <div class="col-sm-9 col-md-9">
                                                    <input type="text" name="add-eng-conver" class="form-control border-ras set-disable add-subject-tutor clear-text" readonly id="add-eng-conver" placeholder="Additional Info">
                                                </div>
                                                <div class="col-sm-2 col-md-2 nopadding-r unit-position">
                                                    <div class="toggle-btn">
                                                        <div class="charse">
                                                            <input type="number" name="price-eng-conver" class="form-control border-ras set-disable price_subject" id="price-eng-conversation" readonly placeholder="Per Minute">
                                                            <span class="unit">$</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1 col-md-1 unit-check">                   
                                                    <input type="checkbox" name="cbcharse-engprac" id="cbcharse-engprac" class="hidden check-toggle" value="2">
                                                    <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-engprac').click();">
                                                </div>
                                                <div class="clear-both"></div>

                                            </div>
                                            <div class="option-tutoring2">
                                                <div class="col-md-12">
                                                    <h4>Custom English Subject</h4>
                                                </div>
                                                <div class="col-sm-9 col-md-9">
                                                    <input type="text" name="writing-sub" class="form-control border-ras set-disable add-subject-tutor clear-text" readonly id="general-eng" placeholder="Additional Info">
                                                </div>

                                                <div class="col-sm-2 col-md-2 nopadding-r unit-position">
                                                    <div class="toggle-btn">
                                                        <div class="charse">
                                                            <input type="number" class="form-control border-ras set-disable price_subject" name="price-eng-conver" id="price-eng" readonly placeholder="Per Minute">
                                                            <span class="unit">$</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1 col-md-1 unit-check">                   
                                                    <input type="checkbox" name="cbcharse-engprac" id="cbcharse-generaleng" class="hidden check-toggle" value="3">
                                                    <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-generaleng').click();">
                                                </div>
                                                <div class="clear-both"></div>

                                            </div>
                                            <div class="option-tutoring2">
                                                <div class="col-md-12">
                                                    <h4>Math <span>(Up to Elementary School)</span></h4>
                                                </div>
                                                <div class="col-sm-9 col-md-9">
                                                    <input type="text" name="add-math" class="form-control border-ras set-disable add-subject-tutor clear-text" readonly id="add-math" placeholder="Additional Info">
                                                </div>
                                                <div class="col-sm-2 col-md-2 nopadding-r unit-position">
                                                    <div class="toggle-btn">
                                                        <div class="charse">
                                                            <input type="number" class="form-control border-ras set-disable price_subject clear-text" name="price-math" id="price-math" readonly placeholder="Per Minute">
                                                            <span class="unit">$</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1 col-md-1 unit-check">                   
                                                    <input type="checkbox" name="cbcharse-mathelement" id="cbcharse-mathelement" class="hidden check-toggle" value="4">
                                                    <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-mathelement').click();">
                                                </div>
                                                <div class="clear-both"></div>
                                            </div>
                                            <div class="option-tutoring2">
                                                <div class="col-md-12">
                                                    <h4>Math <span>(Any Level)</span></h4>
                                                </div>
                                                <div class="col-sm-9 col-md-9">
                                                    <input type="text" name="add-math-level" class="form-control border-ras set-disable add-subject-tutor clear-text" readonly id="add-math-level" placeholder="Additional Info">
                                                </div>
                                                <div class="col-sm-2 col-md-2 nopadding-r unit-position">
                                                    <div class="toggle-btn">
                                                        <div class="charse">
                                                            <input type="number" name="price-math-level" class="form-control border-ras set-disable price_subject" id="price-math-level" readonly placeholder="Per Minute">
                                                            <span class="unit">$</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1 col-md-1 unit-check">                   
                                                    <input type="checkbox" name="cbcharse-mathlevel" id="cbcharse-mathlevel" class="hidden check-toggle" value="5">
                                                    <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-mathlevel').click();">
                                                </div>
                                                <div class="clear-both"></div>
                                            </div>
                                            <div class="option-tutoring2">
                                                <div class="col-md-12">
                                                    <h4>Custom Math Subject</h4>
                                                </div>
                                                <div class="col-sm-9 col-md-9">
                                                    <input type="text" name="general-math" class="form-control border-ras set-disable add-subject-tutor clear-text" readonly id="general-math" placeholder="Additional Info">
                                                </div>
                                                <div class="col-sm-2 col-md-2 nopadding-r unit-position">
                                                    <div class="toggle-btn">
                                                        <div class="charse">
                                                            <input type="number" name="price-eng-conver" class="form-control border-ras set-disable price_subject" id="price-math-general" readonly placeholder="Per Minute">
                                                            <span class="unit">$</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1 col-md-1 unit-check">
                                                    <input type="checkbox" name="cbcharse-engprac" id="cbcharse-generalmath" class="hidden check-toggle" value="6">
                                                    <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-generalmath').click();">
                                                </div>
                                                <div class="clear-both"></div>

                                            </div>

                                        </div><!--end detail-->
                                        <div class="btn-class">
                                            <div class="col-sm-6 col-md-6 nopadding-l" >
                                                <button id="btn-create-class" type="submit" class="btn-orange btn-create-class form-control border-btn" name="create-class">Create a new class now</button>
                                            </div>
                                            <div class="col-sm-6 col-md-6 nopadding-r">
                                                <button  type="submit" class="btn-gray btn-create-class form-control border-btn" name="btn-cancel" id="cancel-create">Cancel</button>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                </div>
                                <!--end of create class-->
                                <!--manage class-->
                                <div id="manage-class" class="style-form tab-pane fade">
                                    <h3 class="title-manage-class">Manage Class</h3>
                                    <div class="subscription manage-class">
                                        <div class="about-manageclass">
                                            <div class="sub-tit">

                                                <p class="text-used">
                                                    All the created classes can be edited from this page. Once at the edit page, you should be able to do things like: class description, class title, setting up prices, add/remove lessons and subjects, offer tutoring, edit passwords, post/send messages, view student’s activities, and grade. 
                                                </p>
                                                <ul class="text-percent">
                                                    <li>Edit Class Information such as Name, Descriptions and Passwords</li>
                                                    <li>Add or Remove offerings like lessons,subjects, and tutoring</li>
                                                    <li>Monitor Student’s Activities such as Progress, and Post Messages</li>
                                                    <li>Opportunity to Earn Money by Grading, Lessons, and Tutoring </li>

                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-md-12 title-bars-stl">
                                            <div class="col-md-11 arrow-class-created">Classes Created</div>
                                            <div class="col-md-1 arrow-class-created"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="class-created">
                                            <div id="tab-class-created" class="tab-style1">
                                                <ul class="nav nav-tabs">
                                                    <li class="active tab-pub-les refresh-public-lesson" id="tab-class-created-all"><a data-toggle="tab"  href="#class-created">All</a></li>
                                                    <li class="tab-pub-les" id="tab-class-created-eng"><a data-toggle="tab"  href="#class-created" id="class-created-eng">English</a></li>
                                                    <li class="tab-pub-les" id="tab-class-created-math"><a data-toggle="tab"  href="#class-created" id="class-created-math">Math</a></li>

                                                </ul>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div id="class-created" class="active set-hide-tab">
                                                <div class="border-selectall">
                                                    <div class="col-md-6 col-sm-12 col-xs-12 cb-type-lesson">
                                                        <div class="toggle-btn">
                                                            <div class="inactive" >Hide Inactive Classes</div>
                                                            <input type="checkbox" name="cbcharse-engskill" id="cbinactive" class="hidden check-toggle">
                                                            <img  style="height: 28px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" class="inactive-img" onclick="document.getElementById('cbinactive').click();">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3 col-sm-3 col-xs-3" >
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-assign  form-control" name="ready-lesson-down" id="btn-class-created-down"></span><?php _e('Search', 'iii-dictionary') ?></button>

                                                        </div>           
                                                    </div>
                                                    <div class="col-md-3 col-sm-6 col-xs-6 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" data-id="critical lesson" id="goto-createclass" name="create-lesson"></span><?php _e('Create Class', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="clearfix"></div>

                                                    <div class="select-style" id="open-search-class-created" style="display:none;">
                                                        <div class="search-box">
                                                            <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                <div class="form-group">
                                                                    <input  id="search-class-created" name="search-ready-les" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                    <p class="link-clear">Clear</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                <div class="form-group">
                                                                    <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-ready" id="search-class-created-btn"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>
                                                        <div class="col-md-9 col-sm-9 col-xs-12 border-ras" style="padding-left: 0px !important;">
                                                            <form method="get">
                                                                <select class="select-box-it form-control arrow-stl" name="sl-class" id="select-class-created" >
                                                                    <option selected value="1">Type of Class</option>

                                                                </select>
                                                            </form>
                                                        </div>
                                                        <div class="col-md-3 col-sm-3 col-xs-12" style="padding-right: 0px !important;">
                                                            <div class="form-group">
                                                                <button type="submit" id="search-type-class-created" class="btn-orange2 form-control nopadding-r border-ras" name="assign-now"></span><?php _e('Search', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>

                                                        <div class="clearfix"></div>      
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="table-my-lesson">
                                                    <div style="max-height: 520px; overflow-y: auto; overflow-x:hidden;">

                                                        <table class="table table-condensed table-subscription" >
                                                            <thead>
                                                                <tr>
                                                                    <th class="table-img-icon" id="icon-option-ready-eng" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-eng" alt="option lesson" ></th>
                                                                    <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                    <th style="width: 55%;"><?php _e('Class Name', 'iii-dictionary') ?></th>
                                                                    <th style="width: 10%;"><?php _e('Student #', 'iii-dictionary') ?></th>
                                                                    <th style="width: 10%;"><?php _e('Date Created', 'iii-dictionary') ?></th>
                                                                    <th style="width: 20%;"></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="table-class-created" class="table-class-created">

                                                            </tbody>

                                                        </table>


                                                    </div>

                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="manage-edit-class hidden">
                                        <div class="col-md-12 no-padding">
                                            <div class="form-group edit-class-name">
                                                <input name="edit-class-name" id="edit-class-name" class="form-control border-ras" value="test" disabled>
                                                <button class="icon-close-edit-class"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_White_Close.png" alt="uparrow"></button>
                                                <div class="clearfix"></div>
                                            </div>
                                        </div>
                                        <div class="col-md-12 title-bars-stl">
                                            <div class="col-md-11 arrow-class-inf">Edit Class Information</div>
                                            <div class="col-md-1 arrow-class-inf refresh-edit-class-img"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="class-information refresh-edit-class">
                                            <div class="col-sm-6 col-md-6 col-nopadding">
                                                <div class="form-group">
                                                    <label for="group-name"><?php _e('Class Name', 'iii-dictionary') ?></label>
                                                    <input type="text" class="form-control border-ras" id="class-name-edit" name="group-name" value="<?php echo $gname ?>">
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-md-6 col-nopadding border-ras select-style" style="padding-left: 0px !important; margin-top: 20px;">
                                                <form method="get">
                                                    <select class="select-box-it form-control arrow-stl" name="sl-class" id="select-type-edit-class" >
                                                        <option selected value="1">Type of Class</option>

                                                    </select>
                                                </form>
                                            </div>


                                            <div class="col-md-12 col-nopadding" style="margin-bottom: 20px;" >
                                                <label for="about-class"><?php _e('Short description of the class', 'iii-dictionary') ?></label>
                                                <div id="desc-class3">
                                                    <?php
                                                    $editor_settings = array(
                                                        'wpautop' => false,
                                                        'media_buttons' => false,
                                                        'quicktags' => false,
                                                        'editor_height' => 81,
                                                        'textarea_rows' => 15,
                                                        'tinymce' => array(
                                                            'toolbar1' => 'bold,italic,strikethrough,image,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,spellchecker,fullscreen,wp_adv'
                                                        )
                                                    );
                                                    ?>
                                                    <?php wp_editor('', 'desc_edit_class', $editor_settings); ?>
                                                    <div class="clear-both"></div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="form-group password-class">
                                                <label class="col-md-12 nopadding-l"><?php _e('Current Password', 'iii-dictionary') ?></label>
                                                <div class="col-md-11 col-nopadding label-checkbox">
                                                    <input type="text" class="form-control border-ras" id="current-pass" name="type-password" value="" data-val="" readonly >
                                                </div>
                                                <div class="col-md-1 toggle-btn">
                                                    <input type="checkbox" name="cb-changepass" id="cb-changepass" class="hidden" checked>
                                                    <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png" alt="Toggle_on" onclick="document.getElementById('cb-changepass').click();">
                                                </div>
                                                <label class="col-md-12 nopadding-l"><?php _e('Change Password', 'iii-dictionary') ?></label>
                                                <div class="usepass">
                                                    <div class="col-md-6 col-nopadding label-checkbox">
                                                        <input type="text" class="form-control border-ras clear-text" id="type-password3" name="type-password" value="" placeholder="Type Password...">
                                                    </div>
                                                    <div class="col-md-6 col-nopadding label-checkbox ">
                                                        <input type="text" class="form-control border-ras clear-text" id="retype-password3" name="retypepassword" placeholder="Retype Password..." value="">
                                                    </div>
                                                </div>

                                                <div class="clearfix"></div>
                                            </div>
                                            <div style="clear: both;"></div>   
                                        </div>

                                        <div class="col-md-12 title-bars-stl">
                                            <div class="col-md-11 arrow-edit-tutoring">Edit Tutoring</div>
                                            <div class="col-md-1 arrow-edit-tutoring refresh-edit-class-img"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>

                                        </div>
                                        <!--detail-->
                                        <div id="edit-tutoring" class="detail-tutoring refresh-edit-class">
                                            <div class="option-tutoring2 border-bottom">
                                                <div class="col-md-7">
                                                    <h4>English Writing Skill</h4>
                                                    <p class="text-desc-detail">You teach how to write English online, but not interactively</p>
                                                </div>
                                                <div class="col-md-5 col-nopadding unit-position margin-t25">
                                                    <div class="toggle-btn">
                                                        <div class="charse" style="display:none;">
                                                            <input type="number" name="price-eng-writing2" class=" border-ras price_subject2" id="price-eng-writing2"><span class="text-price-stl">Per Minute</span>
                                                            <span class="unit">$</span>
                                                        </div>
                                                        <div class="no-charse">I don’t offer tutoring for this subject</div>
                                                        <input type="checkbox" name="cbcharse-engskill" id="cbcharse-engskill2" class="hidden check-toggle2" value="1">
                                                        <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-engskill2').click();">
                                                    </div>
                                                </div>
                                                <div class="clear-both"></div>

                                            </div>
                                            <div class="option-tutoring2 border-bottom">
                                                <div class="col-md-7">
                                                    <h4>English Conversation Practice</h4>
                                                    <p class="text-desc-detail">You converse with a foreign student over video chat</p>
                                                </div>

                                                <div class="col-md-5 col-nopadding unit-position margin-t25">
                                                    <div class="toggle-btn">
                                                        <div class="charse"  style="display:none;">
                                                            <input type="number"  name="price-eng-conver" class=" border-ras price_subject2" id="price-eng-conversation2"><span class="text-price-stl">Per Minute</span>
                                                            <span class="unit">$</span>
                                                        </div>
                                                        <div class="no-charse">I don’t offer tutoring for this subject</div>
                                                        <input type="checkbox" name="cbcharse-engprac" id="cbcharse-engprac2" class="hidden check-toggle2" value="2">
                                                        <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-engprac2').click();">
                                                    </div>
                                                </div>
                                                <div class="clear-both"></div>

                                            </div>
                                            <div class="option-tutoring2 border-bottom">
                                                <div class="col-md-7">
                                                    <h4>General English Skill</h4>
                                                    <p class="text-desc-detail">You choose your own subject to tutor</p>


                                                    <input type="text"  name="writing-sub" class="form-control set-disable border-ras" readonly placeholder="Write subjects" id="general-eng2">
                                                </div>

                                                <div class="col-md-5 col-nopadding unit-position" style="margin-top:40px;">
                                                    <div class="toggle-btn">
                                                        <div class="charse"  style="display:none;">
                                                            <input type="number" class=" border-ras price_subject2"  name="price-eng-conver" id="price-eng2"><span class="text-price-stl">Per Minute</span>
                                                            <span class="unit">$</span>
                                                        </div>
                                                        <div class="no-charse" >I don’t offer tutoring for this subject</div>
                                                        <input type="checkbox" name="cbcharse-engprac" id="cbcharse-generaleng2" class="hidden check-toggle2" value="3">
                                                        <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-generaleng2').click();">
                                                    </div>
                                                </div>
                                                <div class="clear-both"></div>

                                            </div>
                                            <div class="option-tutoring2 border-bottom">
                                                <div class="col-md-7">
                                                    <h4>Math <span>(Up to Elementary School)</span></h4>
                                                    <p class="text-desc-detail">Tutor Math online interactively over voice chat and handwriting notepad chat</p>
                                                </div>

                                                <div class="col-md-5 col-nopadding unit-position margin-t25">
                                                    <div class="toggle-btn">
                                                        <div class="charse"  style="display:none;">
                                                            <input type="number" class=" border-ras price_subject2" name="price-math" id="price-math2"><span class="text-price-stl">Per Minute</span>
                                                            <span class="unit">$</span>
                                                        </div>
                                                        <div class="no-charse">I don’t offer tutoring for this subject</div>
                                                        <input type="checkbox" name="cbcharse-mathelement2" id="cbcharse-mathelement2" class="hidden check-toggle2" value="4">
                                                        <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-mathelement2').click();">
                                                    </div>
                                                </div>
                                                <div class="clear-both"></div>
                                            </div>
                                            <div class="option-tutoring2 border-bottom">
                                                <div class="col-md-7">
                                                    <h4>Math <span>(Any Level)</span></h4>
                                                    <p class="text-desc-detail">Tutor Math online interactively over voice chat and handwriting notepad chat</p>
                                                </div>

                                                <div class="col-md-5 col-nopadding unit-position margin-t25">
                                                    <div class="toggle-btn">

                                                        <div class="charse" style="display:none;">
                                                            <input type="number" name="price-math-level" class="border-ras price_subject2" id="price-math-level2"><span class="text-price-stl">Per Minute</span>
                                                            <span class="unit">$</span>
                                                        </div>
                                                        <div class="no-charse">I don’t offer tutoring for this subject</div>
                                                        <input type="checkbox" name="cbcharse-mathlevel" id="cbcharse-mathlevel2" class="hidden check-toggle2" value="5">
                                                        <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-mathlevel2').click();">
                                                    </div>
                                                </div>
                                                <div class="clear-both"></div>
                                            </div>
                                            <div class="option-tutoring2">

                                                <div class="col-md-7">
                                                    <h4>General Math Skill</h4>
                                                    <p class="text-desc-detail">You choose your own subject to tutor</p>

                                                    <input type="text"  name="writing-sub" class="form-control set-disable border-ras" readonly placeholder="Write subjects" id="general-math2">
                                                </div>

                                                <div class="col-md-5 col-nopadding unit-position " style="margin-top:40px;">
                                                    <div class="toggle-btn">
                                                        <div class="charse"  style="display:none;">
                                                            <input type="number"  name="price-eng-conver" class="border-ras price_subject2" id="price-math-general2"><span class="text-price-stl">Per Minute</span>
                                                            <span class="unit">$</span>
                                                        </div>
                                                        <div class="no-charse">I don’t offer tutoring for this subject</div>
                                                        <input type="checkbox" name="cbcharse-engprac" id="cbcharse-generalmath2" class="hidden check-toggle2" value="6">
                                                        <img  style="width:46px;" src="<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png" alt="Toggle_on" onclick="document.getElementById('cbcharse-generalmath2').click();">
                                                    </div>
                                                </div>
                                                <div class="clear-both"></div>

                                            </div>

                                        </div><!--end detail-->
                                        <div class="col-md-12 title-bars-stl">
                                            <div class="col-md-11 arrow-detete-class">Deleting the Class</div>
                                            <div class="col-md-1 arrow-detete-class refresh-edit-class-img"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>

                                        </div>
                                        <!--detail-->
                                        <div id="detete-class" class="detete-class refresh-edit-class">
                                            <div class="border-bottom">
                                                <div class="col-md-10">
                                                    <p class="text-used" style="width:100% !important;">If you no longer need this Class, you can delete it by clicking on the delete button </p>
                                                </div>
                                                <div class="col-md-2 nopadding-r" >
                                                    <button id="btn-delete-class"  type="button" class="btn-create-lesson form-control nopadding-r border-btn btn-prerequisite"></span><?php _e('Delete Class', 'iii-dictionary') ?></button>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>

                                            <div class="usepass type-current-pass">
                                                <label class="col-md-12 nopadding-l"><?php _e('If class has password, type them below', 'iii-dictionary') ?></label>
                                                <div class="col-md-6 col-nopadding label-checkbox">
                                                    <input type="text" class="form-control border-ras clear-text" id="type-current-password" name="type-password" value="" placeholder="Type Password...">
                                                </div>
                                                <div class="col-md-6 col-nopadding label-checkbox ">
                                                    <input type="text" class="form-control border-ras clear-text" id="retype-current-password" name="retypepassword" placeholder="Retype Password..." value="">
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                        </div><!--end detail-->
                                        <div class="btn-class">
                                            <div class="col-md-9 nopadding-l" >
                                                <button id="btn-save-edit-class" type="submit" class="btn-orange btn-create-class form-control border-btn" name="create-class">Save</button>
                                            </div>
                                            <div class="col-md-3  nopadding-r">
                                                <button  type="submit" class="btn-gray btn-create-class form-control border-btn icon-close-edit-class" name="btn-cancel">Cancel</button>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                    <div class="manage-check-class hidden">
                                        <div class="col-md-12 no-padding" style="margin-bottom:50px;">
                                            <div class="form-group check-class-name">
                                                <input name="check-class-name" id="check-class-name" class="form-control border-ras" value="test" disabled>
                                                <button id="icon-close-check-class"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_White_Close.png" alt="uparrow"></button>
                                                <div class="clearfix"></div>
                                            </div>

                                            <div class="form-group col-md-3">
                                                <label for="input-num-std">Number of Students</label>
                                                <input name="num-std" class="form-control border-ras no-border" style="font-weight: bold;" id="total-std" type="text" readonly value="3">
                                                <p class="unit-text">Students</p>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <label for="input-num-mess">New Messages</label>
                                                <input name="num-mess" class="form-control border-ras no-border" style="font-weight: bold;" id="total-mess" type="text" readonly value="3">
                                                <p class="unit-text">New Messages</p>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <label for="input-num-request">Total Tutoring Requests</label>
                                                <input name="num-request" class="form-control border-ras no-border" style="font-weight: bold;" id="total_tutor" type="text" readonly value="3">
                                                <p class="unit-text">Request</p>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <label for="input-earing">Tutor Earning</label>
                                                <input name="num-earning" class="form-control border-ras no-border" id="tutor-earing" type="text" readonly value="3" style="padding-left:30px; font-weight:bold;">
                                                <p class="unit-tutor">$</p>
                                            </div>
                                        </div>
                                        <div class="col-md-12 title-bars-stl">
                                            <div class="col-md-11 arrow-class-stdlist">Student List & Activities</div>
                                            <div class="col-md-1 arrow-class-stdlist refresh-edit-class-img"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="class-student-list refresh-edit-class detail-function-arrow">
                                            <div class="search-box">
                                                <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                    <div class="form-group">
                                                        <input  id="search-stdlist-input" name="search-lesson" class="form-control search-tit border-ras" placeholder="Search...">
                                                        <p class="link-clear">Clear</p>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                    <div class="form-group">
                                                        <button type="submit" class="btn-orange2 form-control border-btn" name="btn-search-lesson" id="search-student-list"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>

                                            <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                <table class="table table-condensed table-subscription" >

                                                    <thead>

                                                        <tr>
                                                            <th class="table-img-icon" id="icon-sort-stdlist" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-subject2" alt="option lesson" ></th>
                                                            <th style="width: 50%;"><?php _e('Name', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                            <th style="width: 15%;"><?php _e('Date Joined', 'iii-dictionary') ?></th>

                                                            <th style="width: 20%;">Progression</th>
                                                            <th style="width: 10%;"></th>

                                                        </tr>

                                                    </thead>
                                                    <tbody id="table-std-list" class="table-std-list">


                                                    </tbody>

                                                </table>


                                            </div>

                                            <div style="clear: both;"></div>   
                                        </div>
                                        <div class="col-md-12 title-bars-stl">
                                            <div class="col-md-11 arrow-tutor-notify">Tutoring Notification</div>
                                            <div class="col-md-1 arrow-tutor-notify refresh-edit-class-img"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="tutor-notify refresh-edit-class detail-function-arrow">
                                            <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                <table class="table table-condensed table-subscription" >

                                                    <thead>

                                                        <tr>
                                                            <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                            <th style="width: 50%;"><?php _e('Tutoring Subject', 'iii-dictionary') ?></th>

                                                            <th style="width: 15%;">Rate Per Hour</th>
                                                            <th style="width: 20%;">New Requests</th>
                                                            <th  style="width: 10%;"></th>

                                                        </tr>

                                                    </thead>
                                                    <tbody id="table-tutor-notify">


                                                    </tbody>

                                                </table>


                                            </div>
                                        </div>
                                        <div class="col-md-12 title-bars-stl">
                                            <div class="col-md-11 arrow-msg-notify">Message Notification</div>
                                            <div class="col-md-1 arrow-msg-notify refresh-edit-class-img"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="message-notify refresh-edit-class detail-function-arrow">
                                            <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">
                                                <table class="table table-condensed table-subscription" >
                                                    <thead>
                                                        <tr>
                                                            <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                            <th style="width: 45%;"><?php _e('Message', 'iii-dictionary') ?></th>
                                                            <th style="width: 20%;">Message By</th>
                                                            <th style="width: 30%">Date</th>
                                                            <th style="width: 10%;"></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="table-msg-notify">


                                                    </tbody>

                                                </table>


                                            </div>
                                        </div>

                                        <div class="col-md-12 title-bars-stl">
                                            <div class="col-md-11 arrow-edit-assignment">Edit Class Assignment</div>
                                            <div class="col-md-1 arrow-edit-assignment refresh-edit-class-img"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png" alt="uparrow"></div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="edit-assignment refresh-edit-class">
                                            <div class="col-md-8">Add or Delete Subjects and Lessons</div>
                                            <div class="btn-add-ws col-md-2 nopadding-r" id="">
                                                <button id="btn-add-list2" type="submit" class="btn-orange btn-create-lesson form-control nopadding-r border-btn" ></span><?php _e('Add', 'iii-dictionary') ?></button>
                                            </div>
                                            <div class="btn-add-ws col-md-2 nopadding-r" id="">
                                                <button id="btn-add-prerequisite2"  type="submit" class="btn-create-lesson form-control nopadding-r border-btn btn-prerequisite"></span><?php _e('Prerequisite', 'iii-dictionary') ?></button>
                                            </div>
                                            <div class="body-addws">
                                                <div class="get-ws-choise col-md-12">
                                                    <div class="get-ws-choise-icon"><img id="icon-open-from-lesson2"  aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png"></div>
                                                    <div class="get-ws-choise-text border-btn" id="from-my-lesson2">From <span>My Lesson</span></div>
                                                    <div class="clearfix"></div>
                                                    <div class="lesson-detail-sub2" style="display:none;">
                                                        <div class="border-selectall" style="border-top:none !important;">
                                                            <div class="col-md-10 col-sm-12 col-xs-12 cb-type-lesson">
                                                                <label>
                                                                    <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-less6" value="" name="select-all-lesson"/>
                                                                    <span style="padding-left: 18px">Select All</span>
                                                                </label>
                                                            </div>
                                                            <div class="col-md-2 col-sm-12 col-xs-12 search-assign">
                                                                <div class="form-group">
                                                                    <button type="submit" class="btn-assign form-control" name="assign-lesson" id="btn-assign-lesson-down2"><?php _e('Search', 'iii-dictionary') ?></button>

                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                            <div class="select-style open-search" id="select-assign-lesson2">
                                                                <div class="search-box">
                                                                    <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                        <div class="form-group">
                                                                            <input  id="search-lesson3" name="search-lesson" class="form-control search-tit  border-ras" placeholder="Type here...">
                                                                            <p class="link-clear">Clear</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                        <div class="form-group">
                                                                            <button type="submit" class="btn-orange2 form-control border-btn" name="btn-search-lesson" id="search-btn-lesson2"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="clearfix"></div>
                                                                </div>


                                                                <div class="clearfix"></div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>

                                                        <div class="table-my-lesson active">
                                                            <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">

                                                                <table class="table table-condensed table-subscription" >

                                                                    <thead>

                                                                        <tr>
                                                                            <th class="table-img-icon" id="icon-option-less4" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-lesson3" alt="option lesson" ></th>
                                                                            <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>

                                                                            <th style="width: 60%;"><?php _e('Lesson', 'iii-dictionary') ?></th>
                                                                            <th style="width: 15%;"><?php _e('Test or Practice', 'iii-dictionary') ?></th>

                                                                            <th style="width: 15%;"></th>

                                                                        </tr>

                                                                    </thead>
                                                                    <tbody id="table-less4">


                                                                    </tbody>

                                                                </table>


                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="get-ws-choise col-md-12 border-bottom">
                                                    <div class="get-ws-choise-icon"><img id="icon-add-sub2"  aria-hidden="true" src="<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png"></div>
                                                    <div class="get-ws-choise-text border-btn" id="from-my-subject2">From <span>My Subject</span></div>
                                                    <div class="clearfix"></div>
                                                    <div class="sub-detail" style="display:none;">
                                                        <div class="border-selectall" style="border-top:none !important;">
                                                            <div class="col-md-10 col-sm-12 col-xs-12 cb-type-lesson">
                                                                <label>
                                                                    <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson radio" id="select-all-add-sub2" value="" name="select-all-lesson"/>
                                                                    <span style="padding-left: 18px">Select All</span>
                                                                </label>
                                                            </div>
                                                            <div class="col-md-2 col-sm-12 col-xs-12 search-assign">
                                                                <div class="form-group">
                                                                    <button type="submit" class="btn-assign form-control" name="assign-lesson" id="search-add-sub2"><?php _e('Search', 'iii-dictionary') ?></button>

                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                            <div class="select-style open-search" id="select-assign-sub3">
                                                                <div class="search-box">
                                                                    <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                        <div class="form-group">
                                                                            <input  id="val-search-subject2" name="search-lesson" class="form-control search-tit border-ras" placeholder="Type here...">
                                                                            <p class="link-clear">Clear</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                        <div class="form-group">
                                                                            <button type="submit" class="btn-orange2 form-control border-btn" name="btn-search-lesson" id="search-btn-subject3"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="clearfix"></div>
                                                                </div>

                                                                <div class="clearfix"></div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>

                                                        <div class="table-my-lesson active">
                                                            <div style="max-height: 600px; overflow-y: auto; overflow-x:hidden;">
                                                                <table class="table table-condensed table-subscription" >
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="table-img-icon" id="icon-option-subject3" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-subject2" alt="option lesson" ></th>
                                                                            <th style="width: 5%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                            <th style="width: 60%;"><?php _e('Lesson', 'iii-dictionary') ?></th>
                                                                            <th style="width: 15%;"><?php _e('Test or Practice', 'iii-dictionary') ?></th>
                                                                            <th style="width: 15%;"></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody id="table-sub2">


                                                                    </tbody>

                                                                </table>


                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>

                                            </div>

                                            <div class="table-prerequisite">
                                                <div class="color-4b col-md-8" style="margin:20px 0px;">List of Prerequisite</div>
                                                <div class="col-md-4 nopadding-r" id="" style="margin-top:17px;">
                                                    <button id="btn-save-class-priority"  type="submit" class="btn-create-lesson form-control nopadding-r border-btn btn-prerequisite btn-save-change-class"></span><?php _e('Save Changes', 'iii-dictionary') ?></button>
                                                </div>
                                                <div class="col-md-12" style="max-height: 341px; overflow-y: auto; overflow-x:hidden;">
                                                    <table class="table table-condensed table-subscription table-sub-less-prerequisite2" >

                                                    </table>
                                                </div>
                                            </div>
                                            <div class="table-noprerequisite">
                                                <div class="color-4b col-md-8" style="margin:20px 0px;">List of Assignments</div>
                                                <div class="col-md-4 nopadding-r" id="" style="margin-top:17px;">
                                                    <button id="btn-save-change-class"   type="submit" class="btn-create-lesson form-control nopadding-r border-btn btn-prerequisite btn-save-change-class"></span><?php _e('Save Changes', 'iii-dictionary') ?></button>
                                                </div>
                                                <div class="col-md-12" style="max-height: 341px; overflow-y: auto; overflow-x:hidden;">
                                                    <table class="table table-condensed table-subscription table-sub-less2" >

                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <!--end detail-->

                                    </div>
                                    <div class="manage-class-message hidden">
                                         <div class="form-group check-class-name">
                                                <input name="check-class-name" id="manage-msg-class-name" class="form-control border-ras" value="" disabled>
                                                <button id="icon-close-manage-msg"><img class="img-style-icon" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_White_Close.png" alt="uparrow"></button>
                                                <div class="clearfix"></div>
                                            </div>
                                        <div class="class-created">
                                            <div id="" class="tab-style1">
                                                <ul class="nav nav-tabs">
                                                    <li class="tab-pub-les2 refresh-public-lesson" id="tab-activities">
                                                        <a data-toggle="tab"  href="#class-created">
                                                            <span class="active activities-active"><img class="img-style-tab" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Activities_unselect.png" alt="icon_Activities_unselect">Activities</span>
                                                            <span class="hidden activities-hidden"><img class="img-style-tab" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Activities.png" alt="icon_Activities_unselect">Activities</span>
                                                        </a>
                                                    </li>
                                                    <li class="tab-pub-les2" id="tab-tutoring">
                                                        <a data-toggle="tab"  href="#class-created" id="class-tutoring">
                                                            <span class="active tutoring-active"><img class="img-style-tab" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Tutoring_unselect.png" alt="icon_Tutoring_unselect">Tutoring</span>
                                                            <span class="hidden tutoring-hidden"><img class="img-style-tab" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Tutoring_detail.png" alt="icon_Tutoring_unselect">Tutoring</span>
                                                        </a>
                                                    </li>
                                                    <li class="tab-pub-les2 active" id="tab-class-post">
                                                        <a data-toggle="tab"  href="#class-created" id="class-class-post">
                                                            <span class="active class-post-active"><img class="img-style-tab" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ClassPosts.png" alt="icon_ClassPosts">Class Posts</span>
                                                            <span class="hidden class-post-hidden"><img class="img-style-tab" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ClassPosts_unselect.png" alt="icon_ClassPosts">Class Posts</span>
                                                        </a>
                                                    </li>
                                                    <li class="tab-pub-les2" id="tab-my-message">
                                                        <a data-toggle="tab"  href="#class-created" id="class-my-message">
                                                            <span class="active my-message-active"><img class="img-style-tab" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MyMessage_unselect.png" alt="icon_MyMessage_unselect">My Message</span>
                                                            <span class="hidden my-message-hidden"><img class="img-style-tab" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MyMessage.png" alt="icon_MyMessage_unselect">My Message</span>
                                                        </a>
                                                    </li>

                                                </ul>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div id="class-tutoring-detail" class="set-hide-tab">
                                                <div class="border-selectall">
                                                    <div class="col-md-5 cb-type-lesson">
                                                        <div class="new-request-list">
                                                            NEW REQUESTS
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-assign  form-control" name="ready-lesson-down" id="btn-class-tutoring-down"><?php _e('Search', 'iii-dictionary') ?></button>
                                                        </div>           
                                                    </div>
                                                    <div class="col-md-2 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="request-btn"><?php _e('New Request', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn" id="my-schedule-btn" name="my_schedule"><?php _e('My Schedule', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>  
                                                    <div class="clearfix"></div>

                                                    <div class="select-style" id="open-search-class-tutoring" style="display:none;">
                                                        <div class="search-box">
                                                            <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                <div class="form-group">
                                                                    <input  id="search-class-tutoring" name="search-ready-les" class="form-control search-tit border-ras" placeholder="Search...">
                                                                    <p class="link-clear set-default-list">Clear</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                <div class="form-group">
                                                                    <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-ready" id="search-class-tutoring-btn"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>        
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="table-class-request sethide-detail">
                                                    <div style="max-height: 520px; overflow-y: auto; overflow-x:hidden;">
                                                        <table class="table table-condensed table-subscription" >
                                                            <thead>
                                                                <tr>
                                                                    <th style="width: 10%;"><?php _e('Type', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                    <th style="width: 50%;"><?php _e('Subject', 'iii-dictionary') ?></th>
                                                                    <th style="width: 20%;"><?php _e('Requested by', 'iii-dictionary') ?></th>
                                                                    <th style="width: 20%;"><?php _e('Date', 'iii-dictionary') ?></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="table-new-request" class="table-new-requst">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="boxshadow">
                                                        
                                                    </div>
                                                </div>
                                                <div class="new-request-detail sethide-detail hidden">
                                                    <div class="header-message-detail">
                                                        <h4 class="title-stdlist">
                                                            <span class="title-request-detail">New Request</span>
                                                            <img class="close-request-icon-detail" data-type="" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right">
                                                        </h4>  
                                                    </div>
                                                    <div class="col-md-12" style="padding: 0px 30px !important;">
                                                        <div class="info-message-stl">
                                                            <div class="col-md-6 poster-request nopadding-l">
                                                                <text class="text-by">by </text>
                                                                <span class="by-request"></span>
                                                            </div>
                                                            <div class="col-md-6 posted-on-request nopadding-r"></div>
                                                        </div> 
                                                        <div class="content-request-detail"></div>
                                                    </div>
                                                    <div class="col-md-12" style="padding: 0px 30px !important;">
                                                        <div class="border-dotted clearfix">
                                                            <div class="col-md-8">
                                                                <p>
                                                                    <img class="status-request img-detail-request" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_12_Icon_Waiting_Acceptance.png" style="width: 20px;">
                                                                    <span id="label-status-request">Waiting for Acceptance</span>
                                                                </p>
                                                                <p>
                                                                    <img class="icon-request img-detail-request" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_12_Icon_Waiting_Acceptance.png" style="width: 20px;">
                                                                    <span id="label-subject-request">English - Ebusiness Conversation</span>
                                                                </p>
                                                                <p>
                                                                    <img class="img-detail-request" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_11_Icon_Time.png" style="width: 20px;">
                                                                    <span id="label-time-request">5:30 ~ 6:30 pm / December 27, 2018</span>
                                                                </p>
                                                                <p>
                                                                    <img class="img-detail-request" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_10_Icon_Location.png" style="width: 20px;">
                                                                    <span id="label-location-request">San Francisco of United States</span>
                                                                </p>
                                                            </div>
                                                            <div class="col-md-4">
                                                                <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="accept-confirm-btn"><?php _e('Accept and Confirm', 'iii-dictionary') ?></button>
                                                                <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="chk-schedule-btn"><?php _e('Check My Schedule', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12" style="padding: 0px 30px !important;">
                                                        <div class="col-md-8">
                                                            <label>If you can't make it send a decline message</label>
                                                            <input type="text" value="" class="form-control  border-ras" name="send_declined" style="height: 28px!important;" id="send_declined">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="send-declined-btn"><?php _e('Send a Declined Message', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                                <div class="boxshadow">
                                                        
                                                </div>
                                                <div class="main-my-schedule sethide-detail hidden">
                                                    <div class="col-md-4 nopadding-r">
                                                        <div class="border-datepicker">
                                                            <div id="sandbox-container"></div>
                                                            <div class="upcoming-schedule">
                                                                <h4>Upcoming Schedules</h4>
                                                                <ul id="upcoming-schedule" style="max-height: 210px; overflow-y: auto; overflow-x:hidden;">
                                                                    <li>
                                                                        <span class="time-upcoming">Dec 14, 2018 / 8:30am - 9:30am</span>
                                                                        <span>English business conversation</span>
                                                                    </li>
                                                                    <li>
                                                                        <span class="time-upcoming">Dec 14, 2018 / 8:30am - 9:30am</span>
                                                                        <span>English business conversation</span>
                                                                    </li>
                                                                    <li>
                                                                        <span class="time-upcoming">Dec 14, 2018 / 8:30am - 9:30am</span>
                                                                        <span>English business conversation</span>
                                                                    </li>
                                                                    <li>
                                                                        <span class="time-upcoming">Dec 14, 2018 / 8:30am - 9:30am</span>
                                                                        <span>English business conversation</span>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-8 nopadding-l">
                                                        <div class="header-schedule clearfix">
                                                            <div class="col-md-7">
                                                                <span class="current-day"><?php echo date('d',time())?></span>
                                                                <span class="stuff-day"><?php echo date('l',time())?></span>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <img class="schedule-left-btn" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_05_Button_Left.png" data-day="<?php echo date('Y-m-d',strtotime("-1 day"))?>" data-type="schedule">
                                                                <img class="schedule-right-btn" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_06_Button_Right.png"  data-day="<?php echo date('Y-m-d',strtotime("+1 day"))?>" data-type="schedule">
                                                            </div>
                                                            <div class="col-md-3 nopadding-r">
                                                                <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="summary-btn" data-day="<?php echo date('Y-m-d',time())?>" data-type=""><?php _e('Summary', 'iii-dictionary') ?></button>
                                                            </div>
                                                        </div>

                                                        <div class="body-my-scheduled" style="max-height: 448px; overflow-y: auto; overflow-x:hidden; position: relative;">
                                                            <table class="table table-condensed table-tutoring">
                                                                <tbody id="table-list-schedule" class="table-list-schedule">
                                                                </tbody>
                                                            </table>
                                                            <ul id="tutoring-scheduled">
                                                                
                                                            </ul>
                                                        </div>

                                                        <div class="my-scheduled-detail sethide-detail hidden">
                                                            <div class="header-message-detail">
                                                                <h4 class="title-stdlist">
                                                                    <span class="title-my-detail">New Request</span>
                                                                    <img class="close-my-icon-detail" data-type="" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right">
                                                                </h4>  
                                                            </div>
                                                            <div class="col-md-12" style="padding: 0px 30px !important;">
                                                                <div class="info-message-stl">
                                                                    <div class="col-md-6 poster-request nopadding-l">
                                                                        <text class="text-by">by </text>
                                                                        <span class="by-my"></span>
                                                                    </div>
                                                                    <div class="col-md-6 posted-on-my nopadding-r"></div>
                                                                </div> 
                                                                <div class="content-my-detail"></div>
                                                            </div>
                                                            <div class="col-md-12" style="padding: 0px 30px !important;">
                                                                <div class="border-dotted clearfix">
                                                                    <p>
                                                                        <img class="status-my img-detail-request" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_12_Icon_Waiting_Acceptance.png" style="width: 20px;">
                                                                        <span id="label-status-my">Waiting for Acceptance</span>
                                                                    </p>
                                                                    <p>
                                                                        <img class="icon-my img-detail-request" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_12_Icon_Waiting_Acceptance.png" style="width: 20px;">
                                                                        <span id="label-subject-my">English - Ebusiness Conversation</span>
                                                                    </p>
                                                                    <p>
                                                                        <img class="img-detail-request" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_11_Icon_Time.png" style="width: 20px;">
                                                                        <span id="label-time-my">5:30 ~ 6:30 pm / December 27, 2018</span>
                                                                    </p>
                                                                    <p>
                                                                        <img class="img-detail-request" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_10_Icon_Location.png" style="width: 20px;">
                                                                        <span id="label-location-my">San Francisco of United States</span>
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12" style="padding: 0px 30px !important;">
                                                                <div class="col-md-6 nopadding-l">
                                                                    <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="accept-confirm-my-btn"><?php _e('Accept and Confirm', 'iii-dictionary') ?></button>
                                                                </div>
                                                                <div class="col-md-6 nopadding-r">
                                                                    <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="send-declined-my-btn"><?php _e('Send a Declined Message', 'iii-dictionary') ?></button>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12" style="padding: 0px 30px !important;">
                                                                <input type="text" value="" class="form-control  border-ras" placeholder="Write a message..." name="send_declined" style="height: 28px!important;" id="send_my_declined">
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="boxshadow">
                                                                
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div id="class-post-detail" class="active set-hide-tab">
                                                <div class="border-selectall">
                                                    <div class="col-md-3 cb-type-lesson">
                                                        <div class="student-list" id="student-list">
                                                            POSTINGS
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-assign  form-control" name="ready-lesson-down" id="btn-class-post-down"><?php _e('Search', 'iii-dictionary') ?></button>
                                                        </div>           
                                                    </div>
                                                    <div class="col-md-2 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="posting-btn" name="posting"><?php _e('Posting', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn" id="write-post-btn" name="write-post"><?php _e('Write a Post', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="list-student-btn" name="posting"><?php _e('Student List', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="clearfix"></div>

                                                    <div class="select-style" id="open-search-class-post" style="display:none;">
                                                        <div class="search-box">
                                                            <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                <div class="form-group">
                                                                    <input  id="search-class-post" name="search-ready-les" class="form-control search-tit border-ras" placeholder="Search...">
                                                                    <p class="link-clear set-default-list">Clear</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                <div class="form-group">
                                                                    <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-ready" id="search-class-post-btn"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>        
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="table-class-posting sethide-detail">
                                                    <div style="max-height: 520px; overflow-y: auto; overflow-x:hidden;">
                                                        <table class="table table-condensed table-subscription" >
                                                            <thead>
                                                                <tr>
                                                                    <th style="width: 60%;"><?php _e('Posting', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                    <th style="width: 20%;"><?php _e('Written By', 'iii-dictionary') ?></th>
                                                                    <th style="width: 20%;"><?php _e('Date', 'iii-dictionary') ?></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="table-class-post" class="table-class-post">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="boxshadow">
                                                        
                                                    </div>
                                                </div>
                                                <div class="student-list-class sethide-detail hidden">
                                                    <div class="header-create-lesson">
                                                        <h4 class="title-stdlist" style="padding-left:30px;">Student List<img id="close-studentlist" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right"></h4>  
                                                    </div>
                                                    <div style="max-height: 520px; overflow-y: auto; overflow-x:hidden;">
                                                        <table class="table table-condensed table-subscription" >
                                                            <thead>
                                                                <tr>
                                                                    <th class="table-img-icon" id="icon-option-subject3" data-sort="upward" style="width: 5%;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png" class="img-sort-subject2" alt="option lesson" ></th>
                                                                    <th style="width: 45%;"><?php _e('Name', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                    <th style="width: 20%;"><?php _e('Email Address', 'iii-dictionary') ?></th>
                                                                    <th style="width: 20%;"><?php _e('Date Joined', 'iii-dictionary') ?></th>
                                                                    <th style="width: 10%;"></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="table-class-student" class="table-std-list">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="boxshadow">
                                                        
                                                    </div>
                                                </div>
                                                <div class="sent-private-message sethide-detail hidden">
                                                    <div class="header-create-lesson">
                                                        <h4 class="title-stdlist">Sending a Private Message<img class="close-write-post" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right"></h4>
                                                    </div>
                                                    <div class="col-md-6" style="margin-bottom: 20px">
                                                        <label>Recipient</label>
                                                        <select class="select-box-it form-control border-ras" name="private-student-list" id="private-student-list">

                                                        </select>
                                                    </div>
                                                    <div class="col-md-6" style="margin-bottom: 20px">
                                                        <label>Subject</label>

                                                        <input type="text" value="" class="form-control  border-ras" name="private_subject" style="height: 34px;" id="private_subject">
                                                    </div>
                                                    <div>
                                                        <label> Body message</label>
                                                        <div id="content-private-message">

                                                            <?php
                                                              $editor_settings = array(
                                                              'wpautop' => false,
                                                              'media_buttons' => false,
                                                              'quicktags' => false,
                                                              'editor_height' => 270,
                                                              'textarea_rows' => 15,
                                                              'tinymce' => array(
                                                              'toolbar1' => 'bold,italic,strikethrough,image,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,spellchecker,fullscreen,wp_adv'
                                                              )
                                                              );
                                                              ?>
                                                               <?php wp_editor('', 'content_private_message', $editor_settings); ?>
                                                        </div>
                                                        <div class="clear-both"></div>
                                                    </div>
                                                    <div class="col-md-6 text-center" style="float: right;margin:30px 0;">
                                                        <button type="button" id="private-msg-btn" class="btn-orange2 form-control nopadding-r border-ras" name="private-msg-btn">
                                                            <?php _e('Send', 'iii-dictionary') ?>
                                                        </button>
                                                    </div>
                                                    <div class="clear-both"></div>
                                                    <div class="boxshadow">

                                                    </div>
                                                </div>
                                                <div class="write-post-detail sethide-detail hidden">
                                                    <div class="header-create-lesson">
                                                        <h4 class="title-stdlist">Write a Post<img class="close-write-post" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right"></h4>
                                                    </div>
                                                    <div class="col-md-12 no-padding" style="margin-bottom: 20px">
                                                        <label>Subject</label>

                                                        <input type="text" value="" class="form-control  border-ras" name="post_subject" style="height: 34px;" id="post_subject2">
                                                    </div>
                                                    <div>
                                                        <label> Body of the Post</label>
                                                        <div id="content-post-message">

                                                            <?php
                                                            $editor_settings = array(
                                                            'wpautop' => false,
                                                            'media_buttons' => false,
                                                            'quicktags' => false,
                                                            'editor_height' => 270,
                                                            'textarea_rows' => 15,
                                                            'tinymce' => array(
                                                            'toolbar1' => 'bold,italic,strikethrough,image,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,spellchecker,fullscreen,wp_adv'
                                                            )
                                                            );
                                                            ?>
                                                            <?php wp_editor('', 'content_post_message', $editor_settings); ?>
                                                        </div>
                                                        <div class="clear-both"></div>
                                                    </div>
                                                    <div class="col-md-6 text-center" style="float: right;margin:30px 0;">
                                                        <button type="button" id="post-msg-btn" class="btn-orange2 form-control nopadding-r border-ras" name="post-msg-btn">
                                                            <?php _e('Post', 'iii-dictionary') ?>
                                                        </button>
                                                    </div>
                                                    <div class="clear-both"></div>
                                                    <div class="boxshadow">

                                                    </div>
                                                </div>
                                                <div class="message-detail sethide-detail hidden">
                                                    <div class="header-message-detail">
                                                    <h4 class="title-stdlist"><span class="title-message-detail">Write a Post</span><img class="close-message-icon-detail" data-type="" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right"></h4>  
                                                    </div>
                                                     <div class="col-md-12" style="padding: 0px 30px !important;">
                                                          <div class="info-message-stl">
                                                              <div class="col-md-6 poster-msg nopadding-l"><text class="text-by">by </text><span class="by-teacher"></span></div>
                                                              <div class="col-md-6 posted-on-msg nopadding-r"> 2018-10-12 (5:30 pm)</div>
                                                          </div> 
                                                          <div class="content-msg-detail">Note: However, after Subjects and Lessons are Saved into the List, the Order Can be Rearranged with Up and Down Arrow.</div>
                                                      </div>
                                                </div>
                                                <div class="clearfix"></div>
                                                <div class="boxshadow">
                                                        
                                                </div>
                                            </div>
                                            <div id="class-my-message2" class="hidden set-hide-tab">
                                                <div class="border-selectall">
                                                    <div class="col-md-4 cb-type-lesson">
                                                        <div class="message-list message-head-title active">
                                                            RECEIVED
                                                        </div>  
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-assign  form-control" name="ready-lesson-down" id="btn-message-search"><?php _e('Search', 'iii-dictionary') ?></button>
                                                        </div>           
                                                    </div>
                                                    <div class="col-md-2 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="submit" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn" id="received-message" name="received-message"><?php _e('Received', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="sent-message" name="send"><?php _e('Sent', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 nopadding-r">
                                                        <div class="form-group">
                                                            <button type="button" class="btn-orange2 btn-create-lesson form-control nopadding-r border-btn"  id="send-message" name="send2"><?php _e('Send Message', 'iii-dictionary') ?></button>
                                                        </div>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <div class="select-style" id="open-search-my-message" style="display:none;">
                                                        <div class="search-box">
                                                            <div class="col-md-9 col-sm-9 col-xs-12 nopadding-l">
                                                                <div class="form-group">
                                                                    <input  id="search-my-message" name="search-ready-les" class="form-control search-tit border-ras" placeholder="Search...">
                                                                    <p class="link-clear set-default-list">Clear</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3 col-xs-12 nopadding-r">
                                                                <div class="form-group">
                                                                    <button type="submit" class="btn-orange2 form-control border-ras" name="btn-search-ready" id="search-my-message-btn"</span><?php _e('Search', 'iii-dictionary') ?></button>
                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>     
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>

                                                <div class="table-receive-message sethide-detail">
                                                    <div style="max-height: 520px; overflow-y: auto; overflow-x:hidden;">
                                                        <table class="table table-condensed table-subscription" >
                                                            <thead>
                                                                <tr>
                                                                    <th style="width: 55%;"><?php _e('Subject', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                    <th style="width: 20%;"><?php _e('Written By', 'iii-dictionary') ?></th>
                                                                    <th style="width: 20%;"><?php _e('Date', 'iii-dictionary') ?></th>
                                                                    <th></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="table-receive-message" class="table-class-post">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="boxshadow">
                                                        
                                                    </div>
                                                </div>

                                                <div class="table-sent-message sethide-detail">
                                                    <div style="max-height: 520px; overflow-y: auto; overflow-x:hidden;">
                                                        <table class="table table-condensed table-subscription" >
                                                            <thead>
                                                                <tr>
                                                                    <th style="width: 55%;"><?php _e('Subject', 'iii-dictionary') ?><span class="sorting-indicator"></span></th>
                                                                    <th style="width: 20%;"><?php _e('Written By', 'iii-dictionary') ?></th>
                                                                    <th style="width: 20%;"><?php _e('Date', 'iii-dictionary') ?></th>
                                                                    <th></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="table-sent-message" class="table-class-post">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="boxshadow">
                                                        
                                                    </div>
                                                </div>

                                                <div class="sent-private-message2 sethide-detail hidden">
                                                    <div class="header-create-lesson">
                                                        <h4 class="title-stdlist">Sending a Private Message<img class="close-sent-private-message" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right"></h4>
                                                    </div>
                                                    <div class="col-md-6" style="margin-bottom: 20px">
                                                        <label>Recipient</label>
                                                        <select class="select-box-it form-control border-ras" name="private-student-list2" id="private-student-list2">

                                                        </select>
                                                    </div>
                                                    <div class="col-md-6" style="margin-bottom: 20px">
                                                        <label>Subject</label>

                                                        <input type="text" value="" class="form-control  border-ras" name="private_subject2" style="height: 34px;" id="private_subject2">
                                                    </div>
                                                    <div>
                                                        <label> Body message</label>
                                                        <div id="content-private-message2">

                                                            <?php
                                                              $editor_settings = array(
                                                              'wpautop' => false,
                                                              'media_buttons' => false,
                                                              'quicktags' => false,
                                                              'editor_height' => 270,
                                                              'textarea_rows' => 15,
                                                              'tinymce' => array(
                                                              'toolbar1' => 'bold,italic,strikethrough,image,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,spellchecker,fullscreen,wp_adv'
                                                              )
                                                              );
                                                              ?>
                                                               <?php wp_editor('', 'content_private_message2', $editor_settings); ?>
                                                        </div>
                                                        <div class="clear-both"></div>
                                                    </div>
                                                    <div class="col-md-6 text-center" style="float: right;margin:30px 0;">
                                                        <button type="button" id="private-msg-btn2" class="btn-orange2 form-control nopadding-r border-ras" name="private-msg-btn2">
                                                            <?php _e('Send', 'iii-dictionary') ?>
                                                        </button>
                                                    </div>
                                                    <div class="clear-both"></div>
                                                    <div class="boxshadow">

                                                    </div>
                                                </div>

                                                <div class="my-message-detail sethide-detail hidden">
                                                    <div class="header-message-detail">
                                                        <h4 class="title-stdlist"><span class="my-title-message-detail">Write a Post</span>
                                                            <img class="close-message-icon-detail" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Close_Gray.png" style="width: 23px;float: right">
                                                        </h4>  
                                                    </div>
                                                    <div class="col-md-12" style="padding: 0px 30px !important;">
                                                        <div class="info-message-stl">
                                                            <div class="col-md-6 my-poster-msg nopadding-l"><text class="text-by">by </text><span class="by-teacher"> abc</span></div>
                                                            <div class="col-md-6 my-posted-on-msg nopadding-r"></div>
                                                        </div> 
                                                        <div class="my-content-msg-detail">Note: However, after Subjects and Lessons are Saved into the List, the Order Can be Rearranged with Up and Down Arrow.</div>
                                                        <div id="list-replyed-msg" style="max-height: 270px; overflow-y: auto; overflow-x:hidden;"></div>
                                                        <div class="col-md-4 text-center" style="float: right;margin:30px 0;">
                                                            <button type="submit" id="btn-reply-private" class="btn-orange2 form-control nopadding-r border-ras btn-reply-private" name="btn-reply-private">
                                                                <?php _e('Reply', 'iii-dictionary') ?>
                                                            </button>
                                                        </div>
                                                        <div class="clear-both"></div>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                                <div class="boxshadow">
                                                        
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end of manage class-->
                            </div>
                        </div>
                        <div class="warp-menu">
                            <div id="menu-account-nav" class="menu-mb">
                                <div class="section-left">
                                    <ul id="menu-left-myaccount" class="nav nav-tabs">
                                        <li class="active" id="account"><a data-toggle="tab" href="#hom"><img src="<?php echo get_template_directory_uri(); ?>/library/images/IconMenu_Profile.png" class="" alt="setting my account" style="width: 24px;margin:26px 0px 20px"></a>
                                        </li>

                                        <li><a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/IconMenu_Tutoring.png" class="" alt="setting my account" style="width: 24px;margin:15px 0px"></a></li>
                                        <li id="lesson"><a data-toggle="tab"  href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/IconMenu_LessonManager.png" class="" alt="setting my account" style="width: 24px;margin:15px 0px"></a></li>
                                        <li id="icon-class"><a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/IconMenu_ClassManager.png" class="" alt="setting my account" style="width: 24px;margin:15px 0px"></a></li>
                                        <li><a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/IconMenu_Message.png" class="" alt="setting my account" style="width: 24px;margin:15px 0px"></a></li>                                
                                        <li><a data-toggle="tab" href="#"><img src="<?php echo get_template_directory_uri(); ?>/library/images/IconMenu_Download.png" class="" alt="setting my account" style="width: 24px;margin:15px 0px 0"></a></li>
                                    </ul>
                                </div>

                                <div id="mySidenav" class="sidenav">
                                    <ul class="nav nav-tabs none-block">
                                        <li><a class="header-menu-left" data-toggle="tab" id="myacc">My Account</a>
                                            <ul class="sub-menu-left" id="sub-myacc">
                                                <li id="sub-createacc" class="active"><a class="redirect-create" data-toggle="tab" href="#create-account">Create Basic Account</a></li>
                                                <li id="tutor-regist"><a class="redirect-create" data-toggle="tab" href="#tutor-regis-tab">Teacher & Tutor Account</a></li>
                                                <li id="sub-profile"><a class="redirect-create" data-toggle="tab" href="#profile">Profile</a></li>
                                                <li id="sub-update-info"><a class="redirect-create" data-toggle="tab" href="#updateinfo">Update My Account</a></li>  
                                                <li ><a class="redirect-create" data-toggle="tab" href="#subscription" id="status-history">Subscription & Points</a></li>
                                                <li id="sub-earn-pay"><a class="redirect-create" data-toggle="tab" href="#earn-pay">Earning & Payment</a></li>
                                            </ul>
                                        </li>

                                        <li><a class="header-menu-left padd-adjus redirect-create" href="#">Tutoring</a></li>
                                        <li><a class="header-menu-left padd-adjus" data-toggle="tab"  id="lesson-manager">Lesson Manager</a>
                                            <ul class="sub-menu-left" id="sub-lesson-manager">
                                                <li><a class="redirect-create" data-toggle="tab" href="#my-subject" id="my-subject-li">My Subject</a></li>
                                                <li><a class="redirect-create" data-toggle="tab" href="#my-lesson" id="my-lesson-li">My Lesson</a></li>
                                                <li class="my-lib-li"><a class="redirect-create" data-toggle="tab" href="#my-library" id="my-library-li">My Worksheet</a></li>
                                                <li class="pub-lib-li"><a class="redirect-create" data-toggle="tab" href="#public-lib" id="public-library">Public Worksheet</a></li>
                                                <li><a class="redirect-create" data-toggle="tab" href="#ready-lesson" id="ready-lesson-li" class="refresh-public-lesson">Public Subjects & Lessons</a></li>
                                            </ul>
                                        </li>
                                        <li><a class="header-menu-left padd-adjus"  id="class-manager">Class Manager</a>
                                            <ul class="sub-menu-left" id="sub-class-manager">
                                                <li id="create-class-red"><a class="redirect-create" data-toggle="tab" href="#create-class" id="create-class-li">Create Class</a></li>
                                                <li id="manage-class-red"><a class="redirect-create" data-toggle="tab" href="#manage-class" id="manage-class-li">Manage Class</a></li>

                                            </ul>
                                        </li>
                                        <li><a class="header-menu-left padd-adjus redirect-create" href="#"> Message</a></li>                               
                                        <li><a class="header-menu-left padd-adjus redirect-create" href="#">Downloads</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal modal-red-brown" id="error-messages-modal" tabindex="-1" role="dialog" aria-hidden="true" style="padding-right: 17px; display: none;z-index: 3000;">
            <div class="modal-dialog">
                <div class="modal-content" style="margin-top: 42px;">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-xs-11" id="error-edit-class">

                            </div>
                            <img class="icon-close-classes-created" id="icon-close"  aria-hidden="true" style="top: 25%" src="<?php echo get_template_directory_uri(); ?>/library/images/close_white.png">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal modal-red-brown" id="top-popup-message" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;z-index: 3000;">
            <div class="modal-dialog">
                <div class="modal-contents" style="margin-top: 0;">
                    <div class="modal-body">
                        <div id="popup-message">

                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
        </div>

        <style>

            .tooltip-charge-student, .tooltip-manage-a-classroom{
                margin-top: 35px !important;
                font-size: 13px !important;
                font-weight: normal !important;
            }
            .tooltip-charge-student, .tooltip-manage-a-classroom a{
                color: #ff9600;
            }

            .checkboxagree{
                width: 28px;
                height: 20px;
                border-radius: 0;
                position: relative;
            }

            .sidenav {
                /*box-shadow: 5px 0px 0px 0px #F0F0F0;*/
                width: 220px;
                border-right: 1px solid #d6d6d6;
                width: 0;
                position: absolute;
                z-index: 4000;
                margin-left: 56px;
                background-color: #fff !important;
                overflow-x: hidden;
                transition: 0.5s;
                height: calc(100% - 63px);
                padding-top: 0px !important;
                overflow: hidden;
            }

            .sidenav a {
                padding: 0px 8px 8px 1px;
                text-decoration: none;
                font-size: 25px;
                display: block;
                transition: 0.3s;
                line-height: normal;
            }

            .sidenav a:hover {
                color: #f1f1f1;
            }

            .sidenav .closebtn {
                position: absolute;
                top: 0;
                right: 25px;
                font-size: 36px;
                margin-left: 50px;
            }
            .sidenav.open {
                width: 183px;
                margin-left: 53px;
                box-shadow: 5px 0px 0px 0px rgba(0,0,0,0.1); 
            }

            .selectboxit,.selectboxit-options{
                background: #ffffff !important;
                color: #4b4b4b !important;

            }
            .selectboxit-text{
                font-weight: normal !important;
            }
            .selectboxit-option-anchor{
                font-weight: normal !important;
            }
            .selectboxit-default-arrow{
                border-top-color:#4b4b4b !important;
            }


            /*  #time+ .selectboxit-container .selectboxit-options,
            #time + .selectboxit-container .selectboxit,
            #time + .selectboxit-btn.selectboxit-enabled:hover, 
            #time + .selectboxit-btn.selectboxit-enabled:focus, 
            #time + .selectboxit-btn.selectboxit-enabled:active {
                background-color: #e1f4fd  !important;
            }*/

            #month .selectboxit-btn.selectboxit-enabled:active,

            #month .selectboxit-container .selectboxit-options :hover,
            #month .selectboxit-container .selectboxit-options :focus,
            #date .selectboxit-btn.selectboxit-enabled:active,


            #date .selectboxit-container .selectboxit-options :hover,
            #date .selectboxit-container .selectboxit-options :focus
            {
                background-color: #e1f4fd  !important;
            }
            #month .selectboxit-container .selectboxit-options :hover,
            #month .selectboxit-container .selectboxit-options :focus,
            #date .selectboxit-container .selectboxit-options :hover,
            #date .selectboxit-container .selectboxit-options :focus
            {
                color: #4d4d4d !important;
            }
            .cb-type2{
                text-align: left;

            }
            .cb-type2 label{
                color: #4b4b4b;
                font-size: 15px;

            }
            #checkBoxSearch .cb-type2:first-child{
                padding-left: 0px !important;
            }
            #checkBoxSearch .cb-type2:last-child{
                padding-left: 30px !important;
                padding-right: 0px !important;
            }

            .option-input-2 {
                -webkit-appearance: none;
                -moz-appearance: none;
                -ms-appearance: none;
                -o-appearance: none;
                appearance: none;
                position: relative;
                top: 5.333px;
                right: 0;
                bottom: 0;
                left: 0;
                height: 22px;
                width: 22px;
                color: #fff;
                cursor: pointer;
                display: inline-block;
                margin-right: 0.5rem;
                outline: none;
                position: relative;
                z-index: 1;

                text-decoration: none;
            }
            .option-input-2:hover {

            }
            .option-input-2:checked {

            }
            .option-input-2:checked {
                content: "";
                background: url('<?php echo get_template_directory_uri(); ?>/library/images/Icon_Checked_Orange.png') no-repeat center;
                display: inline-block;
                background-position-x: 0px !important;
                /*                display: block;*/
                background-size: contain;

            }
            .box.box-arrow-down:after {
                content: "";
                background: url('<?php echo get_template_directory_uri(); ?>/library/images/Icon_Un-Check.png') no-repeat center;
                width: 100%;
                height: 36px;
                display: block;
                position: absolute;
                background-size: contain;
                left: 0;
            }
            .option-input-2:checked::after {

                display: block;
                position: relative;
                z-index: 100;
            }
        </style>
        <!-- End My Account Modal-->
        <div id="container">

            <header class="header header-math-new" itemscope itemtype="http://schema.org/WPHeader">

                <div class="top-nav"></div>

                <!-- <div class="main-nav-block"></div> -->

                <div class="container" style="position: relative">		

                    <div id="logo">
                        <a href="https://iktutor.com" rel="nofollow" title="<?php bloginfo('name'); ?>">
                            <img style="height: 25px; width: 100px;" src="<?php echo get_template_directory_uri(); ?>/library/images/ikTeach_Logo.png" alt="">
                        </a>
                    </div>

                    <div id="sub-logo">
                        <a href="https://iktutor.com" rel="nofollow" title="Innovative Knowledge">
                            <img style="height: 25px; width: 100px;" src="<?php echo get_template_directory_uri(); ?>/library/images/ikTeach_Logo.png" alt="">
                        </a>
                    </div>

                    <div class="dropdown" id="dropdown-account-custom">
                        <button class="dropdown-toggle text-uppercase view-my-account" id="btn-account-custom" type="button" data-toggle="dropdown" style="width: auto;">Account
                        <!-- <span class="caret"></span> --></button>
                        <!--                        <ul class="dropdown-menu" id="dropdown-menu-account-custom">
                                                    <li><a class="view-my-account">My Account</a></li>
                                                    <li><a href="<?php echo locale_home_url() ?>/?r=manage-subscription">Manage Subscription</a></li>
                                                    <li><a href="<?php echo locale_home_url() ?>/?r=private-messages">Private Message</a></li>
                                                    <li><a href="<?php echo locale_home_url() ?>/?r=private-messages&view=newpm&type=feedback">Feedback to Support</a></li>
                                                </ul>-->
                    </div>

                    <?php if (defined('IK_TEST_SERVER')) : ?>
                        <div style="position: absolute;left: 240px;top: 5px">
                            <h2 style="margin: 0px;color: #fff;font-style: italic;text-shadow: 1px 1px #000">Test Site</h2>
                        </div>
                    <?php endif ?>

                    <?php MWHtml::sel_lang_switcher() ?>
                    <ul id="user-nav">
                            <!-- <li><a href="#" class="user-name-custom">Peter Chung<span class=""></span></a></li>	 -->					
                        <?php if ($is_user_logged_in) : ?>
                            <li><a class="display-name view-my-account">[<?php echo get_user_meta($current_user->ID, 'first_name', true) . ' ' . get_user_meta($current_user->ID, 'last_name', true); ?>]</a></li>
                        <?php endif ?>
                        <li><a class="shopping-cart" href="<?php echo home_url_ssl() ?>/?r=payments" title="<?php _e('Shopping Cart', 'iii-dictionary') ?>"><span><img style="height: 18px;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_shopping.png"></span>(<?php echo count($cart_items) ?>)</a></li>
                        <!-- <li><a href="http://www.ikteach.com/<?php echo $lang; ?>" title="<?php _e('Home', 'iii-dictionary') ?>"><?php _e('Home', 'iii-dictionary') ?><span class="home-icon2"></span></a></li> -->
                        <?php if (!$is_user_logged_in) : ?>
                            <li><a href="<?php echo locale_home_url() ?>/?r=login" title="<?php _e('Login', 'iii-dictionary') ?>"><?php _e('Login', 'iii-dictionary') ?><span class="login-icon"></span></a></li>
                            <li><a class="sign-up-link" href="<?php echo locale_home_url() ?>/?r=signup" title="<?php _e('Sign-up', 'iii-dictionary') ?>"><?php _e('Sign-up', 'iii-dictionary') ?><span class="signup-icon"></span></a></li>

                            <li><a style="display: none;" class="home-icon2-custom" href="http://www.ikteach.com/<?php echo $lang; ?>" title="<?php _e('Home', 'iii-dictionary') ?>"><?php _e('Home', 'iii-dictionary') ?><span class="home-icon2"></span></a></li>

                        <?php else : ?>
                            <li><a class="logout-link" href="<?php echo wp_logout_url(locale_home_url()) ?>" title="<?php _e('Logout', 'iii-dictionary') ?>"><?php _e('Logout', 'iii-dictionary') ?><span class="login-icon"></span></a></li>
                        <?php endif ?>
                    </ul>

                    <!-- <div id="btn-main-menu" class="btn-menu-collapse"></div> -->
                    <div class="btn-menu-collapse" data-toggle="collapse" data-target="#navbarCollapse"></div>

                    <!-- <div id="main-nav" class="row menu_main_math_teacher">
                            
                        <nav class="navbar navbar-default" style="padding-top: 16px">
                    <?php
                    wp_nav_menu(array(// remove nav container
                        'container_class' => 'menu_main_math_teacher_home', // class of container (should you choose to use it)
                        'menu' => 'Main Menu Math', // nav name
                        'menu_class' => 'main-menu nav navbar-nav', // adding custom nav class
                        'theme_location' => 'main-nav-math-teach-home', // where it's located in the theme
                        'before' => '', // before the menu
                        'after' => '', // after the menu
                        'link_before' => '', // before each link
                        'link_after' => '', // after each link
                        'depth' => 0, // limit the depth of the nav
                        'fallback_cb' => ''                             // fallback function (if there is one)
                    ));
                    ?>
                            </nav>

                            <div id="btn-sub-menu" class="btn-menu-collapse"></div>

                            <nav class="navbar navbar-default" id="sub-user-nav">
                    <?php
                    wp_nav_menu(array(
                        'container' => false, // remove nav container
                        'container_class' => '', // class of container (should you choose to use it)
                        'menu' => 'Function Menu', // nav name
                        'menu_class' => 'user-nav nav navbar-nav math_teacher_nav', // adding custom nav class
                        'theme_location' => 'math-user-nav-teach', // where it's located in the theme
                        'before' => '', // before the menu
                        'after' => '', // after the menu
                        'link_before' => '', // before each link
                        'link_after' => '', // after each link
                        'depth' => 0, // limit the depth of the nav
                        'fallback_cb' => ''                             // fallback function (if there is one)
                    ));
                    ?>
                            </nav>

                            <nav class="navbar navbar-default visible-xs" id="lang-switcher-nav">
                    <?php
                    wp_nav_menu(array(
                        'container' => false, // remove nav container
                        'container_class' => '', // class of container (should you choose to use it)
                        'menu_class' => 'menu-lang-switcher nav navbar-nav', // adding custom nav class
                        'theme_location' => 'lang-switcher-nav', // where it's located in the theme
                        'before' => '', // before the menu
                        'after' => '', // after the menu
                        'link_before' => '', // before each link
                        'link_after' => '', // after each link
                        'depth' => 0, // limit the depth of the nav
                        'fallback_cb' => ''                             // fallback function (if there is one)
                    ));
                    ?>
                            </nav>
                    </div> -->

                </div>
                <!--============ Manage and Tutoring header=================-->

                <style type="text/css">
                    #main-nav-math{
                        padding-top: 4px;
                        display: block;
                        width: auto;
                        position: static;
                        height: 40px;
                    }
                    .navbar-math{
                        height: 40px;
                        border: none;
                        background: #EFEFEF;
                        box-shadow: 2px 2px #dbdbdb
                    }
                    .navbar-header-math{
                        height: 40px;
                    }
                    .navbar-header-math .navbar-brand {
                        height: 40px;
                        color: #004358;
                        padding: 10px;
                        -webkit-box-shadow: 10px 0 5px #dbdbdb;
                        box-shadow: 10px 0 5px #dbdbdb;
                        margin-right: 10px;
                        font-family:Myriad_bold;
                        font-weight: bold;
                        margin-left: 60px;
                        font-size: 16px !important;
                        background: url(http://ikteacher.moe/wp-content/themes/ik-learn/library/images/Icon_Arrow.png) no-repeat;
                        background-size: 5px;
                        background-position: right;
                        padding-right: 30px !important;
                        background-position-x: 135px;
                    }
                    .navbar-header-math .navbar-brand:hover{
                        color: #004358;
                    }
                    .navbar-math .navbar-nav li > a{
                        padding: 10px 20px;
                        color: #7c7c7c !important;
                        font-family: "Myriad Pro", "PT Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
                        font-size: 16px;
                    }
                    .navbar-math .navbar-nav li > a:hover{
                        color: #000 !important;
                    }
                    .navbar-math .navbar-nav >.active> a,
                    .navbar-math .navbar-nav >.active> a:hover,
                    .navbar-math .navbar-nav >.active> a:active{

                        box-shadow: none;
                        color: #000 !important;
                    }
                    .navbar-math .navbar-nav>li:not(:active):not(:last-child):after {
                        content: "";
                        background: url(http://ikteacher.moe/wp-content/themes/ik-learn/library/images/divide-grey.png) no-repeat 0 10px;
                        width: 1px;
                        height: 23px;
                        position: absolute;
                        top: 0;
                        right: 0;
                        display: block;
                        padding: 15px 0;
                    }
                    @media (min-width: 690px) and (max-width: 992px){
                        .navbar-header-math .navbar-brand{
                            margin:0;
                            padding-left: 0px;
                            font-size: 16px;
                        }
                        .navbar-math .navbar-nav li > a{
                            padding: 10px 20px;
                            font-size: 12px;
                        }
                    }
                    @media (max-width: 767px){
                        #main-nav-math{
                            display: none;
                        }
                    }
                </style>

                <div id="main-nav-math" class="row menu_main_math_teacher">
                    <div class="navbar-math navbar-default" >
                        <div class="container">
                            <div class="navbar-header navbar-header-math">
                                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                    <span class="sr-only">Toggle navigation</span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                                <a class="navbar-brand" href="#">Manage Classes</a>
                            </div>
                            <!-- Collect the nav links, forms, and other content for toggling -->
                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                <ul class="nav navbar-nav">
                                    <li class=""><a href="<?php echo locale_home_url() ?>/?r=create-group&amp;layout=create">Create a Class<span class="sr-only">(current)</span></a></li>
                                    <li><a href="<?php echo locale_home_url() ?>/?r=create-group-test">Create a Class A</a></li>
                                    <li><a href="<?php echo locale_home_url() ?>/?r=teachers-box">Manage a Class</a></li>
<!--                                    <li><a href="<?php echo locale_home_url() ?>/?r=homework-assignment">Assign Worksheets to a Class</a></li>
                                    <li><a href="<?php echo locale_home_url() ?>/?r=teaching/teach-class/sell-worksheet">Buy/Sell Worksheets</a></li>-->
                                </ul>
                            </div><!-- /.navbar-collapse -->
                        </div>
                    </div>
                </div>

                <nav id="navbarCollapse" class=" collapse navbar-mobile">
                    <div class="navbar navbar-default " id="navbarNavDropdown">
                        <div class="dropdown dropdown-mobile col-sm-6 col-md-6">
                            <div class="div-1">
                                <div class="div-2"> 
                                    <button class="btn dropdown-toggle mobile-menu-button" type="button" data-toggle="collapse" data-target="#dropdown-menu-manage"><div class="menu-div-mobile"><span class="menu-span-mobile">Manage Classes</span>
                                            <span class="manage-tutoring-caret"><img class="arrow-img" src="<?php echo get_template_directory_uri(); ?>/library/images/00_Down_arrow.png"></span></div></button>
                                    <ul class="collapse dropdown-menu-mobile" id="dropdown-menu-manage" style="background-color: ">
                                        <div>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=create-group&layout=create">Create a Class</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=teachers-box">Manage a Class</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=homework-assignment">Assign Worksheets to a class</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=teaching/teach-class/sell-worksheet">Buy/Sell Worksheets</a></li>
                                        </div>

                                    </ul>
                                </div>
                            </div>

                        </div>
                        <div class="dropdown dropdown-mobile col-sm-12 col-md-12">
                            <div class="div-1">
                                <div class="div-2"> 
                                    <button class="btn  dropdown-toggle mobile-menu-button" type="button" data-toggle="collapse" data-target="#dropdown-menu-tutoring"><div class="menu-div-mobile"><span class="menu-span-mobile">Turoring</span>
                                            <span class="manage-tutoring-caret"><img class="arrow-img" src="<?php echo get_template_directory_uri(); ?>/library/images/00_Down_arrow.png"></span></div></button>
                                    <ul class="collapse dropdown-menu-mobile" id="dropdown-menu-tutoring">
                                        <div>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=my-account#step4-collapse">Tutor Registration</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=teaching/teach-class">Tutor English Writing</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=teaching-math">Tutor Math</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=teaching-math/request-payment">Request Rayment</a></li>
                                        </div>

                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="dropdown dropdown-mobile language-dropdown">
                            <div class="div-1">
                                <div class="div-2"> 
                                    <button class="btn dropdown-toggle  mobile-menu-button" type="button" data-toggle="collapse" data-target="#dropdown-menu-language"><div class="menu-div-mobile"><span class="menu-span-mobile">Language</span>
                                            <span class="manage-tutoring-caret"><img class="arrow-img" src="<?php echo get_template_directory_uri(); ?>/library/images/00_Down_arrow.png"></span></div></button>
                                    <ul class="collapse dropdown-menu-mobile" id="dropdown-menu-language">
                                        <div>
                                            <li><a href="#">English</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/ja/">Japaneses</a></li>
                                            <li><a href="#">Korean</a></li>
                                            <li><a href="#">Vietnamese</a></li>
                                        </div>

                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="dropdown dropdown-mobile account-dropdown">
                            <div class="div-1">
                                <div class="div-2 dropdown-bottom"> 
                                    <button class="btn dropdown-toggle mobile-menu-button" type="button" data-toggle="collapse" data-target="#dropdown-menu-account"><div class="menu-div-mobile"><span class="menu-span-mobile">Account</span>
                                            <span class="manage-tutoring-caret"><img class="arrow-img" src="<?php echo get_template_directory_uri(); ?>/library/images/00_Down_arrow.png"></span></div></button>
                                    <ul class="collapse dropdown-menu-mobile" id="dropdown-menu-account">
                                        <div>
                                            <li><a class="view-my-account">My Account</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=manage-subscription">Manage Subscription</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=private-messages">Private Message</a></li>
                                            <li><a href="<?php echo locale_home_url() ?>/?r=private-messages&view=newpm&type=feedback">Feedback to Support</a></li>
                                        </div>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
                <!--============ End Manage and Tutoring header=================-->

                <script type="text/javascript">
                    function show_detail(id) {

                        var element = document.getElementById(id);


                        var check = element.classList.contains("hidden");

                        if (check == true) {

                            element.classList.remove("hidden");
                        } else {
                            element.classList.add("hidden");
                        }
                    }
                    ;
                    function edit_desc(id) {
                        document.getElementById("detaildesc" + id).classList.add("hidden");
                        document.getElementById("editdesc" + id).classList.add("hidden");
                        document.getElementById("detailinput" + id).classList.remove("hidden");
                        document.getElementById("editsuccess" + id).classList.remove("hidden");

                    }
                    ;
                    function edit_desc_pub(id) {
                        document.getElementById("detaildesc" + id).classList.add("hidden");
                        document.getElementById("editdesc" + id).classList.add("hidden");
                        document.getElementById("detail-input-pub" + id).classList.remove("hidden");
                        document.getElementById("editsuccess" + id).classList.remove("hidden");

                    }
                    ;

                </script>
                <link href="/wp-content/themes/ik-learn/library/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet" >
                <script src="/wp-content/themes/ik-learn/library/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
                <script type="text/javascript">
                (function ($) {
                    $(function () {

                        function show_detail_worksheet(id, class_open) {
                            var check = $(class_open).hasClass("hidden");
                            if (check == false) {
                                $(class_open).addClass(" hidden");
                                $(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Open.png"); //open-arrow là class của ảnh mũi  tên khi click chuột
                            } else {
                                $(id + " .open-arrow").click(function () {
                                    if ($(class_open).hasClass("hidden")) {
                                        $(".detail-tr-ready").not(id + " .detail-tr-ready").addClass(" hidden");
                                        $(".open-arrow img").not(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Open.png");
                                        $(class_open).removeClass("hidden");
                                        $(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Close.png");
                                    } else {
                                        $(".detail-tr-ready").not(id + " .detail-tr-ready").addClass(" hidden");
                                        $(".open-arrow img").not(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Open.png");
                                        $(class_open).addClass(" hidden");
                                        $(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Open.png");
                                    }
                                });
                            }
                        }
                        ;
                        function show_detail_worksheet_lesson(id, class_open) {

                            var check = $(class_open).hasClass("hidden");
                            if (check == false) {
                                $(class_open).addClass(" hidden");
                                $(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Open.png");
                            } else {
                                $(id + " .open-arrow").click(function () {
                                    if ($(class_open).hasClass("hidden")) {
                                        $(".detail-tr-lesson").not(id + " .detail-tr-lesson").addClass(" hidden");
                                        $(".open-arrow img").not(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Open.png");
                                        $(class_open).removeClass("hidden");
                                        $(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Close.png");
                                    } else {
                                        $(".detail-tr-lesson").not(id + " .detail-tr-lesson").addClass(" hidden");
                                        $(".open-arrow img").not(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Open.png");
                                        $(class_open).addClass(" hidden");
                                        $(id + " .open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Open.png");
                                    }
                                });
                            }
                        }
                        ;

                        function isValidEmail(emailText) {
                            var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
                            return pattern.test(emailText);
                        }
                        ;
                        var availability_checking = false;
                        var redirect = '<?php echo isset($redirect)?$redirect:"" ?>';
                        $("#check-availability").click(function (e) {
                            e.preventDefault();
                            if (availability_checking) {
                                return;
                            }
                            var tthis = $(this);
                            var viewport = getViewport(); 
                            var check_yes = $("#checked-availability").hasClass('yes-availability'); 
                            var check_no = $("#checked-availability").hasClass('not-availability');
                            var check_mb = $("#checked-availability").hasClass('available-mb');
                            if(viewport.width < 650){
                                if(!check_mb){
                                    $("#checked-availability").addClass('available-mb');
                                }
                            }else{
                                if(check_mb){
                                    $("#checked-availability").removeClass('available-mb');
                                }
                            }
                            if(check_yes){
                                $("#checked-availability").removeClass('yes-availability');
                            }
                            if(check_no){
                                $("#checked-availability").removeClass('not-availability');
                            }
                            $("#checked-availability span").text('');
                            var user_login = $("#user_login_signup").val().trim();
                            if (user_login != "") {
                                //tthis.popover("destroy");
                                availability_checking = true;
                                //tthis.find(".icon-loading").fadeIn();
                                $.getJSON(home_url + "/?r=ajax/availability/user", {user_login: user_login}, function (data) {
                                    if (isValidEmail(user_login)) {

                                        if (data [0] == 0) {                                            
                                            $("#checked-availability").addClass('not-availability');
                                            $("#checked-availability span").text('Not Available');    
                                        } else {
                                            $("#checked-availability").addClass('yes-availability');
                                            $("#checked-availability span").text('Available');
                                        }
                                    } else {
                                        if(check_yes){
                                            $("#checked-availability").removeClass('yes-availability');
                                        }
                                        if(check_no){
                                            $("#checked-availability").removeClass('not-availability');
                                        }
                                        $("#checked-availability span").text('');
                                    }
                                    availability_checking = false;
                                });
                            }
                        });

                        $('.r_agree_english').click(function (e) {
                            $('#r_agree_english').find('input').attr('checked', true);
                            $('#r_agree_english label').addClass('checked_lb');
                        });
                        $('.r_agree_math').click(function (e) {
                            $('#r_agree_math').find('input').attr('checked', true);
                            $('#r_agree_math label').addClass('checked_lb');
                        });
                        $(".page-tab").click(function (e) {
                            var tab = $(this).attr('data-tab');
                            $(".page-tab").removeClass('active');
                            $(this).addClass('active');
                            if (tab == 'english_class') {
                                $('.box_english').show();
                                $('.box_math').hide();
                            } else {
                                $('.box_english').hide();
                                $('.box_math').show();
                            }
                        });
                        $('.check_lb').click(function (e) {
                            var checked = $(this).find('input').attr('checked');
                            if (checked == 'checked') {
                                $(this).addClass('checked_lb');
                            } else {
                                $(this).removeClass('checked_lb');
                            }
                        });
                        $('.logout-link').click(function (e) {
                            localStorage.clear();
                        });
                        $(".view-my-account").click(function () {
                            $("#my-account-modal").modal('show');
                            var name = $(".display-name").text();
                            if (name !== '') {
                                $("#sub-createacc").removeClass("active");
                                $("#sub-profile").addClass("active");
                                $("#create-account").removeClass("active");
                                $("#create-account").removeClass("in");
                                $("#login-user").removeClass("active");
                                $("#profile").addClass("active");
                                $("#profile").addClass("in");
                            }

                        });
                        $(".sign-up").click(function () {
                            $("#login-user").removeClass("active");
                            $("#create-account").addClass(" active");

                            var img = '<?php echo get_template_directory_uri() ?>/library/images/Profile_Image.png';
                            $("#user-upload-avatar").attr('src',img);

                            $('span.placeholder').each(function () {
                                var text = $(this).text();
                                var font = $(this).css("font");
                                if(text == 'Year:'){
                                    var offset = 11;
                                }
                                else{
                                    if (document.documentMode || /Edge/.test(navigator.userAgent)) {
                                        //console.log("Edge");
                                        var offset = getDistancePlace(text, "Edge");
                                    }else if (navigator.userAgent.search("Firefox") >= 0){
                                        var offset = getDistancePlace(text, "Firefox");
                                        //console.log("Firefox");
                                    }else{
                                        var offset = 18;
                                    }
                                }
                                var left = (getTextWidth(text,font) + offset);
                                $(this).prev().css("padding-left",left+"px");
                            });
                        });
                        $('#my-account-modal').on('show.bs.modal', function (e)
                        {
                            if($('#create-class').hasClass('active'))
                                $('#close-modal').attr('data-tab','create-class');
                        });
                        $('#close-modal').click( function (e)
                        {
                            var close = $('#close-modal').attr('data-tab');
                            if(close == 'create-class'){
                                $('#my-account-modal').modal("show");
                            } else{
                                location.reload();
                            }
                            var clas = $("#group-name2").val();
                            var pass = $("#type-password2").val();
                            var re = $("#retype-password2").val();
                            var chk = $(".option-input-2").is(":checked");
                            var desc = $('#post_message2_ifr').contents().find('#tinymce').text();
                            var cbo = $('#select-type-explain-classSelectBoxItText').attr("data-val");
                            var selected = new Array();
                            var tutor = new Array();
                            $(".class_homework:checked").each(function () {
                                var price = $(this).closest("tr").find(".price-homework").val();
                                if($.trim(price) != ''){
                                    selected.push({price: price});
                                }
                            });
                            $(".check-toggle:checked").each(function () {
                                var price = $(this).closest(".option-tutoring2").find(".price_subject").val();
                                var name = $(this).closest(".option-tutoring2").find(".add-subject-tutor").val();   
                                if($.trim(price) != '' || $.trim(name) != ''){
                                    tutor.push({price: price, name: name});
                                }
                            });
                            
                            if(close == 'create-class'){
                                if(clas == "" && pass == "" && re == "" && desc == "" && !cbo && selected.length == 0 && tutor.length == 0 && !chk){
                                    $("#my-account-modal input:not(:checkbox, .input-current)").val("");
                                    $(".option-input-2").attr("checked", false);
                                    location.reload();
                                } 
                                else {
                                    $("#modal-redirect-alert").show();
                                }
                            }
                        });
                        
                        $("#account").click(function () {
                            var name = $(".display-name").text();
                            var viewport = getViewport();  
                            if(viewport.width < 650){
                                var check = $("#menu-account-nav").hasClass("open");
                            }else{
                                var check = $("#mySidenav").hasClass("open");
                            }
                            if (name !== '') {
                                if (check) {
                                    closeNav();
                                } else {
                                    $("#sub-myacc").css("display", "block");
                                    $("#sub-myacc").addClass("opensub");
                                    $("#sub-subscription").css("display", "none");
                                    $("#sub-subscription").removeClass("opensub");
                                    $("#sub-lesson-manager").css("display", "none");
                                    $("#sub-lesson-manager").removeClass("opensub");
                                    $("#sub-class-manager").css("display", "none");
                                    $("#sub-class-manager").removeClass("opensub");
                                    $('#menu-left-myaccount li:nth-child(3)').css("margin-top", "0px");
                                    openNav();
                                    $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "185px");
                                    $('#menu-left-myaccount li:nth-child(5)').css("margin-top", "4px");
                                    $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "8px");
                                }
                            }

                        });
                        $("#lesson").click(function () {
                            var name = $(".display-name").text();
                            var viewport = getViewport();  
                            if(viewport.width < 650){
                                var check = $("#menu-account-nav").hasClass("open");
                            }else{
                                var check = $("#mySidenav").hasClass("open");
                            }
                            if (name !== '') {
                                if (check) {
                                    closeNav();
                                } else {
                                    $("#sub-lesson-manager").css("display", "block");
                                    $("#sub-lesson-manager").addClass("opensub");
                                    $("#sub-myacc").css("display", "none");
                                    $("#sub-myacc").removeClass("opensub");
                                    $("#sub-subscription").css("display", "none");
                                    $("#sub-subscription").removeClass("opensub");
                                    $("#sub-class-manager").css("display", "none");
                                    $("#sub-class-manager").removeClass("opensub");
                                    $('#menu-left-myaccount li:nth-child(3)').css("margin-top", "0px");
                                    openNav();
                                    $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "-6px");
                                    $('#menu-left-myaccount li:nth-child(4)').css("margin-top", "156px");
                                    $('#menu-left-myaccount li:nth-child(5)').css("margin-top", "5px");
                                    $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "8px");
                                }
                            }

                        });
                        $("#icon-class").click(function () {
                            var name = $(".display-name").text();
                            var viewport = getViewport();  
                            if(viewport.width < 650){
                                var check = $("#menu-account-nav").hasClass("open");
                            }else{
                                var check = $("#mySidenav").hasClass("open");
                            }
                            if (name !== '') {
                                if (check) {
                                    closeNav();
                                } else {
                                    $("#sub-class-manager").css("display", "block");
                                    $("#sub-class-manager").addClass("opensub");
                                    $("#sub-myacc").css("display", "none");
                                    $("#sub-myacc").removeClass("opensub");
                                    $("#sub-subscription").css("display", "none");
                                    $("#sub-subscription").removeClass("opensub");
                                    $("#sub-lesson-manager").css("display", "none");
                                    $("#sub-lesson-manager").removeClass("opensub");
                                    $('#menu-left-myaccount li:nth-child(3)').css("margin-top", "0px");
                                    openNav();
                                    $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "-6px");
                                    $('#menu-left-myaccount li:nth-child(5)').css("margin-top", "62px");
                                    $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "7px");
                                }
                            }

                        });
                        $("#menu_Taggle").click(function () {
                            var name = $(".display-name").text();
                            var viewport = getViewport();  
                            if(viewport.width < 650){
                                var check = $("#menu-account-nav").hasClass("open");
                            }else{
                                var check = $("#mySidenav").hasClass("open");
                            }
                            if (name !== '') {
                                if (check) {
                                    closeNav();
                                } else {
                                    openNav();
                                    if ($("#sub-subscription").hasClass("opensub")) {
                                        $('#menu-left-myaccount li:nth-child(3)').css("margin-top", "89px");
                                        $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "7px");
                                    } else if ($("#sub-lesson-manager").hasClass("opensub")) {
                                        $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "-6px");
                                        $('#menu-left-myaccount li:nth-child(4)').css("margin-top", "156px");
                                        $('#menu-left-myaccount li:nth-child(5)').css("margin-top", "5px");
                                        $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "8px");
                                    } else if ($("#sub-class-manager").hasClass("opensub")) {
                                        $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "-6px");
                                        $('#menu-left-myaccount li:nth-child(5)').css("margin-top", "62px");
                                        $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "7px");
                                    } else {
                                        $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "185px");
                                        $('#menu-left-myaccount li:nth-child(5)').css("margin-top", "4px");
                                        $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "8px");
                                    }
                                }
                            }
                        });
                        $("#mySidenav a").click(function () {
                            closeNav();
                            $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "0px");
                        });
                        function openNav() {
                            var viewport = getViewport();  
                            if(viewport.width < 650){
                                $("#menu-account-nav").removeClass("open");
                                $("#menu-account-nav").removeClass("close");
                                $("#menu-account-nav").addClass("open");
                            }else{
                                $("#mySidenav").removeClass("open");
                                $("#mySidenav").removeClass("close");
                                $("#mySidenav").addClass("open");
                            }
                        }

                        function closeNav() {
                            var viewport = getViewport();  
                            if(viewport.width < 650){
                                $("#menu-account-nav").removeClass("open");
                                $("#menu-account-nav").removeClass("close");
                                $("#menu-account-nav").addClass("close");                                
                            }else{                          
                                $("#mySidenav").removeClass("open");
                                $("#mySidenav").removeClass("close");
                                $("#mySidenav").addClass("close");
                            }
                            $('#menu-left-myaccount li').css("margin-top", "0px");
                        }

                        $("#sub-subscription li").click(function () {
                            $(".sub-menu-left li").not("#sub-subscription li").removeClass("active");
                        });
                        $("#sub-lesson-manager li").click(function () {
                            $(".sub-menu-left li").not("#sub-lesson-manager li").removeClass("active");
                        });
                        $("#sub-myacc li").click(function () {
                            $(".sub-menu-left li").not("#sub-myacc li").removeClass("active");
                        });
                        $("#sub-class-manager li").click(function () {
                            $(".sub-menu-left li").not("#sub-class-manager li").removeClass("active");
                        });
// text "My Account"'s event
                        $("#myacc").click(function () {
                            $("#sub-myacc").css("display", "block");
                            $("#sub-myacc").addClass("opensub");
                            $("#sub-subscription").css("display", "none");
                            $("#sub-subscription").removeClass("opensub");
                            $("#sub-lesson-manager").css("display", "none");
                            $("#sub-lesson-manager").removeClass("opensub");
                            $("#sub-class-manager").css("display", "none");
                            $("#sub-class-manager").removeClass("opensub");

                            var viewport = getViewport();  
                            if(viewport.width < 650){
                                var check = $("#menu-account-nav").hasClass("open");
                            }else{
                                var check = $("#mySidenav").hasClass("open");
                            }

                            if (check) {
                                closeNav();
                                $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "0px");
                            } else {
                                openNav();
                                $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "185px");
                                $('#menu-left-myaccount li:nth-child(5)').css("margin-top", "4px");
                                $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "8px");
                            }
                        });
                        // text "Lesson Manager"'s event
                        $("#lesson-manager").click(function () {
                            $("#sub-lesson-manager").css("display", "block");
                            $("#sub-lesson-manager").addClass("opensub");
                            $("#sub-myacc").css("display", "none");
                            $("#sub-myacc").removeClass("opensub");
                            $("#sub-subscription").css("display", "none");
                            $("#sub-subscription").removeClass("opensub");
                            $("#sub-class-manager").css("display", "none");
                            $("#sub-class-manager").removeClass("opensub");

                            var viewport = getViewport();  
                            if(viewport.width < 650){
                                var check = $("#menu-account-nav").hasClass("open");
                            }else{
                                var check = $("#mySidenav").hasClass("open");
                            }

                            if (check) {
                                closeNav();
                                $('#menu-left-myaccount li:nth-child(3)').css("margin-top", "0px");
                            } else {
                                openNav();
                                $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "-6px");
                                $('#menu-left-myaccount li:nth-child(4)').css("margin-top", "156px");
                                $('#menu-left-myaccount li:nth-child(5)').css("margin-top", "5px");
                                $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "8px");
                            }

                        });
                        // text "Class Manager"'s event
                        $("#class-manager").click(function () {
                            $("#sub-class-manager").css("display", "block");
                            $("#sub-class-manager").addClass("opensub");
                            $("#sub-myacc").css("display", "none");
                            $("#sub-myacc").removeClass("opensub");
                            $("#sub-subscription").css("display", "none");
                            $("#sub-subscription").removeClass("opensub");
                            $("#sub-lesson-manager").css("display", "none");
                            $("#sub-lesson-manager").removeClass("opensub");

                            var viewport = getViewport();  
                            if(viewport.width < 650){
                                var check = $("#menu-account-nav").hasClass("open");
                            }else{
                                var check = $("#mySidenav").hasClass("open");
                            }

                            if (check) {
                                closeNav();
                                $('#menu-left-myaccount li:nth-child(4)').css("margin-top", "0px");
                            } else {
                                openNav();
                                $('#menu-left-myaccount li:nth-child(2)').css("margin-top", "-6px");
                                $('#menu-left-myaccount li:nth-child(5)').css("margin-top", "62px");
                                $('#menu-left-myaccount li:nth-child(6)').css("margin-top", "7px");
                            }

                        });
                        $('#btn-login').click(function () {
                            var username = $('#username').val();
                            var password = $('#password').val();
                            $.post(home_url + "/?r=ajax/login_account", {
                                user_name: username,
                                user_password: password
                             }, function (data) {
                                if ($.trim(data) == '1') {
                                    if (redirect == '')
                                        window.location.reload();
                                    else
                                        document.location.href = redirect;
                                } else {
                                    $('.box-title-1').html(data);
                                    $('#done-btn').text('OK');
                                    $('#modal-alert').modal('show');
                                }
                            });
                        });

                        $('#create-acc').click(function () {
                            var user_name = $('#user_login_signup').val();
                            var user_password = $('#user_password_signup').val();
                            var confirm_password = $('#confirm_password').val();
                            var first_name = $('#first_name').val();
                            var last_name = $('#last_name').val();
                            var birth_m = $("#birth_mSelectBoxItText").attr("data-val");
                            var birth_d = $("#birth_dSelectBoxItText").attr("data-val");
                            var birth_y = $('#birth_y').val();
                            var profile_avatar = $('#profile-avatar').val();
                            var cb_lang = [];
                            $('input[name="cb-lang"]:checked').each(function () {
                                var val = this.value;
                                if(val == '') var val = $(this).attr('data-lang');
                                cb_lang.push(val);
                            });
                            var viewport = getViewport();
                            if(viewport.width < 650){
                                var gender = $("#birth-g_mbSelectBoxItText").attr("data-val");
                            }else{
                                var gender = $("#birth_g_pcSelectBoxItText").attr("data-val");
                            }
                            $.post(home_url + "/?r=ajax/create_account", {
                                user_name: user_name,
                                user_password: user_password,
                                confirm_password: confirm_password,
                                first_name: first_name,
                                last_name: last_name,
                                birth_m: birth_m,
                                birth_d: birth_d,
                                birth_y: birth_y,
                                cb_lang: cb_lang,
                                profile_avatar: profile_avatar,
                                gender: gender
                            }, function (data) {
                                if ($.trim(data) == '1') {
                                    $('#popup-message').html('<p class="text-used">Basic Account has been created successfully</p><button id="got-home" type="button" class="btn-orange form-control nopadding-r border-btn">Got it</button>');
                                    $('#top-popup-message').css("display", "block");                                    
                                } else {
                                    $('#popup-message').html('<p class="text-used">' + data + '</p><button id="got-it" type="button" class="btn-orange form-control nopadding-r border-btn">OK</button>');
                                    $('#top-popup-message').css("display", "block");
                                }
                            });
                        });

                        $('.cancel-update-teacher').click(function () {
                            var id = $(this).attr('data-id');
                            var tab = $(this).attr('data-tab');
                            $('#profile').addClass('active in');
                            $('#sub-profile').addClass('active');
                            $("#" + tab).removeClass("active in");
                            $("#" + id).removeClass("active");
                        });

                        $('#update-teacher').click(function () {
                            var check_student = $('#chk-tutor-teacher').val();
                            //var user_email = $('#update_username').val();
                            var new_password = $('#update_password').val();
                            var retype_new_password = $('#update_confirmpass').val();
                            var first_name = $('#update_first_name').val();
                            var last_name = $('#update_last_name').val();
                            var birth_y = $('#update_birth_y').val();
                            
                            var mobile_number = $('#mobile-number-update').val();
                            var last_school = $('#last-school-update').val();
                            var previous_school = $('#previous-school-update').val();
                            var skype_id = $('#skype-update').val();
                            var user_profession = $('#profession-update').val();

                            var subject_description = $('#description-update').val();
                            var school_name = $('#school-name-update').val();
                            var teaching_link = $('#teaching-link-update').val();

                            var teaching_subject = $('#subject-update').val();
                            var student_link = $('#student-link-update').val();
                            var user_years = $('#years-update').val();
                            var school_attend = $('#school-attend-update').val();
                            var user_gpa = $('#gpa-update').val();
                            var user_major = $('#major-update').val();

                            var school_name1 = $('#school-name1-update').val();
                            var school_name2 = $('#school-name2-update').val();
                            var school_link1 = $('#school-link1-update').val();
                            var school_link2 = $('#school-link2-update').val();
                            var any_other = $('#any-other-update').val();
                            var user_grade = $("#grade-updateSelectBoxItText").attr("data-val");
                            var desc_tell_me = $('#desc_tell_update_ifr').contents().find('#tinymce').text();

                            
                            var birth_m = $("#update_birth_mSelectBoxItText").attr("data-val");
                            var birth_d = $("#update_birth_dSelectBoxItText").attr("data-val");

                            var cb_lang = [];
                            var subject_type = [];
                            var profile_avatar = $('#profile-value').val();
                            $('input[name="update-cb-lang"]:checked').each(function () {
                                cb_lang.push(this.value);
                            });
                            $('input[name="subject_type_update"]:checked').each(function () {
                                var val = this.value;
                                if(val == '') var val = $(this).attr('data-subject');
                                subject_type.push(val);
                            });

                            var msg = '';                                
                            var form_valid = true;
                            
                            if(mobile_number == '' || $.trim(mobile_number) == ''){
                                msg += 'Please enter Mobile Number</br>';
                                form_valid = false;
                            }
                            if(last_school == '' || $.trim(last_school) == ''){
                                msg += 'Please enter Last School Attended</br>';
                                form_valid = false;
                            }
                            if(user_profession == '' || $.trim(user_profession) == ''){
                                msg += 'Please enter Profession</br>';
                                form_valid = false;
                            }
                            if(desc_tell_me == '' || $.trim(desc_tell_me) == ''){
                                msg += 'Please enter Short description</br>';
                                form_valid = false;
                            }
                            if(subject_type.length == 0){
                                msg += 'Please check the box of Subjects you Interested</br>';
                                form_valid = false;
                            }
                            if($.trim(any_other) == '' || $.trim(school_name2) == ''){                
                                if(school_name1 == '' || $.trim(school_name1) == ''){
                                    msg += 'Please enter School Name 1</br>';
                                    form_valid = false;
                                }
                            }
                            if((school_name2 == '' && $.trim(school_name1) == '') || ($.trim(school_name2) == '' && $.trim(school_name1) == '')){
                                msg += 'Please enter School Name 2</br>';
                                form_valid = false;
                            }
                        
                            if((any_other == '' && $.trim(school_name1) == '' && $.trim(school_name2) == '') || ($.trim(any_other) == '' && $.trim(school_name1) == '' && $.trim(school_name2) == '')){
                                msg += 'Please enter Others</br>';
                                form_valid = false;
                            }

                            
                            if(check_student == 0){
                                $.post(home_url + "/?r=ajax/update_info", {
                                    new_password: new_password,
                                    retype_new_password: retype_new_password,
                                    first_name: first_name,
                                    last_name: last_name,
                                    birth_y: birth_y,
                                    birth_m: birth_m,
                                    birth_d: birth_d,
                                    cb_lang: cb_lang,
                                    profile_avatar: profile_avatar,
                                    type: "update"
                                }, function (data) {
                                    if ($.trim(data) == '1') {
                                        $('#popup-message').html('<p class="text-used">Account Info Updated!<br/>Your account has been updated successfully.</p><button id="got-profile" type="button" class="btn-orange form-control nopadding-r border-btn" data-id="sub-update-info" data-tab="updateinfo">Got it</button>');
                                        $('#top-popup-message').css("display", "block");
                                    } else {
                                        $('#popup-message').html('<p class="text-used">' + data + '</p><button id="got-it" type="button" class="btn-orange form-control nopadding-r border-btn">OK</button>');
                                        $('#top-popup-message').css("display", "block");
                                    }
                                });
                            }   
                            
                            if(form_valid && check_student == 1){
                                $.post(home_url + "/?r=ajax/update_info", {
                                    new_password: new_password,
                                    retype_new_password: retype_new_password,
                                    first_name: first_name,
                                    last_name: last_name,
                                    birth_y: birth_y,
                                    birth_m: birth_m,
                                    birth_d: birth_d,
                                    cb_lang: cb_lang,
                                    subject_type: subject_type,
                                    desc_tell_me: desc_tell_me,
                                    user_grade: user_grade,
                                    any_other: any_other,
                                    school_link2: school_link2,
                                    school_link1: school_link1,
                                    school_name2: school_name2,
                                    school_name1: school_name1,
                                    user_major: user_major,
                                    user_gpa: user_gpa,
                                    school_attend: school_attend,
                                    user_years: user_years,
                                    student_link: student_link,
                                    teaching_subject: teaching_subject,
                                    teaching_link: teaching_link,
                                    school_name: school_name,
                                    subject_description: subject_description,
                                    last_school: last_school,
                                    previous_school: previous_school,
                                    skype_id: skype_id,
                                    user_profession: user_profession,
                                    mobile_number: mobile_number,
                                    type: "update"
                                }, function (data) {
                                    if ($.trim(data) == '1') {                                        
                                        $('#popup-message').html('<p class="text-used">Account Info Updated!<br/>Your account has been updated successfully.</p><button id="got-profile" type="button" class="btn-orange form-control nopadding-r border-btn" data-id="sub-update-info" data-tab="updateinfo">Got it</button>');
                                        $('#top-popup-message').css("display", "block");
                                    } else {
                                        $('#popup-message').html('<p class="text-used">' + data + msg +'</p><button id="got-it" type="button" class="btn-orange form-control nopadding-r border-btn">OK</button>');
                                        $('#top-popup-message').css("display", "block");
                                    }
                                });
                            }                         
                        });

                        $("#input-avatar").change(function () {
                            var file_data = $('#input-avatar').prop('files')[0];
                            var type = file_data.type;
                            var match = ["image/gif", "image/png", "image/jpg", ];
                            var form_data = new FormData();
                            form_data.append('file', file_data);
                            $.ajax({
                                url: home_url + "/?r=ajax/upload_avatar",
                                dataType: 'text',
                                cache: false,
                                contentType: false,
                                processData: false,
                                data: form_data,
                                type: 'post',
                                success: function (res) {
                                    if ($.trim(res) != '0') {
                                        $("#profile-avatar").val($.trim(res));
                                        $("#user-upload-avatar").attr('src',$.trim(res));
                                    } else {
                                        $('#popup-message').html('<p class="text-used">Error: There was an error uploading your file</p><button id="got-it" type="button" class="btn-orange form-control nopadding-r border-btn">OK</button>');
                                        $('#top-popup-message').css("display", "block");
                                    }
                                }
                            });
                        });
                        $("#input-image").change(function () {
                            var file_data = $('#input-image').prop('files')[0];
                            var type = file_data.type;
                            var form_data = new FormData();
                            form_data.append('file', file_data);
                            $.ajax({
                                url: home_url + "/?r=ajax/upload_avatar",
                                dataType: 'text',
                                cache: false,
                                contentType: false,
                                processData: false,
                                data: form_data,
                                type: 'post',
                                success: function (res) {
                                    if ($.trim(res) != '0') {
                                        $("#profile-value").val($.trim(res));
                                        $("#user-upload-img").attr('src',$.trim(res));
                                    } else {
                                        $('#popup-message').html('<p class="text-used">Error: There was an error uploading your file</p><button id="got-it" type="button" class="btn-orange form-control nopadding-r border-btn">OK</button>');
                                        $('#top-popup-message').css("display", "block");
                                    }
                                }
                            });
                        });

                        $("#update-check-availability").click(function (e) {
                            e.preventDefault();
                            if (availability_checking) {
                                return;
                            }
                            var tthis = $(this);
                            var viewport = getViewport(); 
                            var check_yes = $("#update-checked-availability").hasClass('yes-availability'); 
                            var check_no = $("#update-checked-availability").hasClass('not-availability');
                            var check_mb = $("#update-checked-availability").hasClass('available-mb');
                            if(viewport.width < 650){
                                if(!check_mb){
                                    $("#update-checked-availability").addClass('available-mb');
                                }
                            }else{
                                if(check_mb){
                                    $("#update-checked-availability").removeClass('available-mb');
                                }
                            }
                            if(check_yes){
                                $("#update-checked-availability").removeClass('yes-availability');
                            }
                            if(check_no){
                                $("#update-checked-availability").removeClass('not-availability');
                            }
                            $("#update-checked-availability span").text('');
                            var user_login = $("#update_username").val().trim();
                            if (user_login != "") {
                                //tthis.popover("destroy");
                                availability_checking = true;
                                //tthis.find(".icon-loading").fadeIn();
                                $.getJSON(home_url + "/?r=ajax/availability/user", {user_login: user_login}, function (data) {
                                    if (isValidEmail(user_login)) {

                                        if (data [0] == 0) {                                            
                                            $("#update-checked-availability").addClass('not-availability');
                                            $("#update-checked-availability span").text('Not Available');    
                                        } else {
                                            $("#update-checked-availability").addClass('yes-availability');
                                            $("#update-checked-availability span").text('Available');
                                        }
                                    } else {
                                        if(check_yes){
                                            $("#update-checked-availability").removeClass('yes-availability');
                                        }
                                        if(check_no){
                                            $("#update-checked-availability").removeClass('not-availability');
                                        }
                                        $("#update-checked-availability span").text('');
                                    }
                                    availability_checking = false;
                                });
                            }
                        });

                        $("#sub-update-info a").click(function (e) {
                            get_update_info();                                                      
                            $('span.placeholder').each(function () {
                                var text = $(this).text();
                                var font = $(this).css("font");                                
                                if(text == 'Year:'){
                                    var offset = 11;
                                }
                                else{
                                    if (document.documentMode || /Edge/.test(navigator.userAgent)) {
                                        //console.log("Edge");
                                        var offset = getDistancePlace(text, "Edge");
                                    }else if (navigator.userAgent.search("Firefox") >= 0){
                                        var offset = getDistancePlace(text, "Firefox");
                                        //console.log("Firefox");
                                    }else{
                                        var offset = 18;
                                    }
                                }
                                var left = (getTextWidth(text,font) + offset);
                                $(this).prev().css("padding-left",left+"px");
                            }); 
                        });

                        $("#tutor-regist a").click(function (e) {
                            $('span.placeholder').each(function () {
                                var text = $(this).text();
                                var font = $(this).css("font");
                                if(text == 'Year:'){
                                    var offset = 11;
                                }
                                else{
                                    if (document.documentMode || /Edge/.test(navigator.userAgent)) {
                                        //console.log("Edge");
                                        var offset = getDistancePlace(text, "Edge");
                                    }else if (navigator.userAgent.search("Firefox") >= 0){
                                        var offset = getDistancePlace(text, "Firefox");
                                        //console.log("Firefox");
                                    }else{
                                        var offset = 18;
                                    }
                                }
                                var left = (getTextWidth(text,font) + offset);
                                $(this).prev().css("padding-left",left+"px");
                            }); 
                        });

                        $("#sub-createacc a").click(function (e) {
                            var img = '<?php echo get_template_directory_uri() ?>/library/images/Profile_Image.png';
                            $("#user-upload-avatar").attr('src',img);

                            $('span.placeholder').each(function () {
                                var text = $(this).text();
                                var font = $(this).css("font");
                                if(text == 'Year:'){
                                    var offset = 11;
                                }
                                else{
                                    if (document.documentMode || /Edge/.test(navigator.userAgent)) {
                                        //console.log("Edge");
                                        var offset = getDistancePlace(text, "Edge");
                                    }else if (navigator.userAgent.search("Firefox") >= 0){
                                        var offset = getDistancePlace(text, "Firefox");
                                        //console.log("Firefox");
                                    }else{
                                        var offset = 18;
                                    }
                                }
                                var left = (getTextWidth(text,font) + offset);
                                $(this).prev().css("padding-left",left+"px");
                            }); 
                        });

                        $("#sub-profile a").click(function (e) {
                            get_profile_info();
                        });

                        function getTextWidth(text, font) {
                            var canvas = getTextWidth.canvas ||
                                (getTextWidth.canvas = document.createElement("canvas"));
                            var context = canvas.getContext("2d");
                            context.font = font;
                            var metrics = context.measureText(text);
                            return metrics.width;
                        };

                        $("#info").keypress(function () {
                            var stt = $("#rdo-agreed").is(":checked");
                            var data = 'Please read and check the box of Terms and Conditions';
                            if (stt == false) {
                                $('#error-edit-class').html(data);
                                $('#error-messages-modal').css("display", "block");
                                $("#info").find('input').attr('readonly', true);
                            } else {
                                $("#info").find('input').attr('readonly', false);
                            }
                        });

                        /*$("#info2").keypress(function () {
                            var stt = $("#rdo-agreed2").is(":checked");
                            var data = 'Please read and check the box of Terms and Conditions';
                            if (stt == false) {
                                $('#error-edit-class').html(data);
                                $('#error-messages-modal').css("display", "block");
                                $("#info2").find('input').attr('readonly', true);
                            } else {
                                $("#info2").find('input').attr('readonly', false);
                            }
                        });*/
                        $(".tutor-regis").live('click', function () {
                            var stt = $("#rdo-agreed").is(":checked");
                            var data = 'Please read and check the box of Terms and Conditions';
                            if (stt == false) {
                                $('#error-edit-class').html(data);
                                $('#error-messages-modal').css("display", "block");
                                $(".extend-tutor").css("display", "none");
                                $(".tutor-regis").attr("checked", false);
                            } else {
                                var tutor = $("#eng-writing").is(":checked");
                                var tutor2 = $("#eng-conver").is(":checked");
                                var tutor3 = $("#math-middle").is(":checked");
                                var tutor4 = $("#math-any").is(":checked");
                                if (tutor == true) {
                                    $("#extend-tutor").css("display", "block");
                                } else {
                                    $("#extend-tutor").css("display", "none");
                                }
                                if (tutor2 == true) {
                                    $("#extend-tutor2").css("display", "block");
                                } else {
                                    $("#extend-tutor2").css("display", "none");
                                }
                                if (tutor3 == true) {
                                    $("#extend-tutor3").css("display", "block");
                                } else {
                                    $("#extend-tutor3").css("display", "none");
                                }

                                if (tutor4 == true) {
                                    $("#extend-tutor4").css("display", "block");
                                } else {
                                    $("#extend-tutor4").css("display", "none");
                                }
                            }
                        });
                        $("#rdo-agreed").click(function () {
                            var stt = $("#rdo-agreed").is(":checked");
                            var data = 'Please read and check the box of Terms and Conditions';
                            if (stt == false) {
                                $('#error-edit-class').html(data);
                                $('#error-messages-modal').css("display", "block");
                                $(".extend-tutor").css("display", "none");
                                $(".tutor-regis").attr("checked", false);
                                $("#info").find('input').attr('readonly', true);
                            }
                        });
                        $(".tutor-regis2").click(function () {
                            var stt = $("#rdo-agreed2").is(":checked");
                            var data = 'Please read and check the box of Terms and Conditions';
                            if (stt == false) {
                                $('#error-edit-class').html(data);
                                $('#error-messages-modal').css("display", "block");
                                $(".extend-tutor").css("display", "none");
                                $(".tutor-regis2").attr("checked", false);
                            } else {
                                var tutor = $("#eng-writing-tab").is(":checked");
                                var tutor2 = $("#eng-conver-tab").is(":checked");
                                var tutor3 = $("#math-middle-tab").is(":checked");
                                var tutor4 = $("#math-any-tab").is(":checked");
                                if (tutor == true) {
                                    $("#extend-tutor-tab1").css("display", "block");
                                } else {
                                    $("#extend-tutor-tab1").css("display", "none");
                                }
                                if (tutor2 == true) {
                                    $("#extend-tutor-tab2").css("display", "block");
                                } else {
                                    $("#extend-tutor-tab2").css("display", "none");
                                }
                                if (tutor3 == true) {
                                    $("#extend-tutor-tab3").css("display", "block");
                                } else {
                                    $("#extend-tutor-tab3").css("display", "none");
                                }
                                if (tutor4 == true) {
                                    $("#extend-tutor-tab4").css("display", "block");
                                } else {
                                    $("#extend-tutor-tab4").css("display", "none");
                                }
                            }
                        });
                        /*$("#rdo-agreed2").click(function () {
                            var stt = $("#rdo-agreed2").is(":checked");
                            var data = 'Please read and check the box of Terms and Conditions';
                            if (stt == false) {
                                $('#error-edit-class').html(data);
                                $('#error-messages-modal').css("display", "block");
                                $(".extend-tutor").css("display", "none");
                                $(".tutor-regis").attr("checked", false);
                                $("#info").find('input').attr('readonly', true);
                            }
                        });*/
                        $("#icon-close").click(function () {
                            $("#error-messages-modal").css("display", "none");
                        });
                        $("#val-credit-code").click(function () {
                            var credit_code = $("#credit-code").val();
                            var dictionary_id = $("#dictionary-id").val();
                            var starting_date_txt = $("#starting-date-txt").val();
                            var assoc_group = $("#assoc-group").val();
                            var group_name = $("#group-name").val();
                            var group_pass = $("#group-pass").val();
                            var activation_code = $("#activation-code").val();
                            var data = {
                                credit_code: credit_code,
                                dictionary_id: dictionary_id,
                                starting_date_txt: starting_date_txt,
                                assoc_group: assoc_group,
                                group_name: group_name,
                                group_pass: group_pass,
                                activation_code: activation_code
                            };
                            $.post(home_url + "/?r=ajax/credit_code", {
                                data: data
                            }, function (result) {
                                if ($.trim(result) != '1') {
                                    $('#error-edit-class').html(result);
                                    $('#error-messages-modal').css("display", "block");
                                }
                            });
                        });
                        $(".forgot-pass").click(function () {
                            $("#login-user").addClass("hidden");
                            $("#login-user").removeClass("active");
                            $("#lost-password").removeClass("hidden");
                            $("#lost-password").addClass("active");
                        });
                        //order My lesson on Add lesson From My Lesson
                        $("#icon-option-less3").click(function () {
                            var sort = $(this).attr("data-sort");
                            $.post(home_url + "/?r=ajax/get_my_lesson", {sort: sort}, function (data) {
                                $("#table-less3").html('');
                                if (data !== "0") {
                                    if (sort == "upward") {
                                        $("#icon-option-less3").attr("data-sort", "downward");
                                        $(".img-sort-lesson3").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                    } else if (sort == "downward") {
                                        $("#icon-option-less3").attr("data-sort", "upward");
                                        $(".img-sort-lesson3").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                    }
                                    var html = '';
                                    data = JSON.parse(data);
                                    if (data.publesson != null) {
                                        if (data.publesson.length > 0) {
                                            $.each(data.publesson, function (i, v) {
                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" data-public="1" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 8) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Dictionary.png" alt="lesson" >';
                                                } else if (v.cate == 9) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                                } else if (v.cate == 10) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-ready-lesson my-public-lesson2" data-lid="' + v.id + '" data-gid="' + v.group_id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                if (v.price != 0) {
                                                    html += '<div class="price-lesson"><span class="">$</span>' + v.price + ' </div>';
                                                } else {
                                                    html += '<div class="price-lesson"><span class="">FREE</div>';
                                                }
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.lesson != null) {
                                        if (data.lesson.length > 0) {
                                            $.each(data.lesson, function (i, v) {
                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-lesson my-lesson-ws2" data-lid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    $("#table-less3").html(html);
                                } else {
                                    html += '<tr id="lesson-tr" class="lesson-tr">';
                                    html += '<td></td><td colspan="4">No results.</td></tr>';
                                    $("#table-less3").html(html);
                                }

                            });
                        });
                        //order My lesson
                        $("#icon-option-lesson").click(function () {
                            var sort = $(this).attr("data-sort");
                            $.post(home_url + "/?r=ajax/get_my_lesson", {sort: sort}, function (data) {
                                $("#table-my-lesson").html('');
                                if (data !== "0") {
                                    if (sort == "upward") {
                                        $("#icon-option-lesson").attr("data-sort", "downward");
                                        $(".img-sort-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                    } else if (sort == "downward") {
                                        $("#icon-option-lesson").attr("data-sort", "upward");
                                        $(".img-sort-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                    }
                                    var html = '';
                                    data = JSON.parse(data);
                                    if (data.publesson != null) {
                                        if (data.publesson.length > 0) {
                                            $.each(data.publesson, function (i, v) {
                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" data-public="1" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 8) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Dictionary.png" alt="lesson" >';
                                                } else if (v.cate == 9) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                                } else if (v.cate == 10) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-ready-lesson my-public-lesson" data-lid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-worksheet" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                if (v.price != 0) {
                                                    html += '<div class="price-lesson"><span class="">$</span>' + v.price + ' </div>';
                                                } else {
                                                    html += '<div class="price-lesson"><span class="">FREE</div>';
                                                }
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.lesson != null) {
                                        if (data.lesson.length > 0) {
                                            $.each(data.lesson, function (i, v) {

                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-lesson my-lesson-ws" data-lid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-worksheet" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="add-worksheet-ic" data-lid="' + v.id + '" data-name="' + v.name + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Add_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    $("#table-my-lesson").html(html);
                                } else {
                                    html += '<tr id="lesson-tr" class="lesson-tr">';
                                    html += '<td></td><td colspan="4">No results.</td></tr>';
                                    $("#table-my-lesson").html(html);
                                }

                            });
                        });
                        //order English Public Library
                        $("#icon-option-eng").click(function () {
                            if ($("#option-detail-eng").hasClass("hidden")) {
                                $("#option-detail-eng").removeClass("hidden");
                            } else {
                                $("#option-detail-eng").addClass(" hidden");
                            }
                        });
                        //order Math Public Library

                        $("#icon-option-math").click(function () {
                            if ($("#option-detail-math").hasClass("hidden")) {
                                $("#option-detail-math").removeClass("hidden");
                            } else {
                                $("#option-detail-math").addClass(" hidden");
                            }
                        });
                        //order My Library
                        $("#icon-option-library").click(function () {
                            var sort = $(this).attr("data-sort");
                            $.post(home_url + "/?r=ajax/get_my_library", {sort: sort}, function (data) {
                                $("#table-library").html('');
                                if (data !== "0") {
                                    if (sort == "upward") {
                                        $("#icon-option-library").attr("data-sort", "downward");
                                        $(".img-sort").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                    } else if (sort == "downward") {
                                        $("#icon-option-library").attr("data-sort", "upward");
                                        $(".img-sort").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                    }
                                    data = JSON.parse(data);
                                    if (data.library.length > 0) {
                                        $.each(data.library, function (i, v) {
                                            var html = '';
                                            html += '<tr id="tr-lesson-' + v.sheet_id + '" class="tr-lesson">';
                                            html += ' <td >';
                                            html += '<div class="cb-type2">';
                                            html += '<label>';
                                            html += ' <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-mylibrary radio" value="' + v.name + '" data-id="' + v.sheet_id + '" name="select-tr"/>';
                                            html += '</label>';
                                            html += '</div>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            if (v.cate == 1) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                            } else if (v.cate == 5) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                            } else if (v.cate == 2) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                            } else if (v.cate == 3) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                            } else if (v.cate == 4) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                            } else if (v.cate == 6) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                            } else if (v.cate == 7) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                            }
                                            html += v.assignment + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" >';
                                            html += '<span class="name-lesson-2">' + v.name + '</span>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="delete-worksheet" data-id="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                            html += '<div class="magnifiy-worksheet-ic"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Magnifiy.png" class="" alt="lesson" ></div>';
                                            html += '<div class="detail-worksheet-ic" data-sid="' + v.sheet_id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                            $("#table-library").append(html);
                                        });
                                    }
                                } else {
                                    var html = '';
                                    html += '<tr><td colspan="4">No results.</td>';
                                    html += '</tr>';
                                    $("#table-library").append(html);
                                }
                            });
                        });
                        //order worksheet of Add Worksheet in My Lesson
                        $("#icon-option-library2").click(function () {
                            var sort = $(this).attr("data-sort");
                            $.post(home_url + "/?r=ajax/get_my_library", {sort: sort}, function (data) {
                                $("#table-library2").html('');
                                if (data !== "0") {
                                    if (sort == "upward") {
                                        $("#icon-option-library2").attr("data-sort", "downward");
                                        $(".img-sort2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                    } else if (sort == "downward") {
                                        $("#icon-option-library2").attr("data-sort", "upward");
                                        $(".img-sort2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                    }
                                    data = JSON.parse(data);
                                    if (data.library.length > 0) {
                                        $.each(data.library, function (i, v) {
                                            var html = '';
                                            html += '<tr id="tr-lesson-' + v.sheet_id + '" class="tr-lesson">';
                                            html += ' <td >';
                                            html += '<div class="cb-type2">';
                                            html += '<label>';
                                            html += ' <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-mylibrary radio" value="' + v.name + '" data-id="' + v.sheet_id + '" name="select-tr"/>';
                                            html += '</label>';
                                            html += '</div>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            if (v.cate == 1) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                            } else if (v.cate == 5) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                            } else if (v.cate == 2) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                            } else if (v.cate == 3) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                            } else if (v.cate == 4) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                            } else if (v.cate == 6) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                            } else if (v.cate == 7) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                            }
                                            html += v.assignment + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" >';
                                            html += '<span class="name-lesson-2">' + v.name + '</span>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="delete-worksheet" data-id="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                            html += '<div class="magnifiy-worksheet-ic"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Magnifiy.png" class="" alt="lesson" ></div>';
                                            html += '<div class="detail-worksheet-ic" data-sid="' + v.sheet_id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                            $("#table-library2").append(html);
                                        });
                                    }
                                } else {
                                    var html = '';
                                    html += '<tr><td colspan="4">No results.</td>';
                                    html += '</tr>';
                                    $("#table-library2").append(html);
                                }
                            });
                        });
                        // "Select All" checkbox's event of Add Lesson in Create Class
                        $("#select-all-less5").click(function () {
                            if ($("#select-all-less5").is(":checked")) {
                                $(".option-input-lesson-check").attr("checked", true);
                            } else
                                $(".option-input-lesson-check").attr("checked", false);
                        });
                        // "Select All" checkbox's event of My Lesson
                        $("#select-all-lesson").click(function () {
                            if ($("#select-all-lesson").is(":checked")) {
                                $(".option-input-lesson-check").attr("checked", true);
                            } else
                                $(".option-input-lesson-check").attr("checked", false);
                        });
                        // "Select All" checkbox's event of Math in Public Library
                        $("#select-all-math").click(function () {
                            if ($("#select-all-math").is(":checked")) {
                                $(".option-input-worksheet-math").attr("checked", true);
                            } else
                                $(".option-input-worksheet-math").attr("checked", false);
                        });
                        // "Select All" checkbox's event of Add Worksheet MAth in My Lesson
                        $("#select-all-math2").live("click", function () {
                            if ($("#select-all-math2").is(":checked")) {
                                $(".option-input-worksheet-math").attr("checked", true);
                            } else
                                $(".option-input-worksheet-math").attr("checked", false);
                        });
                        // "Select All" checkbox's event of Add Worksheet Math in My Library
                        $("#select-all-math3").live("click", function () {
                            if ($("#select-all-math3").is(":checked")) {
                                $(".option-input-worksheet-math").attr("checked", true);
                            } else
                                $(".option-input-worksheet-math").attr("checked", false);
                        });
                        // "Select All" checkbox's event of English in Public Library
                        $("#select-all-eng").click(function () {
                            if ($("#select-all-eng").is(":checked")) {
                                $(".option-input-worksheet-eng").attr("checked", true);
                            } else
                                $(".option-input-worksheet-eng").attr("checked", false);
                        });
                        // "Select All" checkbox's event of Add Worksheet English in My Lesson
                        $("#select-all-eng2").live("click", function () {
                            if ($("#select-all-eng2").is(":checked")) {
                                $(".option-input-worksheet-eng").attr("checked", true);
                            } else
                                $(".option-input-worksheet-eng").attr("checked", false);
                        });
                        // "Select All" checkbox's event of Add Worksheet in My Library
                        $("#select-all-eng3").live("click", function () {
                            if ($("#select-all-eng3").is(":checked")) {
                                $(".option-input-worksheet-eng").attr("checked", true);
                            } else
                                $(".option-input-worksheet-eng").attr("checked", false);
                        });
                        // "Select All" checkbox's event of  My Library
                        $("#select-all-mylibrary").live("click", function () {
                            if ($("#select-all-mylibrary").is(":checked")) {
                                $(".option-input-mylibrary").attr("checked", true);
                            } else
                                $(".option-input-mylibrary").attr("checked", false);
                        });
                        // "Select All" checkbox's event of Add Worksheet from My Library in My Lesson
                        $("#select-all-mylibrary2").live("click", function () {
                            if ($("#select-all-mylibrary2").is(":checked")) {
                                $(".option-input-mylibrary").attr("checked", true);
                            } else
                                $(".option-input-mylibrary").attr("checked", false);
                        });
                        //"Search and Assign Lesson" button's event in My Lesson
                        $("#btn-assign").click(function () {
                            $("#search-lesson").val("");
                            if ($("#btn-assign").hasClass("btn-assign")) {
                                $("#btn-assign").removeClass("btn-assign");
                                $("#btn-assign").addClass("btn-down");
                                $("#select-assign").slideDown("fast");
                                get_groups('select-class-lesson');
                            } else {
                                $("#btn-assign").removeClass("btn-down");
                                $("#btn-assign").addClass("btn-assign");
                                $("#select-assign").slideUp("fast");
                            }
                        });
                        //"Search and Assign Lesson" button's event of Add lesson From My Lesson in Create Class
                        $("#btn-assign-lesson-down").click(function () {
                            if ($("#btn-assign-lesson-down").hasClass("btn-assign")) {
                                $("#btn-assign-lesson-down").removeClass("btn-assign");
                                $("#btn-assign-lesson-down").addClass("btn-down");
                                $("#select-assign-lesson").slideDown("fast");

                            } else {
                                $("#btn-assign-lesson-down").removeClass("btn-down");
                                $("#btn-assign-lesson-down").addClass("btn-assign");
                                $("#select-assign-lesson").slideUp("fast");
                            }
                        });
                        //"Search and Assign Lesson" button's event of Add Subject From My Subject in Create Class
                        $("#search-add-sub").click(function () {
                            if ($("#search-add-sub").hasClass("btn-assign")) {
                                $("#search-add-sub").removeClass("btn-assign");
                                $("#search-add-sub").addClass("btn-down");
                                $("#select-assign-sub2").slideDown("fast");

                            } else {
                                $("#search-add-sub").removeClass("btn-down");
                                $("#search-add-sub").addClass("btn-assign");
                                $("#select-assign-sub2").slideUp("fast");
                            }
                        });
                        //"Search and Assign Lesson" button's event of My Subject
                        $("#btn-assign-subject").click(function () {
                            if ($("#btn-assign-subject").hasClass("btn-assign")) {
                                $("#btn-assign-subject").removeClass("btn-assign");
                                $("#btn-assign-subject").addClass("btn-down");
                                $("#select-search-subject").slideDown("fast");
                                get_groups('select-class-subject');
                            } else {
                                $("#btn-assign-subject").removeClass("btn-down");
                                $("#btn-assign-subject").addClass("btn-assign");
                                $("#select-search-subject").slideUp("fast");
                                $("#search-subject").val("");
                            }
                        });
                        $("#btn-ready-lesson-down").click(function () {
                            $("#btn-ready-lesson-up").removeClass("hidden");
                            $("#btn-ready-lesson-down").addClass("hidden");
                            $("#btn-ready-lesson-up").addClass("active");
                            $("#open-search-ready").slideDown("fast");
                        });
                        $("#btn-ready-lesson-up").click(function () {
                            $("#btn-ready-lesson-down").removeClass("hidden");
                            $("#btn-ready-lesson-up").addClass("hidden");
                            $("#btn-ready-lesson-down").addClass("active");
                            $("#open-search-ready").slideUp("fast");
                        });
                        //"Search and Assign Lesson" button's event of My Library
                        $("#search-my-lib").click(function () {
                            if ($("#search-my-lib").hasClass("btn-assign")) {
                                $("#search-my-lib").removeClass("btn-assign");
                                $("#search-my-lib").addClass("btn-down");
                                $("#open-search-my-lib").slideDown("fast");
                                $("#search-my-lib").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                            } else
                            {
                                $("#search-my-lib").removeClass("btn-down");
                                $("#search-my-lib").addClass("btn-assign");
                                $("#open-search-my-lib").slideUp("fast");
                                $("#search-my-lib").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#search-tit-lib").val("");
                            }
                        });
                        //"Search and Assign Lesson" button's event of Add Worksheet From My Library in My Lesson
                        $("#search-my-lib2").click(function () {
                            if ($("#search-my-lib2").hasClass("btn-assign")) {
                                $("#search-my-lib2").removeClass("btn-assign");
                                $("#search-my-lib2").addClass("btn-down");
                                $("#open-search-my-lib2").slideDown("fast");
                                $("#search-my-lib2").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                            } else
                            {
                                $("#search-my-lib2").removeClass("btn-down");
                                $("#search-my-lib2").addClass("btn-assign");
                                $("#open-search-my-lib2").slideUp("fast");
                                $("#search-my-lib2").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#search-tit-lib2").val("");
                            }
                        });
                        //"Search and Assign Lesson" button's event of Math Public Library 
                        $("#btn-open-search").click(function () {

                            if ($("#btn-open-search").hasClass("btn-assign")) {
                                $("#btn-open-search").removeClass("btn-assign");
                                $("#btn-open-search").addClass("btn-down");
                                $("#open-search-math").slideDown("fast");
                                $("#btn-open-search").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                                //refresh selectbox
                                $.get(home_url + "/?r=ajax/get_level", {type: "GET"}, function (data) {
                                    var dt = JSON.parse(data);
                                    $('#filter-level-categories').html(dt.category).data("selectBox-selectBoxIt").refresh();
                                });
                                var html = ' <option selected value="" >-Subject-</option>';
                                var html2 = ' <option selected value="" >-Lesson-</option>';
                                $('#filter-levels').html(html).data("selectBox-selectBoxIt").refresh();
                                $('#filter-sublevels').html(html2).data("selectBox-selectBoxIt").refresh();
                                $("#worksheet-format").find("option:first").attr("selected", true);
                                $('#worksheet-format').data("selectBox-selectBoxIt").refresh();
                            } else
                            {
                                $("#btn-open-search").removeClass("btn-down");
                                $("#btn-open-search").addClass("btn-assign");
                                $("#open-search-math").slideUp("fast");
                                $("#btn-open-search").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#filter-sheet-name").val("");
                            }
                        });
                        // event when change "Categories" in Public Library
                        $("#filter-level-categories").change(function () {
                            var cate = $("#filter-level-categoriesSelectBoxItText").attr('data-val');
                            $.post(home_url + "/?r=ajax/get_level", {cate: cate}, function (data) {
                                var dt = JSON.parse(data);
                                $('#filter-levels').html(dt.level).data("selectBox-selectBoxIt").refresh();
                            });
                            $.post(home_url + "/?r=ajax/get_level", {level: 0}, function (data) {
                                var dt = JSON.parse(data);
                                $('#filter-sublevels').html(dt.sublevel).data("selectBox-selectBoxIt").refresh();
                            });
                        });
                        // event when change "Categories" of Add Worksheet From Public Library in My Lesson
                        $("#filter-level-categories2").change(function () {
                            var cate = $("#filter-level-categories2SelectBoxItText").attr('data-val');
                            $.post(home_url + "/?r=ajax/get_level", {cate: cate}, function (data) {
                                var dt = JSON.parse(data);
                                $('#filter-levels2').html(dt.level).data("selectBox-selectBoxIt").refresh();
                            });
                            $.post(home_url + "/?r=ajax/get_level", {level: 0}, function (data) {
                                var dt = JSON.parse(data);
                                $('#filter-sublevels2').html(dt.sublevel).data("selectBox-selectBoxIt").refresh();
                            });
                        });
                        // event when change "Categories" of Add Worksheet From Public Library in My Library
                        $("#filter-level-categories3").change(function () {
                            var cate = $("#filter-level-categories3SelectBoxItText").attr('data-val');
                            $.post(home_url + "/?r=ajax/get_level", {cate: cate}, function (data) {

                                var dt = JSON.parse(data);
                                $('#filter-levels3').html(dt.level).data("selectBox-selectBoxIt").refresh();
                            });
                            $.post(home_url + "/?r=ajax/get_level", {level: 0}, function (data) {
                                var dt = JSON.parse(data);
                                $('#filter-sublevels3').html(dt.sublevel).data("selectBox-selectBoxIt").refresh();
                            });
                        });
                        // event when change "Subject" selectbox in Public Library
                        $("#filter-levels").change(function () {
                            var level = $("#filter-levelsSelectBoxItText").attr('data-val');
                            $.post(home_url + "/?r=ajax/get_level", {level: level}, function (data) {
                                var dt = JSON.parse(data);
                                $('#filter-sublevels').html(dt.sublevel).data("selectBox-selectBoxIt").refresh();
                            });
                        });
                        // event when change "Subject" selectbox of Add Worksheet From Public Library in My Lesson
                        $("#filter-levels2").change(function () {
                            var level = $("#filter-levels2SelectBoxItText").attr('data-val');
                            $.post(home_url + "/?r=ajax/get_level", {level: level}, function (data) {
                                var dt = JSON.parse(data);
                                $('#filter-sublevels2').html(dt.sublevel).data("selectBox-selectBoxIt").refresh();
                            });
                        });
                        // event when change "Subject" selectbox of Add Worksheet From Public Library in My Library
                        $("#filter-levels3").change(function () {
                            var level = $("#filter-levels3SelectBoxItText").attr('data-val');
                            $.post(home_url + "/?r=ajax/get_level", {level: level}, function (data) {
                                var dt = JSON.parse(data);
                                $('#filter-sublevels3').html(dt.sublevel).data("selectBox-selectBoxIt").refresh();
                            });
                        });
                        //"Search and Assign Lesson" button's event of Math Public Library on Add Worksheet From Public Library
                        $("#btn-open-search2").live("click", function () {
                            if ($("#btn-open-search2").hasClass("btn-assign")) {
                                $("#btn-open-search2").removeClass("btn-assign");
                                $("#btn-open-search2").addClass("btn-down");
                                $("#open-search-math2").slideDown("fast");
                                $("#btn-open-search2").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                                //refresh selectbox
                                $.get(home_url + "/?r=ajax/get_level", {type: "GET"}, function (data) {
                                    var dt = JSON.parse(data);
                                    $('#filter-level-categories2').html(dt.category).data("selectBox-selectBoxIt").refresh();
                                });
                                var html = ' <option selected value="" >-Subject-</option>';
                                var html2 = ' <option selected value="" >-Lesson-</option>';
                                $('#filter-levels2').html(html).data("selectBox-selectBoxIt").refresh();
                                $('#filter-sublevels2').html(html2).data("selectBox-selectBoxIt").refresh();
                                $("#worksheet-format2").find("option:first").attr("selected", true);
                                $('#worksheet-format2').data("selectBox-selectBoxIt").refresh();
                            } else
                            {
                                $("#btn-open-search2").removeClass("btn-down");
                                $("#btn-open-search2").addClass("btn-assign");
                                $("#open-search-math2").slideUp("fast");
                                $("#btn-open-search2").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#filter-sheet-name2").val("");
                            }
                        });
                        //"Search and Assign Lesson" button's event of English Public Library 
                        $("#btn-open-search-eng").click(function () {
                            if ($("#btn-open-search-eng").hasClass("btn-assign")) {
                                $("#btn-open-search-eng").removeClass("btn-assign");
                                $("#btn-open-search-eng").addClass("btn-down");
                                $("#open-search-eng").slideDown("fast");
                                $("#btn-open-search-eng").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                            } else
                            {
                                $("#btn-open-search-eng").removeClass("btn-down");
                                $("#btn-open-search-eng").addClass("btn-assign");
                                $("#open-search-eng").slideUp("fast");
                                $("#btn-open-search-eng").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#search-tit-eng").val("");
                            }
                        });
                        //"Search and Assign Lesson" button's event of English  Add Worksheet From Public Library on My Lesson
                        $("#btn-open-search-eng2").live("click", function () {
                            if ($("#btn-open-search-eng2").hasClass("btn-assign")) {
                                $("#btn-open-search-eng2").removeClass("btn-assign");
                                $("#btn-open-search-eng2").addClass("btn-down");
                                $("#open-search-eng2").slideDown("fast");
                                $("#btn-open-search-eng2").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                            } else
                            {
                                $("#btn-open-search-eng2").removeClass("btn-down");
                                $("#btn-open-search-eng2").addClass("btn-assign");
                                $("#open-search-eng2").slideUp("fast");
                                $("#btn-open-search-eng2").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#search-tit-eng2").val("");
                            }
                        });
                        //"Search and Assign Lesson" button's event of English Add Worksheet From Public Library on My Library
                        $("#btn-open-search-eng3").live("click", function () {
                            if ($("#btn-open-search-eng3").hasClass("btn-assign")) {
                                $("#btn-open-search-eng3").removeClass("btn-assign");
                                $("#btn-open-search-eng3").addClass("btn-down");
                                $("#open-search-eng3").slideDown("fast");
                                $("#btn-open-search-eng3").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                            } else
                            {
                                $("#btn-open-search-eng3").removeClass("btn-down");
                                $("#btn-open-search-eng3").addClass("btn-assign");
                                $("#open-search-eng3").slideUp("fast");
                                $("#btn-open-search-eng3").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                        });
                        //"Search and Assign Lesson" button's event of Math Add Worksheet From Public Library on My Library
                        $("#btn-open-search3").live("click", function () {
                            if ($("#btn-open-search3").hasClass("btn-assign")) {
                                $("#btn-open-search3").removeClass("btn-assign");
                                $("#btn-open-search3").addClass("btn-down");
                                $("#open-search-math3").slideDown("fast");
                                $("#btn-open-search3").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                                //refresh selectbox
                                $.get(home_url + "/?r=ajax/get_level", {type: "GET"}, function (data) {
                                    var dt = JSON.parse(data);
                                    $('#filter-level-categories3').html(dt.category).data("selectBox-selectBoxIt").refresh();
                                });
                                var html = ' <option selected value="" >-Subject-</option>';
                                var html2 = ' <option selected value="" >-Lesson-</option>';
                                $('#filter-levels3').html(html).data("selectBox-selectBoxIt").refresh();
                                $('#filter-sublevels3').html(html2).data("selectBox-selectBoxIt").refresh();
                                $("#worksheet-format3").find("option:first").attr("selected", true);
                                $('#worksheet-format3').data("selectBox-selectBoxIt").refresh();
                            } else
                            {
                                $("#btn-open-search3").removeClass("btn-down");
                                $("#btn-open-search3").addClass("btn-assign");
                                $("#open-search-math3").slideUp("fast");
                                $("#btn-open-search3").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                        });
                        //order worksheets
                        $(".up-worksheet,.down-worksheet").live("click", function () {
                            var row = $(this).parents("tr:first");
                            var cls_prev = row.prev().hasClass("detail-worksheet");
                            var cls_next = row.next().hasClass("detail-worksheet");
                            var slid = $(this).attr("data-slid");
                            var lid = $(this).attr("data-lid");
                            if ($(this).is(".up-worksheet")) {
                                if (cls_prev == true) {
                                    $.post(home_url + "/?r=ajax/update_order_sheet", {order: "up", id: slid, lid: lid}, function (data) {
                                    });
                                    row.insertBefore(row.prev());
                                }
                            } else {
                                if (cls_next == true) {
                                    $.post(home_url + "/?r=ajax/update_order_sheet", {order: "down", id: slid, lid: lid}, function (data) {
                                    });
                                    row.insertAfter(row.next());
                                }
                            }
                        });
//                        $("#assign-btn").click(function () {
//                            var selected = new Array();
//                            $(".option-input-ready:checked").each(function () {
//                                var data_id = $(this).attr("data-id");
//                                var data_sheet = $(this).val();
//                                selected.push({"id": data_id, "sheet": data_sheet});
//                            });
//                            var html = '';
//                            if (selected.length !== 0) {
//                                $("#select-all-ready").attr("checked", false);
//                            } else {
//                                html += 'Please select a class to assign the lessons.';
//                                $(".box-title-1").html(html);
//                                $("#modal-alert").css('display', 'block');
//                            }
//                        });
                        //"Create Lesson" button's event
                        $("#btn-create-library").click(function () {
                            var check = $(".create-lesson-content").hasClass("active");
                            $("#input-style").attr('value', '');
                            $('#post_mylibrary_ifr').contents().find('#tinymce').text('');
                            if (check == false) {
                                var selected = new Array();
                                $(".option-input-mylibrary:checked").each(function () {
                                    var data_id = $(this).attr("data-id");
                                    var data_sheet = $(this).val();
                                    selected.push({"id": data_id, "sheet": data_sheet});
                                });
                                var html = '';
                                if (selected.length !== 0) {
                                    var table_confirm_worksheet = $("#table-confirm-worksheet");
                                    for (var i = 0; i < selected.length; i++) {
                                        html += '<tr data-sid="' + selected[i].id + '" id="' + selected[i].id + '" class="row-worksheet">';
                                        html += ' <td class="table-img-icon" style="padding-bottom: 10px;padding-top: 5px; width:95%">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" >';
                                        html += '<span class="name-lesson-2">' + selected[i].sheet + '</span>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon text-right delete-sheet"  ><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson"></td>';
                                        html += '</tr>';
                                    }
                                    table_confirm_worksheet.append(html);
                                    $(".table-my-lesson").removeClass("active");
                                    $(".table-my-lesson").addClass("hidden");
                                    $(".create-lesson-content").removeClass("hidden");
                                    $(".create-lesson-content").addClass("active");
                                    $("#select-all-mylibrary").attr("checked", false);
                                    $.post(home_url + "/?r=ajax/get_cate", {type: "GET"}, function (data) {
                                        var data = JSON.parse(data);
                                        if (data.cate.length > 0) {
                                            var html_cate = '';
                                            html_cate += '<option selected disabled value="">-Select Lesson Type-</option>';
                                            $.each(data.cate, function (i, v) {
                                                html_cate += '<option  value="' + v.id + '">' + v.name + '</option>';
                                            });
                                            $('#select-my-lib').html(html_cate).data("selectBox-selectBoxIt").refresh();
                                        }
                                    });
                                } else {
                                    html += 'Please select worksheets first.';
                                    $(".box-title-1").html(html);
                                    $("#modal-alert").css('display', 'block');
                                }
                            }
                        });
                        // "Close icon" on My Lesson when user want to exit Create Subject
                        $("#close-icon-sub").click(function () {
                            $("#input-style-sub").attr('value', '');
                            $(".create-subject-content").removeClass("active");
                            $(".create-subject-content").addClass("hidden");
                            $(".table-my-lesson").removeClass("hidden");
                            $(".table-my-lesson").addClass("active");
                            $(".option-input-lesson").attr("checked", false);
                            $("#select-all-subject").attr("checked", false);
                            $("#table-confirm-subject").html("");
                        });
                        // "Close icon" on My Library when user want to exit Create Lesson
                        $("#close-icon").click(function () {
                            $("#input-style").attr('value', '');
                            $(".create-lesson-content").removeClass("active");
                            $(".create-lesson-content").addClass("hidden");
                            $(".table-my-lesson").removeClass("hidden");
                            $(".table-my-lesson").addClass("active");
                            $(".option-input-mylibrary").attr("checked", false);
                            $("#select-all-mylibrary").attr("checked", false);
                            $("#table-confirm-worksheet").html("");
                        });
                        // "Cancel" button on My Lesson when user want to exit Create Subject
                        $("#cancel-sub").click(function () {
                            $(".create-subject-content").removeClass("active");
                            $(".create-subject-content").addClass("hidden");
                            $(".table-my-lesson").removeClass("hidden");
                            $(".table-my-lesson").addClass("active");
                            $("#select-all-subject").attr("checked", false);
                            $(".option-input-lesson-check").attr("checked", false);
                            $("#table-confirm-subject").html("");
                        });
                        // "Cancel" Button on My Library when user want to exit Create Lesson
                        $("#cancel-btn1").click(function () {
                            $(".create-lesson-content").removeClass("active");
                            $(".create-lesson-content").addClass("hidden");
                            $(".table-my-lesson").removeClass("hidden");
                            $(".table-my-lesson").addClass("active");
                            $("#select-all-mylibrary").attr("checked", false);
                            $(".option-input-mylibrary").attr("checked", false);
                            $("#table-confirm-worksheet").html("");
                        });
                        // "English Tab" event on Public Library 
                        $("#tab-public-lib-eng").click(function () {
                            if ($("#btn-open-search-eng").hasClass("btn-down"))
                            {
                                $("#btn-open-search-eng").removeClass("btn-down");
                                $("#btn-open-search-eng").addClass("btn-assign");
                                $("#open-search-eng").slideUp("fast");
                            }
                            var kt = $("#tab-eng-lib").hasClass("active");
                            if (kt == false)
                                $("#open-search-eng").css("display", "none");
                            $("#btn-open-search-eng").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#select-all-eng").attr("checked", false);
                            $("#option-detail-eng").addClass(" hidden");
                            var cat_level = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = '';
                            var group_name = '';
                            var assignment_id = '';
                            var homework_types = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        // "Math Tab" event on Public Library 
                        $("#tab-public-lib-math").click(function () {
                            if ($("#btn-open-search").hasClass("btn-down"))
                            {
                                $("#btn-open-search").removeClass("btn-down");
                                $("#btn-open-search").addClass("btn-assign");
                                $("#open-search-math").slideUp("fast");
                            }
                            var kt = $("#tab-math-lib").hasClass("active");
                            if (kt == false)
                                $("#open-search-math").css("display", "none");
                            $("#btn-open-search").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#select-all-math").attr("checked", false);
                            $("#option-detail-math").addClass(" hidden");
                            var cat_level = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = '';
                            var group_name = '';
                            var assignment_id = '';
                            var homework_types = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        // "Math Tab" event on My Library when user add worksheet From Public Library
                        $("#tab-public-lib-math3").click(function () {
                            if ($("#btn-open-search3").hasClass("btn-down"))
                            {
                                $("#btn-open-search3").removeClass("btn-down");
                                $("#btn-open-search3").addClass("btn-assign");
                                $("#open-search-math3").slideUp("fast");
                            }
                            var kt = $("#tab-math-lib3").hasClass("active");
                            if (kt == false)
                                $("#open-search-math3").css("display", "none");
                            $("#btn-open-search3").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#select-all-math3").attr("checked", false);
                            $("#option-detail-math3").addClass(" hidden");
                            var cat_level = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = '';
                            var group_name = '';
                            var assignment_id = '';
                            var homework_types = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        // "English Tab" event on My Library when user add worksheet From Public Library
                        $("#tab-public-lib-eng3").click(function () {
                            if ($("#btn-open-search-eng3").hasClass("btn-down"))
                            {
                                $("#btn-open-search-eng3").removeClass("btn-down");
                                $("#btn-open-search-eng3").addClass("btn-assign");
                                $("#open-search-eng3").slideUp("fast");
                            }
                            var kt = $("#tab-eng-lib3").hasClass("active");
                            if (kt == false)
                                $("#open-search-eng3").css("display", "none");
                            $("#btn-open-search-eng3").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#select-all-eng3").attr("checked", false);
                            $("#option-detail-eng3").addClass(" hidden");
                            var cat_level = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = '';
                            var group_name = '';
                            var assignment_id = '';
                            var homework_types = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        // "English Tab" event on My Lesson when user add worksheet From Public Library
                        $("#tab-public-lib-eng2").click(function () {
                            if ($("#btn-open-search-eng2").hasClass("btn-down"))
                            {
                                $("#btn-open-search-eng2").removeClass("btn-down");
                                $("#btn-open-search-eng2").addClass("btn-assign");
                                $("#open-search-eng2").slideUp("fast");
                            }
                            var kt = $("#tab-eng-lib2").hasClass("active");
                            if (kt == false)
                                $("#open-search-eng2").css("display", "none");
                            $("#btn-open-search-eng2").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#select-all-eng2").attr("checked", false);
                            $("#option-detail-eng2").addClass(" hidden");
                            var cat_level = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = '';
                            var group_name = '';
                            var assignment_id = '';
                            var homework_types = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        // "Math Tab" event on My Lesson when user add worksheet From Public Library
                        $("#tab-public-lib-math2").click(function () {
                            if ($("#btn-open-search2").hasClass("btn-down"))
                            {
                                $("#btn-open-search2").removeClass("btn-down");
                                $("#btn-open-search2").addClass("btn-assign");
                                $("#open-search-math2").slideUp("fast");
                            }
                            var kt = $("#tab-math-lib2").hasClass("active");
                            if (kt == false)
                                $("#open-search-math2").css("display", "none");
                            $("#btn-open-search2").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#select-all-math2").attr("checked", false);
                            $("#option-detail-math2").addClass(" hidden");
                            var cat_level = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = '';
                            var group_name = '';
                            var assignment_id = '';
                            var homework_types = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        // "Public Library" text's event on sidebar menu 
                        $("#public-library").click(function () {
                            if ($("#btn-open-search-eng").hasClass("btn-down"))
                            {
                                $("#btn-open-search-eng").removeClass("btn-down");
                                $("#btn-open-search-eng").addClass("btn-assign");
                            }
                            $("#select-all-eng").attr("checked", false);
                            $("#btn-open-search-eng").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#option-detail-eng").addClass(" hidden");
                            $("#select-all-eng").attr("checked", false);
                            $("#open-search-eng").css("display", "none");
                            $("#tab-public-lib-eng").addClass(" active");
                            $("#tab-public-lib-math").removeClass(" active");
                            $("#tab-math-lib").removeClass(" active in");
                            $("#tab-eng-lib").addClass(" active in");
                            $.post(home_url + "/?r=ajax/ik_check_user_student", {type: "GET"}, function (data) {
                                if (data !== 'T-Qual' && data !== 'T-Reg' && data !== 'T-M-Reg' && data !== 'T-M-Qual' && data !== 'Teacher') {

                                    $("#save-eng-lib").addClass("hidden");
                                }
                        });
                            var cat_level = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = '';
                            var group_name = '';
                            var assignment_id = '';
                            var homework_types = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        // "My Subject" text's event on sidebar menu 
                        $("#my-subject-li").click(function () {
                            if ($("#btn-assign-subject").hasClass("btn-down"))
                            {
                                $("#btn-assign-subject").removeClass("btn-down");
                                $("#btn-assign-subject").addClass("btn-assign");
                            }
                            $("#select-all-subject").attr("checked", false);
                            $("#select-all-less4").attr("checked", false);
                            $(".option-sub-check").attr("checked", false);
                            $("#select-search-subject").css("display", "none");
                            $("#option-detail-subject").addClass(" hidden");
                            $(".my-lesson-body").removeClass("hidden");
                            $("#add-worksheet-subject").addClass(" hidden");
                            $("#search-my-less-3").addClass("hidden");
                            $("#search-my-less").removeClass("hidden");
                            var search = '';
                            get_my_subject(search, "table-my-subject");
                        });
                        // "My Lesson" text's event on sidebar menu 
                        $("#my-lesson-li").click(function () {
                            if ($("#btn-assign").hasClass("btn-down"))
                            {
                                $("#btn-assign").removeClass("btn-down");
                                $("#btn-assign").addClass("btn-assign");
                            }
                            $("#select-all-lesson").attr("checked", false);
                            $(".option-input-lesson-check").attr("checked", false);
                            $("#select-assign").css("display", "none");
                            $("#n").text("Search & Assign Lesson");
                            $("#option-detail-lesson").addClass(" hidden");
                            $(".my-lesson-body").removeClass("hidden");
                            $("#add-worksheet").addClass(" hidden");
                            $(".create-subject-content").removeClass("active");
                            $(".create-subject-content").addClass("hidden");
                            $(".table-my-lesson").removeClass("hidden");
                            $(".table-my-lesson").addClass("active");
                            var text = '';
                            $("#table-my-lesson").html('');
                            var table = "table-my-lesson";
                            get_my_lesson(text, table);
                            $.post(home_url + "/?r=ajax/ik_check_user_student", {type: "GET"}, function (data) {
                                if (data !== 'T-Qual' && data !== 'T-Reg' && data !== 'T-M-Reg' && data !== 'T-M-Qual' && data !== 'Teacher') {

                                    $(".my-lesson-body").addClass("hidden");
                                }
                        });
                        });
                        // "My Library" text's event on sidebar menu 
                        $("#my-library-li").click(function () {
                            if ($("#search-my-lib").hasClass("btn-down"))
                            {
                                $("#search-my-lib").removeClass("btn-down");
                                $("#search-my-lib").addClass("btn-assign");
                                $("#search-my-lib").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            $("#open-search-my-lib").css("display", "none");
                            $("#select-all-mylibrary").attr("checked", false);
                            $(".create-lesson-content").removeClass("active");
                            $(".create-lesson-content").addClass("hidden");
                            $(".table-my-lesson").removeClass("hidden");
                            $(".table-my-lesson").addClass("active");
                            $(".option-input-mylibrary").attr("checked", false);
                            $("#option-detail-library").addClass(" hidden");
                            $("#my-library").addClass("active in");
                            $("#input-style").attr('value', "");
                            $("#add-worksheet-mylib").addClass(' hidden');
                            $(".library-lib ").removeClass(' hidden');
                            $.post(home_url + "/?r=ajax/ik_check_user_student", {type: "GET"}, function (data) {
                                if (data !== 'T-Qual' && data !== 'T-Reg' && data !== 'T-M-Reg' && data !== 'T-M-Qual' && data !== 'Teacher') {

                                    $(".library-lib").addClass("hidden");
                                }
                        });
                            var text = '';
                            var table = "table-library";
                            get_my_library(text, table);
                        });
                        $(".refresh-public-lesson").click(function () {
                            if ($("#btn-ready-eng-down").hasClass("btn-ready-lesson-up"))
                            {
                                $("#btn-ready-eng-down").removeClass("btn-ready-lesson-up");
                                $("#btn-ready-eng-down").addClass("btn-ready-lesson-down");
                            }

                            if ($("#btn-dict-down").hasClass("btn-ready-lesson-up"))
                            {
                                $("#btn-dict-down").removeClass("btn-ready-lesson-up");
                                $("#btn-dict-down").addClass("btn-ready-lesson-down");
                            }
                            if ($("#eng-public").hasClass("hidden")) {
                                $("#eng-public").removeClass("hidden");
                                $("#eng-public").addClass("active");
                            }
                            if ($("#sat").hasClass("active")) {
                                $("#sat").removeClass("active");
                                $("#sat").addClass("hidden");
                            }
                            if ($("#eng-math").hasClass("hidden")) {
                                $("#eng-math").removeClass("hidden");
                                $("#eng-math").addClass("active");
                            }
                            if ($("#menu-math").hasClass("active")) {
                                $("#menu-math").removeClass("active");
                                $("#menu-eng").addClass("active");
                            }
                            if ($("#courses").hasClass("active")) {
                                $("#courses").removeClass("active");
                                $("#courses").addClass("hidden");
                            }
                            $("#dic-sel-stu").removeClass("active");
                            $("#dic-sel-stu").addClass("hidden");
                            $(".tab-pub-les").not("#tab-public-les-cri").removeClass("active");
                            $("#tab-public-les-cri").addClass("active");
                            $("#select-all-ready-eng").attr("checked", false);
                            $("#open-search-ready-eng").css('display', 'none');
                            $("#open-search-ready-math").css('display', 'none');
                            $("#open-search-dictionary").css('display', 'none');
                            $("#open-search-sat").css("display", "none");
                            $("#btn-ready-lesson-down").removeClass("hidden");
                            $("#btn-ready-lesson-up").addClass(" hidden");
                            $(".option-input-ready-eng").attr("checked", false);
                            $("#option-detail-ready").addClass(" hidden");
                            $("#search-ready-les-eng").val('');
                            $("#search-ready-les-math").val('');
                            if ($("#math-public").hasClass("active")) {
                                $("#math-public").removeClass("active");
                                $("#math-public").addClass("hidden");
                                $("#eng-public").removeClass("hidden");
                                $("#eng-public").addClass("active");
                            }
                            $("#icon-option-ready-eng").attr("data-sort", "upward");
                            $(".img-sort-eng").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            var text = '';
                            var table = "table-ready-lesson-eng";
                            get_groups_home_eng(text, table);
                        });
                        // "Done" button's event on alert Modal
                        $("#done-btn").click(function () {     
                            $("#manage-class").click();
                            $("#modal-redirect-alert").hide();                                                  
                            var create_class = $(this).attr("data-create-class");
                            $("#modal-alert").css('display', 'none');
                            $(".modal-body").removeClass("class-more");
                            if (create_class == 'success') {                                
                                $("#manage-class-li").click();
                                $("#my-account-modal").scrollTop(0);
                                $(this).attr("data-create-class", "");
                            }
                        });
                        // "Add more" button's event on My Library
                        $("#add-more-btn").click(function () {
                            if ($("#btn-open-search-eng").hasClass("btn-down"))
                            {
                                $("#btn-open-search-eng").removeClass("btn-down");
                                $("#btn-open-search-eng").addClass("btn-assign");
                                $("#btn-open-search-eng").text("Open Search");
                                $("#btn-open-search-eng").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            $("#open-search-eng").css('display', 'none');
                            $("#add-worksheet-mylib").removeClass("hidden");
                            $(".library-lib").addClass(" hidden");
                            $(".from-public-lib2").removeClass("active");
                            $(".from-public-lib2").slideUp("slow");
                            $("#icon-open-pub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $(".table-eng-worksheet").html('');
                        });
                        //"Save to My Library" button of Math on Public Library
                        $("#save-math-lib").click(function () {
                            var selected = new Array();
                            $(".option-input-worksheet-math:checked").each(function () {
                                var id = $(this).val();
                                var cate = $(this).attr("data-cate");
                                var sheet = $(this).attr("data-sheet");
                                selected.push({id: id, cate: cate, sheet: sheet});
                            });
                            if (selected.length == 0) {
                                var html = '';
                                html += 'Please select worksheets first.';
                                $(".box-title-1").html(html);
                                $("#modal-alert").css('display', 'block');
                            } else {
                                $.post(home_url + "/?r=ajax/add_my_library", {
                                    data: selected}, function (data) {
                                    if (data !== "0") {
                                        var html = '';
                                        html += 'Worksheets sucessfully saved to <span style="font-style:italic;">My Library</span>.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                        $("#public-lib").removeClass("active in");
                                        $("#my-library").addClass("active in");
                                        $(".pub-lib-li").removeClass("active");
                                        $(".my-lib-li").addClass("active");
                                        var text = '';
                                        var table = "table-library";
                                        get_my_library(text, table);
                                    } else {
                                        var html = '';
                                        html += 'Same entry already exists, please select different entry.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                    }
                                });
                            }
                        });
                        //"Save to My Library" button of English on Public Library
                        $("#save-eng-lib").click(function () {
                            var selected = new Array();
                            $(".option-input-worksheet-eng:checked").each(function () {
                                var id = $(this).val();
                                var cate = $(this).attr("data-cate");
                                var sheet = $(this).attr("data-sheet");
                                selected.push({id: id, cate: cate, sheet: sheet});
                            });
                            if (selected.length == 0) {
                                var html = '';
                                html += 'Please select worksheets first.';
                                $(".box-title-1").html(html);
                                $("#modal-alert").css('display', 'block');
                            } else {
                                $.post(home_url + "/?r=ajax/add_my_library", {
                                    data: selected}, function (data) {
                                    if (data !== "0") {
                                        var html = '';
                                        html += 'Worksheets successfully saved to <span style="font-style:italic;">My Library</span>.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                        $("#public-lib").removeClass("active in");
                                        $("#my-library").addClass("active in");
                                        $(".pub-lib-li").removeClass("active");
                                        $(".my-lib-li").addClass("active");
                                        var text = '';
                                        var table = "table-library";
                                        get_my_library(text, table);
                                    } else {
                                        var html = '';
                                        html += 'Same entry already exists, please select different entry.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                    }
                                });
                            }
                        });
                        // "No" Button on Modal when user don't want to delete smt  
                        $("#no-delete").live("click", function () {
                            $("#modal-alert-yesno").css('display', 'none');
                            $("#yes-delete").attr("data-del", "");
                            $("#yes-delete").attr("data-ws", "");
                            $("#yes-delete").attr("data-lesson", "");
                            $("#yes-delete").attr("data-lsheet", "");
                            $("#yes-delete").attr("data-sublid", "");
                            $("#yes-delete").attr("data-subid", "");
                            $("#yes-delete").attr("data-lessonid", "");
                            $("#yes-delete").attr("data-rowlesson", "");
                            $("#yes-delete").attr("data-item", "");
                            $("#yes-delete").attr("data-sublid", "");
                            $("#yes-delete").attr("data-subid", "");
                            $("#yes-delete").attr("data-subject", "");
                            $("#yes-delete").attr("data-create-class", "");
                            $("#yes-delete").attr("data-create-class2", "");
                            $("#yes-delete").attr("data-prerequisite", "");
                            $("#yes-delete").attr("data-deleteClass", "");
                            $("#yes-delete").attr("data-editclass-less", "");
                            $("#yes-delete").attr("data-editclass-sub", "");
                        });
                        // "Yes" Button on Modal when user  want to delete smt
                        $("#yes-delete").live("click", function () {
                            $("#modal-alert-yesno").css('display', 'none');
                            var id = $("#yes-delete").attr("data-del");
                            var sid = $("#yes-delete").attr("data-ws");
                            var lid = $("#yes-delete").attr("data-lesson");
                            var slid = $("#yes-delete").attr("data-lsheet");
                            var lesson_id = $("#yes-delete").attr("data-lessonid");
                            var rowlesson = $("#yes-delete").attr("data-rowlesson");
                            var item = $("#yes-delete").attr("data-item");
                            var sublid = $("#yes-delete").attr("data-sublid");
                            var subid = $("#yes-delete").attr("data-subid");
                            var subject_id = $("#yes-delete").attr("data-subject");
                            var id_create_class = $("#yes-delete").attr("data-create-class");
                            var type_create_class = $("#yes-delete").attr("data-create-class2");
                            var prerequisite = $("#yes-delete").attr("data-prerequisite");
                            var deleteClass = $("#yes-delete").attr("data-deleteClass");
                            var data_editclass_gid = $("#yes-delete").attr("data-editclass-gid");
                            var data_editclass_less = $("#yes-delete").attr("data-editclass-less");
                            var data_editclass_sub = $("#yes-delete").attr("data-editclass-sub");
                            if (id !== null) {
                                $.post(home_url + "/?r=ajax/delete_my_library", {data: id}, function (data) {
                                    if (data == "1") {
                                        var text = '';
                                        var table = "table-library";
                                        get_my_library(text, table);
                                    }
                                });
                            }
                            if (sid !== null) {
                                $("#" + sid + "").remove();
                            }
                            if (rowlesson !== null) {
                                $("#" + rowlesson + "").remove();
                            }
                            if (lid !== null) {
                                $.post(home_url + "/?r=ajax/delete_my_lesson", {data: lid}, function (data) {
                                    if (data == "1") {
                                        var text = '';
                                        $("#table-my-lesson").html('');
                                        var table = "table-my-lesson";
                                        get_my_lesson(text, table);
                                    }
                                });
                            }
                            if (slid !== null && item == null) {
                                $.post(home_url + "/?r=ajax/delete_my_lesson", {slid: slid}, function (data) {
                                    if (data == "1") {
                                        $.post(home_url + "/?r=ajax/get_my_lesson_sheet", {data: lesson_id}, function (data1) {
                                            $('#lesson-tr' + lesson_id + '').nextAll(".detail-tr-lesson").not(".desc-worksheet").remove();
                                            var dt = JSON.parse(data1);
                                            if (dt.sheet.length > 0) {
                                                var check = $('#lesson-tr' + lesson_id + '').next().hasClass("detail-tr-lesson");
                                                var html = '';
                                                $.each(dt.sheet, function (i, v) {
                                                    html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson" id="detail-sheet-' + v.sheet_id + '"><td></td>';
                                                    html += '<td></td>';
                                                    html += '<td class="table-img-icon">';
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;">' + v.sheet_name + '</td>';
                                                    html += ' <td class="table-img-icon">';
                                                    html += '<div class="delete-worksheet" data-slid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                                    html += ' <div class="detail-worksheet-ls" data-id="' + v.sheet_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                    html += ' <div class="down-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                                    html += ' <div class="up-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                                    html += ' </td>';
                                                    html += '</tr>';
                                                });
                                                $('#lesson-tr' + lesson_id + '').find(".open-arrow img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Arrow_Close.png");
                                                $('.desc-worksheet').after(html);
                                                $(".detail-tr-lesson td").hide().slideDown("fast");
                                            }
                                        });
                                    }
                                });
                            }
                            if (slid !== null && item == "subject") {
                                $.post(home_url + "/?r=ajax/delete_my_lesson", {slid: slid}, function (data) {
                                    //console.log(data);
                                    var html = '';
                                    if (data == 1) {
                                        $('#lesson-tr' + lesson_id + '').nextAll(".detail-worksheet").remove();
                                        $.post(home_url + "/?r=ajax/get_my_lesson_sheet", {data: lesson_id}, function (data) {
                                            //console.log(data);
                                            var data = JSON.parse(data);
                                            if (data.sheet.length > 0) {
                                                $.each(data.sheet, function (i, v) {
                                                    html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson" id="tr-lesson-' + v.sheet_id + '"><td></td>';
                                                    html += '<td></td>';
                                                    html += '<td class="table-img-icon" style="padding-left: 62px !important;">';
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;">' + v.sheet_name + '</td>';
                                                    html += ' <td class="table-img-icon">';
                                                    html += '<div class="delete-worksheet" data-slid="' + v.id + '" data-lid2="' + v.lesson_id + '" data-item="subject"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                                    html += ' <div class="detail-worksheet-ls" data-id="' + v.sheet_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                    html += ' <div class="down-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                                    html += ' <div class="up-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                                    html += ' </td>';
                                                    html += '</tr>';
                                                });
                                                $('#lesson-tr' + lesson_id + '').after(html);
                                                $(".detail-worksheet td").hide().slideDown("fast");
                                            }
                                        });
                                    }
                                });
                            }
                            if (subid !== null) {
                                $.post(home_url + "/?r=ajax/delete_lesson_subject", {subid: subid}, function (data) {

                                    if (data == "1") {
                                        var search = '';
                                        get_my_subject(search, 'table-my-subject');
                                    }
                                });
                            }
                            if (sublid !== null) {
                                $.post(home_url + "/?r=ajax/delete_lesson_subject", {sublid: sublid}, function (data) {
                                    if (data == "1") {
                                        $('#subj-tr' + subject_id + '').nextAll(".detail-lesson").remove();
                                        $.post(home_url + "/?r=ajax/get_subject_lesson", {subid: subject_id}, function (data2) {
                                            var data3 = JSON.parse(data2);
                                            var html = '';
                                            if (data3 !== null) {
                                                if (data3.length > 0) {
                                                    $.each(data3, function (i, v) {
                                                        html += '<tr class="detail-lesson detail-tr-1 detail-tr-lesson lesson-tr" id="lesson-tr' + v.lesson_id + '" ><td></td>';
                                                        html += '<td></td>';
                                                        html += '<td class="table-img-icon lst-worksheet-lesson" style=" color:#ce851f !important; cursor:pointer;  " data-lid="' + v.lesson_id + '">';
                                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" alt="lesson" style="margin-bottom: 2px;" >' + v.lesson + '</td>';
                                                        html += ' <td class="table-img-icon">';
                                                        html += '<div class="delete-subject" data-sublid="' + v.id + '" data-subject="' + v.subject_id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                                        html += ' <div class="detail-desc-lesson" data-id="' + v.lesson_id + '" data-desc="' + v.lesson_desc + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                        html += ' <div class="down-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                                        html += ' <div class="up-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                                        html += ' </td>';
                                                        html += '</tr>';
                                                    });
                                                    $('#subj-tr' + subject_id + '').after(html);
                                                    $(".detail-lesson td").hide().slideDown("fast");
                                                }
                                            }
                                        });
                                    }
                                });
                            }
                            if (prerequisite != 0) {

                                if (id_create_class != null && type_create_class == 'Lesson') {
                                    $.get(home_url + "/?r=ajax/update_order_subject_lesson", {id: id_create_class, type: type_create_class, prerequisite: 1}, function (data) {
                                        get_list_subject('table-sub-less-prerequisite', 1);
                                    });
                                }
                                if (id_create_class != null && type_create_class == 'Subject') {
                                    $.get(home_url + "/?r=ajax/update_order_subject_lesson", {id: id_create_class, type: type_create_class, prerequisite: 1}, function (data) {

                                        get_list_subject('table-sub-less-prerequisite', 1);
                                    });
                                }
                            } else {

                                if (id_create_class != null && type_create_class == 'Lesson') {
                                    $.get(home_url + "/?r=ajax/update_order_subject_lesson", {id: id_create_class, type: type_create_class,prerequisite: 0}, function (data) {
                                        get_list_subject('table-sub-less', 0);
                                    });
                                }
                                if (id_create_class != null && type_create_class == 'Subject') {
                                    $.get(home_url + "/?r=ajax/update_order_subject_lesson", {id: id_create_class, type: type_create_class,prerequisite: 0}, function (data) {
                                        get_list_subject('table-sub-less', 0);
                                    });
                                }
                            }
                            if (deleteClass != null) {
                                var pass = $(this).attr("data-pass");
                                $.get(home_url + "/?r=ajax/update_class", {id: deleteClass, pass: pass}, function (data) {
                                    if (data != "0") {
                                        var html = 'The class has been deleted!';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                        $("#done-btn").attr("data-create-class", "success");
                                        $("#yes-delete").removeAttr("data-deleteClass");
                                    }
                                });
                            }
                            if (data_editclass_less != null) {
                                $.get(home_url + "/?r=ajax/update_class", {lid: data_editclass_less, gid: data_editclass_gid}, function (data) {
                                    if (data != "0") {
                                        get_subject_lesson_class(data_editclass_gid);
                                        var html = 'The subject/lesson has been deleted!';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                        $("#done-btn").attr("data-create-class", "success");
                                        $("#yes-delete").removeAttr("data-editclass-less");
                                    }
                                });
                            }
                            if (data_editclass_sub != null) {
                                $.get(home_url + "/?r=ajax/update_class", {sid: data_editclass_sub, gid: data_editclass_gid}, function (data) {
                                    if (data != "0") {
                                        get_subject_lesson_class(data_editclass_gid);
                                        var html = 'The subject/lesson has been deleted!';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                        $("#done-btn").attr("data-create-class", "success");
                                        $("#yes-delete").removeAttr("data-editclass-sub");
                                    }
                                });
                            }
                        });
                        // delete icon on My subject, My lesson, My Library 
                        $(".delete-worksheet").live("click", function () {
                            var tthis = $(this);
                            var id = tthis.attr("data-id");
                            var lid = tthis.attr("data-lid");
                            var slid = tthis.attr("data-slid");
                            var lid2 = tthis.attr("data-lid2");
                            var item = tthis.attr("data-item");
                            var html = '';
                            $("#yes-delete").attr("data-del", id);
                            $("#yes-delete").attr("data-lesson", lid);
                            $("#yes-delete").attr("data-lsheet", slid);
                            $("#yes-delete").attr("data-lessonid", lid2);
                            $("#yes-delete").attr("data-item", item);
                            html += 'Are you sure you want to delete it?';
                            $("#modal-alert-yesno .box-title-1").html(html);
                            $("#modal-alert-yesno").css('display', 'block');
                        });
                        // get all worksheets function,used to load data for Public Libary
                        function getWorksheets(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type, page) {
                            var tbody_math = $("#table-math-worksheet");
                            var tbody_english = $("#table-eng-worksheet");
                            tbody_math.html("");
                            tbody_english.html("");
                            $.get(home_url + "/?r=ajax/get_worksheets", {lang: lang, sheet_name: sheet_name, group_name: group_name, assignment_id: assignment_id, homework_types: homework_types, grade: grade, trivia_exclusive: trivia_exclusive, active: active, cat_level: cat_level, level: level, sublevel: sublevel, type: type, page: page}, function (data) {
                                data = JSON.parse(data);
                                if (type == '' || type == 'english') {
                                    $("#pagination-result").html(data.paginate);
                                    if (data.english.length > 0) {
                                        $.each(data.english, function (i, v) {
                                            var html = '';
                                            html += '<tr id="tr-lesson-' + v.id + '" class="tr-lesson">';
                                            html += ' <td >';
                                            html += ' <div class="cb-type2">';
                                            html += '<label>';
                                            html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-worksheet option-input-worksheet-eng radio" name="cid[]" value="' + v.id + '" data-cate="' + v.cate_id + '" data-sheet="' + v.sheet_name + '" data-desc="' + v.description + '">';
                                            html += ' </label>';
                                            html += '  </div>';
                                            html += ' </td>';
                                            html += '<td>' + v.assignment + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" > ' + v.sheet_name + '</td>';
                                            html += '<td>' + v.name + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="search-worksheet-tr"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Magnifiy.png" class="" alt="lesson" ></div>';
                                            html += '<div class="detail-worksheet-pub" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                            tbody_english.append(html);
                                        });
                                        $(".view-assign-homework").click(function () {
                                            var tthis = $(this);
                                            var sheet_name = tthis.attr("data-sheet-name");
                                            var sheet_id = tthis.attr("data-sheet-id");
                                            $('#assign-homework-worksheet-name').html(sheet_name);
                                            $('#input-assign-homework-worksheet-id').val(sheet_id);
                                        });
                                        for (var i = data.english.length; i < 11; i++) {
                                            var add_tr_e = '<tr><td>&nbsp</td><td></td><td></td><td></td><td></td><td></td></tr>';
                                            tbody_english.append(add_tr_e);
                                        }
                                    } else {
                                        var tr_e = '<tr><td colspan="6">No results.</td></tr>';
                                        tbody_english.append(tr_e);
                                    }
                                }
                                if (type == '' || type == 'math') {
                                    $("#pagination-result-math").html(data.paginate_math);
                                    if (data.math.length > 0) {

                                        $.each(data.math, function (i, v) {
                                            var html = '';
                                            html += '<tr id="tr-lesson-' + v.id + '" class="tr-lesson">';
                                            html += ' <td >';
                                            html += ' <div class="cb-type2">';
                                            html += '<label>';
                                            html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-worksheet option-input-worksheet-math radio" name="select-tr" value="' + v.id + '" data-cate="' + v.cate_id + '"  data-sheet="' + v.sheet_name + '" data-desc="' + v.description + '" />';
                                            html += '</label>';
                                            html += ' </div>';
                                            html += ' </td>';
                                            html += '<td>' + v.level_category_name + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" > ' + v.sheet_name + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="search-worksheet-tr"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Magnifiy.png" class="" alt="lesson" ></div>';
                                            html += '<div class="detail-worksheet-pub" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                            tbody_math.append(html);
                                        });
                                        $(".view-assign-homework").click(function () {
                                            var tthis = $(this);
                                            var sheet_name = tthis.attr("data-sheet-name");
                                            var sheet_id = tthis.attr("data-sheet-id");
                                            $('#assign-homework-worksheet-name').html(sheet_name);
                                            $('#input-assign-homework-worksheet-id').val(sheet_id);
                                        });
                                        for (var i = data.math.length; i < 11; i++) {
                                            var add_tr_m = '<tr><td>&nbsp</td><td></td><td></td><td></td><td></td><td></td></tr>';
                                            tbody_math.append(add_tr_m);
                                        }
                                    } else {
                                        var tr_m = '<tr><td colspan="6">No results</td></tr>';
                                        tbody_math.append(tr_m);
                                    }
                                }
                            });
                        }
                        function getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type, page) {
                            var tbody_math = $(".table-math-worksheet");
                            var tbody_english = $(".table-eng-worksheet");
                            tbody_math.html("");
                            tbody_english.html("");
                            $.get(home_url + "/?r=ajax/get_worksheets", {lang: lang, sheet_name: sheet_name, group_name: group_name, assignment_id: assignment_id, homework_types: homework_types, grade: grade, trivia_exclusive: trivia_exclusive, active: active, cat_level: cat_level, level: level, sublevel: sublevel, type: type, page: page, number: "2"}, function (data) {
                                data = JSON.parse(data);
                                if (type == '' || type == 'english') {
                                    if (data.english.length > 0) {
                                        $("#pagination-result2").html(data.paginate);
                                        $("#pagination-result3").html(data.paginate);
                                        $.each(data.english, function (i, v) {
                                            var html = '';
                                            html += '<tr id="tr-lesson-' + v.id + '" class="tr-lesson">';
                                            html += ' <td >';
                                            html += ' <div class="cb-type2">';
                                            html += '<label>';
                                            html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-worksheet option-input-worksheet-eng radio" name="cid[]" value="' + v.id + '" data-cate="' + v.cate_id + '" data-sheet="' + v.sheet_name + '" data-desc="' + v.description + '">';
                                            html += ' </label>';
                                            html += '  </div>';
                                            html += ' </td>';
                                            html += '<td>' + v.assignment + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" > ' + v.sheet_name + '</td>';
                                            html += '<td>' + v.name + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="search-worksheet-tr"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Magnifiy.png" class="" alt="lesson" ></div>';
                                            html += '<div class="detail-worksheet-pub" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                            tbody_english.append(html);
                                        });
                                        $(".view-assign-homework").click(function () {
                                            var tthis = $(this);
                                            var sheet_name = tthis.attr("data-sheet-name");
                                            var sheet_id = tthis.attr("data-sheet-id");
                                            $('#assign-homework-worksheet-name').html(sheet_name);
                                            $('#input-assign-homework-worksheet-id').val(sheet_id);
                                        });
                                        for (var i = data.english.length; i < 11; i++) {
                                            var add_tr_e = '<tr><td>&nbsp</td><td></td><td></td><td></td><td></td><td></td></tr>';
                                            tbody_english.append(add_tr_e);
                                        }
                                    } else {
                                        var tr_e = '<tr><td colspan="6">No results.</td></tr>';
                                        tbody_english.append(tr_e);
                                    }
                                }
                                if (type == '' || type == 'math') {
                                    if (data.math.length > 0) {
                                        $("#pagination-result-math2").html(data.paginate_math);
                                        $("#pagination-result-math3").html(data.paginate_math);
                                        $.each(data.math, function (i, v) {
                                            var html = '';
                                            html += '<tr id="tr-lesson-' + v.id + '" class="tr-lesson">';
                                            html += ' <td >';
                                            html += ' <div class="cb-type2">';
                                            html += '<label>';
                                            html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-worksheet option-input-worksheet-math radio" name="select-tr" value="' + v.id + '" data-cate="' + v.cate_id + '"  data-sheet="' + v.sheet_name + '" data-desc="' + v.description + '" />';
                                            html += '</label>';
                                            html += ' </div>';
                                            html += ' </td>';
                                            html += '<td>' + v.level_category_name + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" > ' + v.sheet_name + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="search-worksheet-tr"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Magnifiy.png" class="" alt="lesson" ></div>';
                                            html += '<div class="detail-worksheet-pub" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                            tbody_math.append(html);
                                        });
                                        $(".view-assign-homework").click(function () {
                                            var tthis = $(this);
                                            var sheet_name = tthis.attr("data-sheet-name");
                                            var sheet_id = tthis.attr("data-sheet-id");
                                            $('#assign-homework-worksheet-name').html(sheet_name);
                                            $('#input-assign-homework-worksheet-id').val(sheet_id);
                                        });
                                        for (var i = data.math.length; i < 11; i++) {
                                            var add_tr_m = '<tr><td>&nbsp</td><td></td><td></td><td></td><td></td><td></td></tr>';
                                            tbody_math.append(add_tr_m);
                                        }
                                    } else {
                                        var tr_m = '<tr><td colspan="6">No results</td></tr>';
                                        tbody_math.append(tr_m);
                                    }
                                }
                            });
                        }
                        //show description of worksheet
                        $(".detail-worksheet-ic").live("click", function () {
                            var id = $(this).attr("data-sid");
                            var open = $("#tr-lesson-" + id + "").next().hasClass("desc-sheet");
                            $(".tr-lesson").not("#tr-lesson-" + id + "").nextAll(".desc-sheet").remove();
                            if (open == false) {
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: id}, function (data1) {
                                    if (data1 !== "0") {
                                        var data = JSON.parse(data1);
                                        if (data.sheet.length > 0) {
                                            var html = '';
                                            $.each(data.sheet, function (i, v) {
                                                html += '<tr class="desc-sheet detail-tr-lesson desc-worksheet-' + v.id + '">';
                                                html += '<td></td>';
                                                html += '<td></td>';
                                                html += '<td colspan="2" class="input-detail-lib">';
                                                if (v.description == "")
                                                {
                                                    html += '<div  class="desc-detail-sheet" id="detaildesc' + v.id + '">&nbsp;</div>';
                                                } else
                                                {
                                                    html += '<div  class="desc-detail-sheet" id="detaildesc' + v.id + '">' + v.description + '</div>';
                                                }
                                                html += '<textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                                html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                                html += '<div class="table-img-icon undo-desc-lib" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                                html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-ws"  id="editsuccess' + v.id + '" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                                html += ' </td>';
                                                html += '</tr>';
                                            });
                                            $("#tr-lesson-" + id + "").after(html);
                                            $(".desc-sheet td").hide().slideDown("fast");
                                        }
                                    }
                                });
                            } else {
                                $(".desc-sheet td").slideUp("fast", function () {
                                    $("#tr-lesson-" + id + "").nextAll(".desc-sheet").remove();
                                });
                            }
                        });
                        //show description of worksheet in Public Library
                        $(".detail-worksheet-pub").live("click", function () {
                            var id = $(this).attr("data-sid");
                            var open = $("#tr-lesson-" + id + "").next().hasClass("desc-sheet");
                            if (open == false) {
                                $(".desc-sheet").not("#tr-lesson-" + id + "").slideUp("fast");
                                $(".tr-lesson").not("#tr-lesson-" + id + "").next(".desc-sheet-ls").remove();
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: id}, function (data) {
                                    data = JSON.parse(data);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet detail-tr-lesson desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="3" class="input-detail-pub">';
                                            html += '<div class="desc-detail-sheet " id="detaildesc' + v.id + '">' + v.description + '</div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#tr-lesson-" + id + "").after(html);
                                        $(".desc-sheet td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $(".desc-sheet td").slideUp("fast", function () {
                                    $("#tr-lesson-" + id + "").next(".desc-sheet").remove();
                                });
                            }
                        });
                        //show description of worksheet in My Lesson
                        $(".detail-worksheet-ls").live("click", function () {
                            var id = $(this).attr("data-id");
                            var open = $("#tr-lesson-" + id + "").next().hasClass("desc-sheet-ls");
                            if (open == false) {
                                $(".detail-worksheet").not("#tr-lesson-" + id + "").nextAll(".desc-sheet-ls").remove();
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: id}, function (data1) {
                                    var data = JSON.parse(data1);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet-ls detail-tr-lesson desc-worksheet-' + v.id + ' set-hide">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="3" class="input-detail-ls lesson-detail-1 " >';
                                            if (v.description == "")
                                            {
                                                html += '<div class="desc-detail detail-ws-style" id="detaildesc' + v.id + '">&nbsp;</div>';
                                            } else
                                            {
                                                html += '<div class="desc-detail detail-ws-style" id="detaildesc' + v.id + '">' + v.description + '</div>';
                                            }
                                            html += '<textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                            html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                            html += '<div class="table-img-icon undo-desc-ws" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                            html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success"  id="editsuccess' + v.id + '" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#tr-lesson-" + id + "").after(html);
                                        $(".desc-sheet-ls td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $(".desc-sheet-ls td").slideUp("fast", function () {
                                    $("#tr-lesson-" + id + "").nextAll(".desc-sheet-ls").remove();
                                });
                            }
                        });
                        //show description of worksheet in My Subject
                        $(".detail-worksheet-ls-sub").live("click", function () {
                            var id = $(this).attr("data-id");
                            var open = $("#tr-lesson-" + id + "").next().hasClass("desc-sheet-ls");
                            if (open == false) {
                                $(".detail-worksheet").not("#tr-lesson-" + id + "").nextAll(".desc-sheet-ls").remove();
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: id}, function (data1) {
                                    var data = JSON.parse(data1);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet-ls detail-tr-lesson set-hide desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="3" class="input-detail-ls lesson-detail-1 detail-input1" >';
                                            if (v.description == "")
                                            {
                                                html += '<div class="desc-detail lesson-ws-detail detail-ws" id="detaildesc' + v.id + '">&nbsp;</div>';
                                            } else
                                            {
                                                html += '<div class="desc-detail lesson-ws-detail detail-ws" id="detaildesc' + v.id + '">' + v.description + '</div>';
                                            }
                                            html += '<textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                            html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                            html += '<div class="table-img-icon undo-desc-ws" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                            html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-sheet-sub"  id="editsuccess' + v.id + '" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#tr-lesson-" + id + "").after(html);
                                        $(".desc-sheet-ls td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $(".desc-sheet-ls td").slideUp("fast", function () {
                                    $("#tr-lesson-" + id + "").nextAll(".desc-sheet-ls").remove();
                                });
                            }
                        });
                        //detail worksheet critical lesson
                        $(".detail-worksheet-ready").live("click", function () {
                            var id = $(this).attr("data-id");
                            var open = $("#eng-lesson-" + id + "").next().hasClass("desc-sheet-ls");
                            if (open == false) {
                                $(".desc-sheet-ls").not("#eng-lesson-" + id + "").slideUp("fast", function () {
                                    $(".detail-worksheet").not("#eng-lesson-" + id + "").next(".desc-sheet-ls").remove();
                                });
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: id}, function (data1) {
                                    var data = JSON.parse(data1);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet-ls detail-tr-lesson set-hide desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="3" class="input-detail lesson-detail-1">';
                                            html += '<div class="desc-detail lesson-detail" id="detaildesc' + v.id + '">' + v.description + '</div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#eng-lesson-" + id + "").after(html);
                                        $(".desc-sheet-ls td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $(".desc-sheet-ls td").slideUp("fast", function () {
                                    $("#eng-lesson-" + id + "").nextAll(".desc-sheet-ls").remove();
                                });
                            }
                        });
                        //detail worksheet sat
                        $(".detail-sheet-sat").live("click", function () {
                            var id = $(this).attr("data-sheet");
                            var open = $("#sheet-tr" + id + "").next().hasClass("desc-sheet-ls");
                            if (open == false) {
                                $(".desc-sheet-ls").not("#sheet-tr" + id + "").slideUp("fast", function () {
                                    $(".sheet-tr").not("#sheet-tr" + id + "").next(".desc-sheet-ls").remove();
                                });
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: id}, function (data1) {
                                    var data = JSON.parse(data1);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet-ls detail-tr-lesson set-hide desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="3" class="input-detail lesson-detail-1">';
                                            html += '<div class="desc-detail detail-level3" >' + v.description + '</div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#sheet-tr" + id + "").after(html);
                                        $(".desc-sheet-ls td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $(".desc-sheet-ls td").slideUp("fast", function () {
                                    $("#sheet-tr" + id + "").nextAll(".desc-sheet-ls").remove();
                                });
                            }
                        });
                        //search English Worksheet in Public Libary
                        $("#btn-search-eng").click(function () {
                            var assignment_id = $('#filter-assignment-enSelectBoxItText').attr('data-val');
                            var cat_level = '';
                            var homework_types = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = $('#search-tit-eng').val();
                            var group_name = '';
                            var grade = $('#grade-enSelectBoxItText').attr('data-val');
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        $("#btn-search-eng2").click(function () {
                            var assignment_id = $('#filter-assignment-en2SelectBoxItText').attr('data-val');
                            var cat_level = '';
                            var homework_types = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = $('#search-tit-eng2').val();
                            var group_name = '';
                            var grade = $('#grade-en2SelectBoxItText').attr('data-val');
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        $("#btn-search-math").click(function () {
                            var assignment_id = $('#worksheet-formatSelectBoxItText').attr('data-val');
                            var cat_level = $('#filter-level-categoriesSelectBoxItText').attr('data-val');
                            var homework_types = '';
                            var level = $('#filter-levelsSelectBoxItText').attr('data-val');
                            var sublevel = $('#filter-sublevelsSelectBoxItText').attr('data-val');
                            var lang = '';
                            var sheet_name = $('#filter-sheet-name').val();
                            var group_name = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        $("#btn-search-math2").click(function () {
                            var assignment_id = $('#worksheet-format2SelectBoxItText').attr('data-val');
                            var cat_level = $('#filter-level-categories2SelectBoxItText').attr('data-val');
                            var homework_types = '';
                            var level = $('#filter-levels2SelectBoxItText').attr('data-val');
                            var sublevel = $('#filter-sublevels2SelectBoxItText').attr('data-val');
                            var lang = '';
                            var sheet_name = $('#filter-sheet-name2').val();
                            var group_name = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        $("#btn-search-math3").click(function () {
                            var assignment_id = $('#worksheet-format3SelectBoxItText').attr('data-val');
                            var cat_level = $('#filter-level-categories3SelectBoxItText').attr('data-val');
                            var homework_types = '';
                            var level = $('#filter-levels3SelectBoxItText').attr('data-val');
                            var sublevel = $('#filter-sublevels3SelectBoxItText').attr('data-val');
                            var lang = '';
                            var sheet_name = $('#filter-sheet-name3').val();
                            var group_name = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        $("#btn-search-eng3").click(function () {
                            var assignment_id = $('#filter-assignment-en3SelectBoxItText').attr('data-val');
                            var cat_level = '';
                            var homework_types = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = $('#search-tit-eng3').val();
                            var group_name = '';
                            var grade = $('#grade-en3SelectBoxItText').attr('data-val');
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                        });
                        $("#search-btn").click(function () {
                            var search = $("#search-lesson").val();
                            var tbody_my_lesson = "table-my-lesson";
                            get_my_lesson(search, tbody_my_lesson);
                        });
                        //get my library function
                        function get_my_library(text, table) {
                            var tbody_my_library = $("#" + table + "");
                            tbody_my_library.html("");
                            $.post(home_url + "/?r=ajax/get_my_library", {data: text}, function (data) {
                                if (data !== "0") {
                                    data = JSON.parse(data);
                                    if (data.library.length > 0) {
                                        $.each(data.library, function (i, v) {
                                            var html = '';
                                            html += '<tr id="tr-lesson-' + v.sheet_id + '" class="tr-lesson">';
                                            html += ' <td >';
                                            html += '<div class="cb-type2">';
                                            html += '<label>';
                                            html += ' <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-mylibrary radio" value="' + v.name + '" data-id="' + v.sheet_id + '" name="select-tr"/>';
                                            html += '</label>';
                                            html += '</div>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            if (v.cate == 1) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                            } else if (v.cate == 5) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                            } else if (v.cate == 2) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                            } else if (v.cate == 3) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                            } else if (v.cate == 4) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                            } else if (v.cate == 6) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                            } else if (v.cate == 7) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                            }
                                            html += v.assignment + '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" >';
                                            html += '<span class="name-lesson-2">' + v.name + '</span>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="delete-worksheet" data-id="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                            html += '<div class="magnifiy-worksheet-ic"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Magnifiy.png" class="" alt="lesson" ></div>';
                                            html += '<div class="detail-worksheet-ic" data-sid="' + v.sheet_id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                            tbody_my_library.append(html);
                                        });
                                    }
                                } else {
                                    var html = '';
                                    html += '<tr><td colspan="4">No results.</td>';
                                    html += '</tr>';
                                    tbody_my_library.append(html);
                                }
                            });
                        }
                        //update description of worksheet
                        $(".edit-success").live("click", function () {
                            var sid = $(this).attr("data-sid");
                            var text = $("#detailinput" + sid).val();
                            var old_desc = $("#detaildesc" + sid).text();
                            $.post(home_url + "/?r=ajax/update_desc_worksheet", {desc: text, sid: sid, old_desc: old_desc}, function (data) {
                                $("#tr-lesson-" + sid + "").nextAll(".desc-sheet-ls").remove();
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: sid}, function (data1) {
                                    var data = JSON.parse(data1);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet-ls detail-tr-lesson desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="3" class="input-detail-ls lesson-detail-1">';
                                            html += '<div class="desc-detail detail-ws-style" id="detaildesc' + v.id + '">' + v.description + '</div><textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                            html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                            html += '<div class="table-img-icon undo-desc-ws" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                            html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success"  id="editsuccess' + v.id + '" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#tr-lesson-" + sid + "").after(html);
                                        $(".desc-sheet-ls td").hide().slideDown("fast");
                                    }
                                });
                                if (data == '1') {
                                }
                            });
                        });
                        //update description of worksheet
                        $(".edit-success-sheet-sub").live("click", function () {
                            var sid = $(this).attr("data-sid");
                            var text = $("#detailinput" + sid).val();
                            $.post(home_url + "/?r=ajax/update_desc_worksheet", {desc: text, sid: sid}, function (data) {
                                $("#tr-lesson-" + sid + "").nextAll(".desc-sheet-ls").remove();
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: sid}, function (data1) {
                                    var data = JSON.parse(data1);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet-ls detail-tr-lesson desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="2" class="input-detail-ls lesson-detail-1 detail-input1">';
                                            html += '<div class="desc-detail lesson-ws-detail detail-ws sub-detail"  id="detaildesc' + v.id + '">' + v.description + '</div><textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                            html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                            html += '<div class="table-img-icon undo-desc-ws" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                            html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-sheet-sub"  id="editsuccess' + v.id + '" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#tr-lesson-" + sid + "").after(html);
                                        $(".desc-sheet-ls td").hide().slideDown("fast");
                                    }
                                });
                                if (data == '1') {
                                }
                            });
                        });
                        //update description of worksheet
                        $(".edit-success-ws").live("click", function () {
                            var sid = $(this).attr("data-sid");
                            var text = $("#detailinput" + sid).val();
                            var old_desc = $("#detaildesc" + sid).text();
                            $.post(home_url + "/?r=ajax/update_desc_worksheet", {desc: text, sid: sid, old_desc: old_desc}, function (data) {
                                $("#tr-lesson-" + sid + "").nextAll(".desc-sheet").remove();
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: sid}, function (data1) {
                                    var data = JSON.parse(data1);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet detail-tr-lesson desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="2" class="input-detail-lib">';
                                            html += '<div class="desc-detail-sheet" id="detaildesc' + v.id + '">' + v.description + '</div><textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                            html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                            html += '<div class="table-img-icon undo-desc-lib" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                            html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-ws"  id="editsuccess' + v.id + '" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#tr-lesson-" + sid + "").after(html);
                                        $(".desc-sheet td").hide().slideDown("fast");
                                    }
                                });
                                if (data == '1') {
                                }
                            });
                        });
                        $(".edit-success-ready").live("click", function () {
                            var sid = $(this).attr("data-sid");
                            var text = $("#detailinput" + sid).val();
                            $.post(home_url + "/?r=ajax/update_desc_worksheet", {desc: text, sid: sid}, function (data) {
                                $("#tr-lesson-" + sid + "").nextAll(".desc-sheet-ls").remove();
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: sid}, function (data1) {
                                    var data = JSON.parse(data1);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet detail-tr-lesson desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="3" class="input-detail">';
                                            html += '<div class="desc-detail-sheet " id="detaildesc' + v.id + '">' + v.description + '</div><textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                            html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                            html += '<div class="table-img-icon undo-desc" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                            html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-pub" id="editsuccess' + v.id + '" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#tr-lesson-" + sid + "").after(html);
                                        $(".desc-sheet-ls td").hide().slideDown("fast");
                                    }
                                });
                                if (data == '1') {
                                }
                            });
                        });
                        $(".edit-success-ls").live("click", function () {
                            var lid = $(this).attr("data-lid");
                            var text = $("#detailinput" + lid).val();
                            var old_desc = $("#detaildesc" + lid).text();
                            $('#lesson-tr' + lid + '').nextAll(".detail-desc").remove();
                            $('#lesson-tr' + lid + ' .desc-my-lesson').attr("data-desc", text);
                            $.post(home_url + "/?r=ajax/update_desc_lesson", {desc: text, lid: lid, old_desc: old_desc}, function (data) {
                                data = JSON.parse(data);
                                var html = '';
                                $.each(data, function (i, v) {
                                    html += '<tr class="detail-desc detail-tr-lesson desc-worksheet desc-worksheet-' + v.id + '" >';
                                    html += '<td></td>';
                                    html += '<td></td>';
                                    html += '<td colspan="3" class="input-detail-lesson">';
                                    html += '<div class="desc-detail" id="detaildesc' + v.id + '">' + v.desc + '</div><textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.desc + '</textarea>';
                                    html += '<div class="table-img-icon edit-desc-worksheet"  onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                    html += '<div class="table-img-icon undo-desc" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                    html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-ls"  id="editsuccess' + v.id + '" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                    html += ' </td>';
                                    html += '</tr>';
                                    $('#lesson-tr' + lid + '').after(html);
                                    $(".detail-tr-lesson td").hide().slideDown("fast");
                                });
                            });
                        });
                        function get_my_lesson(text, table) {
                            $.post(home_url + "/?r=ajax/get_my_lesson", {search: text}, function (data) {

                                var tbody_lesson = $("#" + table + "");
                                tbody_lesson.html('');
                                data = JSON.parse(data);
                                var html = '';
                                if (data == 0) {
                                    html += '<tr id="lesson-tr" class="lesson-tr">';
                                    html += '<td></td><td colspan="4">No results.</td></tr>';
                                } else {
                                    if (data.publesson != null) {
                                        if (data.publesson.length > 0) {

                                            $.each(data.publesson, function (i, v) {
                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" data-public="1" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 8) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Dictionary.png" alt="lesson" >';
                                                } else if (v.cate == 9) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                                } else if (v.cate == 10) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                                html += '<span class="my-public-lesson" data-lid="' + v.id + '" data-gid="' + v.group_id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-worksheet" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                if (v.price != 0) {
                                                    html += '<div class="price-lesson"><span class="">$</span>' + v.price + ' </div>';
                                                } else {
                                                    html += '<div class="price-lesson"><span class="">FREE</div>';
                                                }
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.lesson != null) {
                                        if (data.lesson.length > 0) {
                                            $.each(data.lesson, function (i, v) {

                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-lesson my-lesson-ws" data-lid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-worksheet" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="add-worksheet-ic" data-lid="' + v.id + '" data-name="' + v.name + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Add_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                }
                                tbody_lesson.html(html);
                            });
                        }
                        function get_my_lesson2(text, table) {
                            $.post(home_url + "/?r=ajax/get_my_lesson", {search: text}, function (data) {
                                var tbody_lesson = $("#" + table + "");
                                data = JSON.parse(data);
                                var html = '';
                                if (data == 0) {
                                    html += '<tr id="lesson-tr" class="lesson-tr">';
                                    html += '<td></td><td colspan="3">No results.</td></tr>';
                                } else {
                                    if (data.publesson != null) {
                                        if (data.publesson.length > 0) {
                                            $.each(data.publesson, function (i, v) {
                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" data-public="1" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon icon-ime">';
                                                html += '<img class="name-ready-lesson my-public-lesson2" data-lid="' + v.id + '" data-gid="' + v.group_id + '" data-prefix="" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png" alt="lesson" >';
                                                if (v.cate == 1) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 8) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Dictionary.png" alt="lesson" >';
                                                } else if (v.cate == 9) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                                } else if (v.cate == 10) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                                html += '<span class="popup-detail" data-lid="' + v.id + '" data-gid="' + v.group_id + '" data-child="0" data-type="lesson" data-title="' + v.name + '" data-desc="' + v.description + '" data-prefix="">' + v.name + '</span>';
                                                html += ' </td>';                                                
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.lesson != null) {
                                        if (data.lesson.length > 0) {
                                            $.each(data.lesson, function (i, v) {
                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon icon-ime">';
                                                html += '<img class="name-lesson my-lesson-ws2" data-lid="' + v.id + '" data-prefix="" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png" alt="lesson" >';
                                                if (v.cate == 1) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" class="" alt="lesson" >';
                                                html += '<span class="popup-detail" data-lid="' + v.id + '" data-gid="0" data-child="0" data-type="lesson" data-title="' + v.name + '" data-desc="' + v.description + '" data-prefix="">' + v.name + '</span>';
                                                html += ' </td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                }
                                tbody_lesson.html(html);
                            });
                        }
                        //add worksheet
                        $(".add-worksheet-ic").live("click", function () {
                            var lid = $(this).attr("data-lid");
                            var name = $(this).attr("data-name");
                            $(".my-lesson-body").addClass(" hidden");
                            $("#add-worksheet").removeClass("hidden");
                            $("#btn-add-ws").attr("data-lid", lid);
                            $(".name-lesson").text(name);
                            $(".lesson-detail-lib").removeClass("active");
                            $(".lesson-detail-lib").slideUp("slow");
                            $("#icon-open-lib").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $(".from-public-lib").removeClass("active");
                            $(".from-public-lib").slideUp("slow");
                            $("#icon-open-pub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                        });
                        //"clear" in search input
                        $(".link-clear").click(function () {

                            var id = $(this).parent().find('input').attr("id");
                            $(".search-tit").val('');
                            var search = $(this).val();
                            if (id == 'search-lesson2') {
                                var tbody_my_lesson = "table-less3";
                                get_my_lesson2(search, tbody_my_lesson);
                            }
                            if (id == 'val-search-subject') {
                                get_my_subject(search, "table-sub");
                            }
                            if (id == 'search-subject') {
                                get_my_subject(search, "table-my-subject");
                            }
                            if (id == 'search-lesson') {
                                var tbody_my_lesson = "table-my-lesson";
                                get_my_lesson(search, tbody_my_lesson);
                            }
                            if (id == 'search-tit-lib') {
                                var table = "table-library";
                                get_my_library(search, table);
                            }
                            if (id == 'search-tit-eng') {
                                var assignment_id = "";
                                var cat_level = '';
                                var homework_types = '';
                                var level = '';
                                var sublevel = '';
                                var lang = '';
                                var sheet_name = $('#search-tit-eng').val();
                                var group_name = '';
                                var grade = '';
                                var trivia_exclusive = '';
                                var active = '';
                                var type = '';
                                getWorksheets(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                            }
                            if (id == 'filter-sheet-name') {
                                var assignment_id = '';
                                var cat_level = '';
                                var homework_types = '';
                                var level = '';
                                var sublevel = '';
                                var lang = '';
                                var sheet_name = $('#filter-sheet-name').val();
                                var group_name = '';
                                var grade = '';
                                var trivia_exclusive = '';
                                var active = '';
                                var type = '';
                                getWorksheets(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                            }
                            if (id == 'search-ready-les-eng') {
                                if ($("#menu-eng").hasClass("active")) {

                                    var table = "table-ready-lesson-eng";
                                    get_groups_home_eng(search, table);
                                }

                                if ($("#menu-math").hasClass("active")) {
                                    var table = "table-ready-lesson-eng";
                                    get_groups_home_math(search, table);
                                }
                            }
                            if (id == 'text-search-essential') {
                                if ($("#dict").hasClass("active")) {
                                    get_dictionaries(search);
                                } else if ($("#self-study").hasClass('active')) {
                                    var arr = new Array({
                                        'name': 'English Self-study (includes 1 dictionary of choice)',
                                        'price': '10'
                                    },
                                            {
                                                'name': 'Math Self-study',
                                                'price': '60'
                                            }
                                    );
                                    var arr_search = search_public_lesson(arr, search);
                                    var html = '';
                                    $("#table-dict").html(html);
                                    if (arr_search.length != 0) {
                                        $.each(arr_search, function (i, v) {
                                            html += '<tr id="math-tr" class="math-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-dict radio" value="" data-cate="9" data-name="' + v.name + '" data-desc="" data-price="' + v.price + '" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                            html += '</td>';
                                            html += ' <td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                            html += '<span class="name-ready-lesson" > ' + v.name + '</span>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="open-arrow-sel" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                        });
                                    } else {
                                        html += '<tr><td colspan="6">No results.</td>';
                                        html += '</tr>';
                                    }
                                    $("#table-dict").html(html);
                                }
                            }
                            if (id == 'search-sat') {
                                if ($("#sat-math").hasClass("active")) {
                                    var arr = new Array(
                                            {
                                                'name': 'Math SAT Preparation',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT Simulation Test 1(New SAT Test)',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT Simulation Test 2(New SAT Test)',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT Simulation Test 3(New SAT Test)',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT Simulation Test 4(New SAT Test)',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT Simulation Test 5(New SAT Test)',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT 2 Preparation',
                                                'price': '80'
                                            },
                                            {
                                                'name': 'Math SAT 2 Simulation Test 1',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT 2 Simulation Test 2',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT 2 Simulation Test 3',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT 2 Simulation Test 4',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'Math SAT 2 Simulation Test 5',
                                                'price': '50'
                                            }
                                    );
                                    var arr_search = search_public_lesson(arr, search);
                                    var html = '';
                                    $("#table-sat").html(html);
                                    if (arr_search.length != 0) {
                                        $.each(arr_search, function (i, v) {

                                            html += '<tr id="sat-tr" class="sat-tr"><td><div class="cb-type2"><label><input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-sat radio" value="" data-cate="10" data-name="' + v.name + '" data-desc="" data-price="' + v.price + '" name="select-tr"/></label> </div> </td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                            html += '</td>';
                                            html += ' <td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                            html += '<span class="search-sat-math">' + v.name + '</span>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="open-arrow-search-math" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                        });
                                    } else {
                                        html += '<tr><td colspan="6">No results.</td>';
                                        html += '</tr>';
                                    }
                                    $("#table-sat").html(html);
                                } else if ($("#sat-eng").hasClass("active")) {
                                    var arr = new Array(
                                            {
                                                'name': 'SAT Preparation - Grammar Review',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'English SAT Preparation - Writing Practice',
                                                'price': '20'
                                            },
                                            {
                                                'name': 'English SAT Simulation Test 1',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'English SAT Simulation Test 2',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'English SAT Simulation Test 3',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'English SAT Simulation Test 4',
                                                'price': '50'
                                            },
                                            {
                                                'name': 'English SAT Simulation Test 5',
                                                'price': '50'
                                            }
                                    );
                                    var arr_search = search_public_lesson(arr, search);
                                    var html = '';
                                    $("#table-sat").html(html);
                                    if (arr_search.length != 0) {
                                        $.each(arr_search, function (i, v) {

                                            html += '<tr id="sat-tr-eng" class="sat-tr-eng"><td><div class="cb-type2"><label><input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-sat radio" value="" data-cate="10" data-name="' + v.name + '" data-desc="" data-price="' + v.price + '" name="select-tr"/></label> </div> </td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                            html += '</td>';
                                            html += ' <td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                            html += '<span class="search-sat-eng">' + v.name + '</span>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<div class="open-arrow-search-eng" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += '</td>';
                                            html += '</tr>';
                                        });
                                    } else {
                                        html += '<tr><td colspan="6">No results.</td>';
                                        html += '</tr>';
                                    }
                                    $("#table-sat").html(html);
                                }



                            }
                            if (id == 'search-course') {
                                var course = new Array(
                                        {
                                            name: "ikMath Course - Math Kindergarten",
                                            price: "$20"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 1",
                                            price: "$20"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 2",
                                            price: "$20"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 3",
                                            price: "$30"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 4",
                                            price: "$30"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 5",
                                            price: "$30"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 6",
                                            price: "$30"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 7",
                                            price: "$40"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 8",
                                            price: "$40"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 9",
                                            price: "$50"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 10",
                                            price: "$50"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 11",
                                            price: "$50"
                                        },
                                        {
                                            name: "ikMath Course - Math Grade 12",
                                            price: "$50"
                                        }
                                );
                                var cou = search_public_lesson(course, search);
                                $("#table-course").html("");
                                $.each(cou, function (i, v) {
                                    var html = '';
                                    html += '<tr id="course-tr" class="course-tr"><td><div class="cb-type2"><label><input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-course radio" value="" name="select-tr"/></label> </div> </td>';
                                    html += '<td class="table-img-icon">';
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                    html += '</td>';
                                    html += ' <td class="table-img-icon">';
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" class="" alt="lesson" >';
                                    html += '<span class="name-search-course">' + v.name + '</span>';
                                    html += '</td>';
                                    html += '<td class="table-img-icon">';
                                    html += '<p class="pay-lesson">' + v.price + '</p>';
                                    html += '</td>';
                                    html += '<td class="table-img-icon">';
                                    html += '<div class="open-arrow-course" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                    html += '</td>';
                                    $("#table-course").append(html);
                                });
                                if (cou.length == 0) {

                                    var html = '';
                                    html += '<tr><td colspan="6">No results.</td>';
                                    html += '</tr>';
                                    $("#table-course").append(html);
                                }


                            }
                            if (id == 'search-class-created') {
                                var check = $("#cbinactive").is(":checked");
                                if ($("#tab-class-created-math").hasClass("active")) {
                                    if (check == false) {
                                        list_class_created(5, 0, '', '');
                                    } else {
                                        list_class_created(5, 1, '', '');
                                    }

                                } else if ($("#tab-class-created-eng").hasClass("active")) {
                                    if (check == false) {
                                        list_class_created(1, 0, '', '');
                                    } else {
                                        list_class_created(1, 1, '', '');
                                    }

                                } else
                                {
                                    if (check == false) {
                                        list_class_created(0, 0, '', '');
                                    } else {
                                        list_class_created(0, 1, '', '');
                                    }

                                }

                            }
                            if (id == 'search-lesson3') {
                                $("#table-less4").html('');
                                var table = "table-less4";
                                get_my_lesson2('', table);
                            }
                            if (id == 'val-search-subject2') {
                                $("#table-sub2").html('');
                                var table = "table-sub2";
                                get_my_subject2('', table);
                            }
                        });
                        $("#icon-open-pub,#from-pub").live("click", function () {
                            var check = $(".from-public-lib").hasClass("active");
                            if (check == false) {
                                var cat_level = '';
                                var level = '';
                                var sublevel = '';
                                var lang = '';
                                var sheet_name = '';
                                var group_name = '';
                                var assignment_id = '';
                                var homework_types = '';
                                var grade = '';
                                var trivia_exclusive = '';
                                var active = '';
                                var type = '';
                                getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                                $(".from-public-lib").addClass(" active");
                                $(".from-public-lib").slideDown("slow");
                                $(".lesson-detail-lib").removeClass("active");
                                $(".lesson-detail-lib").slideUp("slow");
                                $("#icon-open-lib").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#icon-open-pub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_up.png");
                            } else {
                                $(".from-public-lib").removeClass("active");
                                $(".from-public-lib").slideUp("slow");
                                $("#icon-open-pub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $(".table-eng-worksheet").html('');
                                $(".table-math-worksheet").html('');
                            }
                        });
                        $("#icon-open-pub2,#from-pub2").live("click", function () {
                            var check = $(".from-public-lib2").hasClass("active");
                            if (check == false) {
                                var cat_level = '';
                                var level = '';
                                var sublevel = '';
                                var lang = '';
                                var sheet_name = '';
                                var group_name = '';
                                var assignment_id = '';
                                var homework_types = '';
                                var grade = '';
                                var trivia_exclusive = '';
                                var active = '';
                                var type = '';
                                getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type);
                                $(".from-public-lib2").addClass(" active");
                                $(".from-public-lib2").slideDown("slow");
                                $(".lesson-detail-lib2").removeClass("active");
                                $(".lesson-detail-lib2").slideUp("slow");
                                $("#icon-open-lib2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#icon-open-pub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_up.png");
                                $("#btn-open-search-eng3").removeClass("btn-down");
                                $("#btn-open-search-eng3").addClass("btn-assign");
                                $("#open-search-eng3").slideUp("fast");
                                $("#select-all-eng3").attr("checked", false);
                                $("#option-detail-eng3").addClass(" hidden");
                                $("#tab-public-lib-eng3").addClass(" active");
                                $("#tab-public-lib-math3").removeClass(" active");
                                $("#tab-math-lib3").removeClass(" active in");
                                $("#tab-eng-lib3").addClass(" active in");
                            } else {
                                $(".from-public-lib2").removeClass("active");
                                $(".from-public-lib2").slideUp("slow");
                                $("#icon-open-pub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $(".table-eng-worksheet").html('');
                                $(".table-math-worksheet").html('');
                            }
                        });
                        $("#icon-open-lib,#from-my-lib").live("click", function () {
                            var check = $(".lesson-detail-lib").hasClass("active");
                            if (check == false) {
                                $("#open-search-my-lib2").css("display", "none");
                                $(".lesson-detail-lib").addClass(" active");
                                $(".lesson-detail-lib").slideDown("slow");
                                $(".from-public-lib").removeClass("active");
                                $(".from-public-lib").slideUp("slow");
                                $("#icon-open-pub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#icon-open-lib").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_up.png");
                                var text = '';
                                $("#table-library").html('');
                                var table = "table-library2";
                                get_my_library(text, table);
                            } else {
                                $(".lesson-detail-lib").removeClass("active");
                                $(".lesson-detail-lib").slideUp("slow");
                                $("#icon-open-lib").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-library2").html("");
                            }
                        });
                        $("#icon-close-addws").live("click", function () {
                            $("#add-worksheet").addClass(' hidden');
                            $(".my-lesson-body").removeClass(' hidden');
                            var text = '';
                            $("#table-my-lesson").html('');
                            var table = "table-my-lesson";
                            get_my_lesson(text, table);
                        });
                        $("#icon-close-addws-lib").live("click", function () {
                            $("#add-worksheet-mylib").addClass(' hidden');
                            $(".library-lib ").removeClass(' hidden');
                            var text = '';
                            var table = "table-library";
                            get_my_library(text, table);
                        });
                        //delete sheet create lesson
                        $(".delete-sheet").live("click", function () {
                            var id = $(this).parent(".row-worksheet").attr("data-sid");
                            var html = '';
                            $("#yes-delete").attr("data-ws", id);
                            html += 'Are you sure you want to delete it?';
                            $("#modal-alert-yesno .box-title-1").html(html);
                            $("#modal-alert-yesno").css('display', 'block');
                        });
                        $(".delete-lesson").live("click", function () {
                            var id = $(this).parent(".row-worksheet").attr("data-lid");
                            var html = '';
                            $("#yes-delete").attr("data-rowlesson", id);
                            html += 'Are you sure you want to delete it?';
                            $("#modal-alert-yesno .box-title-1").html(html);
                            $("#modal-alert-yesno").css('display', 'block');
                        });
                        //search worksheet in my library
                        $("#btn-search-my-lib").click(function () {
                            var text = $("#search-tit-lib").val();
                            var table = "table-library";
                            get_my_library(text, table);
                        });
                        $("#btn-search-my-lib2").click(function () {
                            var text = $("#search-tit-lib2").val();
                            var table = "table-library2";
                            get_my_library(text, table);
                        });
                        //add worksheet in my lesson
                        $("#btn-add-ws").live("click", function () {
                            var lid = $(this).attr("data-lid");
                            var selected = new Array();
                            $(".option-input-mylibrary:checked").each(function () {
                                var id = $(this).attr("data-id");
                                selected.push(id);
                            });
                            $(".option-input-worksheet-eng:checked").each(function () {
                                var id = $(this).val();
                                selected.push(id);
                            });
                            $(".option-input-worksheet-math:checked").each(function () {
                                var id = $(this).val();
                                selected.push(id);
                            });
                            $.post(home_url + "/?r=ajax/add_my_lesson", {lid: lid, sheet: selected}, function (data) {
                                if (data !== "0") {
                                    $(".my-lesson-body").removeClass("hidden");
                                    $("#add-worksheet").addClass(" hidden");
                                    var html = '';
                                    html += 'Worksheets successfully added to My Lesson.';
                                    $(".box-title-1").html(html);
                                    $("#modal-alert").css('display', 'block');
                                    var text = '';
                                    $("#table-my-lesson").html('');
                                    var table = "table-my-lesson";
                                    get_my_lesson(text, table);
                                }
                            });
                        });
                        //addd worksheet in my library from public library
                        $("#btn-add-ws-lib").live("click", function () {
                            var selected = new Array();
                            $(".option-input-worksheet-eng:checked").each(function () {
                                var id = $(this).val();
                                var cate = $(this).attr("data-cate");
                                var sheet = $(this).attr("data-sheet");
                                selected.push({id: id, cate: cate, sheet: sheet});
                            });
                            $(".option-input-worksheet-math:checked").each(function () {
                                var id = $(this).val();
                                var cate = $(this).attr("data-cate");
                                var sheet = $(this).attr("data-sheet");
                                selected.push({id: id, cate: cate, sheet: sheet});
                            });
                            if (selected.length == 0) {
                                var html = '';
                                html += 'Please select worksheets first.';
                                $(".box-title-1").html(html);
                                $("#modal-alert").css('display', 'block');
                            } else {
                                $.post(home_url + "/?r=ajax/add_my_library", {
                                    data: selected}, function (data) {
                                    if (data !== "0") {
                                        var html = '';
                                        html += 'Worksheets successfully saved to <span style="font-style:italic;">My Library</span>.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                        $("#add-worksheet-mylib").addClass(' hidden');
                                        $(".library-lib ").removeClass(' hidden');
                                        var text = '';
                                        var table = "table-library";
                                        get_my_library(text, table);
                                    } else {
                                        var html = '';
                                        html += 'Same entry already exists, please select different entry.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                    }
                                });
                            }
                        });
                        //undo description
                        $(".undo-desc").live("click", function () {
                            var id = $(this).attr("data-lid");
                            var desc = $("#detaildesc" + id).text();
                            $.post(home_url + "/?r=ajax/undo_description", {lid: id, desc: desc}, function (data) {
                                $("#detaildesc" + id).text(data);
                                $("#detailinput" + id).val(data);
                                $("#lesson-tr" + id + " .desc-my-lesson").attr("data-desc", data);
                            });
                        });
                        //undo description in my subject
                        $(".undo-desc-lesssub").live("click", function () {
                            var id = $(this).attr("data-lid");
                            var desc = $("#detaildesc" + id).text();
                            $.post(home_url + "/?r=ajax/undo_description", {lid: id, desc: desc}, function (data) {
                                $("#detaildesc" + id).text(data);
                                $("#detailinput" + id).val(data);
                                $("#lesson-tr" + id + " .detail-desc-lesson").attr("data-desc", data);
                            });
                        });
                        $(".edit-desc-worksheet").live("click", function () {
                            $(".input-detail textarea").focus();
                        });
                        //undo description worksheet
                        $(".undo-desc-ws").live("click", function () {
                            var id = $(this).attr("data-lid");
                            var desc = $("#detaildesc" + id).text();
                            $.post(home_url + "/?r=ajax/undo_description_worksheet", {id: id, desc: desc}, function (data) {
                                $("#detaildesc" + id).text(data);
                                $("#detailinput" + id).val(data);
                                $("#tr-lesson-" + id + "").next(".desc-sheet-ls").remove();
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: id}, function (data1) {
                                    var data2 = JSON.parse(data1);
                                    if (data2.sheet.length > 0) {
                                        var html = '';
                                        $.each(data2.sheet, function (i, v) {
                                            html += '<tr class="desc-sheet-ls detail-tr-lesson desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="2" class="input-detail-ls lesson-detail-1">';
                                            html += '<div class="desc-detail detail-ws-style" id="detaildesc' + v.id + '">' + v.description + '</div><textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                            html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                            html += '<div class="table-img-icon undo-desc-ws" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                            html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success"  id="editsuccess' + v.id + '" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#tr-lesson-" + id + "").after(html);
                                        $(".desc-sheet-ls td").hide().slideDown("fast");
                                    }
                                });
                            });
                        });
                        //undo description worksheet in my library
                        $(".undo-desc-lib").live("click", function () {
                            var id = $(this).attr("data-lid");
                            var desc = $("#detaildesc" + id).text();
                            $.post(home_url + "/?r=ajax/undo_description_worksheet", {id: id, desc: desc}, function (data) {
                                $("#detaildesc" + id).text(data);
                                $("#detailinput" + id).val(data);
                                $("#tr-lesson-" + id + "").next(".desc-sheet").remove();
                                $.get(home_url + "/?r=ajax/get_desc_worksheet", {data: id}, function (data1) {
                                    if (data1 !== "0") {
                                        var data = JSON.parse(data1);
                                        if (data.sheet.length > 0) {
                                            var html = '';
                                            $.each(data.sheet, function (i, v) {
                                                html += '<tr class="desc-sheet detail-tr-lesson desc-worksheet-' + v.id + '">';
                                                html += '<td></td>';
                                                html += '<td></td>';
                                                html += '<td colspan="2" class="input-detail-lib">';
                                                if (v.description == "")
                                                {
                                                    html += '<div  class="desc-detail-sheet" id="detaildesc' + v.id + '">&nbsp;</div>';
                                                } else
                                                {
                                                    html += '<div  class="desc-detail-sheet" id="detaildesc' + v.id + '">' + v.description + '</div>';
                                                }
                                                html += '<textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                                html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                                html += '<div class="table-img-icon undo-desc-lib" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                                html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-ws"  id="editsuccess' + v.id + '" data-sid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                                html += ' </td>';
                                                html += '</tr>';
                                            });
                                            $("#tr-lesson-" + id + "").after(html);
                                            $(".desc-sheet td").hide().slideDown("fast");
                                        }
                                    }
                                });
                            });
                        });
                        //get worksheet of ready-made Lesson
                        $(".open-arrow-ready-eng").live("click", function () {
                            var id = $(this).attr("data-gid");
                            var desc = $(this).attr("data-content");
                            var open = $(".eng-tr").not('#eng-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".eng-tr").not('#eng-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var check1 = $('#eng-tr' + id + '').next().hasClass("detail-desc");
                            if (check1 == false) {
                                var html = '';
                                html += '<tr class="detail-desc detail-tr-lesson desc-worksheet desc-worksheet-' + id + '" >';
                                html += '<td></td>';
                                html += '<td></td>';
                                html += '<td colspan="3" class="input-detail">';
                                var check2 = $('#eng-tr' + id + '').next().hasClass("detail-worksheet");
                                if (check2 == true) {
                                    html += '<div class="desc-ready" id="detaildesc' + id + '">' + desc + '</div>';
                                } else {
                                    html += '<div class="desc-ready" id="detaildesc' + id + '">' + desc + '</div>';
                                }
                                html += ' </td>';
                                html += '</tr>';
                                $('#eng-tr' + id + '').after(html);
                                $(".detail-tr-lesson td").hide().slideDown("fast");
                            } else {
                                $('.detail-desc td').slideUp("fast", function () {
                                    $('#eng-tr' + id + '').nextAll(".detail-desc").remove();
                                });
                            }
                        });
                        $(".open-arrow-ready-math").live("click", function () {
                            var id = $(this).attr("data-gid");
                            var desc = $(this).attr("data-content");
                            var open = $(".math-tr").not('#math-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".math-tr").not('#math-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var check1 = $('#math-tr' + id + '').next().hasClass("detail-desc");
                            if (check1 == false) {
                                var html = '';
                                html += '<tr class="detail-desc detail-tr-lesson desc-worksheet desc-worksheet-' + id + '" >';
                                html += '<td></td>';
                                html += '<td></td>';
                                html += '<td colspan="3" class="input-detail">';
                                var check2 = $('#math-tr' + id + '').next().hasClass("detail-worksheet");
                                if (check2 == true) {
                                    html += '<div class="desc-ready" id="detaildesc' + id + '">' + desc + '</div>';
                                } else {
                                    html += '<div class="desc-ready" id="detaildesc' + id + '">' + desc + '</div>';
                                }
                                html += ' </td>';
                                html += '</tr>';
                                $('#math-tr' + id + '').after(html);
                                $(".detail-tr-lesson td").hide().slideDown("fast");
                            } else {
                                $('.detail-desc td').slideUp("fast", function () {
                                    $('#math-tr' + id + '').nextAll(".detail-desc").remove();
                                });
                            }
                        });
                        $(".paginate-pub").live("click", function () {
                            var page = $(this).attr("page");
                            var cat_level = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = '';
                            var group_name = '';
                            var assignment_id = '';
                            var homework_types = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type, page);
                        });
                        $(".paginate-pub2").live("click", function () {
                            var page = $(this).attr("page");
                            var cat_level = '';
                            var level = '';
                            var sublevel = '';
                            var lang = '';
                            var sheet_name = '';
                            var group_name = '';
                            var assignment_id = '';
                            var homework_types = '';
                            var grade = '';
                            var trivia_exclusive = '';
                            var active = '';
                            var type = '';
                            getWorksheets2(lang, sheet_name, group_name, assignment_id, homework_types, grade, trivia_exclusive, active, cat_level, level, sublevel, type, page);
                        });
                        //event for create subject button
                        $("#btn-create-subject").live("click", function () {
                            $("#input-style-sub").attr('value', '');
                            $('#post_mysubject_ifr').contents().find('#tinymce').text('');
                            var check = $("#create-subject-content").hasClass("active");
                            if (check == false) {
                                $("#table-confirm-subject").html("");
                                var selected = new Array();
                                $(".option-input-lesson:checked").each(function () {
                                    var lessonid = $(this).val();
                                    var lesson = $(this).attr('data-name');
                                    var public_lesson = $(this).attr('data-public');
                                    selected.push({"lid": lessonid, 'lesson': lesson, 'public': public_lesson});
                                });
                                var html = '';
                                if (selected.length !== 0) {
                                    var table_confirm_worksheet = $("#table-confirm-subject");
                                    for (var i = 0; i < selected.length; i++) {
                                        html += '<tr data-lid="' + selected[i].lid + '" id="' + selected[i].lid + '" class="row-worksheet">';
                                        html += ' <td class="table-img-icon" style="padding-bottom: 10px;padding-top: 5px; width:95%">';
                                        if (selected[i].public == 1) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="icon_Ready-made_lesson" >';
                                        } else {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" class="" alt="lesson" >';
                                        }
                                        html += '<span class="name-lesson-2">' + selected[i].lesson + '</span>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon text-right delete-lesson"  ><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson"></td>';
                                        html += '</tr>';
                                    }
                                    table_confirm_worksheet.append(html);
                                    $(".table-my-lesson").removeClass("active");
                                    $(".table-my-lesson").addClass("hidden");
                                    $(".create-subject-content").removeClass("hidden");
                                    $(".create-subject-content").addClass("active");
                                    $("#select-all-mylibrary").attr("checked", false);
                                    $.post(home_url + "/?r=ajax/get_cate", {type: "GET"}, function (data) {
                                        var data = JSON.parse(data);
                                        if (data.cate.length > 0) {
                                            var html_cate = '';
                                            html_cate += '<option disabled  value="" selected>-Select Subject Type-</option>';
                                            $.each(data.cate, function (i, v) {
                                                html_cate += '<option  value="' + v.id + '">' + v.name + '</option>';
                                            });
                                            $('#select-my-sub').html(html_cate).data("selectBox-selectBoxIt").refresh();
                                        }
                                    });
                                } else {
                                    html += 'Please select lessons first.';
                                    $(".box-title-1").html(html);
                                    $("#modal-alert").css('display', 'block');
                                }
                            }
                        });
                        //save my subject
                        $("#create-sub").click(function () {
                            var desc = $('#post_mysubject_ifr').contents().find('#tinymce').text();
                            var name = $('#input-style-sub').val();
                            var cate = $('#select-my-subSelectBoxItText').attr("data-val");
                            var type = $('#select-typeSelectBoxItText').attr("data-val");
                            var selected = new Array();
                            $(".row-worksheet").each(function () {
                                var sid = $(this).attr("data-lid");
                                selected.push(sid);
                            });
                            $.post(home_url + "/?r=ajax/add_my_subject", {name: name, desc: desc, cate: cate, lesson: selected, type: type}, function (data) {
                                if (data !== 0) {
                                    var html = '';
                                    html += 'New Subject has been created! You can find it from My Subject.';
                                    $(".box-title-1").html(html);
                                    $("#modal-alert").css('display', 'block');
                                    $(".create-subject-content").removeClass("active");
                                    $(".create-subject-content").addClass("hidden");
                                    $(".table-my-lesson").removeClass("hidden");
                                    $(".table-my-lesson").addClass("active");
                                    $(".option-input-lesson").attr("checked", false);
                                    $("#select-all-subject").attr("checked", false);
                                }
                            });
                        });
                        $("#create-sub").click(function () {
                            var desc = $('#post_mysubject_ifr').contents().find('#tinymce').text();
                            var name = $('#input-style-sub').val();
                            var cate = $('#select-my-subSelectBoxItText').attr("data-val");
                            var selected = new Array();
                            $(".row-worksheet").each(function () {
                                var sid = $(this).attr("data-sid");
                                selected.push(sid);
                            });
                            $.post(home_url + "/?r=ajax/add_my_lesson", {name: name, desc: desc, cate: cate, sheet: selected}, function (data) {
                                if (data !== 0) {
                                    var html = '';
                                    html += 'New Subject has been created! You can find it from My Subject.';
                                    $(".box-title-1").html(html);
                                    $("#modal-alert").css('display', 'block');
                                    $(".create-subject-content").removeClass("active");
                                    $(".create-subject-content").addClass("hidden");
                                    $(".table-my-lesson").removeClass("hidden");
                                    $(".table-my-lesson").addClass("active");
                                }
                            });
                        });
                        $("#create-btn1").click(function () {
//                          var desc=$.trim(tinymce.get('post_mylibrary').getContent();
                            var desc = $('#post_mylibrary_ifr').contents().find('#tinymce').text();
                            var name = $('#input-style').val();
                            var cate = $('#select-my-libSelectBoxItText').attr("data-val");
                            var type = $('#select-type-lessonSelectBoxItText').attr("data-val");
                            var selected = new Array();
                            $(".row-worksheet").each(function () {

                                var sid = $(this).attr("data-sid");
                                selected.push(sid);
                            });
                            $.post(home_url + "/?r=ajax/add_my_lesson", {name: name, desc: desc, cate: cate, sheet: selected, type: type}, function (data) {
                                if (data !== 0) {
                                    var html = '';
                                    html += 'New Lesson has been created! You can find it from My Lesson.';
                                    $(".box-title-1").html(html);
                                    $("#modal-alert").css('display', 'block');
                                    $(".create-lesson-content").removeClass("active");
                                    $(".create-lesson-content").addClass("hidden");
                                    $(".table-my-lesson").removeClass("hidden");
                                    $(".table-my-lesson").addClass("active");
                                    $(".option-input-mylibrary").attr("checked", false);
                                    $("#select-all-mylibrary").attr("checked", false);
                                }
                            });
                        });
                        function get_my_subject(search, table) {
                            $.post(home_url + "/?r=ajax/get_my_subject", {search: search}, function (data) {
                                $("#" + table + "").html('');
                                data = JSON.parse(data);
                                var html = '';
                                if (data == 0) {
                                    html += '<tr id="subj-tr" class="subj-tr">';
                                    html += '<td></td><td colspan="4">No results.</td></tr>';
                                } else {
                                    if (data.new != null) {
                                        if (data.new.length > 0) {
                                            $.each(data.new, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }

                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" class="" alt="lesson" >';
                                                html += '<span class="name-course lst-pub-subject" data-subid="' + v.id + '" data-type="' + v.type_id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-subject" data-subid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="detail-subject" data-subid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                if (v.price != 0) {
                                                    html += '<div class="price-subject"><span class="">$</span>' + v.price + ' </div>';
                                                } else {
                                                    html += '<div class="price-subject"><span class="">FREE</div>';
                                                }
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.subject != null) {
                                        if (data.subject.length > 0) {
                                            $.each(data.subject, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MySubject.png" class="" alt="lesson" >';
                                                html += '<span class="name-subject lst-sub-lesson" data-subid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-subject" data-subid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="add-lesson-icon" data-lid="' + v.id + '" data-name="' + v.name + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Add_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="detail-subject" data-subid="' + v.id + '" data-desc="' + v.description + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                }
                                $("#" + table + "").append(html);
                            });
                        }
                        function get_my_subject2(search, table) {
                            $.post(home_url + "/?r=ajax/get_my_subject", {search: search}, function (data) {
                                $("#" + table + "").html('');
                                data = JSON.parse(data);
                                var html = '';
                                if (data == 0) {
                                    html += '<tr id="subj-tr" class="subj-tr">';
                                    html += '<td></td><td colspan="3">No results.</td></tr>';
                                } else {
                                    if (data.new != null) {
                                        if (data.new.length > 0) {
                                            $.each(data.new, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon icon-ime">';
                                                html += '<img class="name-course lst-pub-subject2" data-subid="' + v.id + '" data-type="' + v.type_id + '" data-prefix="" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png" alt="lesson" >';
                                                if (v.cate == 1) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }

                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" class="" alt="lesson" >';
                                                html += '<span class="popup-detail" data-lid="' + v.id + '" data-gid="0" data-child="0" data-type="subject" data-title="' + v.name + '" data-desc="' + v.description + '" data-prefix="">' + v.name + '</span>';
                                                html += ' </td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.subject != null) {
                                        if (data.subject.length > 0) {
                                            $.each(data.subject, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon icon-ime">';
                                                html += '<img class="name-course lst-sub-lesson2" data-subid="' + v.id + '" data-prefix="" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png" alt="lesson" >';
                                                if (v.cate == 1) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img style="margin-right: 0;" src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MySubject.png" class="" alt="lesson" >';
                                                html += '<span class="popup-detail" data-lid="' + v.id + '" data-gid="0" data-child="0" data-type="subject" data-title="' + v.name + '" data-desc="' + v.description + '" data-prefix="">' + v.name + '</span>';
                                                html += ' </td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                }
                                $("#" + table + "").append(html);
                            });
                        }
                        $(".detail-subject").live("click", function () {
                            var id = $(this).attr("data-subid");
                            var desc = $(this).attr("data-desc");
                            var open = $(".subj-tr").not('#subj-tr' + id + '').next().hasClass("detail-desc");
                            if (open == true) {
                                $(".subj-tr").not('#subj-tr' + id + '').nextAll(".detail-desc").remove();
                                $(".subj-tr").not('#subj-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var check1 = $('#subj-tr' + id + '').next().hasClass("detail-desc");
                            if (check1 == false) {
                                var html = '';
                                html += '<tr class="detail-desc desc-worksheet desc-worksheet-' + id + '" >';
                                html += '<td></td>';
                                html += '<td></td>';
                                html += '<td colspan="3" class="input-detail detail-input">';
                                var check2 = $('#subj-tr' + id + '').next().hasClass("detail-lesson");
                                if (check2 == true) {
                                    html += '<div class="desc-detail style-border-desc" id="detaildesc' + id + '">' + desc + '</div>';
                                } else {
                                    html += '<div class="desc-detail" id="detaildesc' + id + '">' + desc + '</div>';
                                }
                                html += '<textarea rows="4" id="detailinput' + id + '" class="hidden" name="input-detail" >' + desc + '</textarea>';
                                html += '<div class="table-img-icon edit-desc-worksheet"  onclick="edit_desc(' + id + ')" id="editdesc' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                html += '<div class="table-img-icon undo-desc-subject" data-lid="' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-subject"  id="editsuccess' + id + '" data-subid="' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                html += ' </td>';
                                html += '</tr>';
                                $('#subj-tr' + id + '').after(html);
                                $(".detail-desc td").hide().slideDown("fast");
                            } else {
                                $('.detail-desc td').slideUp("fast", function () {
                                    $('#subj-tr' + id + '').nextAll(".detail-desc").remove();
                                });
                            }
                        });
                        //update description subject
                        $(".edit-success-subject").live("click", function () {
                            var sid = $(this).attr("data-subid");
                            var text = $("#detailinput" + sid).val();
                            var old_desc = $("#detaildesc" + sid).text();
                            $.post(home_url + "/?r=ajax/update_desc_subject", {desc: text, sid: sid, old_desc: old_desc}, function (data) {
                                $("#subj-tr" + sid + "").nextAll(".detail-desc").remove();
                                $.get(home_url + "/?r=ajax/get_desc_subject", {data: sid}, function (data1) {
                                    var data = JSON.parse(data1);
                                    if (data.sheet.length > 0) {
                                        var html = '';
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="detail-desc detail-tr-lesson desc-worksheet desc-worksheet-' + v.id + '">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td colspan="3" class="input-detail detail-input">';
                                            html += '<div class="desc-detail" id="detaildesc' + v.id + '">' + v.description + '</div><textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.description + '</textarea>';
                                            html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                            html += '<div class="table-img-icon undo-desc-subject" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                            html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-subject"  id="editsuccess' + v.id + '" data-subid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                        $("#subj-tr" + sid + "").after(html);
                                        $(".detail-desc td").hide().slideDown("fast");
                                    }
                                });
                                if (data == '1') {
                                }
                            });
                        });
                        //undo description
                        $(".undo-desc-subject").live("click", function () {
                            var id = $(this).attr("data-lid");
                            var desc = $("#detaildesc" + id).text();
                            $.post(home_url + "/?r=ajax/undo_description_subject", {id: id, desc: desc}, function (data) {
                                $("#detaildesc" + id).text(data);
                                $("#detailinput" + id).val(data);
                                $("#subj-tr" + id + " .detail-subject").attr("data-desc", data);
                            });
                        });
                        //list lesson's subject
                        $(".lst-sub-lesson").live("click", function () {
                            var id = $(this).attr("data-subid");
                            $(".subj-tr").not('#subj-tr' + id + '').next(".detail-desc").remove();
                            $(".subj-tr").not('#subj-tr' + id + '').nextAll(".desc-lesson-sub").remove();
                            var open = $(".subj-tr").not('#subj-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".subj-tr").not('#subj-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var check = $(".subj-tr").not("#subj-tr" + id).next().hasClass("set-hide");
                            if (check == true) {
                                $(".subj-tr").not("#subj-tr" + id).nextAll(".set-hide").remove();
                            }
                            var check1 = $('#subj-tr' + id + '').nextAll().hasClass("detail-lesson");
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_subject_lesson", {subid: id}, function (data) {
                                    data = JSON.parse(data);
                                    var html = '';
                                    if (data !== null) {
                                        if (data.length > 0) {
                                            $.each(data, function (i, v) {
                                                html += '<tr class="detail-lesson detail-tr-1 detail-tr-lesson lesson-tr set-hide-lesson" id="lesson-tr' + v.lesson_id + '" ><td></td>';
                                                html += '<td></td>';
                                                html += '<td class="table-img-icon lst-worksheet-lesson" style=" color:#ce851f !important; cursor:pointer;  " data-lid="' + v.lesson_id + '" colspan="2">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" alt="lesson" style="margin-bottom: 2px;" >' + v.lesson + '</td>';
                                                html += ' <td class="table-img-icon">';
                                                html += '<div class="delete-subject" data-sublid="' + v.id + '" data-subject="' + v.subject_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                                html += ' <div class="detail-desc-lesson" data-id="' + v.lesson_id + '" data-desc="' + v.lesson_desc + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += ' <div class="down-lesson" data-sublid="' + v.id + '" data-subid="' + v.subject_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                                html += ' <div class="up-lesson" data-sublid="' + v.id + '" data-subid="' + v.subject_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                                html += ' </td>';
                                                html += '</tr>';
                                            });
                                        }
                                    } else {
                                        html += '<tr class="detail-lesson detail-tr-1 detail-tr-lesson tr-lesson set-hide"><td></td><td></td><td colspan="2" style="padding-left:35px;">This folder is empty.</td></tr>';
                                    }
                                    if ($('#subj-tr' + id + '').next().hasClass("detail-desc")) {
                                        $('.desc-detail').addClass("style-border-desc");
                                        $(".detail-desc").after(html);
                                        $(".detail-lesson td").hide().slideDown("fast");
                                    } else {
                                        $('#subj-tr' + id + '').after(html);
                                        $(".detail-lesson td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $('.desc-detail').removeClass("style-border-desc");
                                $('.detail-lesson td').slideUp("fast", function () {
                                    $('#subj-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                                    $('#subj-tr' + id + '').nextAll(".detail-desc").remove();
                                });
                            }
                        });
                        //list lesson's subject
                        $(".lst-sub-lesson2").live("click", function () {                            
                            var id = $(this).attr("data-subid");
                            var pre_fix = prefix = $(this).attr("data-prefix");
                            if(prefix != '') prefix = prefix + '-';
                            $(".subj-tr").not('#'+ prefix +'subj-tr' + id + '').next(".detail-desc").remove();
                            $(".subj-tr").not('#'+ prefix +'subj-tr' + id + '').nextAll(".desc-lesson-sub").remove();
                            var open = $(".subj-tr").not('#'+ prefix +'subj-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".subj-tr").not('#'+ prefix +'subj-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var check = $(".subj-tr").not("#"+ prefix +"subj-tr" + id).next().hasClass("set-hide");
                            if (check == true) {
                                $(".subj-tr").not("#"+ prefix +"subj-tr" + id).nextAll(".set-hide").remove();
                            }
                            $(".lst-pub-subject2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                            $(".lst-sub-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                            if(pre_fix == 'pra'){
                                $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                                $(".lesson-tr-npra").css({"display":"table","margin-bottom":"0px"});
                                $(".my-public-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".my-lesson-ws2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".lesson-tr" + pre_fix).nextAll(".set-hide").remove();
                            }
                            if(pre_fix == 'npra'){
                                $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                                $(".lesson-tr-pra").css({"display":"table","margin-bottom":"0px"});
                                $(".my-public-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".my-lesson-ws2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".lesson-tr" + pre_fix).nextAll(".set-hide").remove();
                            }
                            var check1 = $('#'+ prefix +'subj-tr' + id + '').nextAll().hasClass("detail-lesson");
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_subject_lesson", {subid: id}, function (data) {
                                    data = JSON.parse(data);
                                    var html = '';
                                    if (data !== null) {
                                        if (data.length > 0) {
                                            $.each(data, function (i, v) {
                                                html += '<tr class="detail-lesson detail-tr-1 detail-tr-lesson lesson-tr set-hide-lesson" id="'+ prefix +'lesson-tr' + v.lesson_id + '" ><td></td>';
                                                html += '<td class="table-img-icon text-right"><img class="lst-worksheet-lesson2" data-lid="' + v.lesson_id + '" data-prefix="' + pre_fix + '" data-subid="' + id + '" data-size="' + data.length + '" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png" alt="lesson" ></td>';
                                                html += '<td class="table-img-icon" style="color:#ce851f !important; cursor:pointer;">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" alt="lesson" style="margin-bottom: 2px;"><span class="popup-detail" data-child="' + v.lesson_id + '" data-lid="' + id + '" data-gid="0" data-title="' + v.lesson + '" data-desc="' + v.lesson_desc + '" data-type="subject_lesson" data-prefix="' + pre_fix + '">' + v.lesson + '</span></td>';
                                                html += '</tr>';
                                            });
                                        }
                                        var height = data.length * 40;
                                    } else {
                                        html += '<tr class="detail-lesson detail-tr-1 detail-tr-lesson tr-lesson set-hide"><td></td><td></td><td colspan="2" style="padding-left:35px;">This folder is empty.</td></tr>';
                                        var height = 40;
                                    }
                                    $('#'+ prefix +'subj-tr' + id + '').after(html);
                                    $(".detail-lesson td").hide().slideDown("fast");
                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":height+"px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":height+"px"});
                                    }
                                });
                                $(this).attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Opened.png");
                            } else {
                                $('.desc-detail').removeClass("style-border-desc");
                                $('.detail-lesson td').slideUp("fast", function () {
                                    $('#'+ prefix +'subj-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                                    $('#'+ prefix +'subj-tr' + id + '').nextAll(".detail-desc").remove();
                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":"0px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":"0px"});
                                    }
                                });
                            }
                        });
                        //list worksheet's lesson in subject
                        $(".lst-worksheet-lesson").live("click", function () {
                            var id = $(this).attr("data-lid");
                            var check1 = $('#lesson-tr' + id + '').next().hasClass("detail-worksheet");
                            var open = $(".lesson-tr").not('#lesson-tr' + id + '').nextAll().hasClass("detail-worksheet");
                            var open2 = $(".lesson-tr").not('#lesson-tr' + id + '').next().hasClass("desc-lesson-sub");
                            if (open == true || open2 == true) {
                                var open3 = $('#lesson-tr' + id + '').nextAll().hasClass('worksheet-lesson-' + id);
                                $(".lesson-tr").not('#lesson-tr' + id + '').next(".desc-lesson-sub").remove();
                                if (open3 == false) {
                                    $(".lesson-tr").not('#lesson-tr' + id + '').nextAll(".detail-worksheet").remove();
                                    $(".lesson-tr").not('#lesson-tr' + id + '').nextAll(".desc-sheet-ls").remove();
                                }
                                $(".lesson-tr").not('#lesson-tr' + id + '').removeClass("style-tr-sub");
                            }
                            var html = '';
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_my_lesson_sheet", {data: id}, function (data) {
                                    data = JSON.parse(data);
                                    if (data.sheet.length > 0) {
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide worksheet-lesson-' + id + '" id="tr-lesson-' + v.sheet_id + '"><td></td>';
                                            html += '<td></td>';
                                            html += '<td class="table-img-icon" style="padding-left: 50px !important;" colspan="2">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;">' + v.sheet_name + '</td>';
                                            html += ' <td class="table-img-icon">';
                                            html += '<div class="delete-worksheet" data-slid="' + v.id + '" data-lid2="' + v.lesson_id + '" data-item="subject"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                            html += ' <div class="detail-worksheet-ls" data-id="' + v.sheet_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += ' <div class="down-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                            html += ' <div class="up-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                    } else {
                                        html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide"><td></td><td></td><td colspan="2" style="padding-left:65px;">This folder is empty.</td></tr>';
                                    }
                                    $('#lesson-tr' + id + '').addClass("style-tr-sub");
                                    var check2 = $('#lesson-tr' + id + '').next().hasClass("desc-lesson-sub");
                                    if (check2 == true) {
                                        var check3 = $('.desc-lesson-sub').next().hasClass("detail-worksheet");
                                        if (check3 == false) {
                                            $(".desc-lesson-sub").after(html);
                                            $(".detail-worksheet td").hide().slideDown("fast");
                                        } else if (check3 == true) {
                                            $('#lesson-tr' + id + '').removeClass("style-tr-sub");
                                            $('.set-hide td').slideUp("fast", function () {
                                                $('#lesson-tr' + id + '').nextAll(".set-hide").remove();
                                            });
                                        }
                                    } else {
                                        $('#lesson-tr' + id + '').after(html);
                                        $(".detail-tr-lesson td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $('#lesson-tr' + id + '').removeClass("style-tr-sub");
                                $('.detail-worksheet td').slideUp("fast", function () {
                                    $('#lesson-tr' + id + '').nextAll(".set-hide").remove();
                                });
                            }
                        });
                        //list worksheet's lesson in subject
                        $(".lst-worksheet-lesson2").live("click", function () {
                            var id = $(this).attr("data-lid");
                            var subid = $(this).attr("data-subid");
                            var size = $(this).attr("data-size");
                            var pre_fix = prefix = $(this).attr("data-prefix");
                            if(prefix != '') prefix = prefix + '-';

                            var check1 = $('#'+ prefix +'lesson-tr' + id + '').next().hasClass("detail-worksheet");
                            var open = $(".lesson-tr").not('#'+ prefix +'lesson-tr' + id + '').nextAll().hasClass("detail-worksheet");
                            var open2 = $(".lesson-tr").not('#'+ prefix +'lesson-tr' + id + '').next().hasClass("desc-lesson-sub");
                            if (open == true || open2 == true) {
                                var open3 = $('#'+ prefix +'lesson-tr' + id + '').nextAll().hasClass('worksheet-lesson-' + id);
                                $(".lesson-tr").not('#'+ prefix +'lesson-tr' + id + '').next(".desc-lesson-sub").remove();
                                if (open3 == false) {
                                    $(".lesson-tr").not('#'+ prefix +'lesson-tr' + id + '').nextAll(".detail-worksheet").remove();
                                    $(".lesson-tr").not('#'+ prefix +'lesson-tr' + id + '').nextAll(".desc-sheet-ls").remove();
                                }
                                $(".lesson-tr").not('#'+ prefix +'lesson-tr' + id + '').removeClass("style-tr-sub");
                            }
                            $(".name-sheet-eng").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                            $(".lst-worksheet-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");

                            var html = '';
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_my_lesson_sheet", {data: id}, function (data) {
                                    data = JSON.parse(data);
                                    if (data.sheet.length > 0) {
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide worksheet-lesson-' + id + '" id="'+ prefix +'tr-lesson-' + v.sheet_id + '"><td></td>';
                                            html += '<td></td>';
                                            html += '<td class="table-img-icon" style="padding-left: 21px !important;">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;"><span class="popup-detail" data-child="' + v.sheet_id + '" data-lid="' + id + '" data-gid="0" data-title="' + v.sheet_name + '" data-desc="' + v.description + '" data-type="subject_sheet" data-prefix="' + pre_fix + '">' + v.sheet_name + '</span></td>';
                                            html += '</tr>';
                                        });
                                        var height = data.sheet.length * 40;
                                        var h = size * 40;
                                        var sh = (height + h);
                                    } else {
                                        html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide"><td></td><td></td><td style="padding-left:22px;">This folder is empty.</td></tr>';
                                        var h = size * 40;
                                        var sh = (h + 40);
                                    }

                                    $('#'+ prefix +'lesson-tr' + id + '').addClass("style-tr-sub");
                                    var check2 = $('#'+ prefix +'lesson-tr' + id + '').next().hasClass("desc-lesson-sub");
                                    if (check2 == true) {
                                        var check3 = $('.desc-lesson-sub').next().hasClass("detail-worksheet");
                                        if (check3 == false) {
                                            $(".desc-lesson-sub").after(html);
                                            $(".detail-worksheet td").hide().slideDown("fast");
                                        } else if (check3 == true) {
                                            $('#'+ prefix +'lesson-tr' + id + '').removeClass("style-tr-sub");
                                            $('.set-hide td').slideUp("fast", function () {
                                                $('#'+ prefix +'lesson-tr' + id + '').nextAll(".set-hide").remove();
                                            });
                                        }
                                    } else {
                                        $('#'+ prefix +'lesson-tr' + id + '').after(html);
                                        $(".detail-tr-lesson td").hide().slideDown("fast");
                                    }
                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":sh+"px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":sh+"px"});
                                    }
                                });
                                $(this).attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Opened.png");
                            } else {
                                $('#'+ prefix +'lesson-tr' + id + '').removeClass("style-tr-sub");
                                $('.detail-worksheet td').slideUp("fast", function () {
                                    var sh = size * 40;
                                    $('#'+ prefix +'lesson-tr' + id + '').nextAll(".set-hide").remove();
                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":sh+"px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":sh+"px"});
                                    }
                                });
                            }
                        });
                        //show description of lesson in  My subject
                        $(".detail-desc-lesson").live("click", function () {
                            var id = $(this).attr("data-id");
                            var desc = $(this).attr("data-desc");
                            var open = $("#lesson-tr" + id + "").next().hasClass("desc-lesson-sub");
                            if (open == false) {
                                var check2 = $('#lesson-tr' + id + '').next().hasClass('worksheet-lesson-' + id);
                                $('#lesson-tr' + id + '').addClass("style-tr-sub");
                                if (check2 == false) {
                                    $(".lesson-tr").not('#lesson-tr' + id + '').nextAll(".detail-worksheet").remove();
                                }
                                $(".lesson-tr").not('#lesson-tr' + id + '').removeClass("style-tr-sub");
                                $(".lesson-tr").not("#lesson-tr" + id + "").next(".desc-lesson-sub").remove();
                                var html = '';
                                html += '<tr class="desc-lesson-sub detail-tr-lesson set-hide desc-worksheet-' + id + '">';
                                html += '<td></td>';
                                html += '<td></td>';
                                html += '<td colspan="3" class="input-detail lesson-detail-1 detail-input">';
                                if (desc == "")
                                {
                                    html += '<div class="desc-detail lesson-detail sub-detail" id="detaildesc' + id + '">&nbsp;</div>';
                                } else
                                {
                                    html += '<div class="desc-detail lesson-detail sub-detail" id="detaildesc' + id + '">' + desc + '</div>';
                                }
                                html += '<textarea rows="4" id="detailinput' + id + '" class="hidden" name="input-detail" >' + desc + '</textarea>';
                                html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + id + ')" id="editdesc' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                html += '<div class="table-img-icon undo-desc-lesssub" data-lid="' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-lessonsub"  id="editsuccess' + id + '" data-lid="' + id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                html += ' </td>';
                                html += '</tr>';
                                $("#lesson-tr" + id + "").after(html);
                                $(".desc-lesson-sub td").hide().slideDown("fast");
                            } else {
                                var check = $(".desc-lesson-sub").next().hasClass("detail-worksheet");
                                if (check == false) {
                                    $('#lesson-tr' + id + '').removeClass("style-tr-sub");
                                }
                                $(".desc-lesson-sub td").slideUp("fast", function () {
                                    $("#lesson-tr" + id + "").nextAll(".desc-lesson-sub").remove();
                                });
                            }
                        });
                        //"Select All" checkbox on My Subject
                        $("#select-all-subject").click(function () {
                            if ($("#select-all-subject").is(":checked")) {

                                $(".option-sub-check").attr("checked", true);
                            } else
                                $(".option-sub-check").attr("checked", false);
                        });
                        //"Select All" checkbox of Add Subject From My Subject on Create Class
                        $("#select-all-add-sub").click(function () {
                            if ($("#select-all-add-sub").is(":checked")) {

                                $(".option-sub-check").attr("checked", true);
                            } else
                                $(".option-sub-check").attr("checked", false);
                        });
                        //sort subject of Add Subject From My Subject on Create Class
                        $("#icon-option-subject2").click(function () {
                            var sort = $(this).attr("data-sort");
                            $.post(home_url + "/?r=ajax/get_my_subject", {sort: sort}, function (data) {
                                $("#table-sub").html('');
                                if (data !== "0") {
                                    if (sort == "upward") {
                                        $("#icon-option-subject2").attr("data-sort", "downward");
                                        $(".img-sort-subject2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                    } else if (sort == "downward") {
                                        $("#icon-option-subject2").attr("data-sort", "upward");
                                        $(".img-sort-subject2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                    }
                                    var html = '';
                                    data = JSON.parse(data);
                                    if (data.new != null) {
                                        if (data.new.length > 0) {
                                            $.each(data.new, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }

                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" class="" alt="lesson" >';
                                                html += '<span class="name-course lst-pub-subject2" data-subid="' + v.id + '" data-type="' + v.type_id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="detail-subject" data-subid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                if (v.price != 0) {
                                                    html += '<div class="price-subject"><span class="">$</span>' + v.price + ' </div>';
                                                } else {
                                                    html += '<div class="price-subject"><span class="">FREE</div>';
                                                }
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.subject != null) {
                                        if (data.subject.length > 0) {
                                            $.each(data.subject, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MySubject.png" class="" alt="lesson" >';
                                                html += '<span class="name-subject lst-sub-lesson2" data-subid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="detail-subject" data-subid="' + v.id + '" data-desc="' + v.description + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                } else {
                                    var html = '';
                                    html += '<tr><td colspan="5">No results.</td>';
                                    html += '</tr>';
                                }
                                $("#table-sub").append(html);
                            });
                        });
                        //sort subject on my Subject
                        $("#icon-option-subject").click(function () {
                            var sort = $(this).attr("data-sort");
                            $.post(home_url + "/?r=ajax/get_my_subject", {sort: sort}, function (data) {
                                $("#table-my-subject").html('');
                                if (data !== "0") {
                                    if (sort == "upward") {
                                        $("#icon-option-subject").attr("data-sort", "downward");
                                        $(".img-sort-subject").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                    } else if (sort == "downward") {
                                        $("#icon-option-subject").attr("data-sort", "upward");
                                        $(".img-sort-subject").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                    }
                                    var html = '';
                                    data = JSON.parse(data);
                                    if (data.new != null) {
                                        if (data.new.length > 0) {
                                            $.each(data.new, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }

                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" class="" alt="lesson" >';
                                                html += '<span class="name-course lst-pub-subject" data-subid="' + v.id + '" data-type="' + v.type_id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-subject" data-subid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="detail-subject" data-subid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                if (v.price != 0) {
                                                    html += '<div class="price-subject"><span class="">$</span>' + v.price + ' </div>';
                                                } else {
                                                    html += '<div class="price-subject"><span class="">FREE</div>';
                                                }
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.subject != null) {
                                        if (data.subject.length > 0) {
                                            $.each(data.subject, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MySubject.png" class="" alt="lesson" >';
                                                html += '<span class="name-subject lst-sub-lesson" data-subid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-subject" data-subid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="add-lesson-icon" data-lid="' + v.id + '" data-name="' + v.name + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Add_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="detail-subject" data-subid="' + v.id + '" data-desc="' + v.description + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                } else {
                                    var html = '';
                                    html += '<tr><td colspan="5">No results.</td>';
                                    html += '</tr>';
                                }
                                $("#table-my-subject").append(html);
                            });
                        });
                        //Add lesson icon in My Subject
                        $(".add-lesson-icon").live("click", function () {
                            var lid = $(this).attr("data-lid");
                            var name = $(this).attr("data-name");
                            $(".my-lesson-body").addClass(" hidden");
                            $("#add-worksheet-subject").removeClass("hidden");
                            $("#btn-add-less").attr("data-lid", lid);
                            $(".name-sub").text(name);
                            $(".lesson-detail-sub").removeClass("active");
                            $(".lesson-detail-sub").slideUp("fast");
                            $("#select-all-less4").attr("checked", false);
                            $("#icon-open-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                        });
                        //sự kiện click vào icon, mở ra My Lesson khi thêm Lesson trog My Subject
                        $("#icon-open-sub,#from-my-sub").live("click", function () {
                            var check = $(".lesson-detail-sub").hasClass("active");
                            if (check == false) {
                                $(".lesson-detail-sub").addClass(" active");
                                $(".lesson-detail-sub").slideDown("slow");
                                $("#icon-open-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_up.png");
                                $("#select-assign-sub").slideUp("fast");
                                $("#select-all-less2").attr("checked", false);
                                $("#option-detail-less2").addClass(" hidden");
                                var text = '';
                                $("#table-less2").html('');
                                var table = "table-less2";
                                get_my_lesson2(text, table);
                            } else {
                                $("#select-all-less4").attr("checked", false);
                                $(".lesson-detail-sub").removeClass("active");
                                $(".lesson-detail-sub").slideUp("slow");
                                $("#icon-open-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-less2").html('');
                            }
                        });
                        //event open  My Lesson of Add Lesson From My Lesson on Create Class
                        $("#icon-open-from-lesson, #from-my-lesson").live("click", function () {
                            $("#table-my-lesson").html('');
                            $("#table-sub").html('');
                            var check = $(".lesson-detail-sub").hasClass("active");
                            if (check == false) {
                                $(".lesson-detail-sub").addClass(" active");
                                $(".lesson-detail-sub").slideDown("slow");
                                $("#icon-open-from-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_up.png");
                                $("#select-assign-lesson").slideUp("fast");
                                $(".sub-detail").removeClass("active");
                                $(".sub-detail").hide();
                                $("#icon-add-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#select-all-less2").attr("checked", false);
                                $("#option-detail-less2").addClass(" hidden");
                                $("#btn-assign-lesson-down").removeClass("btn-down");
                                $("#btn-assign-lesson-down").addClass("btn-assign");
                                var text = '';
                                $("#table-less3").html('');
                                var table = "table-less3";
                                get_my_lesson2(text, table);
                            } else {
                                $("#select-all-less5").attr("checked", false);
                                $(".lesson-detail-sub").removeClass("active");
                                $(".lesson-detail-sub").slideUp("slow");
                                $("#icon-open-from-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-less3").html('');
                            }
                        });
                        //event open  My Subject of Add Subject From My Subject on Create Class
                        $("#icon-add-sub, #from-my-subject").live("click", function () {
                            $("#table-my-subject").html('');
                            $("#table-less3").html('');
                            var check = $(".sub-detail").hasClass("active");
                            if (check == false) {
                                $(".sub-detail").addClass(" active");
                                $(".sub-detail").slideDown("slow");
                                $("#icon-add-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_up.png");
                                $("#select-assign-sub2").slideUp("fast");
                                $(".lesson-detail-sub").removeClass("active");
                                $(".lesson-detail-sub").hide();
                                $("#icon-open-from-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#select-all-add-sub").attr("checked", false);
                                $("#option-detail-less2").addClass(" hidden");
                                $("#search-add-sub").removeClass("btn-down");
                                $("#search-add-sub").addClass("btn-assign");
                                var text = '';
                                $("#table-sub").html('');
                                var table = "table-sub";
                                get_my_subject2(text, table);
                            } else {
                                $("#select-all-add-sub").attr("checked", false);
                                $(".sub-detail").removeClass("active");
                                $(".sub-detail").slideUp("slow");
                                $("#icon-add-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-sub").html('');
                            }
                        });
                        //"Close icon" event when user don't want to add Lesson on My Subject
                        $("#close-add-subject").live("click", function () {
                            $("#add-worksheet-subject").addClass(' hidden');
                            $(".my-lesson-body").removeClass(' hidden');
                            $("#search-my-less-3").addClass("hidden");
                            $("#search-my-less").removeClass("hidden");
                            var search = '';
                            get_my_subject(search, "table-my-subject");
                        });
                        //"Search and Assign Lesson" event of Add lesson From My lesson on  My Subject
                        $("#search-my-less").click(function () {
                            $("#search-my-less").addClass("hidden");
                            $("#search-my-less-3").removeClass("hidden");
                            $("#select-search-addlesson").slideDown("fast");
                            get_groups('select-class-lesson3');
                        });
                        //"Search and Assign Lesson" event of Add lesson From My lesson on  My Subject
                        $("#search-my-less-3").click(function () {
                            $("#search-my-less-3").addClass("hidden");
                            $("#search-my-less").removeClass("hidden");
                            $("#select-search-addlesson").slideUp("fast");
                            $("#search-sub").val("");
                        });
                        //sort lesson of Add Lesson From My Lesson on MY Subject
                        $("#icon-option-less2").click(function () {
                            var sort = $(this).attr("data-sort");
                            $.post(home_url + "/?r=ajax/get_my_lesson", {sort: sort}, function (data) {
                                $("#table-less2").html('');
                                if (data !== "0") {
                                    if (sort == "upward") {
                                        $("#icon-option-less2").attr("data-sort", "downward");
                                        $(".img-sort-less2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                    } else if (sort == "downward") {
                                        $("#icon-option-less2").attr("data-sort", "upward");
                                        $(".img-sort-less2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                    }
                                    var html = '';
                                    data = JSON.parse(data);
                                    if (data.publesson != null) {
                                        if (data.publesson.length > 0) {
                                            $.each(data.publesson, function (i, v) {
                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '"  data-public="1" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 8) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Dictionary.png" alt="lesson" >';
                                                } else if (v.cate == 9) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                                } else if (v.cate == 10) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-ready-lesson my-public-lesson" data-lid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-worksheet" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                if (v.price != 0) {
                                                    html += '<div class="price-lesson"><span class="">$</span>' + v.price + ' </div>';
                                                } else {
                                                    html += '<div class="price-lesson"><span class="">FREE</div>';
                                                }
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.lesson != null) {
                                        if (data.lesson.length > 0) {
                                            $.each(data.lesson, function (i, v) {

                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-lesson my-lesson-ws" data-lid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="delete-worksheet" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="add-worksheet-ic" data-lid="' + v.id + '" data-name="' + v.name + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Add_worksheet.png" class="" alt="lesson" ></div>';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    $("#table-less2").html(html);
                                } else {
                                    html += '<tr id="lesson-tr" class="lesson-tr">';
                                    html += '<td></td><td colspan="4">No results.</td></tr>';
                                    $("#table-less2").html(html);
                                }

                            });
                        });
                        //"Select All" event of Add Lesson From My Lesson on My SUbject
                        $("#select-all-less4").click(function () {
                            if ($("#select-all-less4").is(":checked")) {
                                $(".option-input-lesson-check").attr("checked", true);
                            } else
                                $(".option-input-lesson-check").attr("checked", false);
                        });
                        //"Search" button event of Add Lesson From My Lesson on My SUbject
                        $("#search-btn-sub").click(function () {
                            var search = $("#search-sub").val();
                            var tbody_my_lesson = "table-less2";
                            get_my_lesson2(search, tbody_my_lesson);
                        });
                        //"Search" button event of Add Lesson From My Lesson on Create Class
                        $("#search-btn-lesson").click(function () {
                            var search = $("#search-lesson2").val();
                            var tbody_my_lesson = "table-less3";
                            get_my_lesson2(search, tbody_my_lesson);
                        });
                        //delete Subject in My Subject
                        $(".delete-subject").live("click", function () {
                            var subid = $(this).attr("data-subid");
                            var sublid = $(this).attr("data-sublid");
                            var subject_id = $(this).attr("data-subject");
                            var id_create_class = $(this).attr("data-id");
                            var type_create_class = $(this).attr("data-type");
                            var priority = $(this).attr("data-prerequisite");
                            var data_editclass_sub = $(this).attr("data-sid");
                            var data_editclass_less = $(this).attr("data-lid");
                            var data_editclass_gid = $(this).attr("data-gid");
                            var html = '';
                            $("#yes-delete").attr("data-subid", subid);
                            $("#yes-delete").attr("data-sublid", sublid);
                            $("#yes-delete").attr("data-subject", subject_id);
                            $("#yes-delete").attr("data-create-class", id_create_class);
                            $("#yes-delete").attr("data-create-class2", type_create_class);
                            $("#yes-delete").attr("data-prerequisite", priority);
                            $("#yes-delete").attr("data-editclass-gid", data_editclass_gid);
                            $("#yes-delete").attr("data-editclass-sub", data_editclass_sub);
                            $("#yes-delete").attr("data-editclass-less", data_editclass_less);
                            html += 'Are you sure you want to delete it?';
                            $("#modal-alert-yesno .box-title-1").html(html);
                            $("#modal-alert-yesno").css('display', 'block');
                        });
                        //order lesson in my subject
                        $(".up-lesson,.down-lesson").live("click", function () {
                            var row = $(this).parents("tr:first");
                            var cls_prev = row.prev().hasClass("detail-lesson");
                            var cls_next = row.next().hasClass("detail-lesson");
                            var sublid = $(this).attr("data-sublid");
                            var subid = $(this).attr("data-subid");
                            if ($(this).is(".up-lesson")) {
                                if (cls_prev == true) {
                                    $.post(home_url + "/?r=ajax/update_order_lesson", {ordering: "up", sublid: sublid, subid: subid}, function (data) {
                                    });
                                    row.insertBefore(row.prev());
                                }
                            } else {
                                if (cls_next == true) {
                                    $.post(home_url + "/?r=ajax/update_order_lesson", {ordering: "down", sublid: sublid, subid: subid}, function (data) {
                                    });
                                    row.insertAfter(row.next());
                                }
                            }
                        });
                        //event for search button subject
                        $("#search-btn-subject").live("click", function () {
                            var search = $("#search-subject").val();
                            get_my_subject(search, "table-my-subject");
                        });
                        //event for search button subject on Add Subject Create Class
                        $("#search-btn-subject2").live("click", function () {

                            var search = $("#val-search-subject").val();
                            get_my_subject2(search, "table-sub");
                        });
                        //add lesson in my subject
                        $("#btn-add-less").live("click", function () {
                            var lid = $(this).attr("data-lid");
                            var selected = new Array();
                            $(".option-input-lesson:checked").each(function () {
                                var id = $(this).val();
                                selected.push(id);
                            });
                            $.post(home_url + "/?r=ajax/add_my_subject", {subid: lid, lesson: selected}, function (data) {
                                if (data !== "0") {
                                    $(".my-lesson-body").removeClass("hidden");
                                    $("#add-worksheet-subject").addClass(" hidden");
                                    var html = '';
                                    html += 'Lessons successfully added to My subject.';
                                    $(".box-title-1").html(html);
                                    $("#modal-alert").css('display', 'block');
                                    $.post(home_url + "/?r=ajax/get_subject_lesson", {subid: lid}, function (data) {
                                        $('#subj-tr' + lid + '').nextAll(".detail-lesson").remove();
                                        data = JSON.parse(data);
                                        var html = '';
                                        if (data !== '') {
                                            if (data.length > 0) {
                                                $.each(data, function (i, v) {
                                                    html += '<tr class="detail-lesson detail-tr-1 detail-tr-lesson lesson-tr" id="lesson-tr' + v.lesson_id + '" ><td></td>';
                                                    html += '<td></td>';
                                                    html += '<td class="table-img-icon lst-worksheet-lesson" style=" color:#ce851f !important; cursor:pointer;  " data-lid="' + v.lesson_id + '">';
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" alt="lesson" style="margin-bottom: 2px;" >' + v.lesson + '</td>';
                                                    html += ' <td class="table-img-icon">';
                                                    html += '<div class="delete-subject" data-sublid="' + v.id + '" data-subject="' + v.subject_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                                    html += ' <div class="detail-desc-lesson" data-id="' + v.lesson_id + '" data-desc="' + v.lesson_desc + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                    html += ' <div class="down-lesson" data-sublid="' + v.id + '" data-subid="' + v.subject_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                                    html += ' <div class="up-lesson" data-sublid="' + v.id + '" data-subid="' + v.subject_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                                    html += ' </td>';
                                                    html += '</tr>';
                                                });
                                                $('#subj-tr' + lid + '').after(html);
                                                $(".detail-lesson td").hide().slideDown("fast");
                                            }
                                        }
                                    });
                                }
                            });
                        });
                        $(".edit-success-lessonsub").live("click", function () {
                            var lid = $(this).attr("data-lid");
                            var text = $("#detailinput" + lid).val();
                            var old_desc = $("#detaildesc" + lid).text();
                            $('#lesson-tr' + lid + '').nextAll(".desc-lesson-sub").remove();
                            $.post(home_url + "/?r=ajax/update_desc_lesson", {desc: text, lid: lid, old_desc: old_desc}, function (data) {
                                if (data !== '') {
                                    data = JSON.parse(data);
                                    var html = '';
                                    $.each(data, function (i, v) {
                                        html += '<tr class="desc-lesson-sub detail-tr-lesson set-hide desc-worksheet-' + v.id + '">';
                                        html += '<td></td>';
                                        html += '<td></td>';
                                        html += '<td colspan="3" class="input-detail lesson-detail-1 detail-input">';
                                        if (v.desc == "")
                                        {
                                            html += '<div class="desc-detail lesson-detail sub-detail" id="detaildesc' + v.id + '">&nbsp;</div>';
                                        } else
                                        {
                                            html += '<div class="desc-detail lesson-detail sub-detail" id="detaildesc' + v.id + '">' + v.desc + '</div>';
                                        }
                                        html += '<textarea rows="4" id="detailinput' + v.id + '" class="hidden" name="input-detail" >' + v.desc + '</textarea>';
                                        html += '<div class="table-img-icon edit-desc-worksheet" onclick="edit_desc(' + v.id + ')" id="editdesc' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                        html += '<div class="table-img-icon undo-desc-lesssub" data-lid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                        html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-lessonsub"  id="editsuccess' + v.id + '" data-lid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                        html += ' </td>';
                                        html += '</tr>';
                                        $('#lesson-tr' + lid + '').after(html);
                                        $(".detail-tr-lesson td").hide().slideDown("fast");
                                    });
                                }
                            });
                        });
                        //list worksheet in my lesson
                        $(".my-lesson-ws").live("click", function () {
                            $(".lesson-tr").css("border-bottom", "1px solid #ddd");
                            var id = $(this).attr("data-lid");
                            var open = $(".lesson-tr").not('#lesson-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".lesson-tr").not('#lesson-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var html = '';
                            var check1 = $('#lesson-tr' + id + '').next().hasClass("detail-worksheet");
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_my_lesson_sheet", {data: id}, function (data) {
                                    data = JSON.parse(data);
                                    if (data.sheet.length > 0) {
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide" id="tr-lesson-' + v.sheet_id + '"><td></td>';
                                            html += '<td></td>';
                                            html += '<td class="table-img-icon" colspan="2">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;">' + v.sheet_name + '</td>';
                                            html += ' <td class="table-img-icon">';
                                            html += '<div class="delete-worksheet" data-slid="' + v.id + '" data-lid2="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="lesson" ></div>';
                                            html += ' <div class="detail-worksheet-ls" data-id="' + v.sheet_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += ' <div class="down-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                            html += ' <div class="up-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                        });
                                    } else {
                                        html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson"><td></td><td></td><td>This folder is empty.</td></tr>';
                                    }
                                    var check2 = $('#lesson-tr' + id + '').next().hasClass("detail-desc");
                                    if (check2 == true) {
                                        var check3 = $('.detail-desc').next().hasClass("detail-worksheet");
                                        if (check3 == false) {
                                            $('.desc-detail').addClass("style-border-desc");
                                            $(".detail-desc").after(html);
                                            $(".detail-worksheet td").hide().slideDown("fast");
                                        } else if (check3 == true) {
                                            $('.desc-detail').removeClass("style-border-desc");
                                            $('.detail-worksheet td').slideUp("fast", function () {
                                                $('#lesson-tr' + id + '').nextAll(".set-hide").remove();
                                            });
                                        }
                                    } else {
                                        $('#lesson-tr' + id + '').after(html);
                                        $(".detail-tr-lesson td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $('.desc-detail').removeClass("style-border-desc");
                                $('.detail-tr-lesson td').slideUp("fast", function () {
                                    $('#lesson-tr' + id + '').nextAll(".set-hide").remove();
                                });
                            }
                        });
                        //list worksheet in my lesson
                        $(".my-lesson-ws2").live("click", function () {                            
                            //$(".lesson-tr").css("border-bottom", "1px solid #ddd");
                            var id = $(this).attr("data-lid");
                            var pre_fix = prefix = $(this).attr("data-prefix");
                            if(prefix != '') prefix = prefix + '-';
                            var open = $(".lesson-tr").not('#'+ prefix +'lesson-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".lesson-tr").not('#'+ prefix +'lesson-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            $(".my-public-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                            $(".my-lesson-ws2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");

                            if(pre_fix == 'pra'){
                                $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                                $(".lesson-tr-npra").css({"display":"table","margin-bottom":"0px"});
                                $(".lst-pub-subject2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".lst-sub-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".subj-tr" + pre_fix).nextAll(".set-hide").remove();
                            }
                            if(pre_fix == 'npra'){
                                $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                                $(".lesson-tr-pra").css({"display":"table","margin-bottom":"0px"});
                                $(".lst-pub-subject2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".lst-sub-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".subj-tr" + pre_fix).nextAll(".set-hide").remove();
                            }

                            var html = '';
                            var check1 = $('#'+ prefix +'lesson-tr' + id + '').next().hasClass("detail-worksheet");
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_my_lesson_sheet", {data: id}, function (data) {
                                    data = JSON.parse(data);
                                    if (data.sheet.length > 0) {
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide" id="'+ prefix +'tr-lesson-' + v.sheet_id + '"><td></td>';
                                            html += '<td></td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;"><span class="popup-detail" data-child="' + v.sheet_id + '" data-lid="' + id + '" data-gid="0" data-type="lesson_wsheet" data-title="' + v.sheet_name + '" data-desc="' + v.description + '" data-prefix="' + pre_fix + '">' + v.sheet_name + '</span></td>';
                                            html += '</tr>';
                                        });
                                        var height = data.sheet.length * 40;
                                    } else {
                                        html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide"><td></td><td></td><td>This folder is empty.</td></tr>';
                                        var height = 40;
                                    }                                    
                                    $('#'+ prefix +'lesson-tr' + id + '').after(html);
                                    $(".detail-tr-lesson td").hide().slideDown("fast");

                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "lesson-tr" + id).css({"display":"table","margin-bottom":height+"px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "lesson-tr" + id).css({"display":"table","margin-bottom":height+"px"});
                                    }
                                }); 
                                $(this).attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Opened.png");                              
                            } else {
                                $('.desc-detail').removeClass("style-border-desc");
                                $('.detail-tr-lesson td').slideUp("fast", function () {
                                    $('#'+ prefix +'lesson-tr' + id + '').nextAll(".set-hide").remove();
                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "lesson-tr" + id).css({"display":"table","margin-bottom":"0px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "lesson-tr" + id).css({"display":"table","margin-bottom":"0px"});
                                    }
                                });                                
                            }
                        });
                        // show description lesson in my Lesson
                        $(".desc-my-lesson").live("click", function () {
                            var id = $(this).attr("data-lid");
                            var desc = $(this).attr("data-desc");
                            var open = $(".lesson-tr").not('#lesson-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".lesson-tr").not('#lesson-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var check1 = $('#lesson-tr' + id + '').next().hasClass("detail-desc");
                            if (check1 == false) {
                                var html = '';
                                html += '<tr class="detail-desc detail-tr-lesson desc-worksheet set-hide desc-worksheet-' + id + '" >';
                                html += '<td></td>';
                                html += '<td></td>';
                                html += '<td colspan="3" class="input-detail-lesson">';
                                var check2 = $('#lesson-tr' + id + '').next().hasClass("detail-worksheet");
                                if (check2 == true) {
                                    html += '<div class="desc-detail  style-border-desc" id="detaildesc' + id + '">' + desc + '</div>';
                                } else {
                                    html += '<div class="desc-detail" id="detaildesc' + id + '">' + desc + '</div>';
                                }
                                html += '<textarea rows="4" id="detailinput' + id + '" class="hidden" name="input-detail" >' + desc + '</textarea>';
                                html += '<div class="table-img-icon edit-desc-worksheet"  onclick="edit_desc(' + id + ')" id="editdesc' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit.png" class="" alt="lesson" ></div>';
                                html += '<div class="table-img-icon undo-desc" data-lid="' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Undo.png" class="" alt="lesson" ></div>';
                                html += '<div class="hidden table-img-icon edit-desc-worksheet edit-success-ls"  id="editsuccess' + id + '" data-lid="' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Edit_Done.png" class="" alt="lesson" ></div>';
                                html += ' </td>';
                                html += '</tr>';
                                $('#lesson-tr' + id + '').after(html);
                                $(".detail-desc td").hide().slideDown("fast");
                            } else {
                                $('.detail-desc td').slideUp("fast", function () {
                                    $('#lesson-tr' + id + '').nextAll(".detail-desc").remove();
                                });
                            }
                        });
                        //list homework English
                        function get_groups_home_eng(text, table) {
                            var tbody_public_eng = $("#" + table + "");
                            tbody_public_eng.html("");
                            $.post(home_url + "/?r=ajax/get_groups_home_eng", {search: text}, function (data) {
                                if (data == 0) {
                                    var tr_m = '<tr><td colspan="6">No results</td></tr>';
                                    tbody_public_eng.append(tr_m);
                                } else {
                                    var dt = JSON.parse(data);
                                    $.each(dt.arr, function (i, v) {
                                        var html = '';
                                        html += '<tr id="eng-tr' + v.id + '" class="eng-tr">\n\
                                                            <td >\n\
                                                                <div class="cb-type2">\n\
                                                                    <label>\n\
                                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-ready-eng radio" value="' + v.id + '" data-cate="1" data-name="' + v.name + '" data-desc="' + v.desc + '" data-price="' + v.price + '" name="select-tr"/>\n\
                                                                    </label>\n\
                                                                </div>\n\
                                                            </td>';
                                        html += '<td class="table-img-icon">';
                                        if (v.cate == 'English') {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                        }
                                        html += '</td>';
                                        html += ' <td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                        html += '<span class="name-ready-lesson eng-name" data-gid="' + v.id + '">' + v.name + '</span>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        if (v.price == 0) {
                                            html += '<p class="free-lesson">FREE</p>';
                                        } else {
                                            html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                        }
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += ' <div class="open-arrow-ready-eng" data-gid="' + v.id + '" data-content="' + v.desc + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                        html += ' </td>';
                                        html += '</tr>';
                                        tbody_public_eng.append(html);
                                    });
                                }
                            });
                        }
                        //list homework MAth
                        function get_groups_home_math(text, table) {
                            var tbody_public_math = $("#" + table + "");
                            tbody_public_math.html("");
                            $.post(home_url + "/?r=ajax/get_groups_home_math", {search: text}, function (data) {
                                //console.log(data);
                                if (data == 0) {
                                    var tr_m = '<tr><td colspan="6">No results</td></tr>';
                                    tbody_public_math.append(tr_m);
                                } else {
                                    var dt = JSON.parse(data);
                                    $.each(dt.arr, function (i, v) {
                                        var html = '';
                                        html += '<tr id="math-tr' + v.id + '" class="math-tr">\n\
                                                            <td >\n\
                                                                <div class="cb-type2">\n\
                                                                    <label>\n\
                                                                        <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-ready-eng radio" value="' + v.id + '" data-cate="5" data-name="' + v.name + '" data-desc="' + v.desc + '" data-price="' + v.price + '" name="select-tr"/>\n\
                                                                    </label>\n\
                                                                </div>\n\
                                                            </td>';
                                        html += '<td class="table-img-icon">';
                                        if (v.cate == 'Math') {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                        }
                                        html += '</td>';
                                        html += ' <td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                        html += '<span class="name-ready-lesson math-name" data-gid="' + v.id + '">' + v.name + '</span>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        if (v.price == 0) {
                                            html += '<p class="free-lesson">FREE</p>';
                                        } else {
                                            html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                        }
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += ' <div class="open-arrow-ready-math" data-gid="' + v.id + '" data-content="' + v.desc + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                        html += ' </td>';
                                        html += '</tr>';
                                        tbody_public_math.append(html);
                                    });
                                }
                            });
                        }
                        //English Tab of Critical Lesson on Public Subject and Lesson
                        $("#eng-menu").click(function () {
                            if ($("#eng-public").hasClass("hidden"))
                            {
                                $("#eng-public").removeClass("hidden");
                                $("#eng-public").addClass("active");
                                $("#math-public").removeClass("active");
                                $("#math-public").addClass("hidden");
                            }
                            $("#select-all-ready-eng").attr("checked", false);
                            $("#open-search-ready-eng").css('display', 'none');
                            if ($("#btn-ready-eng-down").hasClass("btn-ready-lesson-up"))
                            {
                                $("#btn-ready-eng-down").removeClass("btn-ready-lesson-up");
                                $("#btn-ready-eng-down").addClass("btn-ready-lesson-down");
                            }
                            $("#search-ready-les-eng").val('');
                            $("#icon-option-ready-eng").attr("data-sort", "upward");
                            $(".img-sort-eng").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            var text = '';
                            var table = "table-ready-lesson-eng";
                            get_groups_home_eng(text, table);
                        });
                        //Math Tab of Critical Lesson on Public Subject and Lesson
                        $("#math-menu").click(function () {
                            $("#select-all-ready-eng").attr("checked", false);
                            if ($("#icon-option-ready-math").attr("data-sort") == "downward") {
                                $("#icon-option-ready-eng").attr("data-sort", "upward");
                                $(".img-sort-eng").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            } else if ($("#icon-option-ready-eng").attr("data-sort") == "upward") {
                                $("#icon-option-ready-eng").attr("data-sort", "downward");
                                $(".img-sort-eng").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                            }
                            $("#icon-option-ready-eng").attr("data-sort", "upward");
                            $(".img-sort-eng").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            var text = '';
                            var table = "table-ready-lesson-eng";
                            get_groups_home_math(text, table);
                        });
                        //"Search and Assign" button of English Critical Lesson on Public Subjects and Lessons
                        $("#btn-ready-eng-down").click(function () {
                            if ($("#btn-ready-eng-down").hasClass("btn-ready-lesson-down")) {
                                $("#btn-ready-eng-down").removeClass("btn-ready-lesson-down");
                                $("#btn-ready-eng-down").addClass("btn-ready-lesson-up");
                                $("#open-search-ready-eng").slideDown("fast");
                                get_groups('select-lesson-eng');
                            } else {
                                $("#btn-ready-eng-down").removeClass("btn-ready-lesson-up");
                                $("#btn-ready-eng-down").addClass("btn-ready-lesson-down");
                                $("#open-search-ready-eng").slideUp("fast");
                                $("#search-ready-les-eng").val("");
                            }
                        });
                        //"Select All" checkbox of English Critical Lesson on Public Subject and Lesson
                        $("#select-all-ready-eng").click(function () {
                            if ($("#select-all-ready-eng").is(":checked")) {

                                $(".option-input-ready-eng").attr("checked", true);
                            } else
                                $(".option-input-ready-eng").attr("checked", false);
                        });
                        // event when user click name lesson of English Critical Lesson on Public Subject and Lesson
                        $(".eng-name").live("click", function () {
                            $(".eng-tr").css("border-bottom", "1px solid #ddd");
                            var id = $(this).attr("data-gid");
                            var open = $(".eng-tr").not('#eng-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".eng-tr").not('#eng-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var html = '';
                            var check1 = $('#eng-tr' + id + '').next().hasClass("detail-worksheet");
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_ready_lesson_sheet", {data: id}, function (data) {
                                    if (data !== "0") {
                                        var data = JSON.parse(data);
                                        if (data.sheet.length > 0) {
                                            $.each(data.sheet, function (i, v) {
                                                html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide" id="eng-lesson-' + v.id + '" ><td></td>';
                                                html += '<td></td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;">' + v.sheet_name + '</td>';
                                                html += ' <td class="table-img-icon" colspan="2">';
                                                html += ' <div class="detail-worksheet-ready" data-id="' + v.id + '" data-gid="' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += ' </td>';
                                                html += '</tr>';
                                            });
                                        }
                                    } else {
                                        html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson"><td></td><td></td><td>This folder is empty.</td></tr>';
                                    }
                                    var check2 = $('#eng-tr' + id + '').next().hasClass("detail-desc");
                                    if (check2 == true) {
                                        var check3 = $('.detail-desc').next().hasClass("detail-worksheet");
                                        if (check3 == false) {
                                            $('.desc-detail').addClass("style-border-desc");
                                            $(".detail-desc").after(html);
                                            $(".detail-worksheet td").hide().slideDown("fast");
                                        } else if (check3 == true) {
                                            $('.desc-detail').removeClass("style-border-desc");
                                            $('.desc-worksheet td').slideUp("fast", function () {
                                                $('#eng-tr' + id + '').nextAll(".set-hide").remove();
                                            });
                                        }
                                    } else {
                                        $('#eng-tr' + id + '').after(html);
                                        $(".detail-tr-lesson td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $('.desc-detail').removeClass("style-border-desc");
                                $('.detail-tr-lesson td').slideUp("fast", function () {
                                    $('#eng-tr' + id + '').nextAll(".set-hide").remove();
                                });
                            }
                        });
                        // event when user click name lesson of Math Critical Lesson on Public Subject and Lesson
                        $(".math-name").live("click", function () {
                            $(".math-tr").css("border-bottom", "1px solid #ddd");
                            var id = $(this).attr("data-gid");
                            var open = $(".math-tr").not('#math-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".math-tr").not('#math-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var html = '';
                            var check1 = $('#math-tr' + id + '').next().hasClass("detail-worksheet");
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_ready_lesson_sheet", {data: id}, function (data) {
                                    if (data !== "0") {
                                        var data = JSON.parse(data);
                                        if (data.sheet.length > 0) {
                                            $.each(data.sheet, function (i, v) {
                                                html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide" id="eng-lesson-' + v.id + '" ><td></td>';
                                                html += '<td></td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;">' + v.sheet_name + '</td>';
                                                html += ' <td class="table-img-icon" colspan="2">';
                                                html += ' <div class="detail-worksheet-ready" data-id="' + v.id + '" data-gid="' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += ' </td>';
                                                html += '</tr>';
                                            });
                                        }
                                    } else {
                                        html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson"><td></td><td></td><td>This folder is empty.</td></tr>';
                                    }
                                    var check2 = $('#math-tr' + id + '').next().hasClass("detail-desc");
                                    if (check2 == true) {
                                        var check3 = $('.detail-desc').next().hasClass("detail-worksheet");
                                        if (check3 == false) {
                                            $('.desc-detail').addClass("style-border-desc");
                                            $(".detail-desc").after(html);
                                            $(".detail-worksheet td").hide().slideDown("fast");
                                        } else if (check3 == true) {
                                            $('.desc-detail').removeClass("style-border-desc");
                                            $('.desc-worksheet td').slideUp("fast", function () {
                                                $('#math-tr' + id + '').nextAll(".set-hide").remove();
                                            });
                                        }
                                    } else {
                                        $('#math-tr' + id + '').after(html);
                                        $(".detail-tr-lesson td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $('.desc-detail').removeClass("style-border-desc");
                                $('.detail-tr-lesson td').slideUp("fast", function () {
                                    $('#math-tr' + id + '').nextAll(".set-hide").remove();
                                });
                            }
                        });
                        // "Search" button event of Critical Lesson on Public Subject and Lesson
                        $("#search-ready-btn-eng").click(function () {
                            var search = $("#search-ready-les-eng").val();
                            if ($("#menu-eng").hasClass("active")) {

                                var table = "table-ready-lesson-eng";
                                get_groups_home_eng(search, table);
                            }

                            if ($("#menu-math").hasClass("active")) {
                                var table = "table-ready-lesson-eng";
                                get_groups_home_math(search, table);
                            }

                        });
                        // sort lesson of Critical Lesson on Public Subject and Lesson
                        $("#icon-option-ready-eng").click(function () {
                            var sort = $(this).attr("data-sort");
                            if ($("#menu-eng").hasClass("active")) {
                                $.post(home_url + "/?r=ajax/get_groups_home_eng", {sort: sort}, function (data) {
                                    $("#table-ready-lesson-eng").html('');
                                    if (data !== "0") {
                                        if (sort == "upward") {
                                            $("#icon-option-ready-eng").attr("data-sort", "downward");
                                            $(".img-sort-eng").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                        } else if (sort == "downward") {
                                            $("#icon-option-ready-eng").attr("data-sort", "upward");
                                            $(".img-sort-eng").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                        }
                                        var dt = JSON.parse(data);
                                        if (dt.arr.length > 0) {
                                            $.each(dt.arr, function (i, v) {
                                                var html = '';
                                                html += '<tr id="eng-tr' + v.id + '" class="eng-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-ready-eng radio" value="' + v.id + '" data-cate="1" data-name="' + v.name + '" data-desc="' + v.content + '" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 'English') {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += ' <td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-ready-lesson eng-name" data-gid="' + v.id + '">' + v.name + '</span>';
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.price == 0) {
                                                    html += '<p class="free-lesson">FREE</p>';
                                                } else {
                                                    html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += ' <div class="open-arrow-ready-eng" data-gid="' + v.id + '" data-content="' + v.desc + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += ' </td>';
                                                html += '</tr>';
                                                $("#table-ready-lesson-eng").append(html);
                                            });
                                        }
                                    } else {
                                        var html = '';
                                        html += '<tr><td colspan="4">No results.</td>';
                                        html += '</tr>';
                                        $("#table-ready-lesson-eng").append(html);
                                    }
                                });
                            }
                            if ($("#menu-math").hasClass("active")) {
                                $.post(home_url + "/?r=ajax/get_groups_home_math", {sort: sort}, function (data) {
                                    $("#table-ready-lesson-eng").html('');
                                    if (data !== "0") {
                                        if (sort == "upward") {
                                            $("#icon-option-ready-eng").attr("data-sort", "downward");
                                            $(".img-sort-eng").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                        } else if (sort == "downward") {
                                            $("#icon-option-ready-eng").attr("data-sort", "upward");
                                            $(".img-sort-eng").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                        }
                                        var dt = JSON.parse(data);
                                        $.each(dt.arr, function (i, v) {
                                            var html = '';
                                            html += '<tr id="math-tr' + v.id + '" class="math-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-ready-eng radio"  value="' + v.id + '" data-cate="5" data-name="' + v.name + '" data-desc="' + v.desc + '" data-price="' + v.price + '" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                                            html += '<td class="table-img-icon">';
                                            if (v.cate == 'Math') {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                            }
                                            html += '</td>';
                                            html += ' <td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                            html += '<span class="name-ready-lesson math-name" data-gid="' + v.id + '">' + v.name + '</span>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            if (v.price == 0) {
                                                html += '<p class="free-lesson">FREE</p>';
                                            } else {
                                                html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                            }
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += ' <div class="open-arrow-ready-math" data-gid="' + v.id + '" data-content="' + v.desc + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr>';
                                            $("#table-ready-lesson-eng").append(html);
                                        });
                                    } else {
                                        var html = '';
                                        html += '<tr><td colspan="4">No results.</td>';
                                        html += '</tr>';
                                        $("#table-ready-lesson-math").append(html);
                                    }
                                });
                            }
                        });
                        //Essential Tab's event
                        $("#tab-public-les-ess").click(function () {

                            $("#eng-math").removeClass("active");
                            $("#eng-math").addClass("hidden");
                            $("#dic-sel-stu").removeClass("hidden");
                            $("#dic-sel-stu").addClass("active");
                            $("#dict-public").removeClass("hidden");
                            $("#dict-public").addClass("active");
                            $("#eng-public").removeClass("active");
                            $("#eng-public").addClass("hidden");
                            $("#math-public").removeClass("active");
                            $("#math-public").addClass("hidden");
                            $("#sat").removeClass("active");
                            $("#sat").addClass("hidden");
                            $(".eng-math-les").not('#dic-sel-stu').addClass("hidden");
                            $(".eng-math-les").not('#dic-sel-stu').removeClass("active");
                            var check = $("#btn-dict-down").hasClass("btn-ready-lesson-up");
                            if (check == true)
                            {
                                $("#btn-dict-down").removeClass("btn-ready-lesson-up");
                                $("#btn-dict-down").addClass("btn-ready-lesson-down");
                            }
                            if ($("#self-study").hasClass("active")) {
                                $("#self-study").removeClass("active");
                                $("#dict").addClass("active");
                            }
                            $("#icon-option-essential").attr("data-sort", "upward");
                            $(".img-sort-dict").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                        });
                        $("#dict-public").click(function () {
                            if ($("#btn-dict-down").hasClass("btn-ready-lesson-up"))
                            {
                                $("#btn-dict-down").removeClass("btn-ready-lesson-up");
                                $("#btn-dict-down").addClass("btn-ready-lesson-down");
                            }
                        });
                        $("#btn-dict-down").click(function () {
                            var check = $("#btn-dict-down").hasClass("btn-ready-lesson-down");
                            if (check == true) {
                                $("#btn-dict-down").removeClass("btn-ready-lesson-down");
                                $("#btn-dict-down").addClass("btn-ready-lesson");
                                $("#open-search-dictionary").slideDown("fast");
                                get_groups('select-dict');
                            } else {
                                $("#btn-dict-down").removeClass("btn-ready-lesson");
                                $("#btn-dict-down").addClass("btn-ready-lesson-down");
                                $("#open-search-dictionary").slideUp("fast");
                            }
                            $("#text-search-essential").val('');
                        });
                        //dictonary's event
                        $("#dictionary-menu").click(function () {
                            $("#select-all-dict").attr("checked", false);
                            $("#btn-dict-down").removeClass("btn-ready-lesson");
                            $("#btn-dict-down").addClass("btn-ready-lesson-down");
                            $("#open-search-dictionary").slideUp("fast");
                            $("#text-search-essential").val('');
                            $("#icon-option-essential").attr("data-sort", "upward");
                            $(".img-sort-dict").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            var text = '';
                            get_dictionaries(text);
                            $("#select-all-dict").attr("checked", false);
                        });
                        //fucntion get dictionaries
                        function get_dictionaries(text) {
                            $("#table-dict").html("");
                            $.post(home_url + "/?r=ajax/get_dictionaries", {search: text}, function (data) {
                                if (data != 0) {
                                    data = JSON.parse(data);
                                    $.each(data, function (i, v) {
                                        var html = '';
                                        html += '<tr id="math-tr' + v.id + '" class="math-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-dict radio" value="' + v.id + '" data-cate="8" data-name="' + v.name + '" data-desc="" data-price="3" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Dictionary.png" alt="lesson" >';
                                        html += '</td>';
                                        html += ' <td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                        html += '<span class="name-ready-lesson" data-gid="' + v.id + '">' + v.name + '</span>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<p class="pay-lesson"><span>$</span>3</p>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<div class="open-arrow-dict" data-gid="' + v.id + '" data-content="' + v.content + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                        html += '</td>';
                                        html += '</tr>';
                                        $("#table-dict").append(html);
                                    });
                                } else {
                                    var html = '';
                                    html += '<tr id="math-tr" class="math-tr"><td></td><td colspan="3">No result.</td></tr>';
                                    $("#table-dict").append(html);
                                }

                            });
                        }
                        //Essential Tab's event
                        $("#ess-tab").click(function () {
                            var text = '';
                            get_dictionaries(text);
                            $("#select-all-dict").attr("checked", false);
                            $(".set-hide-tab").not("#dict-public").addClass("hidden");
                            $("#btn-dict-down").removeClass("btn-ready-lesson");
                            $("#btn-dict-down").addClass("btn-ready-lesson-down");
                            $("#open-search-dictionary").slideUp("fast");
                        });
                        //SAT Tab's event
                        $("#sat-tab").click(function () {

                            $("#select-all-dict").attr("checked", false);
                            $(".set-hide-tab").not("#sat-public").addClass("hidden");
                        });
                        //self-study-menu's event
                        $("#self-study-menu").click(function () {
                            $("#icon-option-essential").attr("data-sort", "upward");
                            $(".img-sort-dict").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            $("#select-all-dict").attr("checked", false);
                            $("#btn-dict-down").removeClass("btn-ready-lesson");
                            $("#btn-dict-down").addClass("btn-ready-lesson-down");
                            $("#open-search-dictionary").slideUp("fast");
                            $("#text-search-essential").val('');
                            $("#table-dict").html("");
                            var html = '';
                            html += '<tr id="math-tr" class="math-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-dict radio" value="" data-cate="9" data-name="English Self-study (includes 1 dictionary of choice)" data-desc="" data-price="10" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                            html += '<td class="table-img-icon">';
                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                            html += '</td>';
                            html += ' <td class="table-img-icon">';
                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                            html += '<span class="name-ready-lesson" >English Self-study (includes 1 dictionary of choice)</span>';
                            html += '</td>';
                            html += '<td class="table-img-icon">';
                            html += '<p class="pay-lesson"><span>$</span>10</p>';
                            html += '</td>';
                            html += '<td class="table-img-icon">';
                            html += '<div class="open-arrow-sel" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                            html += '</td>';
                            html += '</tr>';
                            html += '<tr id="math-tr" class="math-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-dict radio" value="" data-cate="9" data-name="Math Self-study" data-desc="" data-price="60" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                            html += '<td class="table-img-icon">';
                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                            html += '</td>';
                            html += ' <td class="table-img-icon">';
                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                            html += '<span class="name-ready-lesson" >Math Self-study  </span>';
                            html += '</td>';
                            html += '<td class="table-img-icon">';
                            html += '<p class="pay-lesson"><span>$</span>60</p>';
                            html += '</td>';
                            html += '<td class="table-img-icon">';
                            html += '<div class="open-arrow-sel" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                            html += '</td>';
                            html += '</tr>';
                            $("#table-dict").append(html);
                        });
                        //Critical Tab's event
                        $("#cri-tab").click(function () {
                            $(".set-hide-tab").not("#eng-public").addClass("hidden");
                            $(".eng-math-les").not('#eng-math').addClass("hidden");
                            $(".eng-math-les").not('#eng-math').removeClass("active");
                        });
                        // "Public Subjects and Lessons" Text's event
                        $("#ready-lesson-li").click(function () {
                            var check = $("#ready-lesson").hasClass("active in");
                            if (check == false) {
                                //$("#modal-redirect-alert").show();
                                $("#agree-redirect").attr("data-href", "#ready-lesson");
                            }

                        });
                        //"Select All" checkbox's event 
                        $("#select-all-dict").click(function () {
                            if ($("#select-all-dict").is(":checked")) {

                                $(".option-input-dict").attr("checked", true);
                            } else
                                $(".option-input-dict").attr("checked", false);
                        });
                        //SAT TAb's event
                        $("#tab-public-les-sat").click(function () {
                            $("#eng-public").removeClass("active");
                            $("#eng-public").addClass("hidden");
                            $("#math-public").removeClass("active");
                            $("#math-public").addClass("hidden");
                            $("#dict-public").removeClass("active");
                            $("#dict-public").addClass("hidden");
                            $("#sat-public").removeClass("hidden");
                            $("#sat-public").addClass("active");
                            $("#eng-math").removeClass("active");
                            $("#eng-math").addClass("hidden");
                            $("#dic-sel-stu").removeClass("active");
                            $("#dic-sel-stu").addClass("hidden");
                            $("#sat").removeClass("hidden");
                            $("#sat").addClass("active");
                            $(".eng-math-les").not('#sat').addClass("hidden");
                            $(".eng-math-les").not('#sat').removeClass("active");
                            if ($("#sat-math").hasClass("active")) {
                                $("#sat-math").removeClass("active");
                                $("#sat-eng").addClass("active");
                            }
                            if ($("#btn-sat-down").hasClass("btn-ready-lesson-up"))
                            {
                                $("#btn-sat-down").removeClass("btn-ready-lesson-up");
                                $("#btn-sat-down").addClass("btn-ready-lesson-down");
                            }
                            var check = $("#btn-sat-down").hasClass("btn-ready-lesson-up");
                            if (check == true)
                            {
                                $("#btn-sat-down").removeClass("btn-ready-lesson-up");
                                $("#btn-sat-down").addClass("btn-ready-lesson-down");
                            }
                            $("#icon-option-sat").attr("data-sort", "upward");
                            $(".img-sort-sat").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                        });
                        //"Search and Assign" button on SAT
                        $("#btn-sat-down").click(function () {
                            var check = $("#btn-sat-down").hasClass("btn-ready-lesson-down");
                            if (check == true) {
                                $("#btn-sat-down").removeClass("btn-ready-lesson-down");
                                $("#btn-sat-down").addClass("btn-ready-lesson");
                                $("#open-search-sat").slideDown("fast");
                                get_groups('select-sat');
                            } else {
                                $("#btn-sat-down").removeClass("btn-ready-lesson");
                                $("#btn-sat-down").addClass("btn-ready-lesson-down");
                                $("#open-search-sat").slideUp("fast");
                            }
                            $("#search-sat").val('');
                        });
                        //button search for Essential
                        $("#search-essential-btn").click(function () {
                            var text = $("#text-search-essential").val();
                            if ($("#dict").hasClass("active")) {
                                get_dictionaries(text);
                            } else if ($("#self-study").hasClass('active')) {
                                var arr = new Array({
                                    'name': 'English Self-study (includes 1 dictionary of choice)',
                                    'price': '10'
                                },
                                        {
                                            'name': 'Math Self-study',
                                            'price': '60'
                                        }
                                );
                                var arr_search = search_public_lesson(arr, text);
                                var html = '';
                                $("#table-dict").html(html);
                                if (arr_search.length != 0) {
                                    $.each(arr_search, function (i, v) {
                                        html += '<tr id="math-tr" class="math-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-dict radio" value="" data-cate="9" data-name="' + v.name + '" data-desc="" data-price="' + v.price + '" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                        html += '</td>';
                                        html += ' <td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                        html += '<span class="name-ready-lesson" > ' + v.name + '</span>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<div class="open-arrow-sel" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                        html += '</td>';
                                        html += '</tr>';
                                    });
                                } else {
                                    html += '<tr><td colspan="6">No results.</td>';
                                    html += '</tr>';
                                }
                                $("#table-dict").html(html);
                            }

                        });
                        //order dictionary 
                        $("#icon-option-essential").click(function () {
                            var sel = new Array(
                                    {
                                        'id': 1,
                                        'name': 'English Self-study (includes 1 dictionary of choice)',
                                        'price': '10'
                                    },
                                    {
                                        'id': 2,
                                        'name': 'Math Self-study',
                                        'price': '60'
                                    }
                            );
                            if ($("#icon-option-essential").attr("data-sort") == "upward") {
                                var arr = increase(sel);
                                $("#table-dict").html("");
                                $("#icon-option-essential").attr("data-sort", "downward");
                                $(".img-sort-dict").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                $.each(arr, function (i, v) {
                                    $("#select-all-dict").attr("checked", false);
                                    var html = '';
                                    html += '<tr id="math-tr' + v.id + '" class="math-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-dict radio" value="' + v.id + '" data-cate="8" data-name="' + v.name + '" data-desc="" data-price="3" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                                    html += '<td class="table-img-icon">';
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                    html += '</td>';
                                    html += ' <td class="table-img-icon">';
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                    html += '<span class="name-ready-lesson" data-gid="' + v.id + '">' + v.name + '</span>';
                                    html += '</td>';
                                    html += '<td class="table-img-icon">';
                                    html += '<p class="pay-lesson"><span>$</span>3</p>';
                                    html += '</td>';
                                    html += '<td class="table-img-icon">';
                                    html += '<div class="open-arrow-dict" data-gid="' + v.id + '" data-content="' + v.content + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                    html += '</td>';
                                    html += '</tr>';
                                    $("#table-dict").append(html);
                                });
                            } else if ($("#icon-option-essential").attr("data-sort") == "downward") {
                                var arr = decrease(sel);
                                $("#table-dict").html("");
                                $("#icon-option-essential").attr("data-sort", "upward");
                                $(".img-sort-dict").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                $.each(arr, function (i, v) {
                                    $("#select-all-dict").attr("checked", false);
                                    var html = '';
                                    html += '<tr id="math-tr' + v.id + '" class="math-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-dict radio" value="' + v.id + '" data-cate="8" data-name="' + v.name + '" data-desc="" data-price="3" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                                    html += '<td class="table-img-icon">';
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                    html += '</td>';
                                    html += ' <td class="table-img-icon">';
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                    html += '<span class="name-ready-lesson" data-gid="' + v.id + '">' + v.name + '</span>';
                                    html += '</td>';
                                    html += '<td class="table-img-icon">';
                                    html += '<p class="pay-lesson"><span>$</span>3</p>';
                                    html += '</td>';
                                    html += '<td class="table-img-icon">';
                                    html += '<div class="open-arrow-dict" data-gid="' + v.id + '" data-content="' + v.content + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                    html += '</td>';
                                    html += '</tr>';
                                    $("#table-dict").append(html);
                                });
                            }
                            var sort = $(this).attr("data-sort");
                            if ($("#dict").hasClass("active")) {
                                $.post(home_url + "/?r=ajax/get_dictionaries", {sort: sort}, function (data) {
                                    if (data != 0) {

                                        $("#table-dict").html("");
                                        if (sort == "upward") {
                                            $("#icon-option-essential").attr("data-sort", "downward");
                                            $(".img-sort-dict").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                        } else if (sort == "downward") {
                                            $("#icon-option-essential").attr("data-sort", "upward");
                                            $(".img-sort-dict").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                        }
                                        data = JSON.parse(data);
                                        $.each(data, function (i, v) {
                                            var html = '';
                                            html += '<tr id="math-tr' + v.id + '" class="math-tr">\n\
                                                                <td >\n\
                                                                    <div class="cb-type2">\n\
                                                                        <label>\n\
                                                                            <input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-dict radio" value="' + v.id + '" data-cate="8" data-name="' + v.name + '" data-desc="" data-price="3" name="select-tr"/>\n\
                                                                        </label>\n\
                                                                    </div>\n\
                                                                </td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Dictionary.png" alt="lesson" >';
                                            html += '</td>';
                                            html += ' <td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                            html += '<span class="name-ready-lesson" data-gid="' + v.id + '">' + v.name + '</span>';
                                            html += '</td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<p class="pay-lesson"><span>$</span>3</p>';
                                            html += '</td>';
                                            html += '</tr>';
                                            $("#table-dict").append(html);
                                        });
                                    } else {
                                        var html = '';
                                        html += '<tr id="math-tr" class="math-tr"><td></td><td colspan="3">No result.</td></tr>';
                                        $("#table-dict").append(html);
                                    }

                                });
                            }
                        });
                        //English SAT Tab's event
                        $("#eng-sat").click(function () {
                            get_sat_english();
                            $("#btn-sat-down").removeClass("btn-ready-lesson");
                            $("#btn-sat-down").addClass("btn-ready-lesson-down");
                            $("#open-search-sat").slideUp("fast");
                            $("#select-all-sat").attr("checked", false);
                            $("#icon-option-sat").attr("data-sort", "upward");
                            $(".img-sort-sat").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                        });
                        //English SAT list
                        function get_sat_english() {
                            $("#select-all-sat").attr("checked", false);
                            var english = new Array(
                                    {
                                        id: 1,
                                        category: 10,
                                        name: "SAT Preparation - Grammar Review",
                                        price: "50"
                                    },
                                    {
                                        id: 2,
                                        category: 10,
                                        name: "English SAT Preparation - Writing Practice",
                                        price: "20"
                                    },
                                    {
                                        id: 3,
                                        category: 10,
                                        name: "English SAT Simulation Test 1",
                                        price: "50"
                                    },
                                    {
                                        id: 4,
                                        category: 10,
                                        name: "English SAT Simulation Test 2",
                                        price: "50"
                                    },
                                    {
                                        id: 5,
                                        category: 10,
                                        name: "English SAT Simulation Test 3",
                                        price: "50"
                                    },
                                    {
                                        id: 6,
                                        category: 10,
                                        name: "English SAT Simulation Test 4",
                                        price: "50"
                                    },
                                    {
                                        id: 7,
                                        category: 10,
                                        name: "English SAT Simulation Test 5",
                                        price: "50"
                                    }
                            );
                            list_subject('table-sat', english);
                        }
                        //Math list on SAT
                        function get_sat_math() {

                            var math = new Array(
                                    {
                                        id: 9,
                                        category: 10,
                                        name: "Math SAT Preparation",
                                        price: "50"
                                    },
                                    {
                                        id: 10,
                                        category: 10,
                                        name: "Math SAT Simulation Test 1(New SAT Test)",
                                        price: "50"
                                    },
                                    {
                                        id: 11,
                                        category: 10,
                                        name: "Math SAT Simulation Test 2(New SAT Test)",
                                        price: "50"
                                    },
                                    {
                                        id: 12,
                                        category: 10,
                                        name: "Math SAT Simulation Test 3(New SAT Test)",
                                        price: "50"
                                    },
                                    {
                                        id: 13,
                                        category: 10,
                                        name: "Math SAT Simulation Test 4(New SAT Test)",
                                        price: "50"
                                    },
                                    {
                                        id: 14,
                                        category: 10,
                                        name: "Math SAT Simulation Test 5(New SAT Test)",
                                        price: "50"
                                    },
                                    {
                                        id: 15,
                                        category: 10,
                                        name: "Math SAT 2 Preparation",
                                        price: "80"
                                    },
                                    {
                                        id: 16,
                                        category: 10,
                                        name: "Math SAT 2 Simulation Test 1",
                                        price: "50"
                                    },
                                    {
                                        id: 17,
                                        category: 10,
                                        name: "Math SAT 2 Simulation Test 2",
                                        price: "50"
                                    },
                                    {
                                        id: 18,
                                        category: 10,
                                        name: "Math SAT 2 Simulation Test 3",
                                        price: "50"
                                    },
                                    {
                                        id: 19,
                                        category: 10,
                                        name: "Math SAT 2 Simulation Test 4",
                                        price: "50"
                                    },
                                    {
                                        id: 20,
                                        category: 10,
                                        name: "Math SAT 2 Simulation Test 5",
                                        price: "50"
                                    }
                            );
                            list_subject("table-sat", math);
                        }
                        //Math SAT tab
                        $("#math-sat").click(function () {
                            $("#table-sat").html("");
                            $("#select-all-sat").attr("checked", false);
                            $("#btn-sat-down").removeClass("btn-ready-lesson");
                            $("#btn-sat-down").addClass("btn-ready-lesson-down");
                            $("#open-search-sat").slideUp("fast");
                            $("#icon-option-sat").attr("data-sort", "upward");
                            $(".img-sort-sat").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            get_sat_math();
                        });
                        //"select All" checkbox on SAT
                        $("#select-all-sat").click(function () {
                            if ($("#select-all-sat").is(":checked")) {

                                $(".option-input-sat").attr("checked", true);
                            } else
                                $(".option-input-sat").attr("checked", false);
                        });
                        //SAT Tab's event
                        $("#sat-tab").click(function () {
                            get_sat_english();
                            $("#select-all-sat").attr("checked", false);
                            $(".set-hide-tab").not("#sat-public").addClass("hidden");
                            $("#btn-sat-down").removeClass("btn-ready-lesson");
                            $("#btn-sat-down").addClass("btn-ready-lesson-down");
                            $("#open-search-sat").slideUp("fast");
                        });
                        //event Course's Tab
                        $("#tab-public-les-cou").click(function () {
                            $("#select-all-course").attr("checked", false);
                            $(".eng-math-les").not('#courses').addClass("hidden");
                            $(".eng-math-les").not('#courses').removeClass("active");
                            $(".set-hide-tab").not('#course-public').addClass("hidden");
                            $(".set-hide-tab").not('#course-public').removeClass("active");
                            $("#courses").addClass("active");
                            $("#courses").removeClass("hidden");
                            $("#course-public").addClass("active");
                            $("#course-public").removeClass("hidden");
                            $("#open-search-course").css('display', 'none');
                            var check = $("#btn-course-down").hasClass("btn-ready-lesson");
                            if (check == true)
                            {
                                $("#btn-course-down").removeClass("btn-ready-lesson");
                                $("#btn-course-down").addClass("btn-ready-lesson-down");
                            }
                            $("#icon-option-course").attr("data-sort", "upward");
                            $(".img-sort-course").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            get_course();
                        });
                        //Course list
                        function get_course() {

                            var arr = new Array(
                                    {
                                        id: 38,
                                        category: 5,
                                        name: "ikMath Course - Math Kindergarten",
                                        price: "20"
                                    },
                                    {
                                        id: 39,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 1",
                                        price: "20"
                                    },
                                    {
                                        id: 40,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 2",
                                        price: "20"
                                    },
                                    {
                                        id: 41,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 3",
                                        price: "30"
                                    },
                                    {
                                        id: 42,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 4",
                                        price: "30"
                                    },
                                    {
                                        type_id: 43,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 5",
                                        price: "30"
                                    },
                                    {
                                        id: 44,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 6",
                                        price: "30"
                                    },
                                    {
                                        id: 45,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 7",
                                        price: "40"
                                    },
                                    {
                                        id: 46,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 8",
                                        price: "40"
                                    },
                                    {
                                        id: 47,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 9",
                                        price: "50"
                                    },
                                    {
                                        id: 48,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 10",
                                        price: "50"
                                    },
                                    {
                                        id: 49,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 11",
                                        price: "50"
                                    },
                                    {
                                        id: 50,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 12",
                                        price: "50"
                                    }
                            );
                            list_subject("table-course", arr);
                        }
                        //"Search and assign" button on Course
                        $("#btn-course-down").click(function () {
                            var check = $("#btn-course-down").hasClass("btn-ready-lesson-down");
                            if (check == true) {
                                $("#btn-course-down").removeClass("btn-ready-lesson-down");
                                $("#btn-course-down").addClass("btn-ready-lesson");
                                $("#open-search-course").slideDown("fast");
                                get_groups('select-class-course');
                            } else {
                                $("#btn-course-down").removeClass("btn-ready-lesson");
                                $("#btn-course-down").addClass("btn-ready-lesson-down");
                                $("#open-search-course").slideUp("fast");
                            }
                            $("#search-course").val('');
                        });
                        //"Select All" checkbox on Course
                        $("#select-all-course").click(function () {
                            if ($("#select-all-course").is(":checked")) {

                                $(".option-input-sat").attr("checked", true);
                            } else
                                $(".option-input-sat").attr("checked", false);
                        });
                        //save Public Lesson to My Lesson
                        $(".save-to-lesson").click(function () {
                            var id = $(this).attr("data-id");
                            var selected = new Array();
                            switch (id) {
                                case 'critical lesson':

                                    $(".option-input-ready-eng:checked").each(function () {
                                        var id = $(this).val();
                                        var name = $(this).attr("data-name");
                                        var desc = $(this).attr("data-desc");
                                        var cate = $(this).attr("data-cate");
                                        var price = $(this).attr("data-price");
                                        selected.push({id: id, name: name, desc: desc, cate: cate, price: price});
                                    });
                                    if (selected.length == 0) {
                                        var html = '';
                                        html += 'Please select lesson first.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                    } else {
                                        $.post(home_url + "/?r=ajax/add_public_lesson", {
                                            data: selected}, function (data) {
                                            $(".option-input-ready-eng").attr("checked", false);
                                            if (data != 0) {
                                                var html = '';
                                                html += 'Lessons successfully saved to <span style="font-style:italic;">My Lesson</span>.';
                                                $(".box-title-1").html(html);
                                                $("#modal-alert").css('display', 'block');
                                            } else {
                                                var html = '';
                                                html += 'Same entry already exists, please select different entry.';
                                                $(".box-title-1").html(html);
                                                $("#modal-alert").css('display', 'block');
                                            }
                                        });
                                    }
                                    break;
                                case 'essential':
                                    $(".option-input-dict:checked").each(function () {
                                        var id = $(this).val();
                                        var name = $(this).attr("data-name");
                                        var desc = $(this).attr("data-desc");
                                        var cate = $(this).attr("data-cate");
                                        var price = $(this).attr("data-price");
                                        selected.push({id: id, name: name, desc: desc, cate: cate, price: price});
                                    });
                                    if (selected.length == 0) {
                                        var html = '';
                                        html += 'Please select lesson first.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                    } else {
                                        $.post(home_url + "/?r=ajax/add_public_lesson", {
                                            data: selected}, function (data) {
                                            $(".option-input-dict").attr("checked", false);
                                            if (data != 0) {
                                                var html = '';
                                                html += 'Lessons successfully saved to <span style="font-style:italic;">My Lesson</span>.';
                                                $(".box-title-1").html(html);
                                                $("#modal-alert").css('display', 'block');
                                            } else {
                                                var html = '';
                                                html += 'Same entry already exists, please select different entry.';
                                                $(".box-title-1").html(html);
                                                $("#modal-alert").css('display', 'block');
                                            }
                                        });
                                    }
                                    break;
                                case 'sat':
                                    $(".option-input-sat:checked").each(function () {
                                        var id = $(this).val();
                                        var name = $(this).attr("data-name");
                                        var desc = $(this).attr("data-desc");
                                        var cate = $(this).attr("data-cate");
                                        var price = $(this).attr("data-price");
                                        selected.push({id: id, name: name, desc: desc, cate: cate, price: price});
                                    });
                                    if (selected.length == 0) {
                                        var html = '';
                                        html += 'Please select subject first.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                        $(".option-input-ready-eng").attr("checked", false);
                                    } else {
                                        $.post(home_url + "/?r=ajax/add_course_subject", {
                                            data: selected}, function (data) {
                                            $(".option-input-sat").attr("checked", false);
                                            if (data != 0) {
                                                var html = '';
                                                html += 'Subjects successfully saved to <span style="font-style:italic;">My Subject</span>.';
                                                $(".box-title-1").html(html);
                                                $("#modal-alert").css('display', 'block');
                                            } else {
                                                var html = '';
                                                html += 'Same entry already exists, please select different entry.';
                                                $(".box-title-1").html(html);
                                                $("#modal-alert").css('display', 'block');
                                            }
                                        });
                                    }
                                    break;
                                case 'courses':
                                    $(".option-input-sat:checked").each(function () {
                                        var id = $(this).val();
                                        var name = $(this).attr("data-name");
                                        var desc = $(this).attr("data-desc");
                                        var cate = $(this).attr("data-cate");
                                        var price = $(this).attr("data-price");
                                        selected.push({id: id, name: name, desc: desc, cate: cate, price: price});
                                    });
                                    if (selected.length == 0) {
                                        var html = '';
                                        html += 'Please select subject first.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                        $(".option-input-sat").attr("checked", false);
                                    } else {
                                        $.post(home_url + "/?r=ajax/add_course_subject", {
                                            data: selected}, function (data) {
                                            $(".option-input-sat").attr("checked", false);
                                            if (data != 0) {
                                                var html = '';
                                                html += 'Subjects successfully saved to <span style="font-style:italic;">My Subject</span>.';
                                                $(".box-title-1").html(html);
                                                $("#modal-alert").css('display', 'block');
                                            } else {
                                                var html = '';
                                                html += 'Same entry already exists, please select different entry.';
                                                $(".box-title-1").html(html);
                                                $("#modal-alert").css('display', 'block');
                                            }
                                        });
                                    }
                                    break;
                            }
                        });
                        //"Search" button on Course
                        $("#search-course-btn").click(function () {
                            var course = new Array(
                                    {
                                        name: "ikMath Course - Math Kindergarten",
                                        price: "$20"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 1",
                                        price: "$20"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 2",
                                        price: "$20"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 3",
                                        price: "$30"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 4",
                                        price: "$30"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 5",
                                        price: "$30"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 6",
                                        price: "$30"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 7",
                                        price: "$40"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 8",
                                        price: "$40"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 9",
                                        price: "$50"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 10",
                                        price: "$50"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 11",
                                        price: "$50"
                                    },
                                    {
                                        name: "ikMath Course - Math Grade 12",
                                        price: "$50"
                                    }
                            );
                            var text = $("#search-course").val();
                            var cou = search_public_lesson(course, text);
                            $("#table-course").html("");
                            $.each(cou, function (i, v) {
                                var html = '';
                                html += '<tr id="course-tr" class="course-tr"><td><div class="cb-type2"><label><input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-course radio" value="" name="select-tr"/></label> </div> </td>';
                                html += '<td class="table-img-icon">';
                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                html += '</td>';
                                html += ' <td class="table-img-icon">';
                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" class="" alt="lesson" >';
                                html += '<span class="name-search-course">' + v.name + '</span>';
                                html += '</td>';
                                html += '<td class="table-img-icon">';
                                html += '<p class="pay-lesson">' + v.price + '</p>';
                                html += '</td>';
                                html += '<td class="table-img-icon">';
                                html += '<div class="open-arrow-course" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                html += '</td>';
                                $("#table-course").append(html);
                            });
                            if (cou.length == 0) {

                                var html = '';
                                html += '<tr><td colspan="6">No results.</td>';
                                html += '</tr>';
                                $("#table-course").append(html);
                            }
                        });
                        function search_public_lesson(arr, text) {
                            var arr_search = new Array();
                            $.each(arr, function (i, value) {
                                var str = value.name.toLowerCase();
                                var index = str.indexOf(text.toLowerCase());
                                if (index >= 0) {
                                    arr_search.push(value);
                                }
                            });
                            return arr_search;
                        }
                        //button search sat
                        $("#search-sat-btn").click(function () {
                            var text = $("#search-sat").val();
                            if ($("#sat-math").hasClass("active")) {
                                var arr = new Array(
                                        {
                                            'name': 'Math SAT Preparation',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT Simulation Test 1(New SAT Test)',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT Simulation Test 2(New SAT Test)',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT Simulation Test 3(New SAT Test)',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT Simulation Test 4(New SAT Test)',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT Simulation Test 5(New SAT Test)',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT 2 Preparation',
                                            'price': '80'
                                        },
                                        {
                                            'name': 'Math SAT 2 Simulation Test 1',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT 2 Simulation Test 2',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT 2 Simulation Test 3',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT 2 Simulation Test 4',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'Math SAT 2 Simulation Test 5',
                                            'price': '50'
                                        }
                                );
                                var arr_search = search_public_lesson(arr, text);
                                var html = '';
                                $("#table-sat").html(html);
                                if (arr_search.length != 0) {
                                    $.each(arr_search, function (i, v) {

                                        html += '<tr id="sat-tr" class="sat-tr"><td><div class="cb-type2"><label><input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-sat radio" value="" data-cate="10" data-name="' + v.name + '" data-desc="" data-price="' + v.price + '" name="select-tr"/></label> </div> </td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                        html += '</td>';
                                        html += ' <td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                        html += '<span class="search-sat-math">' + v.name + '</span>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<div class="open-arrow-search-math" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                        html += '</td>';
                                        html += '</tr>';
                                    });
                                } else {
                                    html += '<tr><td colspan="6">No results.</td>';
                                    html += '</tr>';
                                }
                                $("#table-sat").html(html);
                            } else if ($("#sat-eng").hasClass("active")) {
                                var arr = new Array(
                                        {
                                            'name': 'SAT Preparation - Grammar Review',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'English SAT Preparation - Writing Practice',
                                            'price': '20'
                                        },
                                        {
                                            'name': 'English SAT Simulation Test 1',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'English SAT Simulation Test 2',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'English SAT Simulation Test 3',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'English SAT Simulation Test 4',
                                            'price': '50'
                                        },
                                        {
                                            'name': 'English SAT Simulation Test 5',
                                            'price': '50'
                                        }
                                );
                                var arr_search = search_public_lesson(arr, text);
                                var html = '';
                                $("#table-sat").html(html);
                                if (arr_search.length != 0) {
                                    $.each(arr_search, function (i, v) {

                                        html += '<tr id="sat-tr-eng" class="sat-tr-eng"><td><div class="cb-type2"><label><input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-sat radio" value="" data-cate="10" data-name="' + v.name + '" data-desc="" data-price="' + v.price + '" name="select-tr"/></label> </div> </td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                        html += '</td>';
                                        html += ' <td class="table-img-icon">';
                                        html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                        html += '<span class="search-sat-eng">' + v.name + '</span>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                        html += '</td>';
                                        html += '<td class="table-img-icon">';
                                        html += '<div class="open-arrow-search-eng" data-gid="" data-content=""><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                        html += '</td>';
                                        html += '</tr>';
                                    });
                                } else {
                                    html += '<tr><td colspan="6">No results.</td>';
                                    html += '</tr>';
                                }
                                $("#table-sat").html(html);
                            }
                        });
                        //event of English Subject's name  on SAT
                        $(".name-sat-eng").live("click", function () {
                            var type_id = $(this).attr("data-type");
                            $.get(home_url + "/?r=ajax/get_list_course", {data: type_id}, function (data) {
                                var html = '';
                                if (data != 0) {
                                    var check = $(".sat-tr-eng").not("#sat-tr-eng" + type_id).next().hasClass("set-hide");
                                    if (check == true) {
                                        $(".sat-tr-eng").not("#sat-tr-eng" + type_id).nextAll(".set-hide").remove();
                                    }
                                    data = JSON.parse(data);
                                    var check2 = $("#sat-tr-eng" + type_id).next().hasClass("content-tr");
                                    if (check2 == false) {
                                        $.each(data, function (i, v) {
                                            html += '<tr id="content-tr' + v.group_id + '" class="content-tr style-level2 set-hide">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td class="table-img-icon" colspan="2" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" ><span class="name-sheet-eng" data-gid="' + v.group_id + '" data-type="' + type_id + '">' + v.content + '</span></td>';
                                            html += '<td class="table-img-icon"><div class="detail-group" data-gid="' + v.group_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div></td>';
                                            html += '</tr>';
                                        });
                                        var check3 = $("#sat-tr-eng" + type_id).next().hasClass("detail-sub-tr");
                                        if (check3 == false) {
                                            $("#sat-tr-eng" + type_id).after(html);
                                        } else {
                                            var check4 = $("#detail-sub-tr" + type_id).next().hasClass("content-tr");
                                            if (check4 == true) {
                                                $("#detail-sub-tr" + type_id).nextAll(".content-tr").remove();
                                                $("#sat-tr-eng" + type_id).nextAll(".detail-sub-tr").remove();
                                            } else {
                                                $("#detail-sub-tr" + type_id).after(html);
                                            }
                                        }

                                        $(".content-tr td").slideDown("fast");
                                    } else {
                                        $(".set-hide td").slideUp("fast", function () {
                                            $("#sat-tr-eng" + type_id).nextAll(".set-hide").remove();
                                            $("#sat-tr-eng" + type_id).nextAll(".detail-sub-tr").remove();
                                        });
                                    }
                                }
                            });
                        });
                        //event of English lesson's name  on SAT
                        $(".name-sheet-eng").live("click", function () {
                            var type_id = $(this).attr("data-type");
                            var gid = $(this).attr("data-gid");
                            var pre_fix = prefix = $(this).attr("data-prefix");
                            var id = $(this).attr("data-subid");
                            var size = $(this).attr("data-size");
                            if(prefix != '') prefix = prefix + '-';
                            $(".name-sheet-eng").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                            $(".lst-worksheet-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");

                            // if(pre_fix == 'pra'){
                            //     $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                            // }
                            // if(pre_fix == 'npra'){
                            //     $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                            // }
                            $.get(home_url + "/?r=ajax/get_worksheet_course", {type: type_id, gid: gid}, function (data) {
                                var html = '';
                                if (data != 0) {
                                    var check2 = $(".content-tr").not("#" + prefix + "content-tr" + gid).next().hasClass("sheet-tr");
                                    if (check2 == true) {
                                        $(".content-tr").not("#" + prefix + "content-eng" + gid).nextAll(".sheet-tr").remove();
                                        $(".content-tr").not("#" + prefix + "content-tr" + gid).nextAll(".desc-sheet-ls").remove();
                                        $(".content-tr").not("#" + prefix + "content-tr" + gid).nextAll(".detail-group-tr").remove();
                                    }
                                    data = JSON.parse(data);
                                    var check = $("#" + prefix + "content-tr" + gid).next().hasClass("sheet-tr");
                                    if (check == false) {
                                        $.each(data, function (i, v) {
                                            html += '<tr id="' + prefix + 'sheet-tr' + v.sheet_id + '" class="sheet-tr style-level3 set-hide">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td class="eng-sheet table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" ><span class="popup-detail" data-child="' + v.sheet_id + '" data-lid="' + type_id + '" data-gid="' + gid + '" data-title="' + v.sheet_name + '" data-desc="' + v.description + '" data-type="worksheet_course" data-prefix="' + pre_fix + '">' + v.sheet_name + '</span></td>';
                                            html += '</tr>';
                                        });
                                        var height = data.length * 40;
                                        var h = size * 40;
                                        var sh = (height + h);
                                        $("#" + prefix + "content-tr" + gid).after(html);
                                        $(".sheet-tr td").slideDown("fast");
                                        $(this).attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Opened.png");
                                        if(pre_fix == 'pra'){
                                            $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":sh+"px"});
                                        }
                                        if(pre_fix == 'npra'){
                                            $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":sh+"px"});
                                        }
                                        $("#" + prefix + "content-tr" + gid).find('.name-sheet-eng').attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Opened.png");
                                    } else {
                                        $(".sheet-tr td").slideUp("fast", function () {
                                            var h = size * 40;

                                            $("#" + prefix + "content-tr" + gid).nextAll(".sheet-tr").remove();
                                            $("#" + prefix + "content-tr" + gid).nextAll(".desc-sheet-ls").remove();
                                            $("#" + prefix + "content-tr" + gid).nextAll(".detail-group-tr").remove();
                                            if(pre_fix == 'pra'){
                                                $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":h+"px"});
                                            }
                                            if(pre_fix == 'npra'){
                                                $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":h+"px"}); 
                                            }
                                        });
                                    }
                                }
                            });
                        });
                        function increase(arr) {
                            arr.sort(function (a, b) {
                                if (a.name.toLowerCase() < b.name.toLowerCase()) {
                                    return -1;
                                }
                                if (a.name.toLowerCase() > b.name.toLowerCase()) {
                                    return 1;
                                }
                                return 0;
                            });
                            return arr;
                        }
                        function decrease(arr) {
                            arr.sort(function (a, b) {
                                if (a.name.toLowerCase() > b.name.toLowerCase()) {
                                    return -1;
                                }
                                if (a.name.toLowerCase() < b.name.toLowerCase()) {
                                    return 1;
                                }
                                return 0;
                            });
                            return arr;
                        }
                        //srort Subject on SAT
                        $("#icon-option-sat").click(function () {
                            if ($("#sat-eng").hasClass("active")) {
                                var eng = new Array(
                                        {
                                            id: 1,
                                            category: 10,
                                            name: "SAT Preparation - Grammar Review",
                                            price: "50"
                                        },
                                        {
                                            id: 2,
                                            category: 10,
                                            name: "English SAT Preparation - Writing Practice",
                                            price: "20"
                                        },
                                        {
                                            id: 3,
                                            category: 10,
                                            name: "English SAT Simulation Test 1",
                                            price: "50"
                                        },
                                        {
                                            id: 4,
                                            category: 10,
                                            name: "English SAT Simulation Test 2",
                                            price: "50"
                                        },
                                        {
                                            id: 5,
                                            category: 10,
                                            name: "English SAT Simulation Test 3",
                                            price: "50"
                                        },
                                        {
                                            id: 6,
                                            category: 10,
                                            name: "English SAT Simulation Test 4",
                                            price: "50"
                                        },
                                        {
                                            id: 7,
                                            category: 10,
                                            name: "English SAT Simulation Test 5",
                                            price: "50"
                                        }
                                );
                                sort_subject_public("table-sat", eng, "icon-option-sat");
                            } else if ($("#sat-math").hasClass("active")) {
                                var math = new Array(
                                        {
                                            id: 9,
                                            category: 10,
                                            name: "Math SAT Preparation",
                                            price: "50"
                                        },
                                        {
                                            id: 10,
                                            category: 10,
                                            name: "Math SAT Simulation Test 1(New SAT Test)",
                                            price: "50"
                                        },
                                        {
                                            id: 11,
                                            category: 10,
                                            name: "Math SAT Simulation Test 2(New SAT Test)",
                                            price: "50"
                                        },
                                        {
                                            id: 12,
                                            category: 10,
                                            name: "Math SAT Simulation Test 3(New SAT Test)",
                                            price: "50"
                                        },
                                        {
                                            id: 13,
                                            category: 10,
                                            name: "Math SAT Simulation Test 4(New SAT Test)",
                                            price: "50"
                                        },
                                        {
                                            id: 14,
                                            category: 10,
                                            name: "Math SAT Simulation Test 5(New SAT Test)",
                                            price: "50"
                                        },
                                        {
                                            id: 15,
                                            category: 10,
                                            name: "Math SAT 2 Preparation",
                                            price: "80"
                                        },
                                        {
                                            id: 16,
                                            category: 10,
                                            name: "Math SAT 2 Simulation Test 1",
                                            price: "50"
                                        },
                                        {
                                            id: 17,
                                            category: 10,
                                            name: "Math SAT 2 Simulation Test 2",
                                            price: "50"
                                        },
                                        {
                                            id: 18,
                                            category: 10,
                                            name: "Math SAT 2 Simulation Test 3",
                                            price: "50"
                                        },
                                        {
                                            id: 19,
                                            category: 10,
                                            name: "Math SAT 2 Simulation Test 4",
                                            price: "50"
                                        },
                                        {
                                            id: 20,
                                            category: 10,
                                            name: "Math SAT 2 Simulation Test 5",
                                            price: "50"
                                        }
                                );
                                sort_subject_public("table-sat", math, "icon-option-sat");
                            }
                        });
                        //sort Subject on Course
                        $("#icon-option-course").click(function () {
                            var course = new Array(
                                    {
                                        id: 38,
                                        category: 5,
                                        name: "ikMath Course - Math Kindergarten",
                                        price: "20"
                                    },
                                    {
                                        id: 39,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 1",
                                        price: "20"
                                    },
                                    {
                                        id: 40,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 2",
                                        price: "20"
                                    },
                                    {
                                        id: 41,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 3",
                                        price: "30"
                                    },
                                    {
                                        id: 42,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 4",
                                        price: "30"
                                    },
                                    {
                                        id: 43,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 5",
                                        price: "30"
                                    },
                                    {
                                        id: 44,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 6",
                                        price: "30"
                                    },
                                    {
                                        id: 45,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 7",
                                        price: "40"
                                    },
                                    {
                                        id: 46,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 8",
                                        price: "40"
                                    },
                                    {
                                        id: 47,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 9",
                                        price: "50"
                                    },
                                    {
                                        id: 48,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 10",
                                        price: "50"
                                    },
                                    {
                                        id: 49,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 11",
                                        price: "50"
                                    },
                                    {
                                        id: 50,
                                        category: 5,
                                        name: "ikMath Course - Math Grade 12",
                                        price: "50"
                                    },
                                    );
                            sort_subject_public("table-course", course, "icon-option-course");
                        });
                        //"ikMath Course" text's event
                        $("#course-menu").click(function () {
                            $("#select-all-course").attr("checked", false);
                            $("#icon-option-course").attr("data-sort", "upward");
                            $(".img-sort-course").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            get_course();
                            $("#open-search-course").css('display', 'none');
                            var check = $("#btn-course-down").hasClass("btn-ready-lesson");
                            if (check == true)
                            {
                                $("#btn-course-down").removeClass("btn-ready-lesson");
                                $("#btn-course-down").addClass("btn-ready-lesson-down");
                            }
                        });
                        //detail group
                        $(".detail-group").live("click", function () {
                            var gid = $(this).attr("data-gid");
                            $.get(home_url + "/?r=ajax/get_detail_group", {gid: gid}, function (data) {

                                var check2 = $(".content-tr").not("#content-tr" + gid).next().hasClass("detail-group-tr");
                                if (check2 == true) {
                                    $(".content-tr").not("#content-tr" + gid).next(".detail-group-tr").remove();
                                }
                                var check = $("#content-tr" + gid).next().hasClass("detail-group-tr");
                                if (check == false) {
                                    data = JSON.parse(data);
                                    var html = '';
                                    $.each(data, function (i, v) {
                                        html += '<tr class="detail-group-tr detail-stl set-hide" id="detail-group' + v.id + '">';
                                        html += '<td></td>';
                                        html += '<td></td>';
                                        if (v == null) {
                                            html += '<td colspan="3"><div class="detail-group-td">&nbsp;</div></td>';
                                        } else {
                                            html += '<td colspan="3"><div class="detail-group-td">' + v.detail + '</div></td>';
                                        }
                                        html += '</tr>';
                                    });
                                    $("#content-tr" + gid).after(html);
                                    $(".detail-group-tr td").slideDown("fast");
                                } else {
                                    $(".detail-group-tr td").slideUp("fast", function () {
                                        $("#content-tr" + gid).next(".detail-group-tr").remove();
                                    });
                                }
                            });
                        });
                        //detail subject SAT
                        $(".detail-sat").live("click", function () {

                            var id = $(this).attr("data-id");
                            var html = '';
                            $.get(home_url + "/?r=ajax/get_detail_subject", {type: id}, function (data) {

                                var check2 = $(".sat-tr-eng").not("#sat-tr-eng" + id).next().hasClass("detail-sub-tr");
                                if (check2 == true) {
                                    $(".sat-tr-eng").not("#sat-tr-eng" + id).next(".detail-sub-tr").remove();
                                }
                                var check = $("#sat-tr-eng" + id).next().hasClass("detail-sub-tr");
                                if (check == false) {
                                    html += '<tr class="detail-sub-tr detail-level1 set-hide" id="detail-sub-tr' + id + '">';
                                    html += '<td></td>';
                                    html += '<td></td>';
                                    html += '<td colspan="3">' + data + '</td>';
                                    html += '</tr>';
                                    $("#sat-tr-eng" + id).after(html);
                                    $(".detail-sub-tr td").slideDown("fast");
                                } else {
                                    $(".detail-sub-tr td").slideUp("fast", function () {
                                        $("#sat-tr-eng" + id).next(".detail-sub-tr").remove();
                                    });
                                }

                            });
                        });
                        function list_subject(table, arr) {
                            $("#" + table).html("");
                            $.each(arr, function (i, v) {
                                $("#select-all-sat").attr("checked", false);
                                var html = '';
                                html += '<tr id="sat-tr-eng' + v.id + '" class="sat-tr-eng"><td><div class="cb-type2"><label><input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-sat radio" value="' + v.id + '" data-cate="10" data-name="' + v.name + '" data-desc="" data-price="' + v.price + '" name="select-tr"/></label> </div> </td>';
                                html += '<td class="table-img-icon">';
                                if (v.category == 10) {
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                } else if (v.category == 5) {
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                }
                                html += '</td>';
                                html += ' <td class="table-img-icon">';
                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" class="" alt="lesson" >';
                                html += '<span class="name-sat-eng" data-type="' + v.id + '">' + v.name + '</span>';
                                html += '</td>';
                                html += '<td class="table-img-icon">';
                                html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                html += '</td>';
                                html += '<td class="table-img-icon">';
                                html += '<div class="detail-sat" data-desc="' + v.name + '" data-id="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                html += '</td>';
                                html += '</tr>';
                                $("#" + table).append(html);
                            });
                        }
                        function sort_subject_public(table, array, id) {
                            var arr;
                            $("#" + table).html("");
                            if ($("#" + id).attr("data-sort") == "upward") {
                                arr = increase(array);
                                $("#" + id).attr("data-sort", "downward");
                                $("#" + id + " img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                            } else if ($("#" + id).attr("data-sort") == "downward") {
                                arr = decrease(array);
                                $("#" + id).attr("data-sort", "upward");
                                $("#" + id + " img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                            }
                            $.each(arr, function (i, v) {
                                $("#select-all-sat").attr("checked", false);
                                var html = '';
                                html += '<tr id="sat-tr-eng' + v.id + '" class="sat-tr-eng"><td><div class="cb-type2"><label><input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-sat radio" value="" name="select-tr"/></label> </div> </td>';
                                html += '<td class="table-img-icon">';
                                if (v.category == 10) {
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                } else if (v.category == 5) {
                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                }
                                html += '</td>';
                                html += ' <td class="table-img-icon">';
                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                html += '<span class="name-sat-eng" data-type="' + v.id + '">' + v.name + '</span>';
                                html += '</td>';
                                html += '<td class="table-img-icon">';
                                html += '<p class="pay-lesson"><span>$</span>' + v.price + '</p>';
                                html += '</td>';
                                html += '<td class="table-img-icon">';
                                html += '<div class="detail-sat"  data-desc="' + v.name + '" data-id="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                html += '</td>';
                                html += '</tr>';
                                $("#" + table).append(html);
                            });
                        }
                        //event of Public Lesson name on My lesson
                        $(".my-public-lesson").live("click", function () {
                            $(".lesson-tr").css("border-bottom", "1px solid #ddd");
                            var lid = $(this).attr("data-lid");
                            var id = $(this).attr("data-gid");
                            var open = $(".lesson-tr").not('#lesson-tr' + lid + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".lesson-tr").not('#lesson-tr' + lid + '').nextAll(".detail-tr-lesson").remove();
                            }
                            var html = '';
                            var check1 = $('#lesson-tr' + lid + '').next().hasClass("detail-worksheet");
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_ready_lesson_sheet", {data: id}, function (data) {

                                    if (data !== "0") {
                                        var data = JSON.parse(data);
                                        if (data.sheet.length > 0) {
                                            $.each(data.sheet, function (i, v) {
                                                html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide" id="eng-lesson-' + v.id + '" ><td></td>';
                                                html += '<td></td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;">' + v.sheet_name + '</td>';
                                                html += ' <td class="table-img-icon" colspan="2">';
                                                html += ' <div class="detail-worksheet-ready" data-id="' + v.id + '" data-gid="' + id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += ' <div class="down-worksheet" data-slid="' + v.id + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                                html += ' <div class="up-worksheet" data-slid="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                                html += ' </td>';
                                                html += '</tr>';
                                            });
                                        }
                                    } else {
                                        html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson"><td></td><td></td><td>This folder is empty.</td></tr>';
                                    }
                                    var check2 = $('#lesson-tr' + lid + '').next().hasClass("detail-desc");
                                    if (check2 == true) {
                                        var check3 = $('.detail-desc').next().hasClass("detail-worksheet");
                                        if (check3 == false) {
                                            $('.desc-detail').addClass("style-border-desc");
                                            $(".detail-desc").after(html);
                                            $(".detail-worksheet td").hide().slideDown("fast");
                                        } else if (check3 == true) {
                                            $('.desc-detail').removeClass("style-border-desc");
                                            $('.desc-worksheet td').slideUp("fast", function () {
                                                $('#lesson-tr' + lid + '').nextAll(".set-hide").remove();
                                            });
                                        }
                                    } else {
                                        $('#lesson-tr' + lid + '').after(html);
                                        $(".detail-tr-lesson td").hide().slideDown("fast");
                                    }
                                });
                            } else {
                                $('.desc-detail').removeClass("style-border-desc");
                                $('.detail-tr-lesson td').slideUp("fast", function () {
                                    $('#lesson-tr' + lid + '').nextAll(".set-hide").remove();
                                });
                            }
                        });
                        $(".my-public-lesson2").live("click", function () {
                            //$(".lesson-tr").css("border-bottom", "1px solid #ddd");
                            var lid = $(this).attr("data-lid");
                            var id = $(this).attr("data-gid");
                            var pre_fix = prefix = $(this).attr("data-prefix");
                            if(prefix != '') prefix = prefix + '-';
                            var open = $(".lesson-tr").not('#' + prefix + 'lesson-tr' + lid + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".lesson-tr").not('#' + prefix + 'lesson-tr' + lid + '').nextAll(".detail-tr-lesson").remove();
                            }
                            $(".my-public-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                            $(".my-lesson-ws2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");

                            if(pre_fix == 'pra'){
                                $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                                $(".lesson-tr-npra").css({"display":"table","margin-bottom":"0px"});
                                $(".lst-pub-subject2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".lst-sub-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".subj-tr" + pre_fix).nextAll(".set-hide").remove();
                            }
                            if(pre_fix == 'npra'){
                                $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                                $(".lesson-tr-pra").css({"display":"table","margin-bottom":"0px"});
                                $(".lst-pub-subject2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".lst-sub-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".subj-tr" + pre_fix).nextAll(".set-hide").remove();
                            }

                            var html = '';
                            var check1 = $('#' + prefix + 'lesson-tr' + lid + '').next().hasClass("detail-worksheet");
                            if (check1 == false) {
                                $.post(home_url + "/?r=ajax/get_ready_lesson_sheet", {data: id}, function (data) {

                                    data = JSON.parse(data);
                                    if (data.sheet.length > 0) {
                                        $.each(data.sheet, function (i, v) {
                                            html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide" id="' + prefix + 'eng-lesson-' + v.id + '" ><td></td>';
                                            html += '<td></td>';
                                            html += '<td class="table-img-icon">';
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Worksheet.png" class="" alt="lesson" style="margin-bottom: 2px;"><span class="popup-detail" data-child="' + v.id + '" data-lid="' + lid + '" data-gid="' + id + '" data-type="lesson_sheet" data-title="' + v.sheet_name + '" data-desc="' + v.description + '" data-prefix="' + pre_fix + '">' + v.sheet_name + '</span></td>';
                                            html += '</tr>';
                                        });
                                        var height = data.sheet.length * 40;
                                    } else {
                                        html += '<tr class="detail-worksheet detail-tr-1 detail-tr-lesson tr-lesson set-hide"><td></td><td></td><td>This folder is empty.</td></tr>';
                                        var height = 40;
                                    }
                                    $('#' + prefix + 'lesson-tr' + lid + '').after(html);
                                    $(".detail-tr-lesson td").hide().slideDown("fast");
                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "lesson-tr" + lid).css({"display":"table","margin-bottom":height+"px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "lesson-tr" + lid).css({"display":"table","margin-bottom":height+"px"});
                                    }
                                });                                                    
                                $(this).attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Opened.png");            
                            } else {
                                $('.desc-detail').removeClass("style-border-desc");
                                $('.detail-tr-lesson td').slideUp("fast", function () {
                                    $('#' + prefix + 'lesson-tr' + lid + '').nextAll(".set-hide").remove();
                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "lesson-tr" + lid).css({"display":"table","margin-bottom":"0px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "lesson-tr" + lid).css({"display":"table","margin-bottom":"0px"});
                                    }
                                });                                
                            }
                        });
                        //event of Public Subject name on My Subject
                        $(".lst-pub-subject").live("click", function () {
                            var type_id = $(this).attr("data-type");
                            var id = $(this).attr("data-subid");
                            $.get(home_url + "/?r=ajax/get_list_course", {data: type_id}, function (data) {
                                var html = '';
                                if (data != 0) {
                                    var check = $(".subj-tr").not("#subj-tr" + id).next().hasClass("set-hide");
                                    if (check == true) {
                                        $(".subj-tr").not("#subj-tr" + id).nextAll(".set-hide").remove();
                                    }
                                    var open = $(".subj-tr").not('#subj-tr' + id + '').next().hasClass("detail-tr-lesson");
                                    if (open == true) {
                                        $(".subj-tr").not('#subj-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                                    }
                                    data = JSON.parse(data);
                                    var check2 = $("#subj-tr" + id).next().hasClass("content-tr");
                                    if (check2 == false) {

                                        $.each(data, function (i, v) {
                                            html += '<tr id="content-tr' + v.group_id + '" class="content-tr style-level2 set-hide">';
                                            html += '<td></td>';
                                            html += '<td></td>';
                                            html += '<td class="table-img-icon" colspan="2"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" ><span class="name-sheet-eng" data-gid="' + v.group_id + '" data-type="' + type_id + '">' + v.content + '</span></td>';
                                            html += '<td class="table-img-icon"><div class="detail-group" data-gid="' + v.group_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div></td>';
                                            html += '</tr>';
                                        });
                                        var check3 = $("#subj-tr" + id).next().hasClass("detail-desc");
                                        if (check3 == false) {
                                            $("#subj-tr" + id).after(html);
                                        } else {
                                            var check4 = $(".detail-desc").next().hasClass("content-tr");
                                            if (check4 == true) {
                                                $(".detail-desc").nextAll(".content-tr").remove();
                                                $("#subj-tr" + id).nextAll(".detail-desc").remove();
                                            } else {
                                                $(".detail-desc").after(html);
                                            }
                                        }

                                        $(".content-tr td").slideDown("fast");
                                    } else {
                                        $(".set-hide td").slideUp("fast", function () {
                                            $("#subj-tr" + id).nextAll(".set-hide").remove();
                                            $("#subj-tr" + id).nextAll(".detail-desc").remove();
                                        });
                                    }
                                }
                            });
                        });
                        //event of Public Subject name on My Subject
                        $(".lst-pub-subject2").live("click", function () {
                            var type_id = $(this).attr("data-type");
                            var id = $(this).attr("data-subid");
                            var pre_fix = prefix = $(this).attr("data-prefix");
                            if(prefix != '') prefix = prefix + '-';
                            $(".lst-pub-subject2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                            $(".lst-sub-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");

                            if(pre_fix == 'pra'){
                                $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                                $(".lesson-tr-npra").css({"display":"table","margin-bottom":"0px"});
                                $(".my-public-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".my-lesson-ws2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".lesson-tr" + pre_fix).nextAll(".set-hide").remove();
                            }
                            if(pre_fix == 'npra'){
                                $(".lesson-tr-" + pre_fix).css({"display":"table","margin-bottom":"0px"});
                                $(".lesson-tr-pra").css({"display":"table","margin-bottom":"0px"});
                                $(".my-public-lesson2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".my-lesson-ws2").attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png");
                                $(".lesson-tr" + pre_fix).nextAll(".set-hide").remove();
                            }

                            var check = $(".subj-tr").not("#"+ prefix +"subj-tr" + id).next().hasClass("set-hide");
                            if (check == true) {
                                $(".subj-tr").not("#"+ prefix +"subj-tr" + id).nextAll(".set-hide").remove();
                            }
                            var open = $(".subj-tr").not('#'+ prefix +'subj-tr' + id + '').next().hasClass("detail-tr-lesson");
                            if (open == true) {
                                $(".subj-tr").not('#'+ prefix +'subj-tr' + id + '').nextAll(".detail-tr-lesson").remove();
                            }                           
                            var check2 = $("#"+ prefix +"subj-tr" + id).next().hasClass("content-tr");
                            if (check2 == false) {
                                $.get(home_url + "/?r=ajax/get_list_course", {data: type_id}, function (data) {
                                    var html = '';
                                    if (data != 0) {                                    
                                        data = JSON.parse(data);
                                        $.each(data, function (i, v) {
                                            html += '<tr id="'+ prefix +'content-tr' + v.group_id + '" class="content-tr style-level2 set-hide">';
                                            html += '<td></td>';
                                            html += '<td class="table-img-icon text-right"><img class="name-sheet-eng" data-gid="' + v.group_id + '" data-type="' + type_id + '" data-prefix="' + pre_fix + '" data-subid="'+ id +'" data-size="'+ data.length +'" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png" alt="lesson" ></td>';
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" ><span class="popup-detail" data-child="' + v.type_id + '" data-lid="' + id + '" data-gid="' + v.group_id + '" data-title="' + v.content + '" data-desc="' + v.detail + '" data-type="list_course" data-prefix="' + pre_fix + '">' + v.content + '</span></td>';
                                            html += '</tr>';
                                        });
                                        var height = data.length * 40;
                                    } else {
                                        html += '<tr class="content-tr style-level2 set-hide"><td></td><td></td><td>This folder is empty.</td></tr>';
                                        var height = 40;
                                    }
                                    $("#"+ prefix +"subj-tr" + id).after(html);
                                    $(".content-tr td").slideDown("fast");
                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":height+"px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":height+"px"});
                                    }
                                }); 
                                $(this).attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Opened.png");                               
                            }else{
                                $(".set-hide td").slideUp("fast", function () {
                                    $("#"+ prefix +"subj-tr" + id).nextAll(".set-hide").remove();
                                    $("#"+ prefix +"subj-tr" + id).nextAll(".detail-desc").remove();
                                    if(pre_fix == 'pra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":"0px"});
                                    }
                                    if(pre_fix == 'npra'){
                                        $("#" + pre_fix + "subj-tr" + id).css({"display":"table","margin-bottom":"0px"});
                                    }
                                });
                            }                            
                        });
                        //create class

                        //"Explain Class to Your Students" arrow's event on Create Class
                        $(".arrow-explain-class").click(function () {
                            $(".clear-text").val('');
                            $('#post_message2_ifr').contents().find('#tinymce').text('');
                            get_category('select-type-explain-class');
                            if ($(".explain-class").hasClass("sethidden")) {
                                $(".explain-class").removeClass("sethidden");
                                $(".explain-class").slideDown("fast");
                                $(".arrow-explain-class").find(".img-style-icon").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $(".explain-class").slideUp("fast");
                                $(".explain-class").addClass("sethidden");
                                $(".arrow-explain-class").find(".img-style-icon").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //"Tutoring" arrow's event on Create Class
                        $(".arrow-tutoring-class").click(function () {
                            $("#detail-tutoring2").load(location.href + " #detail-tutoring2>*", "");
                            if ($(".detail-tutoring").hasClass("sethidden")) {
                                $(".detail-tutoring").removeClass("sethidden");
                                $(".detail-tutoring").slideDown("fast");
                                $(".arrow-tutoring-class img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $(".detail-tutoring").slideUp("fast");
                                $(".detail-tutoring").addClass("sethidden");
                                $(".arrow-tutoring-class img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //"Add Subject or Lesson" arrow's event on Create Class
                        $(".arrow-add-sub-lesson").click(function () {
                            $.get(home_url + "/?r=ajax/update_order_subject_lesson", {type: "GET"}, function (data) {

                            });
                            //$(".table-prerequisite").addClass("hidden");
                            //$(".table-sub-less-prerequisite").html("");
                            //$(".table-noprerequisite").addClass("hidden");
                            //$(".table-sub-less").html("");
                            $("#select-all-less5").attr("checked", false);
                            $(".lesson-detail-sub").removeClass("active");
                            $(".lesson-detail-sub").slideUp("slow");
                            $("#icon-open-from-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-less3").html('');
                            $("#select-all-add-sub").attr("checked", false);
                            $(".sub-detail").removeClass("active");
                            $(".sub-detail").slideUp("slow");
                            $("#icon-add-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-sub").html('');
                            if ($(".add-sub-lesson").hasClass("sethidden")) {
                                $(".add-sub-lesson").removeClass("sethidden");
                                $(".add-sub-lesson").slideDown("fast");
                                $(".arrow-add-sub-lesson img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $(".add-sub-lesson").addClass("sethidden");
                                $(".add-sub-lesson").slideUp("fast");
                                $(".arrow-add-sub-lesson img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //Toggle button of Tutoring on Create Class
                        $(".check-toggle,.check-toggle2").live("click", function () {
                            var check = $(this).is(":checked");
                            if (check == false) {
                                $(this).parent().find(".no-charse").css("display", "block");
                                $(this).parent().find(".charse").css("display", "none");
                                $(this).parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png");
                                $(this).closest(".option-tutoring2").find(".set-disable").attr("readonly", true);
                                $(this).attr("checked", false);
                            } else {
                                $(this).parent().find(".charse").css("display", "block");
                                $(this).parent().find(".no-charse").css("display", "none");
                                $(this).parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png");
                                $(this).closest(".option-tutoring2").find(".set-disable").attr("readonly", false);
                                $(this).attr("checked", true);
                            }
                        });
                        //Toggle button of "Explain Class to Your Students" on Create Class
                        $("#cbyesno").click(function () {
                            var check = $(this).is(":checked");
                            if (check == false) {
                                $(this).parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png");
                                $("#type-password2").attr("readonly", true);
                                $("#retype-password2").attr("readonly", true);
                            } else {
                                $("#type-password2").attr("readonly", false);
                                $("#retype-password2").attr("readonly", false);
                                $(this).parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png");
                            }
                        });
                        //them subject vaf lesson vao danh sach
                        $("#btn-add-list").click(function () {
                            var selected = new Array();
                            var selected_sub = new Array();
                            $(".option-input-lesson-check:checked").each(function () {
                                var id = $(this).val();
                                selected.push(id);
                            });
                            $(".option-sub-check:checked").each(function () {
                                var id = $(this).val();
                                selected_sub.push(id);
                            });
                            $.get(home_url + "/?r=ajax/add_list_subject_lesson", {data: selected, subject: selected_sub}, function (data) {
                                $(".table-noprerequisite").removeClass("hidden");
                                get_list_subject('table-sub-less', 0);
                                $("#select-all-less5").attr("checked", false);
                                $(".lesson-detail-sub").removeClass("active");
                                $(".lesson-detail-sub").slideUp("slow");
                                $("#icon-open-from-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-less3").html('');
                                $("#select-all-add-sub").attr("checked", false);
                                $(".sub-detail").removeClass("active");
                                $(".sub-detail").slideUp("slow");
                                $("#icon-add-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-sub").html('');
                            });
                        });
                        //them subject vaf lesson vao danh sach
                        $("#btn-add-prerequisite").click(function () {
                            //$(".table-prerequisite").removeClass("hidden");
                            var selected = new Array();
                            var selected_sub = new Array();
                            $(".option-input-lesson-check:checked").each(function () {
                                var id = $(this).val();
                                selected.push(id);
                            });
                            $(".option-sub-check:checked").each(function () {
                                var id = $(this).val();
                                selected_sub.push(id);
                            });
                            $.get(home_url + "/?r=ajax/add_list_subject_lesson", {data: selected, subject: selected_sub, prerequisite: 1}, function (data) {
                                get_list_subject('table-sub-less-prerequisite', 1);
                                $("#select-all-less5").attr("checked", false);
                                $(".lesson-detail-sub").removeClass("active");
                                $(".lesson-detail-sub").slideUp("slow");
                                $("#icon-open-from-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-less3").html('');
                                $("#select-all-add-sub").attr("checked", false);
                                $(".sub-detail").removeClass("active");
                                $(".sub-detail").slideUp("slow");
                                $("#icon-add-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-sub").html('');
                            });
                        });
                        //function get category
                        function get_category(id) {
                            $.get(home_url + "/?r=ajax/get_cate", {type: "GET"}, function (data) {
                                data = JSON.parse(data);
                                if (data.cate.length > 0) {
                                    var html_cate = '';
                                    html_cate += '<option disabled selected value=""> Type of Class </option>';
                                    $.each(data.cate, function (i, v) {
                                        html_cate += '<option  value="' + v.id + '">' + v.name + '</option>';
                                    });
                                    $('#' + id).html(html_cate).data("selectBox-selectBoxIt").refresh();
                                }
                            });
                        }
                        //function get category class created
                        function get_category_class(id) {
                            $.get(home_url + "/?r=ajax/get_cate", {type: "GET"}, function (data) {
                                data = JSON.parse(data);
                                if (data.cate.length > 0) {
                                    var html_cate = '';
                                    html_cate += '<option disabled selected value=""> Type of Class </option>';
                                    $.each(data.cate, function (i, v) {
                                        html_cate += '<option  value="' + v.id + '">' + v.name + '</option>';
                                    });
                                    html_cate += '<option  value="0">ALL</option>';
                                    $('#' + id).html(html_cate).data("selectBox-selectBoxIt").refresh();
                                }
                            });
                        }
                        //function get list subject and lesson to edit class
                        function get_list_subject2(table, priority) {
                            $.get(home_url + "/?r=ajax/get_list_subject_lesson", {priority: priority}, function (data) {
                                data = JSON.parse(data);
                                if (data.lesson != '') {
                                    $("." + table).html("");
                                    $.each(data.lesson, function (i, v) {
                                        var html = '';
                                        html += ' <tr>';
                                        html += ' <td style="width:10%" class="table-img-icon">';
                                        if (v.cate == 1) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                        } else if (v.cate == 5) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                        } else if (v.cate == 2) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                        } else if (v.cate == 3) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                        } else if (v.cate == 4) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                        } else if (v.cate == 6) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                        } else {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                        }

                                        if (v.identy == "Subject") {
                                            if (v.type == "Public Subject")
                                                html += ' </td><td style="width:65% " class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" alt="lesson"><span class="name-course">' + v.name + '</span></td>';
                                        }
                                        if (v.identy == "Lesson") {
                                            if (v.type == "Public Lesson")
                                                html += ' </td><td style="width:65%" class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" alt="lesson"><span class="my-public-lesson">' + v.name + '</span></td>';
                                        }
                                        if (v.identy == "Subject") {
                                            if (v.type != "Public Subject")
                                                html += ' </td><td style="width:65%" class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MySubject.png" alt="lesson"><span class="name-subject">' + v.name + '</span></td>';
                                        }
                                        if (v.identy == "Lesson") {
                                            if (v.type != "Public Lesson")
                                                html += ' </td><td style="width:65%" class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" alt="lesson"><span class="name-lesson">' + v.name + '</span></td>';
                                        }
                                        html += '<td style="width:10%; " class="table-img-icon">';
                                        html += ' <div class="down-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                        html += ' <div class="up-worksheet" data-slid="' + v.id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                        html += '</td>';
                                        html += '<td style="width:10%; " class="">';
                                        html += '<div class="charse" style="position:relative; padding-left:10px;">';
                                        html += ' <input type="number" class="border-ras price-homework"  name="price-eng-conver" value="0">';
                                        html += '<span class="unit" style="left:25px;">$</span>';
                                        html += ' </div>';
                                        html += ' </td>';
                                        html += '<td style="width:5%" class="table-img-icon">';
                                        html += '<div class="delete-subject" data-id="' + v.id + '" data-type="' + v.identy + '" data-prerequisite="' + priority + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                        html += ' </td>';
                                        html += '</tr> ';
                                        $("." + table).append(html);
                                    });
                                } else {
                                    if (priority == 1) {
                                        //$(".table-prerequisite").addClass("hidden");
                                    }
                                }
                            });
                        }
                        //function get list subject and lesson to create class
                        function get_list_subject(table, priority) {
                            if (priority == 1)
                                var prefix = 'pra';
                            else
                                var prefix = 'npra';
                            $.get(home_url + "/?r=ajax/get_list_subject_lesson", {priority: priority}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);
                                if (data.lesson != '') {
                                    $("." + table).html("");
                                    $("." + table + '-ass').html("");
                                    $.each(data.lesson, function (i, v) {
                                        var html = html2 = '';

                                        if (v.identy == "Lesson") {
                                            var attr = 'data-lid="' + v.id + '" data-gid="' + v.sid + '" data-prefix="'+ prefix +'"';
                                            var tr = 'id="' + prefix + '-lesson-tr' + v.id + '" class="lesson-tr lesson-tr'+ prefix +'"';
                                            var tr2 = 'id="' + prefix + 'lesson-tr' + v.id + '" class="lesson-tr-'+ prefix +'"';
                                            var open_detail = 'data-lid="' + v.id + '" data-gid="' + v.sid + '" data-child="0" data-type="lesson" data-title="' + v.name + '" data-desc="' + v.description + '" data-prefix="'+ prefix +'"';
                                            if (v.public_type == "Public Lesson")
                                                var cl = 'name-ready-lesson my-public-lesson2';
                                            else
                                                var cl = 'name-lesson my-lesson-ws2';              
                                        }else if (v.identy == "Subject"){
                                            var attr = 'data-subid="' + v.id + '" data-type="' + v.sid + '" data-prefix="'+ prefix +'"';
                                            var tr = 'id="' + prefix + '-subj-tr' + v.id + '" class="subj-tr subj-tr'+ prefix +'"';
                                            var tr2 = 'id="' + prefix + 'subj-tr' + v.id + '" class="lesson-tr-'+ prefix +'"';
                                            var open_detail = 'data-lid="' + v.id + '" data-gid="0" data-child="0" data-type="subject" data-title="' + v.name + '" data-desc="' + v.description + '" data-prefix="'+ prefix +'"';
                                            if (v.public_type == "Public Subject")
                                                var cl = 'name-course lst-pub-subject2';
                                            else
                                                var cl = 'name-course lst-sub-lesson2';
                                        }else{
                                            var cl = '';
                                        }
                                        html += ' <tr '+ tr +'>';
                                        html += ' <td></td>';
                                        html += ' <td style="width:8.7%;" class="table-img-icon">';
                                        html += ' <input type="checkbox" class="hidden class_homework" checked data-id="' + v.id + '" data-type="' + v.identy + '" data-priority="' + v.priority + '" data-no-priority="' + v.no_priority + '" data-cate="' + v.cate + '">';
                                        html += '<img ' + attr + ' class="' + cl + '" src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Arrow_Closed.png" alt="lesson" >';
                                        if (v.cate == 1) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" style="margin-right: 0;">';
                                        } else if (v.cate == 5) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" style="margin-right: 0;">';
                                        } else if (v.cate == 2) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" style="margin-right: 0;">';
                                        } else if (v.cate == 3) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" style="margin-right: 0;">';
                                        } else if (v.cate == 4) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" style="margin-right: 0;">';
                                        } else if (v.cate == 6) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" style="margin-right: 0;">';
                                        } else {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" style="margin-right: 0;">';
                                        }

                                        if (v.identy == "Subject") {
                                            if (v.public_type == "Public Subject")
                                                html += ' </td><td style="width:91.3% " class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" alt="lesson"><span class="popup-detail name-course" '+ open_detail +'>' + v.name + '</span></td>';
                                        }
                                        if (v.identy == "Lesson") {
                                            if (v.public_type == "Public Lesson")
                                                html += ' </td><td style="width:91.3%" class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" alt="lesson"><span class="popup-detail my-public-lesson" '+ open_detail +'>' + v.name + '</span></td>';
                                        }
                                        if (v.identy == "Subject") {
                                            if (v.public_type != "Public Subject")
                                                html += ' </td><td style="width:91.3%" class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MySubject.png" alt="lesson"><span class="popup-detail name-subject" '+ open_detail +'>' + v.name + '</span></td>';
                                        }
                                        if (v.identy == "Lesson") {
                                            if (v.public_type != "Public Lesson")
                                                html += ' </td><td style="width:91.3%" class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" alt="lesson"><span class="popup-detail name-lesson" '+ open_detail +'>' + v.name + '</span></td>';
                                        }                                                                               
                                        html += '</tr> ';

                                        html2 += ' <tr '+ tr2 +'>';
                                        html2 += '<td style="width:40%; padding-right:10px;padding-left: 0px!important;" class="table-img-icon">';
                                        html2 += ' <input type="checkbox" class="hidden class_homework" checked data-id="' + v.id + '" data-type="' + v.identy + '" data-priority="' + v.priority + '" data-no-priority="' + v.no_priority + '" data-cate="' + v.cate + '">';
                                        html2 += ' <div class="down-create-homework" data-order="' + v.id + '" data-order2="down" data-type="' + v.identy + '" data-priority="' + v.priority + '"> <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" style="margin-right: 0;"></div>';
                                        html2 += ' <div class="up-create-homework" data-order="' + v.id + '" data-order2="up" data-type="' + v.identy + '" data-priority="' + v.priority + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" style="margin-right: 9px;"></div>';
                                        html2 += ' </td>';
                                        html2 += '<td style="width:50%; " class="">';
                                        html2 += '<div class="charse-table" style="position:relative;">';
                                        html2 += ' <input type="number" class="border-ras price-homework" name="price-eng-conver" value="0">';
                                        html2 += '<span class="unit">$</span>';
                                        html2 += ' </div>';
                                        html2 += ' </td>';
                                        html2 += '<td style="width:10%" class="table-img-icon">';
                                        html2 += '<div class="delete-subject" data-id="' + v.id + '" data-type="' + v.identy + '" data-prerequisite="' + priority + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                        html2 += ' </td>';
                                        html2 += '</tr> ';
                                        $("." + table).append(html);
                                        $("." + table + '-ass').append(html2);                                        
                                    });
                                    if (priority == 1){
                                        if(!$('#btn-open-detail-pra').hasClass("open-slide-pra"))
                                            $('#btn-open-detail-pra').addClass('open-slide-pra');
                                    }
                                    if (priority == 0){
                                        if(!$('#btn-open-detail-npra').hasClass("open-slide-npra"))
                                            $('#btn-open-detail-npra').addClass('open-slide-npra');
                                    }
                                }else {
                                    $("." + table).html("");
                                    $("." + table + '-ass').html("");
                                    var html = '<tr><td style="width:5%; padding-left: 30px!important; border: 0;" class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_No_Assignment.png" class="" alt="lesson"></td><td class="currently-no-assignments" style="border: 0;">Currently, there are no Assignments</td><td style="width:5%; border: 0;" class="table-img-icon"></td></tr>';
                                    $("." + table).append(html);
                                    if (priority == 1){
                                        if($('#btn-open-detail-pra').hasClass("open-slide-pra"))
                                            $('#btn-open-detail-pra').removeClass('open-slide-pra');
                                    }
                                    if (priority == 0){
                                        if($('#btn-open-detail-npra').hasClass("open-slide-npra"))
                                            $('#btn-open-detail-npra').removeClass('open-slide-npra');
                                    }
                                }
                            });
                        }
                        $("#gotoTutor").live("click", function () {
                            $("#create-class-li").parent().removeClass("active");
                            $("#tutor-regist").addClass("active");
                            $("#my-account-modal").scrollTop(0);
                            $("#sub-class-manager").css("display", "none");
                            $("#sub-class-manager").removeClass("opensub");
                            $("#sub-myacc").css("display", "block");
                            $("#sub-myacc").addClass("opensub");
                        });
                        $("#gotoMylib").click(function () {
                            $("#create-class-li").parent().removeClass("active");
                            $("#my-library-li").parent().addClass("active");
                            var text = '';
                            var table = "table-library";
                            get_my_library(text, table);
                            $("#my-account-modal").scrollTop(0);
                            $("#sub-class-manager").css("display", "none");
                            $("#sub-class-manager").removeClass("opensub");
                            $("#sub-lesson-manager").css("display", "block");
                            $("#sub-lesson-manager").addClass("opensub");
                        });
                        //xoa dữ liệu của trường ordering trong bảng dict_my_lesson và dict_my_subject
                        //su kien khi click vao text "Create Class"
                        $('a[data-toggle="tab"]').on('show.bs.tab', function (e) {
                            if ($(this).hasClass('disabled')){
                                e.preventDefault();
                                return false;
                            }
                        });
                        $("#create-class-li").click(function (ev) {
                            $('a[data-toggle="tab"]').not("#create-class-li").addClass('disabled');
                            $('#close-modal').attr('data-tab','create-class');

                            var set = $("#close-modal").attr("data-tab");
                            var clas = $("#group-name2").val();
                            var pass = $("#type-password2").val();
                            var re = $("#retype-password2").val();                            
                            var desc = $('#post_message2_ifr').contents().find('#tinymce').text();
                            var chk = $(".option-input-2").is(":checked");
                            var cbo = $('#select-type-explain-classSelectBoxItText').attr("data-val");
                            var selected = new Array();
                            var tutor = new Array();
                            $(".class_homework:checked").each(function () {
                                var price = $(this).closest("tr").find(".price-homework").val();
                                if($.trim(price) != ''){
                                    selected.push({price: price});
                                }
                            });
                            $(".check-toggle:checked").each(function () {
                                var price = $(this).closest(".option-tutoring2").find(".price_subject").val();
                                var name = $(this).closest(".option-tutoring2").find(".add-subject-tutor").val();   
                                if($.trim(price) != '' || $.trim(name) != ''){
                                    tutor.push({price: price, name: name});
                                }
                            });

                            if(!$("#create-class-red").hasClass('active')) get_category('select-type-explain-class');

                            if(clas == "" && pass == "" && re == "" && desc == "" && !cbo && selected.length == 0 && tutor.length == 0 && !chk){
                                get_category('select-type-explain-class');
                                $.get(home_url + "/?r=ajax/update_order_subject_lesson", {type: "GET"}, function (data) {

                                });
                                
                                $("#detail-tutoring2").load(location.href + " #detail-tutoring2>*", "");
                                $("#select-all-less5").attr("checked", false);
                                $(".lesson-detail-sub").removeClass("active");
                                $(".lesson-detail-sub").slideUp("slow");
                                $("#icon-open-from-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-less3").html('');
                                $("#select-all-add-sub").attr("checked", false);
                                $(".sub-detail").removeClass("active");
                                $(".sub-detail").slideUp("slow");
                                $("#icon-add-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-sub").html('');
                                //
                                $(".clear-text").val('');
                                $('#post_message2_ifr').contents().find('#tinymce').text('');
                                //
                                $(".earn-money").removeClass("sethidden");
                                $(".earn-money").slideDown("fast");
                                $(".arrow-earn-money img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                                //
                                $(".explain-class").removeClass("sethidden");
                                $(".explain-class").slideDown("fast");
                                $(".arrow-explain-class img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                                //
                                $(".detail-tutoring").removeClass("sethidden");
                                $(".detail-tutoring").slideDown("fast");
                                $(".arrow-tutoring-class img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                                //
                                $(".add-sub-lesson").removeClass("sethidden");
                                $(".add-sub-lesson").slideDown("fast");
                                $(".arrow-add-sub-lesson img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            }
                        });
                        //function load group in select box to assign class
                        function get_groups(selectname) {
                            $.get(home_url + "/?r=ajax/get_groups", {type: "GET"}, function (data) {

                                if (data != null) {
                                    var html = '';
                                    data = JSON.parse(data);
                                    html += '<option selected disabled value="">Select a Class to Assign</option>';
                                    $.each(data, function (i, v) {
                                        html += '<option value="' + v.id + '">' + v.name + '</option>';
                                    });
                                    $('#' + selectname + '').html(html).data("selectBox-selectBoxIt").refresh();
                                }

                            });
                        }
                        //refresh 
                        $('#sub-createacc').click(function () {
                            $(".refreshclass input").val('');
                            $(".radio_buttons").attr('checked', false);

                            var viewport = getViewport();
                            if(viewport.width < 650){
                                $("#birth_g_mb").selectBoxIt('selectOption','0').data("selectBox-selectBoxIt");
                                $("#birth_g_mb").data("selectBox-selectBoxIt").refresh();
                            }else{
                                $("#birth_g_pc").selectBoxIt('selectOption','0').data("selectBox-selectBoxIt");
                                $("#birth_g_pc").data("selectBox-selectBoxIt").refresh();
                            }
                            if($("#checked-availability").hasClass('yes-availability')){
                                $("#checked-availability").removeClass('yes-availability');
                            }
                            if($("#checked-availability").hasClass('not-availability')){
                                $("#checked-availability").removeClass('not-availability');
                            }
                            $("#checked-availability span").text('');
                        });

                        $('#tutor-regist').click(function () {
                            $("#tutorForm input").val('');
                            $(".radio_buttons").attr('checked', false);
                            $("#rdo-agreed2").attr('checked', false);
                            $('#desc_tell_me_ifr').contents().find('#tinymce').text('');
                            $("#user-grade").selectBoxIt('selectOption','0').data("selectBox-selectBoxIt");
                            $("#user-grade").data("selectBox-selectBoxIt").refresh();
                        });
                        //end refresh
                        //
                        //mange class
                        $("#manage-class-li").click(function () {
                            $.get(home_url + "/?r=ajax/update_order_subject_lesson", {type: "GET"}, function (data) {

                            });
                            //refresh

                            $(".title-manage-class").text("Manage Class");
                            $(".manage-class").removeClass('hidden');
                            $(".manage-edit-class").addClass('hidden');
                            $(".manage-check-class").addClass('hidden');

                            $("#btn-class-created-down").removeClass("btn-down");
                            $("#btn-class-created-down").addClass("btn-assign");
                            $("#open-search-class-created").slideUp("fast");
                            $("#cbinactive").attr("checked", false);
                            $(".inactive-img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png");
                            $("#btn-class-created-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#tab-class-created-all").addClass("active");
                            $(".tab-pub-les").not("#tab-class-created-all").removeClass("active");

                            list_class_created(0, 0, '', '');
                            // 
                            $(".about-manageclass").removeClass("sethidden");
                            $(".about-manageclass").slideDown("fast");
                            $(".arrow-about-manageclass img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            //
                            $(".class-created").removeClass("sethidden");
                            $(".class-created").slideDown("fast");
                            $(".arrow-class-created img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                        });
                        //"Add Subject or Lesson" arrow's event on Create Class
                        $(".arrow-class-created").click(function () {
                            //refresh
                            $("#btn-class-created-down").removeClass("btn-down");
                            $("#btn-class-created-down").addClass("btn-assign");
                            $("#open-search-class-created").slideUp("fast");
                            $("#cbinactive").attr("checked", false);
                            $(".inactive-img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png");
                            $("#btn-class-created-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#tab-class-created-all").addClass("active");
                            $(".tab-pub-les").not("#tab-class-created-all").removeClass("active");

                            list_class_created(0, 0, '', '');
                            if ($(".class-created").hasClass("sethidden")) {
                                $(".class-created").removeClass("sethidden");
                                $(".class-created").slideDown("fast");
                                $(".arrow-class-created img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $(".class-created").addClass("sethidden");
                                $(".class-created").slideUp("fast");
                                $(".arrow-class-created img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //"Search" button's event of Manage Class
                        $("#btn-class-created-down").click(function () {
                            if ($("#btn-class-created-down").hasClass("btn-assign")) {
                                $("#btn-class-created-down").removeClass("btn-assign");
                                $("#btn-class-created-down").addClass("btn-down");
                                $("#open-search-class-created").slideDown("fast");
                                $("#btn-class-created-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");

                                get_category_class('select-class-created');
                            } else
                            {
                                $("#btn-class-created-down").removeClass("btn-down");
                                $("#btn-class-created-down").addClass("btn-assign");
                                $("#open-search-class-created").slideUp("fast");
                                $("#btn-class-created-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#search-class-created").val("");
                            }
                        });
                        // function get class created list
                        function list_class_created(cate, active, name_search, cate_search) {
                            var tbody = "#table-class-created";
                            var html = '';
                            $(tbody).html(html);
                            $.get(home_url + "/?r=ajax/get_homwework_class", {cate: cate, active: active, name_search: name_search, cate_search: cate_search}, function (data) {
                                //  console.log(data);
                                if (data == "null") {
                                    html += '<tr>';
                                    html += '<td style="border-right:none;"></td>';
                                    html += '<td colspan="5">No result.</td>';
                                    html += '</tr>';
                                } else {
                                    data = JSON.parse(data);
                                    $.each(data, function (i, v) {
                                        //var day = new Date(v.created_on);
                                        //var date = day.getDate(day);
                                        //var month = day.getMonth(day);
                                        //var year = day.getFullYear(day);
                                        //day = year + "-" + month + "-" + date;
                                        html += '<tr>';
                                        html += '<td class="active-img-icon ">';
                                        html += '<input type="checkbox" class="hidden toggle-active-input" id="active-input' + v.id + '" checked ';
                                        if (v.active == 1)
                                            html += 'value="1"';
                                        else
                                            html += ' value="0"';
                                        html += 'data-cid="' + v.id + '">';
                                        if (v.active == 1) {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Class_Active.png" class="toggle-active" alt="Active"/></td>';
                                        } else {
                                            html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Class_In-Active.png" class="toggle-active" alt="Active"/></td>';
                                        }
                                        if (v.cate_id == 1) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="type-english"/></td>';
                                        } else if (v.cate_id == 2) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="Type_Science"/></td>';
                                        } else if (v.cate_id == 3) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="Type_History"/></td>';
                                        } else if (v.cate_id == 4) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="Type_Art_n_Design"/></td>';
                                        } else if (v.cate_id == 5) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="icon_MATH"/></td>';
                                        } else if (v.cate_id == 6) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="Type_Music"/></td>';
                                        } else {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="Type_Others"/></td>';
                                        }
                                        html += '<td class="class-name-created">' + v.name + '</td>';
                                        html += '<td>' + v.count_std + '</td>';
                                        html += '<td>' + v.created_on + '</td>';
                                        html += '<td class="table-img-icon"><button  class="border-btn btn-icon-orange check-class-btn" data-id="' + v.id + '" data-name="' + v.name + '" data-std="' + v.count_std + '" data-msg="' + v.count_mess + '" data-tutor="' + v.count_tutor + '" data-price="' + v.sum_price + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Go.png" alt="Edit_Gear"/></button>';
                                        html += '<button class="border-btn btn-icon-blue edit-class-btn" data-id="' + v.id + '" data-name="' + v.name + '" data-cate="' + v.cate_id + '" data-desc="' + v.desc + '" data-pass="' + v.password + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Edit_Gear.png" alt="Edit_Gear"/></button></td>';
                                        html += '</tr>';
                                    });
                                }
                                $(tbody).html(html);

                            });
                        }
                        //Toggle button of "Inactive" on Class Created
                        $("#cbinactive").click(function () {
                            var check = $(this).is(":checked");
                            if (check == false) {
                                if ($("#tab-class-created-math").hasClass("active")) {
                                    list_class_created(5, 0, '', '');
                                } else if ($("#tab-class-created-eng").hasClass("active")) {
                                    list_class_created(1, 0, '', '');
                                } else
                                {
                                    list_class_created(0, 0, '', '');
                                }
                                $(this).parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png");
                            } else {

                                if ($("#tab-class-created-math").hasClass("active")) {
                                    list_class_created(5, 1, '', '');
                                } else if ($("#tab-class-created-eng").hasClass("active")) {
                                    list_class_created(1, 1, '', '');
                                } else
                                {
                                    list_class_created(0, 1, '', '');
                                }

                            }
                        });
                        //event of "Create Class" button
                        $("#goto-createclass").click(function () {
                            $("#my-account-modal").scrollTop(0);
                            $("#create-class-li").parent().addClass("active");
                            $("#manage-class-li").parent().removeClass("active");
                            $("#manage-class").removeClass("active in");
                            $("#create-class").addClass("active in");
                            //refresh 
                            //$(".table-prerequisite").addClass("hidden");
                            $("#detail-tutoring2").load(location.href + " #detail-tutoring2>*", "");
                            //$(".explain-class").load(location.href+" .explain-class>*","");
                            //$(".explain-class").load(" .explain-class > *");
                            //$(".table-sub-less").html("");
                            //$(".table-sub-less-prerequisite").html("");
                            $("#select-all-less5").attr("checked", false);
                            $(".lesson-detail-sub").removeClass("active");
                            $(".lesson-detail-sub").slideUp("slow");
                            $("#icon-open-from-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-less3").html('');
                            $("#select-all-add-sub").attr("checked", false);
                            $(".sub-detail").removeClass("active");
                            $(".sub-detail").slideUp("slow");
                            $("#icon-add-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-sub").html('');
                            //
                            $(".clear-text").val('');
                            $('#post_message2_ifr').contents().find('#tinymce').text('');
                            //
                            $(".explain-class").removeClass("sethidden");
                            $(".explain-class").slideDown("fast");
                            $(".arrow-explain-class img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            //
                            $(".detail-tutoring").removeClass("sethidden");
                            $(".detail-tutoring").slideDown("fast");
                            $(".arrow-tutoring-class img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            //
                            $(".add-sub-lesson").removeClass("sethidden");
                            $(".add-sub-lesson").slideDown("fast");
                            $(".arrow-add-sub-lesson img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                        });
                        //show list All Class created 
                        $("#tab-class-created-all").click(function () {
                            $(".search-tit").val("");
                            var check = $("#cbinactive").is(":checked");
                            if (check == false) {
                                list_class_created(0, 0, '', '');
                            } else {
                                list_class_created(0, 1, '', '');
                            }
                        });
                        //show list Class created English
                        $("#tab-class-created-eng").click(function () {
                            $("#btn-class-created-down").removeClass("btn-down");
                            $("#btn-class-created-down").addClass("btn-assign");
                            $("#open-search-class-created").slideUp("fast");
                            $("#btn-class-created-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#btn-class-created-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $(".search-tit").val("");
                            var check = $("#cbinactive").is(":checked");
                            if (check == false) {
                                list_class_created(1, 0, '', '');
                            } else {
                                list_class_created(1, 1, '', '');
                            }
                        });
                        //show list Class created math
                        $("#tab-class-created-math").click(function () {
                            $(".search-tit").val("");
                            $("#btn-class-created-down").removeClass("btn-down");
                            $("#btn-class-created-down").addClass("btn-assign");
                            $("#open-search-class-created").slideUp("fast");
                            $("#btn-class-created-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            $("#btn-class-created-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            var check = $("#cbinactive").is(":checked");
                            if (check == false) {
                                list_class_created(5, 0, '', '');
                            } else {
                                list_class_created(5, 1, '', '');
                            }

                        });
                        $(".toggle-active").live("click", function () {
                            $(this).parent().find(".toggle-active-input").click();

                            var value = $(this).parent().find(".toggle-active-input").val();
                            var cid = $(this).parent().find(".toggle-active-input").attr("data-cid");
                            $("#yes-active").attr("data-active", value);
                            $("#yes-active").attr("data-cid", cid);


                            if (value == 0) {

                                $(".box-title-active").html("Do you want to make the class ACTIVE?");
                                $("#modal-active-yesno").css("display", "block");
                            } else {
                                $(".box-title-active").html("Do you want to make the class INACTIVE?");
                                $("#modal-active-yesno").css("display", "block");
                            }
                        });
                        //button "No" active
                        $("#no-active").click(function () {
                            $("#modal-active-yesno").css("display", "none");
                        });
                        $("#yes-active").click(function () {

                            var value = $(this).attr("data-active");
                            var cid = $(this).attr("data-cid");
                            $("#modal-active-yesno").css("display", "none");
                            $.get(home_url + "/?r=ajax/update_active", {active: value, id: cid}, function (data) {
                                if (value == 0) {
                                    $("#active-input" + cid).val(1);
                                    $('#active-input' + cid).parent().find(".toggle-active").attr("src", '<?php echo get_template_directory_uri(); ?>/library/images/Class_Active.png');
                                } else {
                                    $("#active-input" + cid).val(0);
                                    $('#active-input' + cid).parent().find(".toggle-active").attr("src", '<?php echo get_template_directory_uri(); ?>/library/images/Class_In-Active.png');
                                }
                                var check = $("#cbinactive").is(":checked");
                                if (check == false) {
                                    if ($("#tab-class-created-math").hasClass("active")) {
                                        list_class_created(5, 0, '', '');
                                    } else if ($("#tab-class-created-eng").hasClass("active")) {
                                        list_class_created(1, 0, '', '');
                                    } else
                                    {
                                        list_class_created(0, 0, '', '');
                                    }


                                } else {
                                    if ($("#tab-class-created-math").hasClass("active")) {
                                        list_class_created(5, 1, '', '');
                                    } else if ($("#tab-class-created-eng").hasClass("active")) {
                                        list_class_created(1, 1, '', '');
                                    } else
                                    {
                                        list_class_created(0, 1, '', '');
                                    }
                                }
                            });

                        });

                        //edit class
                        $(".edit-class-btn").live("click", function () {
                            var gid = $(this).attr("data-id");
                            var gname = $(this).attr("data-name");
                            var cate_id = $(this).attr("data-cate");
                            var desc = $(this).attr("data-desc");
                            var pass = $(this).attr("data-pass");
                            $(".title-manage-class").text("Class Edit");
                            $("#edit-class-name").val(gname);
                            $("#edit-class-name").attr("data-gid", gid);
                            $("#class-name-edit").val(gname);
                            $("#current-pass").val(pass);
                            $("#btn-delete-class").attr("data-gid", gid);
                            $("#btn-delete-class").attr("data-pass", pass);
                            $("#current-pass").attr("data-val", pass);
                            $("#desc_edit_class_ifr").contents().find('#tinymce').text(desc);

                            $(".manage-class").addClass('hidden');
                            $(".manage-edit-class").removeClass('hidden');
                            $("#my-account-modal").scrollTop(0);
                            //refresh
                            $(".refresh-edit-class").removeClass("sethidden");
                            $(".refresh-edit-class").slideDown("fast");
                            $(".refresh-edit-class-img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            $.get(home_url + "/?r=ajax/get_cate", {id: cate_id}, function (data) {
                                $('#select-type-edit-class').html(data).data("selectBox-selectBoxIt").refresh();
                            });
                            $.get(home_url + "/?r=ajax/get_tutor_group", {gid: gid}, function (data) {
                                if (data != '') {
                                    data = JSON.parse(data);
                                    $.each(data, function (i, v) {
                                        if (v.tutor_id == 1) {
                                            $("#cbcharse-engskill2").attr("checked", true);
                                            $("#cbcharse-engskill2").attr("data-id", v.id);
                                            $("#price-eng-writing2").val(v.tutor_price);
                                            $("#cbcharse-engskill2").parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png");
                                            $("#price-eng-writing2").parent().css("display", "block");
                                            $("#cbcharse-engskill2").parent().find(".no-charse").css("display", "none");
                                        }
                                        if (v.tutor_id == 2) {
                                            $("#cbcharse-engprac2").attr("checked", true);
                                            $("#cbcharse-engprac2").attr("data-id", v.id);
                                            $("#price-eng-conversation2").val(v.tutor_price);
                                            $("#cbcharse-engprac2").parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png");
                                            $("#price-eng-conversation2").parent().css("display", "block");
                                            $("#cbcharse-engprac2").parent().find(".no-charse").css("display", "none");
                                        }
                                        if (v.tutor_id == 3) {
                                            $("#cbcharse-generaleng2").attr("checked", true);
                                            $("#cbcharse-generaleng2").attr("data-id", v.id);
                                            $("#price-eng2").val(v.tutor_price);
                                            $("#general-eng2").val(v.tutor_subject);
                                            $("#cbcharse-generaleng2").parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png");
                                            $("#price-eng2").parent().css("display", "block");
                                            $("#cbcharse-generaleng2").parent().find(".no-charse").css("display", "none");
                                            $("#general-eng2").attr("readonly", false);
                                        }
                                        if (v.tutor_id == 4) {
                                            $("#cbcharse-mathelement2").attr("checked", true);
                                            $("#cbcharse-mathelement2").attr("data-id", v.id);
                                            $("#price-math2").val(v.tutor_price);
                                            $("#cbcharse-mathelement2").parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png");
                                            $("#price-math2").parent().css("display", "block");
                                            $("#cbcharse-mathelement2").parent().find(".no-charse").css("display", "none");
                                        }
                                        if (v.tutor_id == 5) {
                                            $("#cbcharse-mathlevel2").attr("checked", true);
                                            $("#cbcharse-mathlevel2").attr("data-id", v.id);
                                            $("#price-math-level2").val(v.tutor_price);
                                            $("#cbcharse-mathlevel2").parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png");
                                            $("#price-math-level2").parent().css("display", "block");
                                            $("#cbcharse-mathlevel2").parent().find(".no-charse").css("display", "none");
                                        }
                                        if (v.tutor_id == 6) {
                                            $("#cbcharse-generalmath2").attr("checked", true);
                                            $("#cbcharse-generalmath2").attr("data-id", v.id);
                                            $("#price-math-general2").val(v.tutor_price);
                                            $("#general-math2").val(v.tutor_subject);
                                            $("#cbcharse-generalmath2").parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png");
                                            $("#price-math-general2").parent().css("display", "block");
                                            $("#cbcharse-generalmath2").parent().find(".no-charse").css("display", "none");
                                            $("#general-math2").attr("readonly", false);
                                        }
                                    });
                                }
                            });
                            //refresh 
                            //$(".table-prerequisite").addClass("hidden");
                            $(".clear-text").val("");
                            //$(".explain-class").load(location.href+" .explain-class>*","");
                            //$(".explain-class").load(" .explain-class > *");
                            //$(".table-sub-less").html("");
                            //$(".table-sub-less-prerequisite").html("");
                            $("#select-all-less6").attr("checked", false);
                            $(".lesson-detail-sub2").removeClass("active");
                            $(".lesson-detail-sub2").slideUp("slow");
                            $("#icon-open-from-lesson2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-less4").html('');
                            $("#select-all-add-sub2").attr("checked", false);
                            $(".sub-detail").removeClass("active");
                            $(".sub-detail").slideUp("slow");
                            $("#icon-add-sub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-sub2").html('');
                            //

                        });
                        //icon close in Edit Class
                        $(".icon-close-edit-class").live("click", function () {
                            $("#manage-class-li").click();
                            $("#edit-tutoring").load(location.href + " #edit-tutoring>*", "");
                        });
                        //"Edit Class Information" arrow's event on Edit Class
                        $(".arrow-class-inf").click(function () {
                            get_category('select-type-edit-class');
                            $(".clear-text").val("");
                            if ($(".class-information").hasClass("sethidden")) {
                                $(".class-information").removeClass("sethidden");
                                $(".class-information").slideDown("fast");
                                $(".arrow-class-inf img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");

                            } else {
                                $(".class-information").addClass("sethidden");
                                $(".class-information").slideUp("fast");
                                $(".arrow-class-inf img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //"Edit Class Assignment" arrow's event on Edit Class
                        $(".arrow-edit-assignment").click(function () {
                            if ($(".edit-assignment").hasClass("sethidden")) {
                                $(".edit-assignment").removeClass("sethidden");
                                $(".edit-assignment").slideDown("fast");
                                $(".arrow-edit-assignment img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $(".edit-assignment").addClass("sethidden");
                                $(".edit-assignment").slideUp("fast");
                                $(".arrow-edit-assignment img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //"Edit Tutoring" arrow's event on Edit Class
                        $(".arrow-edit-tutoring").click(function () {
                            if ($("#edit-tutoring").hasClass("sethidden")) {
                                $("#edit-tutoring").removeClass("sethidden");
                                $("#edit-tutoring").slideDown("fast");
                                $(".arrow-edit-tutoring img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $("#edit-tutoring").addClass("sethidden");
                                $("#edit-tutoring").slideUp("fast");
                                $(".arrow-edit-tutoring img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //"Deleting the Class" arrow's event on Edit Class
                        $(".arrow-detete-class").click(function () {
                            $("#detete-class").load(location.href + " #detete-class>*", "");
                            if ($(".detete-class").hasClass("sethidden")) {
                                $(".detete-class").removeClass("sethidden");
                                $(".detete-class").slideDown("fast");
                                $(".arrow-detete-class img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $(".detete-class").addClass("sethidden");
                                $(".detete-class").slideUp("fast");
                                $(".arrow-detete-class img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //toggle button change password
                        $("#cb-changepass").click(function () {
                            var check = $(this).is(":checked");
                            var pass = $("#current-pass").attr("data-val");
                            if (check == false) {
                                $("#type-password3").attr("readonly", true);
                                $("#retype-password3").attr("readonly", true);
                                $("#current-pass").val("No Password");
                                $(this).parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_OFF_all.png");
                            } else {
                                $("#type-password3").attr("readonly", false);
                                $("#retype-password3").attr("readonly", false);
                                $("#current-pass").val(pass);
                                $(this).parent().find("img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Switch_ON_all.png");
                            }
                        });

                        //event open  My Lesson of Add Lesson From My Lesson on Edit Class
                        $("#icon-open-from-lesson2, #from-my-lesson2").live("click", function () {
                            $("#table-my-lesson").html('');
                            var check = $(".lesson-detail-sub2").hasClass("active");
                            if (check == false) {
                                $(".lesson-detail-sub2").addClass(" active");
                                $(".lesson-detail-sub2").slideDown("slow");
                                $("#icon-open-from-lesson2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_up.png");
                                $("#select-assign-lesson2").slideUp("fast");
                                $(".sub-detail").removeClass("active");
                                $(".sub-detail").hide();
                                $("#icon-add-sub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#select-all-less6").attr("checked", false);
                                $("#option-detail-less2").addClass(" hidden");
                                $("#btn-assign-lesson-down2").removeClass("btn-down");
                                $("#btn-assign-lesson-down2").addClass("btn-assign");
                                var text = '';
                                $("#table-less4").html('');
                                var table = "table-less4";
                                get_my_lesson2(text, table);
                            } else {
                                $("#select-all-less6").attr("checked", false);
                                $(".lesson-detail-sub2").removeClass("active");
                                $(".lesson-detail-sub2").slideUp("slow");
                                $("#icon-open-from-lesson2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-less4").html('');
                            }
                        });
                        // "Select All" checkbox's event of Add Lesson in Edit Class
                        $("#select-all-less6").click(function () {
                            if ($("#select-all-less6").is(":checked")) {
                                $(".option-input-lesson-check").attr("checked", true);
                            } else
                                $(".option-input-lesson-check").attr("checked", false);
                        });
                        //"Search and Assign Lesson" button's event of Add lesson From My Lesson in Edit Class
                        $("#btn-assign-lesson-down2").click(function () {
                            if ($("#btn-assign-lesson-down2").hasClass("btn-assign")) {
                                $("#btn-assign-lesson-down2").removeClass("btn-assign");
                                $("#btn-assign-lesson-down2").addClass("btn-down");
                                $("#select-assign-lesson2").slideDown("fast");

                            } else {
                                $("#btn-assign-lesson-down2").removeClass("btn-down");
                                $("#btn-assign-lesson-down2").addClass("btn-assign");
                                $("#select-assign-lesson2").slideUp("fast");
                            }
                        });
                        //"Search" button event of Add Lesson From My Lesson on Edit Class
                        $("#search-btn-lesson2").click(function () {
                            var search = $("#search-lesson3").val();
                            var tbody_my_lesson = "table-less4";
                            get_my_lesson2(search, tbody_my_lesson);
                        });
                        //order My lesson on Add lesson From My Lesson
                        $("#icon-option-less4").click(function () {
                            var sort = $(this).attr("data-sort");
                            $.post(home_url + "/?r=ajax/get_my_lesson", {sort: sort}, function (data) {
                                $("#table-less4").html('');
                                if (data !== "0") {
                                    if (sort == "upward") {
                                        $("#icon-option-less4").attr("data-sort", "downward");
                                        $(".img-sort-lesson4").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                    } else if (sort == "downward") {
                                        $("#icon-option-less4").attr("data-sort", "upward");
                                        $(".img-sort-lesson4").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                    }
                                    var html = '';
                                    data = JSON.parse(data);
                                    if (data.publesson != null) {
                                        if (data.publesson.length > 0) {
                                            $.each(data.publesson, function (i, v) {
                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" data-public="1" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 8) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Dictionary.png" alt="lesson" >';
                                                } else if (v.cate == 9) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Self-study.png" alt="lesson" >';
                                                } else if (v.cate == 10) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_SAT.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-ready-lesson my-public-lesson2" data-lid="' + v.id + '" data-gid="' + v.group_id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                if (v.price != 0) {
                                                    html += '<div class="price-lesson"><span class="">$</span>' + v.price + ' </div>';
                                                } else {
                                                    html += '<div class="price-lesson"><span class="">FREE</div>';
                                                }
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.lesson != null) {
                                        if (data.lesson.length > 0) {
                                            $.each(data.lesson, function (i, v) {
                                                html += '<tr id="lesson-tr' + v.id + '" class="lesson-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-input-lesson-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" class="" alt="lesson" >';
                                                html += '<span class="name-lesson my-lesson-ws2" data-lid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="desc-my-lesson" data-lid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    $("#table-less4").html(html);
                                } else {
                                    html += '<tr id="lesson-tr" class="lesson-tr">';
                                    html += '<td></td><td colspan="4">No results.</td></tr>';
                                    $("#table-less4").html(html);
                                }

                            });
                        });
                        //event open  My SUbject of Add Subject From My Subject on Create Class
                        $("#icon-add-sub2, #from-my-subject2").live("click", function () {
                            $("#table-my-subject").html('');
                            var check = $(".sub-detail").hasClass("active");
                            if (check == false) {
                                $(".sub-detail").addClass(" active");
                                $(".sub-detail").slideDown("slow");
                                $("#icon-add-sub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_up.png");
                                $("#select-assign-sub3").slideUp("fast");
                                $(".lesson-detail-sub2").removeClass("active");
                                $(".lesson-detail-sub2").hide();
                                $("#icon-open-from-lesson2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#select-all-add-sub2").attr("checked", false);
                                $("#option-detail-less2").addClass(" hidden");
                                $("#search-add-sub2").removeClass("btn-down");
                                $("#search-add-sub2").addClass("btn-assign");
                                var text = '';
                                $("#table-sub2").html('');
                                var table = "table-sub2";
                                get_my_subject2(text, table);
                            } else {
                                $("#select-all-add-sub2").attr("checked", false);
                                $(".sub-detail").removeClass("active");
                                $(".sub-detail").slideUp("slow");
                                $("#icon-add-sub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-sub2").html('');
                            }
                        });
                        //"Search and Assign Lesson" button's event of Add Subject From My Subject in Edit Class
                        $("#search-add-sub2").click(function () {
                            $("#val-search-subject2").val('');
                            if ($("#search-add-sub2").hasClass("btn-assign")) {
                                $("#search-add-sub2").removeClass("btn-assign");
                                $("#search-add-sub2").addClass("btn-down");
                                $("#select-assign-sub3").slideDown("fast");
                                $("#val-search-subject2").val('');
                            } else {
                                $("#search-add-sub2").removeClass("btn-down");
                                $("#search-add-sub2").addClass("btn-assign");
                                $("#select-assign-sub3").slideUp("fast");
                            }
                        });
                        //"Select All" checkbox of Add Subject From My Subject on Edit Class
                        $("#select-all-add-sub2").click(function () {
                            if ($("#select-all-add-sub2").is(":checked")) {

                                $(".option-sub-check").attr("checked", true);
                            } else
                                $(".option-sub-check").attr("checked", false);
                        });
                        //sort subject on my Subject
                        $("#icon-option-subject3").click(function () {
                            var sort = $(this).attr("data-sort");
                            $.post(home_url + "/?r=ajax/get_my_subject", {sort: sort}, function (data) {
                                $("#table-sub2").html('');
                                if (data !== "0") {
                                    if (sort == "upward") {
                                        $("#icon-option-subject3").attr("data-sort", "downward");
                                        $(".img-sort-subject2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Oldest.png");
                                    } else if (sort == "downward") {
                                        $("#icon-option-subject3").attr("data-sort", "upward");
                                        $(".img-sort-subject2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/icon_Newest.png");
                                    }
                                    var html = '';
                                    data = JSON.parse(data);
                                    if (data.new != null) {
                                        if (data.new.length > 0) {
                                            $.each(data.new, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }

                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" class="" alt="lesson" >';
                                                html += '<span class="name-course lst-pub-subject2" data-subid="' + v.id + '" data-type="' + v.type_id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="detail-subject" data-subid="' + v.id + '" data-desc="' + v.description + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                if (v.price != 0) {
                                                    html += '<div class="price-subject"><span class="">$</span>' + v.price + ' </div>';
                                                } else {
                                                    html += '<div class="price-subject"><span class="">FREE</div>';
                                                }
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                    if (data.subject != null) {
                                        if (data.subject.length > 0) {
                                            $.each(data.subject, function (i, v) {
                                                html += '<tr id="subj-tr' + v.id + '" class="subj-tr">';
                                                html += '<td>';
                                                html += ' <div class="cb-type2">';
                                                html += ' <label>';
                                                html += '<input type="checkbox" class="radio_buttons class_cb_search option-input-2 option-input-lesson option-sub-check radio" value="' + v.id + '" data-name="' + v.name + '" name="select-tr"/>';
                                                html += ' </label>';
                                                html += '</div>';
                                                html += ' </td>';
                                                html += '<td class="table-img-icon">';
                                                if (v.cate == 1) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                                } else if (v.cate == 5) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                                } else if (v.cate == 2) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                                } else if (v.cate == 3) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                                } else if (v.cate == 4) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                                } else if (v.cate == 6) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                                } else if (v.cate == 7) {
                                                    html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                                }
                                                html += '</td>';
                                                html += '<td class="table-img-icon">';
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MySubject.png" class="" alt="lesson" >';
                                                html += '<span class="name-subject lst-sub-lesson2" data-subid="' + v.id + '">' + v.name + '</span>';
                                                html += ' </td>';
                                                if (v.type == "T")
                                                    html += '<td class="table-img-icon">Test</td>';
                                                else if (v.type == "P") {
                                                    html += '<td class="table-img-icon">Practice</td>';
                                                } else {
                                                    html += '<td class="table-img-icon"> </td>';
                                                }
                                                html += '<td class="table-img-icon">';
                                                html += '<div class="detail-subject" data-subid="' + v.id + '" data-desc="' + v.description + '" ><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Detail_1.png" class="" alt="lesson" ></div>';
                                                html += '</td>';
                                                html += '</tr>';
                                            });
                                        }
                                    }
                                } else {
                                    var html = '';
                                    html += '<tr><td colspan="5">No results.</td>';
                                    html += '</tr>';
                                }
                                $("#table-sub2").append(html);
                            });
                        });
                        //event for search button subject on Add Subject Edit Class
                        $("#search-btn-subject3").live("click", function () {

                            var search = $("#val-search-subject2").val();
                            get_my_subject2(search, "table-sub2");
                        });
                        //them subject vaf lesson vao danh sach tren Check Class
                        $("#btn-add-prerequisite2").click(function () {
                            var gid = $("#check-class-name").attr("data-gid");
                            //$(".table-prerequisite").removeClass("hidden");
                            var selected = new Array();
                            $(".option-input-lesson-check:checked").each(function () {
                                var id = $(this).val();
                                selected.push({id: id, type: "Lesson", priority: 1, price: 0});
                            });
                            $(".option-sub-check:checked").each(function () {
                                var id = $(this).val();
                                selected.push({id: id, type: "Subject", priority: 1, price: 0});
                            });
                            $.post(home_url + "/?r=ajax/update_class", {homework: selected, gid: gid}, function (data) {
                                get_subject_lesson_class(gid);
                                $("#select-all-less6").attr("checked", false);
                                $(".lesson-detail-sub2").removeClass("active");
                                $(".lesson-detail-sub2").slideUp("slow");
                                $("#icon-open-from-lesson2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-less4").html('');
                                $("#select-all-add-sub2").attr("checked", false);
                                $(".sub-detail").removeClass("active");
                                $(".sub-detail").slideUp("slow");
                                $("#icon-add-sub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-sub2").html('');
                            });
                        });
                        //them subject vaf lesson vao danh sach tren Check Class
                        $("#btn-add-list2").click(function () {
                            var gid = $("#check-class-name").attr("data-gid");
                            $(".table-sub-less2").removeClass("hidden");
                            var selected = new Array();
                            $(".option-input-lesson-check:checked").each(function () {
                                var id = $(this).val();
                                selected.push({id: id, type: "Lesson", priority: 0, price: 0});
                            });
                            $(".option-sub-check:checked").each(function () {
                                var id = $(this).val();
                                selected.push({id: id, type: "Subject", priority: 0, price: 0});
                            });
                            $.post(home_url + "/?r=ajax/update_class", {homework: selected, gid: gid}, function (data) {
                                get_subject_lesson_class(gid);
                                $("#select-all-less6").attr("checked", false);
                                $(".lesson-detail-sub2").removeClass("active");
                                $(".lesson-detail-sub2").slideUp("slow");
                                $("#icon-open-from-lesson2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-less4").html('');
                                $("#select-all-add-sub2").attr("checked", false);
                                $(".sub-detail").removeClass("active");
                                $(".sub-detail").slideUp("slow");
                                $("#icon-add-sub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                $("#table-sub2").html('');
                            });
                        });
                        //delete class
                        $('#btn-delete-class').live("click", function () {
                            var gid = $(this).attr("data-gid");
                            var pass = $("#type-current-password").val();
                            var repass = $("#retype-current-password").val();
                            var current_pass = $(this).attr("data-pass");
                            if (current_pass != '') {
                                if (pass == '') {
                                    var html = 'Please type in passwords';
                                    $(".box-title-1").html(html);
                                    $("#modal-alert").css('display', 'block');
                                } else {
                                    if (pass == repass) {
                                        if (current_pass == pass) {
                                            $("#yes-delete").attr("data-pass", pass);
                                            $("#yes-delete").attr("data-deleteClass", gid);
                                            var html = '';
                                            html += 'Are you sure you want to delete the class permanently?';
                                            $("#modal-alert-yesno .box-title-1").html(html);
                                            $("#modal-alert-yesno").css('display', 'block');
                                        } else {
                                            var html = 'The password is incorrect';
                                            $(".box-title-1").html(html);
                                            $("#modal-alert").css('display', 'block');
                                        }
                                    } else {
                                        var html = "The password isn't match";
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                    }

                                }
                            } else {
                                $("#yes-delete").attr("data-pass", pass);
                                $("#yes-delete").attr("data-deleteClass", gid);
                                var html = '';
                                html += 'Are you sure you want to delete the class permanently?';
                                $("#modal-alert-yesno .box-title-1").html(html);
                                $("#modal-alert-yesno").css('display', 'block');
                            }

                        });
                        //button create class
                        $("#btn-create-class").live("click", function () {
                            var class_name = $("#group-name2").val();
                            var cate_id = $("#select-type-explain-classSelectBoxItText").attr("data-val");
                            var desc = $('#post_message2_ifr').contents().find('#tinymce').text();
                            var pass = $("#type-password2").val();
                            var repass = $("#retype-password2").val();
                            var selected = new Array();
                            $(".clear-text").val('');
                            $('#post_message2_ifr').contents().find('#tinymce').text('');
                            $(".class_homework:checked").each(function () {
                                var id = $(this).attr("data-id");
                                var type = $(this).attr("data-type");
                                var priority = $(this).attr("data-priority");
                                var nopriority = $(this).attr("data-no-priority");
                                var price = $(this).closest("tr").find(".price-homework").val();
                                var priority1;
                                if (priority != null && nopriority == "null") {
                                    priority1 = 1;
                                } else {
                                    priority1 = 0;
                                }
                                var cate = $(this).attr("data-cate");
                                selected.push({id: id, type: type, priority: priority1, cate: cate, price: price});

                            });
                            var tutor = new Array();
                            $(".check-toggle:checked").each(function () {
                                var price = $(this).closest(".option-tutoring2").find(".price_subject").val();
                                var name = $(this).closest(".option-tutoring2").find(".add-subject-tutor").val();
                                var id = $(this).val();
                                tutor.push({id: id, price: price, name: name});
                            });

                            var msg = '';                                
                            var form_valid = true;

                            if(class_name == '' || $.trim(class_name) == ''){
                                msg += 'Please enter Class Name</br>';
                                form_valid = false;
                            }
                            if(cate_id == '' || $.trim(cate_id) == ''){
                                msg += 'Please choose Type of Class</br>';
                                form_valid = false;
                            }
                            if(desc == '' || $.trim(desc) == ''){
                                msg += 'Please enter Short description</br>';
                                form_valid = false;
                            }

                            if(pass != '' || $.trim(pass) != ''){
                                if (pass != repass) {
                                    msg += 'Password not match</br>';
                                    form_valid = false;
                                }
                            }

                            if (form_valid) {
                                $("#select-type-explain-class").selectBoxIt('selectOption','0').data("selectBox-selectBoxIt");
                                $("#select-type-explain-class").data("selectBox-selectBoxIt").refresh();
                                $.post(home_url + "/?r=ajax/create_class", {name: class_name, cate: cate_id, desc: desc, pass: pass, data: selected, tutor: tutor}, function (data) {
                                    if (data == 1) {
                                        //refresh 
                                        //$(".table-prerequisite").addClass("hidden");
                                        $("#detail-tutoring2").load(location.href + " #detail-tutoring2>*", "");
                                        //$(".explain-class").load(location.href+" .explain-class>*","");
                                        //$(".explain-class").load(" .explain-class > *");
                                        //$(".table-sub-less").html("");
                                        //$(".table-sub-less-prerequisite").html("");
                                        $('#post_message2_ifr').contents().find('#tinymce').text('');
                                        $(".clear-text").val('');
                                        $(".price_subject").val('');
                                        $("#cbyesno").attr("checked", false);
                                        $("#select-all-less5").attr("checked", false);
                                        $(".lesson-detail-sub").removeClass("active");
                                        $(".lesson-detail-sub").slideUp("slow");
                                        $("#icon-open-from-lesson").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                        $("#table-less3").html('');
                                        $("#select-all-add-sub").attr("checked", false);
                                        $(".sub-detail").removeClass("active");
                                        $(".sub-detail").slideUp("slow");
                                        $("#icon-add-sub").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                                        $("#table-sub").html('');
                                        //

                                        var html = 'New class has been created! You can find it from Manage Class.';
                                        $(".box-title-1").html(html);
                                        $("#modal-alert").css('display', 'block');
                                        $("#done-btn").attr("data-create-class", 'success');
                                    }
                                });
                            } else {
                                $('#popup-message').html('<p class="text-used">' + msg + '</p><button id="got-it" type="button" class="btn-orange form-control nopadding-r border-btn">OK</button>');
                                $('#top-popup-message').css("display", "block");
                            }
                        });
                        //check class
                        $(".check-class-btn").live("click", function () {
                            var gid = $(this).attr("data-id");
                            var gname = $(this).attr("data-name");
                            if(gname==''){gname='NoName';}
                            var total_std = $(this).attr("data-std");
                            var total_msg = $(this).attr("data-msg");
                            var total_tutor = $(this).attr("data-tutor");
                                                        var sum_price = $(this).attr("data-price");
                                                        if(sum_price=='null'){sum_price=0;}
                            var arr=[gid,gname];
                            $(".title-manage-class").text("Class Check");
                            $("#check-class-name").val(gname);
                            $("#total-std").val(total_std);
                            $("#total-mess").val(total_msg);
                            $("#total_tutor").val(total_tutor);
                            $("#tutor-earing").val(sum_price);
                            $(".manage-class").addClass('hidden');
                            $(".manage-edit-class").addClass('hidden');
                            $(".manage-check-class").removeClass('hidden');
                            $("#my-account-modal").scrollTop(0);
                            $("#check-class-name").attr("data-gid", gid);
                            var table = 'table-std-list';
                            get_student_list(gid, table);
                            var table = 'table-tutor-notify';
                            get_tutor_notify(gid, table);
                            var table = 'table-msg-notify';
                            get_message_notify(arr, table);
                            get_subject_lesson_class(gid);
                            //refresh
                            $(".refresh-edit-class").removeClass("sethidden");
                            $(".refresh-edit-class").slideDown("fast");
                            $(".refresh-edit-class-img img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            $(".clear-text").val("");
                            $("#description_class_ifr").contents().find('#tinymce').text('');
                            //refresh 
                            //$(".table-prerequisite").addClass("hidden");
                            //$(".table-noprerequisite").addClass("hidden");
                            $("#edit-tutoring").load(location.href + " #edit-tutoring>*", "");
                            $("#detete-class").load(location.href + " #detete-class>*", "");
                            //$(".explain-class").load(location.href+" .explain-class>*","");
                            //$(".explain-class").load(" .explain-class > *");
                            //$(".table-sub-less").html("");
                            //$(".table-sub-less-prerequisite").html("");
                            $("#select-all-less6").attr("checked", false);
                            $(".lesson-detail-sub2").removeClass("active");
                            $(".lesson-detail-sub2").slideUp("slow");
                            $("#icon-open-from-lesson2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-less4").html('');
                            $("#select-all-add-sub2").attr("checked", false);
                            $(".sub-detail").removeClass("active");
                            $(".sub-detail").slideUp("slow");
                            $("#icon-add-sub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-sub2").html('');
                            //
                        });
                        //icon close in check Class
                        $("#icon-close-check-class").live("click", function () {
                            $("#manage-class-li").click();
                        });
                        //function get student list
                        function get_student_list(gid, table) {
                            var tbody = "#" + table;
                            var html = html_sl =  '';
                            $(tbody).html(html);
                            $.get(home_url + "/?r=ajax/get_student_group", {gid: gid}, function (data) {

                                if (data != '') {
                                    data = JSON.parse(data);
                                    $.each(data, function (i, v) {
                                        html_sl += '<option value="' + v.id + '">' + v.display_name + '</option>';

                                        html += '<tr>';
                                        html += '<td class="">';
                                        if (v.user_sex == 1) {
                                            html += 'M';
                                        } else if (v.user_sex == 0) {
                                            html += 'F';
                                        } else {
                                            html += 'Unknown';
                                        }
                                        html += '</td>';
                                        html += '<td class="class-name-created prv-message-btn" data-id="' + v.id + '">' + v.display_name + '</td>';
                                        html += '<td>' + v.joined_date + '</td>';

//                                if(v.progress==100)
//                                           html += '<td class="progress-stl"  style="color: #ce851f !important;">Finished</td>';
//                                       else{
                                        html += '<td class="progress-stl" style="color: #ce851f !important;">50<div class="percent-stl">%</div></td>';
                                        // }
                                        html += '<td class="table-img-icon"><button  class="border-btn btn-icon-orange detail-std-btn" data-id="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Go.png" alt="Icon_Go"/></button>';
                                        html += '<button  class="border-btn btn-icon-orange prv-message-btn" data-id="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Mail.png" alt="Icon_Mail"/></button></td>';
                                        html += '</tr>';
                                    });

                                } else {
                                    html += '<tr><td style="border-right:none;"></td><td colspan="4">No result.</td></tr>'
                                }
                                $(tbody).html(html);
                                $('#private-student-list').html(html_sl).data("selectBox-selectBoxIt").refresh();
                                $('#private-student-list2').html(html_sl).data("selectBox-selectBoxIt").refresh();                                
                            });

                        }
                        //function get subject and lesson class
                        function get_subject_lesson_class(gid) {
                            $.get(home_url + "/?r=ajax/get_subject_lesson_class", {gid: gid}, function (data) {
                                //console.log(data);
                                $(".table-sub-less2").html("");
                                $(".table-sub-less-prerequisite2").html("");
                                if (data != "") {
                                    data = JSON.parse(data);
                                    if (data != '') {
                                        $.each(data, function (i, v) {
                                            var html = '';
                                            html += ' <tr >';
                                            html += ' <td style="width:10%" class="table-img-icon">';
                                            html += ' <input type="checkbox" class="hidden class_homework" checked data-id="' + v.id + '" data-type="' + v.identy + '" data-priority="' + v.priority + '" data-no-priority="' + v.no_priority + '" data-cate="' + v.cate + '">';
                                            if (v.cate_id == 1) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="lesson" >';
                                            } else if (v.cate_id == 5) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="lesson" >';
                                            } else if (v.cate_id == 2) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="lesson" >';
                                            } else if (v.cate_id == 3) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="lesson" >';
                                            } else if (v.cate_id == 4) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="lesson" >';
                                            } else if (v.cate_id == 6) {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="lesson" >';
                                            } else {
                                                html += '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="lesson" >';
                                            }
                                            if (v.public_type == "Public Subject") {
                                                html += ' </td><td style="width:65% " class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Public_Subjects.png" alt="lesson"><span class="name-course">' + v.name + '</span></td>';
                                            }
                                            if (v.public_type == "Public Lesson") {
                                                html += ' </td><td style="width:65%" class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Ready-made_lesson.png" alt="lesson"><span class="my-public-lesson">' + v.name + '</span></td>';
                                            }
                                            if (v.public_type == "Subject") {
                                                html += ' </td><td style="width:65%" class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_MySubject.png" alt="lesson"><span class="name-subject">' + v.name + '</span></td>';
                                            }
                                            if (v.public_type == "Lesson") {
                                                html += ' </td><td style="width:65%" class="table-img-icon ">  <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Lesson.png" alt="lesson"><span class="name-lesson">' + v.name + '</span></td>';
                                            }
                                            if (v.type == "T")
                                                html += '<td class="table-img-icon">Test</td>';
                                            else if (v.type == "P") {
                                                html += '<td class="table-img-icon">Practice</td>';
                                            } else {
                                                html += '<td class="table-img-icon"> </td>';
                                            }
                                            html += '<td style="width:10%; padding-right:10px;" class="table-img-icon">';
                                            html += ' <div class="down-homework" data-order="' + v.id + '" data-gid="' + v.group_id + '"> <img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_down.png" class="" alt="lesson" ></div>';
                                            html += ' <div class="up-homework" data-order="' + v.id + '" data-gid="' + v.group_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Move_up.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '<td style="width:10%; " class="">';
                                            html += '<div class="charse-table" style="position:relative;">';
                                            if (v.price == 0 || v.price == null) {
                                                html += ' <input type="text" class="border-ras"  name="price-eng-conver" id="price-homework' + v.id + '" value="FREE">';
                                            } else {
                                                html += ' <input type="text" class="border-ras" id="price-homework' + v.id + '"  name="price-eng-conver" value="' + v.price + '">';
                                            }
                                            html += '<span class="unit">$</span>';
                                            html += ' </div>';
                                            html += ' </td>';
                                            html += '<td style="width:5%" class="table-img-icon">';
                                            html += '<div class="delete-subject" data-gid="' + v.group_id + '" data-sid="' + v.subject_id + '" data-lid="' + v.lesson_id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" class="" alt="lesson" ></div>';
                                            html += ' </td>';
                                            html += '</tr> ';
                                            if (v.priority == 1) {
                                                //$(".table-prerequisite").removeClass("hidden");
                                                $(".table-sub-less-prerequisite2").append(html);
                                            } else {
                                                //$(".table-noprerequisite").removeClass("hidden");
                                                $(".table-sub-less2").append(html);
                                            }
                                        });

                                    } else {

                                    }
                                }
                            });
                        }
                        //function get tutoring notification
                        function get_tutor_notify(gid, table) {
                            var tbody = "#" + table;
                            var html = '';
                            $(tbody).html(html);
                            $.get(home_url + "/?r=ajax/get_tutor_group", {gid: gid}, function (data) {
                                if (data != '') {
                                    data = JSON.parse(data);
                                    $.each(data, function (i, v) {
                                        html += '<tr>';
                                        if (v.cate_id == 1) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ENGLISH.png" alt="type-english"/></td>';
                                        } else if (v.cate_id == 2) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Science.png" alt="Type_Science"/></td>';
                                        } else if (v.cate_id == 3) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_History.png" alt="Type_History"/></td>';
                                        } else if (v.cate_id == 4) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Art_n_Design.png" alt="Type_Art_n_Design"/></td>';
                                        } else if (v.cate_id == 5) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MATH.png" alt="icon_MATH"/></td>';
                                        } else if (v.cate_id == 6) {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Music.png" alt="Type_Music"/></td>';
                                        } else {
                                            html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Type_Others.png" alt="Type_Others"/></td>';
                                        }
                                        html += '<td class="">' + v.tutor_subject + '</td>';
                                        html += '<td class="price-tutor">' + v.tutor_price + '<div class="unit-tutor">$</div></td>';
//                                if (v.new_request == 0)
//                                    html += '<td class="">No Request</td>';
//                                else {
                                        html += '<td class="progress-stl" style="color: #ce851f !important;">3<div class="percent-stl">Request</div></td>';
                                        //}
                                        html += '<td class="table-img-icon"><button  class="border-btn btn-icon-orange check-class-btn check-class-btn1" data-id="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Go.png" alt="Edit_Gear"/></button>  </td>';
                                        html += '</tr>';
                                    });
                                } else {
                                    html += '<tr><td style="border-right:none;"></td><td colspan="4">No result.</td></tr>'
                                }
                                $(tbody).html(html);
                            });
                        }
                        //function get tutoring notification
                        function get_message_notify(gid, table) {
                            var tbody = "#" + table;
                            var html = '';
                            var gid2=gid[0];
                            $(tbody).html(html);
                            $.get(home_url + "/?r=ajax/get_message_group", {gid: gid2}, function (data) {
                                if (data != '') {
                                    data = JSON.parse(data);
                                    $.each(data, function (i, v) {
                                        if(v.private==true){
                                              html += '<tr>';
                                        html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_MyMessage_unselect.png" alt="Type_Others"/></td>';
                                        if(v.status==2){
                                            html += '<td  style="font-weight:bold;"><div class="tit-msg-stl">' + v.subject + '</div></td>';
                                        }else{
                                            html += '<td><div class="tit-msg-stl">' + v.subject + '</div></td>';
                                        }
                                        html += '<td><p class="sender-msg-stl">' + v.posted_by + '</p></td>';
                                        html += '<td>' + v.posted_on + '</td>';
                                        html += '<td class="table-img-icon"><button  class="border-btn btn-icon-orange detail-msg-btn" data-type="private" data-id="' + v.id + '" data-gid="'+gid[0]+'" data-gname="'+gid[1]+'"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Go.png" alt="Edit_Gear"/></button></td>';
                                        html += '</tr>';
                                        }
                                        else{
                                        html += '<tr>';

                                        html += '<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_ClassPosts_unselect.png" alt="Type_Others"/></td>';
                                        if(v.status==2){
                                            html += '<td class="tit-msg-stl" style="font-weight:bold;"><div class="tit-msg-stl">' + v.subject + '</div></td>';
                                        }else{
                                            html += '<td class="tit-msg-stl"><div class="tit-msg-stl">' + v.subject + '</div></td>';
                                        }
                                        html += '<td><p class="sender-msg-stl">' + v.posted_by + '</p></td>';
                                        html += '<td>' + v.posted_on + '</td>';
                                        html += '<td class="table-img-icon"><button  class="border-btn btn-icon-orange detail-msg-btn" data-type="posting" data-id="' + v.id + '" data-gid="'+gid[0]+'" data-gname="'+gid[1]+'"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Go.png" alt="Edit_Gear"/></button></td>';
                                        html += '</tr>';
                                    }
                                    });
                                } else {
                                    html += '<tr><td style="border-right:none;"></td><td colspan="3">No result.</td></tr>'
                                }
                                $(tbody).html(html);
                            });

                        }
                        //"Save" Button in edit class
                        $("#btn-save-edit-class").click(function () {
                            var class_name = $("#class-name-edit").val();
                            var gid = $("#edit-class-name").attr("data-gid");
                            var cate_id = $("#select-type-edit-classSelectBoxItText").attr("data-val");
                            var desc = $('#desc_edit_class_ifr').contents().find('#tinymce').text();
                            var pass = $("#type-password3").val();
                            var repass = $("#retype-password3").val();
                            var tutor = new Array();
                            var tutor2 = new Array();
                            $(".check-toggle2:checked").each(function () {
                                var price = $(this).closest(".option-tutoring2").find(".price_subject2").val();
                                var name = $(this).closest(".option-tutoring2").find("h4").text();
                                var tutor_id = $(this).val();
                                var id = $(this).attr("data-id");
                                if (name == 'General English Skill') {
                                    name = $("#general-eng2").val();
                                }
                                if (name == 'General Math Skill') {
                                    name = $("#general-math2").val();
                                }
                                tutor.push({id: id, tutor_id: tutor_id, price: price, name: name});
                            });
                            $(".check-toggle2").each(function () {
                                var check = $(this).is(":checked");
                                if (check == false) {
                                    var id = $(this).attr("data-id");
                                    tutor2.push({id: id});
                                }
                            });
                            // console.log(tutor2);
                            if (pass != null) {
                                if (pass != repass) {
                                    var html = 'Password not match!';
                                    $(".box-title-1").html(html);
                                    $("#modal-alert").css('display', 'block');
                                } else {
                                    $.post(home_url + "/?r=ajax/edit_class", {gid: gid, name: class_name, cate: cate_id, desc: desc, pass: pass, tutor: tutor, tutor2: tutor2}, function (data) {
                                        //console.log(data);
                                        if (data != '') {
                                            var html = 'Update Successful!';
                                            $(".box-title-1").html(html);
                                            $("#modal-alert").css('display', 'block');
                                            $("#done-btn").attr("data-create-class", 'success');
                                        }
                                    });
                                }
                            }
                        });
                        //check class
                        //"Student List & Activities" arrow's event on Create Class
                        $(".arrow-class-stdlist").click(function () {
                            if ($(".class-student-list").hasClass("sethidden")) {
                                $(".class-student-list").removeClass("sethidden");
                                $(".class-student-list").slideDown("fast");
                                $(".arrow-class-stdlist img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $(".class-student-list").addClass("sethidden");
                                $(".class-student-list").slideUp("fast");
                                $(".arrow-class-stdlist img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //"Tutoring Notification" arrow's event on Create Class
                        $(".arrow-tutor-notify").click(function () {
                            if ($(".tutor-notify").hasClass("sethidden")) {
                                $(".tutor-notify").removeClass("sethidden");
                                $(".tutor-notify").slideDown("fast");
                                $(".arrow-tutor-notify img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $(".tutor-notify").addClass("sethidden");
                                $(".tutor-notify").slideUp("fast");
                                $(".arrow-tutor-notify img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //"Message Notification" arrow's event on Create Class
                        $(".arrow-msg-notify").click(function () {
                            if ($(".message-notify").hasClass("sethidden")) {
                                $(".message-notify").removeClass("sethidden");
                                $(".message-notify").slideDown("fast");
                                $(".arrow-msg-notify img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            } else {
                                $(".message-notify").addClass("sethidden");
                                $(".message-notify").slideUp("fast");
                                $(".arrow-msg-notify img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_down.png");
                            }
                        });
                        //search class created
                        $("#search-class-created-btn").click(function () {
                            var name_search = $("#search-class-created").val();
                            var check = $("#cbinactive").is(":checked");

                            if ($("#tab-class-created-math").hasClass("active")) {
                                if (check == false) {
                                    list_class_created(5, 0, name_search, '');
                                } else {
                                    list_class_created(5, 1, name_search, '');
                                }
                            } else if ($("#tab-class-created-eng").hasClass("active")) {
                                if (check == false) {
                                    list_class_created(1, 0, name_search, '');
                                } else {
                                    list_class_created(1, 1, name_search, '');
                                }
                            } else
                            {
                                if (check == false) {
                                    list_class_created(0, 0, name_search, '');
                                } else {
                                    list_class_created(0, 1, name_search, '');
                                }
                            }
                        });
                        $("#search-type-class-created").click(function () {
                            var cate_search = $("#select-class-createdSelectBoxItText").attr("data-val");
                            var check = $("#cbinactive").is(":checked");
                            if (cate_search == 0) {
                                if ($("#tab-class-created-math").hasClass("active")) {
                                    if (check == false) {
                                        list_class_created(5, 0, '', '');
                                    } else {
                                        list_class_created(5, 1, '', '');
                                    }

                                } else if ($("#tab-class-created-eng").hasClass("active")) {
                                    if (check == false) {
                                        list_class_created(1, 0, '', '');
                                    } else {
                                        list_class_created(1, 1, '', '');
                                    }

                                } else
                                {
                                    if (check == false) {
                                        list_class_created(0, 0, '', '');
                                    } else {
                                        list_class_created(0, 1, '', '');
                                    }

                                }
                            } else {
                                if ($("#tab-class-created-math").hasClass("active")) {
                                    if (check == false) {
                                        list_class_created(5, 0, '', cate_search);
                                    } else {
                                        list_class_created(5, 1, '', cate_search);
                                    }

                                } else if ($("#tab-class-created-eng").hasClass("active")) {
                                    if (check == false) {
                                        list_class_created(1, 0, '', cate_search);
                                    } else {
                                        list_class_created(1, 1, '', cate_search);
                                    }
                                } else
                                {
                                    if (check == false) {
                                        list_class_created(0, 0, '', cate_search);
                                    } else {
                                        list_class_created(0, 1, '', cate_search);
                                    }
                                }
                            }
                        });
                        //order subject class in Check  Class
                        $(".down-homework,.up-homework").live("click", function () {
                            var hid = $(this).attr("data-order");
                            var check = $(this).attr("class");
                            var gid = $(this).attr("data-gid");
                            if (check == 'up-homework')
                                if (check == 'up-homework') {
                                    var type = "up";
                                }
                            if (check == 'down-homework') {
                                var type = "down";
                            }
                            $.post(home_url + "/?r=ajax/update_order_homework", {hid: hid, type: type, gid: gid}, function (data) {
                                //console.log(data);
                                get_subject_lesson_class(gid);
                            });


                        });
                        //save change button on check class
                        $(".btn-save-change-class").click(function () {
                            var arr = new Array();
                            var gid = $("#check-class-name").attr("data-gid");
                            $(".class_homework:checked").each(function () {
                                var id = $(this).attr("data-id");
                                var price = $("#price-homework" + id).val();
                                if (price == "FREE") {
                                    price = 0;
                                }
                                arr.push({price: price, id: id});
                            });
                            $.post(home_url + "/?r=ajax/update_class", {price: arr}, function (data) {
//                                console.log(data);
                                get_subject_lesson_class(gid);
                            });

                        });
                        //order subject and lesson on Create Class
                        $(".up-create-homework,.down-create-homework").live("click", function () {
                            var id = $(this).attr("data-order");
                            var order2 = $(this).attr("data-order2");
                            var type = $(this).attr("data-type");
                            var priority = $(this).attr("data-priority");
                            $.post(home_url + "/?r=ajax/update_order_subject_lesson", {order: id, order2: order2, type: type, prerequisite: priority}, function (data) {
                                //console.log(data);
                                get_list_subject('table-sub-less-prerequisite', 1);
                                get_list_subject('table-sub-less', 0);
                            });
                        });
                        //redirect page
                      
                        //manage class post in manage Class
                        $(".detail-msg-btn").live("click",function(){
                            var gtype=$(this).attr("data-type");
                            var gid=$(this).attr("data-gid");
                            var gname=$(this).attr("data-gname");
                            var gdate = $(this).attr("data-date");
                             if(gname==''){gname='NoName';}
                            $(".title-manage-class").text("Information Center");
                            $("#manage-msg-class-name").val(gname);
                            $(".manage-class").addClass('hidden');
                            $(".manage-check-class").addClass('hidden');
                            $("#my-account-modal").scrollTop(0);
                            $("#manage-msg-class-name").attr("data-gid", gid);
                            $(".manage-class-message").removeClass("hidden");

                            $(".tutoring-active").removeClass("hidden");
                            $(".tutoring-active").addClass("active");
                            $(".tutoring-hidden").removeClass("active");
                            $(".tutoring-hidden").addClass("hidden");
                            
                            $("#class-tutoring-detail").removeClass("active");
                            $("#class-tutoring-detail").addClass("hidden");
                            $("#tab-tutoring").removeClass("active");
                            if(gtype=='posting'){            
                                $(".class-post-hidden").removeClass("active");
                                $(".class-post-hidden").addClass("hidden");
                                $(".class-post-active").removeClass("hidden");
                                $(".class-post-active").addClass("active");

                                $(".my-message-active").removeClass("hidden");
                                $(".my-message-active").addClass("active");
                                $(".my-message-hidden").removeClass("active");
                                $(".my-message-hidden").addClass("hidden");

                                $("#tab-class-post").addClass("active");
                                $("#tab-my-message").removeClass("active");

                                $("#class-post-detail").removeClass("hidden");
                                $("#class-post-detail").addClass("active");
                                $("#class-my-message2").removeClass("active");
                                $("#class-my-message2").addClass("hidden");
                                $(".table-class-posting").removeClass("hidden");
                                $(".sethide-detail").not(".table-class-posting").addClass("hidden");
                            }else{
                                $(".class-post-hidden").removeClass("hidden");
                                $(".class-post-hidden").addClass("active");
                                $(".class-post-active").removeClass("active");
                                $(".class-post-active").addClass("hidden");

                                $(".my-message-active").removeClass("active");
                                $(".my-message-active").addClass("hidden");
                                $(".my-message-hidden").removeClass("hidden");
                                $(".my-message-hidden").addClass("active");

                                $("#tab-class-post").removeClass("active");
                                $("#tab-my-message").addClass("active");

                                $("#class-post-detail").removeClass("active");
                                $("#class-post-detail").addClass("hidden");
                                $("#class-my-message2").removeClass("hidden");
                                $("#class-my-message2").addClass("active");
                                
                                $(".table-receive-message").removeClass("hidden");
                                $(".sethide-detail").not(".table-receive-message").addClass("hidden");
                            }                            
                           get_message_class(gid);
                        });
                        $("#btn-class-post-down").click(function () {
                            if ($("#btn-class-post-down").hasClass("btn-assign")) {
                                $("#btn-class-post-down").removeClass("btn-assign");
                                $("#btn-class-post-down").addClass("btn-down");
                                $("#open-search-class-post").slideDown("fast");
                                $("#btn-class-post-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                                get_category_class('select-class-post');
                            } else
                            {
                                $("#btn-class-post-down").removeClass("btn-down");
                                $("#btn-class-post-down").addClass("btn-assign");
                                $("#open-search-class-post").slideUp("fast");
                                $("#btn-class-post-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#search-class-post").val("");
                            }
                        });
                        $("#btn-message-search").click(function () {
                            if ($("#btn-message-search").hasClass("btn-assign")) {
                                $("#btn-message-search").removeClass("btn-assign");
                                $("#btn-message-search").addClass("btn-down");
                                $("#open-search-my-message").slideDown("fast");
                                $("#btn-message-search").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                                //get_category_class('select-class-post');
                            } else
                            {
                                $("#btn-message-search").removeClass("btn-down");
                                $("#btn-message-search").addClass("btn-assign");
                                $("#open-search-my-message").slideUp("fast");
                                $("#btn-message-search").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#search-my-message").val("");
                            }
                        });
                        $("#btn-class-tutoring-down").click(function () {
                            if ($("#btn-class-tutoring-down").hasClass("btn-assign")) {
                                $("#btn-class-tutoring-down").removeClass("btn-assign");
                                $("#btn-class-tutoring-down").addClass("btn-down");
                                $("#open-search-class-tutoring").slideDown("fast");
                                $("#btn-class-tutoring-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_up.png) no-repeat");
                                //get_category_class('select-class-post');
                            } else
                            {
                                $("#btn-class-tutoring-down").removeClass("btn-down");
                                $("#btn-class-tutoring-down").addClass("btn-assign");
                                $("#open-search-class-tutoring").slideUp("fast");
                                $("#btn-class-tutoring-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                                $("#search-class-tutoring").val("");
                            }
                        });
                        //close icon in Information Center
                        $('#icon-close-manage-msg').click(function(){
                            var gid = $("#manage-msg-class-name").attr("data-gid");
                            var gname = $("#manage-msg-class-name").val();
                            if(gname==''){gname='NoName';}
                           
                            var arr=[gid,gname];
                            $(".title-manage-class").text("Class Check");
                            
                            $(".manage-class").addClass('hidden');
                            $(".manage-edit-class").addClass('hidden');
                            $(".manage-check-class").removeClass('hidden');
                            $("#my-account-modal").scrollTop(0);
                            $("#check-class-name").attr("data-gid", gid);
                            var table = 'table-std-list';
                            get_student_list(gid, table);
                            var table = 'table-tutor-notify';
                            get_tutor_notify(gid, table);
                            var table = 'table-msg-notify';
                            get_message_notify(arr, table);
                            get_subject_lesson_class(gid);
                            //refresh
                            $(".refresh-edit-class").removeClass("sethidden");
                            $(".refresh-edit-class").slideDown("fast");
                            $(".refresh-edit-class-img img").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Arrow_up.png");
                            $(".clear-text").val("");
                            $("#description_class_ifr").contents().find('#tinymce').text('');
                            //refresh 
                            //$(".table-prerequisite").addClass("hidden");
                            //$(".table-noprerequisite").addClass("hidden");
                            $("#edit-tutoring").load(location.href + " #edit-tutoring>*", "");
                            $("#detete-class").load(location.href + " #detete-class>*", "");
                            //$(".explain-class").load(location.href+" .explain-class>*","");
                            //$(".explain-class").load(" .explain-class > *");
                            //$(".table-sub-less").html("");
                            //$(".table-sub-less-prerequisite").html("");
                            $("#select-all-less6").attr("checked", false);
                            $(".lesson-detail-sub2").removeClass("active");
                            $(".lesson-detail-sub2").slideUp("slow");
                            $("#icon-open-from-lesson2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-less4").html('');
                            $("#select-all-add-sub2").attr("checked", false);
                            $(".sub-detail").removeClass("active");
                            $(".sub-detail").slideUp("slow");
                            $("#icon-add-sub2").attr("src", "<?php echo get_template_directory_uri(); ?>/library/images/Circle_Arrow_down.png");
                            $("#table-sub2").html('');
                            $(".manage-class-message").addClass("hidden");
                        });
                        //student List in Information Center
                        $('#list-student-btn').click(function(){
                            var gid=$("#manage-msg-class-name").attr("data-gid");
                            $(".student-list-class").removeClass("hidden");
                            $(".sethide-detail").not(".student-list-class").addClass("hidden");
                             var tbody='#table-class-student';
                              var html = html_sl = '';
                            $(tbody).html(html);
                            $.get(home_url + "/?r=ajax/get_student_group", {gid: gid}, function (data) {
                                if (data != '') {
                                    data = JSON.parse(data);
                                    $.each(data, function (i, v) {
                                        html_sl += '<option value="' + v.id + '">' + v.display_name + '</option>'; 

                                        html += '<tr>';
                                        html += '<td class="">';
                                        if (v.user_sex == 1) {
                                            html += 'M';
                                        } else if (v.user_sex == 0) {
                                            html += 'F';
                                        } else {
                                            html += 'Unknown';
                                        }
                                        html += '</td>';
                                        html += '<td class="class-name-created prv-message-btn" data-id="' + v.id + '">' + v.display_name + '</td>';
                                        html += '<td>' + v.user_email + '</td>';
                                        html += '<td>' + v.joined_date + '</td>';
                                        html += '<td class="table-img-icon"></button>';
                                        html += '<button  class="border-btn btn-icon-orange prv-message-btn" data-id="' + v.id + '"><img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Mail.png" alt="Icon_Mail"/></button></td>';
                                        html += '</tr>';
                                    });
                                } else {
                                    html += '<tr><td style="border-right:none;"></td><td colspan="4">No result.</td></tr>'
                                }
                                $(tbody).html(html);
                                $('#private-student-list').html(html_sl).data("selectBox-selectBoxIt").refresh();   
                                $('#private-student-list2').html(html_sl).data("selectBox-selectBoxIt").refresh();                             
                            });
                        });
                        //close student list
                        $("#close-studentlist").click(function(){
                            //$(".sethide-detail").addClass("hidden");
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            get_message_class(id);
                            $(".table-class-posting").removeClass("hidden");
                            $(".sethide-detail").not(".table-class-posting").addClass("hidden");
                        });
                        //write a post button event
                        $("#write-post-btn").click(function(){
                            $(".write-post-detail").removeClass("hidden");
                            $(".sethide-detail").not(".write-post-detail").addClass("hidden");
                        });
                        
                        //close write a post
                        $(".close-write-post").click(function(){
                            //$(".sethide-detail").addClass("hidden");
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            get_message_class(id);
                            $(".table-class-posting").removeClass("hidden");
                            $(".sethide-detail").not(".table-class-posting").addClass("hidden");
                        });
                        $(".close-sent-private-message").click(function(){
                            //$(".sethide-detail").addClass("hidden");
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            get_message_class(id);
                            $(".table-sent-message").removeClass("hidden");
                            $(".sethide-detail").not(".table-sent-message").addClass("hidden");
                        });
                        //function get information class
                        function get_message_class(gid, text = ''){
                            var tbody_posting = $("#table-class-post");  
                            var tbody_receive = $("#table-receive-message");
                            var tbody_sent = $("#table-sent-message");              
                            tbody_posting.html("");
                            tbody_receive.html("");
                            tbody_sent.html("");
                            $.get(home_url + "/?r=ajax/get_message_center", {gid: gid}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);
                                if (data.postings.length > 0) {
                                    $.each(data.postings, function (i, v) {
                                    var tr_p = '<tr>';
                                    if(v.status == 2)
                                        var subjectp = '<strong>' + v.subject + '</strong>';
                                    else
                                        var subjectp = v.subject;
                                    tr_p+='<td class="subject-posting tit-msg-stl view-detail-msg" data-type="posting" data-id="' + v.id + '" data-subject="' + v.subject + '"  data-student="' + v.student + '" data-date="' + v.date + '" data-message="' + v.content_message + '" data-status="' + v.status + '">' + subjectp + '</td>';
                                    tr_p+='<td><p class="sender-msg-stl">'+v.poster+'</p></td>';       
                                    tr_p+='<td>' + v.date + '</td></tr>';
                                        tbody_posting.append(tr_p);  
                                    });
                                    for(var i = data.postings.length;i < 11; i++){
                                        var add_tr_p = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_posting.append(add_tr_p);
                                    }
                                   
                                }else{
                                    var tr_p = '<tr><td>There is no class postings.</td><td></td><td></td><td class="no-message"></td></tr>';
                                    tbody_posting.append(tr_p);
                                    for(var i = 0;i < 10; i++){
                                        var add_tr_p = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_posting.append(add_tr_p);
                                    }
                                }

                                if (data.receives.length > 0) {
                                    $.each(data.receives, function (i, v) {
                                        if(v.status == 2)
                                            var subjectr = '<strong>' + v.subject + '</strong>';
                                        else
                                            var subjectr = v.subject;
                                        var tr_r = '<tr><td class="view-my-message" data-uid="' + v.uid + '" data-type="receive" data-id="' + v.id + '" data-reply="' + v.reply_id +'" data-message-id="' + v.message_id + '" data-subject="' + v.subject + '"  data-sender="' + v.sender + '" data-date="' + v.receivedDate + '" data-message="' + v.message + '" data-status="' + v.status + '">' + subjectr + '</td><td>' + v.sender + '</td><td>' + v.receivedDate + '</td><td class="del-my-message" data-id="' + v.id + '" data-type="receive" style="width: 50px; text-align: center; cursor: pointer;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="Icon_Remove"/></td></tr>';
                                        tbody_receive.append(tr_r);  
                                    });
                                    for(var i = data.receives.length;i < 11; i++){
                                        var add_tr_r = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_receive.append(add_tr_r);
                                    }                                    
                                }else{
                                    var tr_r = '<tr><td>There is no private message yet.</td><td></td><td></td><td></td></tr>';
                                    tbody_receive.append(tr_r);
                                    for(var i = 0;i < 10; i++){
                                        var add_tr_r = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_receive.append(add_tr_r);
                                    }
                                }

                                if (data.sents.length > 0) {
                                    $.each(data.sents, function (i, v) {
                                        if(v.status == 2)
                                            var subject_s = '<strong>' + v.subject + '</strong>';
                                        else
                                            var subject_s = v.subject;
                                        var tr_st = '<tr><td class="view-my-message" data-uid="' + v.uid + '" data-type="sent" data-id="' + v.id + '" data-reply="' + v.reply_id +'" data-message-id="' + v.message_id + '" data-subject="' + v.subject + '"  data-sender="' + v.sender + '" data-date="' + v.sent_on + '" data-message="' + v.message + '" data-status="' + v.status + '">' + subject_s + '</td><td>' + v.sender + '</td><td>' + v.sent_on + '</td><td class="del-my-message" data-id="' + v.id + '" data-type="sent" style="width: 50px; text-align: center; cursor: pointer;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="Icon_Remove"/></td></tr>';
                                        tbody_sent.append(tr_st);  
                                    });
                                    for(var i = data.sents.length;i < 11; i++){
                                        var add_tr_st = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_sent.append(add_tr_st);
                                    }
                                }else{
                                    var tr_st = '<tr><td>There is no sent message.</td><td></td><td></td><td></td></tr>';
                                    tbody_sent.append(tr_st);
                                    for(var i = 0;i < 10; i++){
                                        var add_tr_st = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_sent.append(add_tr_st);
                                    }
                                }
                                return true;
                            });
                        }
                        //view detail of message class posting
                        $('.view-detail-msg').live("click",function(){
                            var subject=$(this).attr("data-subject");
                            var date=$(this).attr("data-date");
                            var content=$(this).attr("data-message");                            
                            var std=$(this).attr("data-student");
                            var type=$(this).attr("data-type");
                            var mid=$(this).attr("data-id");
                            var status=$(this).attr("data-status");
                            $(".title-message-detail").text(subject);
                            $(".poster-msg span").text(std);
                            $(".posted-on-msg").text(date);
                            $(".content-msg-detail").html(content);
                            $(".close-message-icon-detail").attr('data-type','posting');
                            $(".message-detail").removeClass("hidden");
                            $(".sethide-detail").not(".message-detail").addClass("hidden");
                            if(status == 2){
                                $.get(home_url + "/?r=ajax/readed_message", {id: mid,type: "posting"}, function () {
                                });
                            }
                        });
                        $('.prv-message-btn').live("click",function(){                                   
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            var student = $(this).attr("data-id");
                            var uid = <?php if($is_user_logged_in) echo $current_user->ID; else echo 0;?>;
                            $("#private_subject").val('');
                            tinyMCE.activeEditor.setContent('');
                            $(".sent-private-message").removeClass("hidden");
                            $(".sethide-detail").not(".sent-private-message").addClass("hidden");
                            $("#private-msg-btn").attr("data-id",student);
                            $("#private-student-list").selectBoxIt('selectOption',student.toString()).data("selectBox-selectBoxIt");
                            $("#private-student-list").data("selectBox-selectBoxIt").refresh();
                        });
                        $('.view-my-message').live("click",function(){
                            var subject = $(this).attr("data-subject");
                            var date=$(this).attr("data-date");
                            var content=$(this).attr("data-message");
                            var type=$(this).attr("data-type");
                            var std=$(this).attr("data-sender");
                            var uid=$(this).attr("data-uid");
                            var mid=$(this).attr("data-id");
                            var status=$(this).attr("data-status");
                            var rep = $(this).attr("data-reply");
                            var message_id = $(this).attr("data-message-id");
                            var list_replyed = $("#list-replyed-msg");              
                            list_replyed.html("");
                            $.get(home_url + "/?r=ajax/reply_message", {id:mid, reply_id:rep, type:type, view:'detail'}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);
                                if (data.replyed.length > 0) {                                    
                                    $.each(data.replyed, function (i, v) {
                                        var li = '<hr style="border-top: 1px solid #e0e0e0; margin: 10px 0;border-bottom: 0;border-left: 0;border-right: 0;"><div class="info-message-stl"><div class="col-md-6 my-poster-msg nopadding-l"><text class="text-by">by </text><span class="by-teacher">'+ v.sender +'</span></div><div class="col-md-6 my-posted-on-msg nopadding-r">'+ v.date +'</div></div><div class="my-content-msg-detail">'+ v.message +'</div>';
                                        list_replyed.append(li);
                                    });
                                }
                            });

                            $(".my-title-message-detail").text(subject);
                            $(".my-poster-msg span").text(std);
                            $(".my-posted-on-msg").text(date);
                            $(".my-content-msg-detail").html(content);
                            $(".close-message-icon-detail").attr('data-type',type);
                            $('.btn-reply-private').attr('data-uid',uid);
                            $('.btn-reply-private').attr('data-reply',rep);
                            $('.btn-reply-private').attr('data-mid',mid);
                            $('.btn-reply-private').attr('data-type',type);
                            $('.btn-reply-private').attr('data-message-id',message_id);
                            $(".my-message-detail").removeClass("hidden");
                            $(".sethide-detail").not(".my-message-detail").addClass("hidden");
                            
                            if(status == 2){
                                $.get(home_url + "/?r=ajax/readed_message", {id: mid,type:type,message_id:message_id}, function () {
                                    
                                });
                            }
                        });
                        $('.del-my-message').live("click",function(e) {
                            var mid = $(this).attr('data-id');
                            var type = $(this).attr('data-type');
                            $('#btn-del-message').attr('data-id',mid);
                            $('#btn-del-message').attr('data-type',type);
                            $('#modal-delete-message').modal('show');
                        });
                        //close message detail
                        $(".close-message-icon-detail").click(function(){
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            var type = $(this).attr("data-type");
                            get_message_class(id);
                            if(type == "sent"){
                                $(".table-sent-message").removeClass("hidden");
                                $(".sethide-detail").not(".table-sent-message").addClass("hidden");
                            }else if(type == "receive"){
                                $(".table-receive-message").removeClass("hidden");
                                $(".sethide-detail").not(".table-receive-message").addClass("hidden");
                            }else{
                                $(".table-class-posting").removeClass("hidden");
                                $(".sethide-detail").not(".table-class-posting").addClass("hidden");
                            }
                        });
                        $('#post-msg-btn').click(function () {
                            var text_subject = $('#post_subject2').val();                
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            var content =  $.trim(tinymce.get('content_post_message').getContent());
                            if(text_subject != ''){
                                $.post(home_url + "/?r=ajax/write_post_message", {
                                    id: id,                        
                                    subject: text_subject,
                                    message: content
                                }, function (data) {
                                    if ($.trim(data) == '1'){
                                        //$('#modal-send-message-posting').modal('show');
                                        $('#post_subject2').val('');
                                        tinyMCE.activeEditor.setContent('');

                                        get_message_class(id, text_subject);
                                        $(".table-class-posting").removeClass("hidden");
                                        $(".sethide-detail").not(".table-class-posting").addClass("hidden");
                                    }
                                });
                            }
                        });
                        $('#private-msg-btn').click(function () {
                            //var sl = $(this).attr('data-id');
                            var student = $('#private-student-list').val();
                            var text_subject = $('#private_subject').val();                
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            var rep = 0;
                            var type = '';
                            var message_id = 0;
                            var content =  $.trim(tinymce.get('content_private_message2').getContent());
                            if(text_subject != ''){
                                $.post(home_url + "/?r=ajax/save_message", {
                                    id: id,
                                    recipient_id: student,
                                    subject: text_subject,
                                    message: content,
                                    reply_id: rep,
                                    type: type,
                                    message_id: message_id
                                }, function (data) {
                                    if ($.trim(data) == '1'){
                                        //$('#modal-send-private-msg').modal('show');
                                        $('#private_subject').val('');
                                        tinyMCE.activeEditor.setContent('');

                                        get_message_class(id, text_subject);
                                        $(".table-class-posting").removeClass("hidden");
                                        $(".sethide-detail").not(".table-class-posting").addClass("hidden");
                                    }
                                });
                            }
                        });
                        $('#private-msg-btn2').click(function () {
                            //var sl = $(this).attr('data-id');
                            $('.message-head-title').text('RECEIVED');
                            var student = $('#private-student-list2').val();
                            var text_subject = $('#private_subject2').val();                
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            //$(tinymce.activeEditor.getBody()).find('div').remove();
                            //$(tinymce.activeEditor.getBody()).find('hr').remove();
                            var content =  $.trim(tinyMCE.activeEditor.getContent());
                            var rep = $(this).attr('data-reply');
                            var type = $(this).attr('data-type');
                            var message_id = $(this).attr('data-message-id');
                            if(text_subject != ''){
                                $.post(home_url + "/?r=ajax/save_message", {
                                    id: id,
                                    recipient_id: student,
                                    subject: text_subject,
                                    message: content,
                                    reply_id: rep,
                                    type: type,
                                    message_id: message_id
                                }, function (data) {
                                    if ($.trim(data) == '1'){
                                        //$('#modal-send-private-msg').modal('show');
                                        $('#private_subject2').val('');
                                        tinyMCE.activeEditor.setContent('');

                                        get_message_class(id, text_subject);
                                        $(".table-receive-message").removeClass("hidden");
                                        $(".sethide-detail").not(".table-receive-message").addClass("hidden");
                                    }
                                });
                            }
                        });

                        $('#btn-del-message').click(function () {
                            var mid = $(this).attr('data-id');
                            var mtype = $(this).attr('data-type');
                            var id = $("#manage-msg-class-name").attr("data-gid");                            
                            $.get(home_url + "/?r=ajax/delete_message", {id: mid,type:mtype}, function () {
                                get_message_class(id);
                                $('#modal-delete-message').modal('hide');
                            });
                        });

                        $('#btn-cancel-message').click(function () {
                            $('#modal-delete-message').modal('hide');
                        });

                        $('.btn-reply-private').click(function () {
                            $('.message-head-title').text('SEND MESSAGE');                            
                            var tit = $(".my-title-message-detail").text();
                            var sender = $(this).attr('data-uid');
                            var rep = $(this).attr('data-reply');
                            var type = $(this).attr('data-type');
                            var mid = $(this).attr('data-mid');
                            var message_id = $(this).attr('data-message-id');
                            var uid = <?php if($is_user_logged_in) echo $current_user->ID; else echo 0;?>;
                            $("#private-student-list2").selectBoxIt('selectOption',sender.toString()).data("selectBox-selectBoxIt");
                            $("#private-student-list2").data("selectBox-selectBoxIt").refresh();
                            $(".sent-private-message2").removeClass("hidden");
                            $(".sethide-detail").not(".sent-private-message2").addClass("hidden");
                            $("#private-msg-btn2").attr("data-reply",rep);                            
                            $("#private-msg-btn2").attr("data-type",type);
                            $("#private-msg-btn2").attr("data-message-id",message_id);
                            // var str = tit.split(':');
                            // if(str[0] == 'Re')
                            //     $("#private_subject2").val(tit);
                            // else
                            //     $("#private_subject2").val('Re: '+tit);
                            $("#private_subject2").val('Re: '+tit);
                                                        
                            tinymce.activeEditor.setContent('<p></p> <hr style="height: 0; border: 0; outline: none; padding-top: 130px;">');
                            $.get(home_url + "/?r=ajax/reply_message", {id:mid, reply_id:rep, type:type, view:'reply'}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);
                                if (data.replyed.length > 0) {                                    
                                    $.each(data.replyed, function (i, v) {
                                        var li = '<div style="color: #ffa422;font-size: 13px;">On ' + v.date + ', ' + v.sender + ' wrote:</div><hr style="border-top: 1px solid #e0e0e0;border-bottom: 0;border-left: 0;border-right: 0;"><div style="margin-bottom: 15px;">' + v.message + '</div>';
                                        tinymce.activeEditor.setContent(tinyMCE.activeEditor.getContent() + li);
                                    });
                                }
                            });
                            //tinyMCE.execCommand('mceInsertRawHTML', false, '<p></p>');                            
                        });

                        $('#posting-btn').click(function () {
                            $('.student-list').text('POSTINGS');
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            get_message_class(id);
                            $(".table-class-posting").removeClass("hidden");
                            $(".sethide-detail").not(".table-class-posting").addClass("hidden");
                        });                        

                        $('#received-message').click(function () {
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            get_message_class(id);
                            $('.message-head-title').text('RECEIVED');
                            $(".table-receive-message").removeClass("hidden");
                            $(".sethide-detail").not(".table-receive-message").addClass("hidden");
                        });

                        $('#sent-message').click(function () {
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            get_message_class(id);
                            $('.message-head-title').text('SENT');
                            $(".table-sent-message").removeClass("hidden");
                            $(".sethide-detail").not(".table-sent-message").addClass("hidden");
                            $('#private_subject2').val('');
                            tinyMCE.activeEditor.setContent('');
                        });
                        $('#send-message').click(function(){
                            $('.message-head-title').text('SEND MESSAGE');
                            $("#private_subject2").val('');
                            tinyMCE.activeEditor.setContent('');
                        })
                        $('#write-post-btn').click(function(){
                            $('.student-list').text('WRITE A POST');
                            $("#post_subject2").val('');                            
                            tinyMCE.activeEditor.setContent('');
                        });
                        $('#list-student-btn').click(function(){
                           $('.student-list').text('STUDENT LIST');
                        });
                        $('#search-my-message-btn').click(function(){
                            var keyword = $('#search-my-message').val();
                            var tbody_receive = $("#table-receive-message");
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            $(".table-receive-message").removeClass("hidden");
                            $(".sethide-detail").not(".table-receive-message").addClass("hidden");
                            tbody_receive.html("");
                            $.get(home_url + "/?r=ajax/get_message_search", {gid: id,keyword:keyword,type:"my_message"}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);
                                if (data.receives.length > 0) {
                                    $.each(data.receives, function (i, v) {
                                        if(v.status==2)
                                            var subjectr = '<strong>' + v.subject + '</strong>';
                                        else
                                            var subjectr = v.subject;
                                        var tr_r = '<tr><td class="view-my-message clear-list" data-uid="' + v.uid + '" data-reply="' + v.reply_id +'" data-type="' + v.type + '" data-message-id="' + v.message_id + '" data-id="' + v.id + '" data-subject="' + v.subject + '"  data-sender="' + v.sender + '" data-date="' + v.receivedDate + '" data-message="' + v.message + '" data-status="' + v.status + '">' + subjectr + '</td><td>' + v.sender + '</td><td>' + v.receivedDate + '</td><td class="del-my-message" data-id="' + v.id + '" data-type="receive" style="width: 50px; text-align: center; cursor: pointer;"><img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_Delete_worksheet.png" alt="Icon_Remove"/></td></tr>';
                                        tbody_receive.append(tr_r);  
                                    });
                                    for(var i = data.receives.length;i < 11; i++){
                                        var add_tr_r = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_receive.append(add_tr_r);
                                    }                                    
                                }else{
                                    var tr_r = '<tr><td>There is no private message yet.</td><td></td><td></td><td></td></tr>';
                                    tbody_receive.append(tr_r);
                                    for(var i = 0;i < 10; i++){
                                        var add_tr_r = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_receive.append(add_tr_r);
                                    }
                                }
                            });                            
                        });
                        $('#search-class-post-btn').click(function(){
                            var keyword = $('#search-class-post').val();
                            var tbody_posting = $("#table-class-post"); 
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            $(".table-class-posting").removeClass("hidden");
                            $(".sethide-detail").not(".table-class-posting").addClass("hidden");
                            tbody_posting.html("");
                            $.get(home_url + "/?r=ajax/get_message_search", {gid: id,keyword:keyword,type:"posting"}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);
                                if (data.postings.length > 0) {
                                    $.each(data.postings, function (i, v) {
                                    var tr_p = '<tr>';
                                    var subjectp = v.subject;
                                    tr_p+='<td class="subject-posting tit-msg-stl view-detail-msg clear-list" data-type="posting" data-id="' + v.id + '" data-subject="' + v.subject + '"  data-student="' + v.student + '" data-date="' + v.date + '" data-message="' + v.content_message + '">' + subjectp + '</td>';
                                    tr_p+='<td><p class="sender-msg-stl">'+v.poster+'</p></td>';       
                                    tr_p+='<td>' + v.date + '</td></tr>';
                                        tbody_posting.append(tr_p);  
                                    });
                                    for(var i = data.postings.length;i < 11; i++){
                                        var add_tr_p = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_posting.append(add_tr_p);
                                    }
                                   
                                }else{
                                    var tr_p = '<tr><td>There is no class postings.</td><td></td><td></td><td class="no-message"></td></tr>';
                                    tbody_posting.append(tr_p);
                                    for(var i = 0;i < 10; i++){
                                        var add_tr_p = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_posting.append(add_tr_p);
                                    }
                                }
                            });                            
                        });
                        $('#send-message').click(function () {
                            var uid = <?php if($is_user_logged_in) echo $current_user->ID; else echo 0;?>;
                            $(".sent-private-message2").removeClass("hidden");
                            $(".sethide-detail").not(".sent-private-message2").addClass("hidden");
                            $("#private-msg-btn2").attr("data-id",uid);
                        });
                        
                        $("#tab-class-post").click(function(){
                            $('.student-list').text('POSTINGS');
                            if($("#class-post-detail").hasClass("hidden")){
                                $('#class-post-detail').removeClass("hidden");
                                $("#class-post-detail").addClass("active");
                                $("#class-my-message2").removeClass("active");
                                $("#class-my-message2").addClass("hidden");
                                $("#class-tutoring-detail").removeClass("active");
                                $("#class-tutoring-detail").addClass("hidden");

                                $(".table-class-posting").removeClass("hidden");
                                $(".sethide-detail").not(".table-class-posting").addClass("hidden");
                            }
                            if ($("#btn-class-post-down").hasClass("btn-down")) {
                                $("#btn-class-post-down").removeClass("btn-down");
                                $("#btn-class-post-down").addClass("btn-assign");
                                $("#open-search-class-post").slideUp("fast");
                                $("#btn-class-post-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            if ($("#btn-class-tutoring-down").hasClass("btn-down")) {
                                $("#btn-class-tutoring-down").removeClass("btn-down");
                                $("#btn-class-tutoring-down").addClass("btn-assign");
                                $("#open-search-class-tutoring").slideUp("fast");
                                $("#btn-class-tutoring-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            if ($("#btn-message-search").hasClass("btn-down")) {
                                $("#btn-message-search").removeClass("btn-down");
                                $("#btn-message-search").addClass("btn-assign");
                                $("#open-search-my-message").slideUp("fast");
                                $("#btn-message-search").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            $(".class-post-hidden").removeClass("active");
                            $(".class-post-hidden").addClass("hidden");                            
                            $(".class-post-active").removeClass("hidden");
                            $(".class-post-active").addClass("active");
                           
                            $(".my-message-active").removeClass("hidden");
                            $(".my-message-active").addClass("active");
                            $(".my-message-hidden").removeClass("active");
                            $(".my-message-hidden").addClass("hidden");
                           
                            $(".activities-active").removeClass("hidden");
                            $(".activities-active").addClass("active");
                            $(".activities-hidden").removeClass("active");
                            $(".activities-hidden").addClass("hidden");
                           
                            $(".tutoring-active").removeClass("hidden");
                            $(".tutoring-active").addClass("active");
                            $(".tutoring-hidden").removeClass("active");
                            $(".tutoring-hidden").addClass("hidden");
                        });
                        $('#tab-my-message').click(function(){
                            $('.message-head-title').text('RECEIVED');
                            if ($("#btn-class-post-down").hasClass("btn-down")) {
                                $("#btn-class-post-down").removeClass("btn-down");
                                $("#btn-class-post-down").addClass("btn-assign");
                                $("#open-search-class-post").slideUp("fast");
                                $("#btn-class-post-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            if ($("#btn-message-search").hasClass("btn-down")) {
                                $("#btn-message-search").removeClass("btn-down");
                                $("#btn-message-search").addClass("btn-assign");
                                $("#open-search-my-message").slideUp("fast");
                                $("#btn-message-search").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            if ($("#btn-class-tutoring-down").hasClass("btn-down")) {
                                $("#btn-class-tutoring-down").removeClass("btn-down");
                                $("#btn-class-tutoring-down").addClass("btn-assign");
                                $("#open-search-class-tutoring").slideUp("fast");
                                $("#btn-class-tutoring-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            $('#class-post-detail').removeClass("active");
                            $('#class-post-detail').addClass("hidden");
                            $("#class-tutoring-detail").removeClass("active");
                            $("#class-tutoring-detail").addClass("hidden");
                            $("#class-my-message2").removeClass("hidden");
                            $("#class-my-message2").addClass("active");

                            $(".table-receive-message").removeClass("hidden");
                            $(".sethide-detail").not(".table-receive-message").addClass("hidden");

                            $(".class-post-hidden").removeClass("hidden");
                            $(".class-post-hidden").addClass("active");
                            $(".class-post-active").removeClass("active");
                            $(".class-post-active").addClass("hidden");

                            $(".my-message-active").removeClass("active");
                            $(".my-message-active").addClass("hidden");
                            $(".my-message-hidden").removeClass("hidden");
                            $(".my-message-hidden").addClass("active");

                            $(".tutoring-active").removeClass("hidden");
                            $(".tutoring-active").addClass("active");
                            $(".tutoring-hidden").removeClass("active");
                            $(".tutoring-hidden").addClass("hidden");

                            $(".activities-active").removeClass("hidden");
                            $(".activities-active").addClass("active");
                            $(".activities-hidden").removeClass("active");
                            $(".activities-hidden").addClass("hidden");
                        });
                        $("#tab-activities").click(function(){                           
                            $(".activities-active").removeClass("active");
                            $(".activities-active").addClass("hidden");
                            $(".activities-hidden").removeClass("hidden");
                            $(".activities-hidden").addClass("active");

                            $(".tutoring-active").removeClass("hidden");
                            $(".tutoring-active").addClass("active");
                            $(".tutoring-hidden").removeClass("active");
                            $(".tutoring-hidden").addClass("hidden");

                            $(".class-post-hidden").removeClass("hidden");
                            $(".class-post-hidden").addClass("active");
                            $(".class-post-active").removeClass("active");
                            $(".class-post-active").addClass("hidden");

                            $(".my-message-active").removeClass("hidden");
                            $(".my-message-active").addClass("active");
                            $(".my-message-hidden").removeClass("active");
                            $(".my-message-hidden").addClass("hidden");
                        });

                        $("#tab-tutoring").click(function(){
                            $('.new-request-list').text('NEW REQUESTS');
                            get_tutoring_plan();
                            if ($("#btn-class-post-down").hasClass("btn-down")) {
                                $("#btn-class-post-down").removeClass("btn-down");
                                $("#btn-class-post-down").addClass("btn-assign");
                                $("#open-search-class-post").slideUp("fast");
                                $("#btn-class-post-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            if ($("#btn-message-search").hasClass("btn-down")) {
                                $("#btn-message-search").removeClass("btn-down");
                                $("#btn-message-search").addClass("btn-assign");
                                $("#open-search-my-message").slideUp("fast");
                                $("#btn-message-search").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            if ($("#btn-class-tutoring-down").hasClass("btn-down")) {
                                $("#btn-class-tutoring-down").removeClass("btn-down");
                                $("#btn-class-tutoring-down").addClass("btn-assign");
                                $("#open-search-class-tutoring").slideUp("fast");
                                $("#btn-class-tutoring-down").css("background", "url(<?php echo get_template_directory_uri(); ?>/library/images/icon_Orange_down.png) no-repeat");
                            }
                            $('#class-post-detail').removeClass("active");
                            $('#class-post-detail').addClass("hidden");                            
                            $("#class-my-message2").removeClass("active");
                            $("#class-my-message2").addClass("hidden");
                            $("#class-tutoring-detail").removeClass("hidden");
                            $("#class-tutoring-detail").addClass("active");

                            $(".table-class-request").removeClass("hidden");
                            $(".sethide-detail").not(".table-class-request").addClass("hidden");

                            $(".tutoring-active").removeClass("active");
                            $(".tutoring-active").addClass("hidden");
                            $(".tutoring-hidden").removeClass("hidden");
                            $(".tutoring-hidden").addClass("active");

                            $(".my-message-active").removeClass("hidden");
                            $(".my-message-active").addClass("active");
                            $(".my-message-hidden").removeClass("active");
                            $(".my-message-hidden").addClass("hidden");

                            $(".class-post-hidden").removeClass("hidden");
                            $(".class-post-hidden").addClass("active");
                            $(".class-post-active").removeClass("active");
                            $(".class-post-active").addClass("hidden");

                            $(".activities-active").removeClass("hidden");
                            $(".activities-active").addClass("active");
                            $(".activities-hidden").removeClass("active");
                            $(".activities-hidden").addClass("hidden");                            
                        });
                        $(".redirect-create").not("#create-class-li").click(function(){

                            var set = $("#close-modal").attr("data-tab");
                            var clas = $("#group-name2").val();
                            var pass = $("#type-password2").val();
                            var re = $("#retype-password2").val();                            
                            var desc = $('#post_message2_ifr').contents().find('#tinymce').text();
                            var chk = $(".option-input-2").is(":checked");
                            var cbo = $('#select-type-explain-classSelectBoxItText').attr("data-val");
                            var selected = new Array();
                            var tutor = new Array();
                            $(".class_homework:checked").each(function () {
                                var price = $(this).closest("tr").find(".price-homework").val();
                                if($.trim(price) != ''){
                                    selected.push({price: price});
                                }
                            });
                            $(".check-toggle:checked").each(function () {
                                var price = $(this).closest(".option-tutoring2").find(".price_subject").val();
                                var name = $(this).closest(".option-tutoring2").find(".add-subject-tutor").val();   
                                if($.trim(price) != '' || $.trim(name) != ''){
                                    tutor.push({price: price, name: name});
                                }
                            });

                            if($("#create-class").hasClass("active")){
                                if(clas == "" && pass == "" && re == "" && desc == "" && !cbo && selected.length == 0 && tutor.length == 0 && !chk){
                                    $("#modal-redirect-alert").hide();
                                    $('a[data-toggle="tab"]').removeClass("disabled");
                                } 
                                else {
                                    $("#modal-redirect-alert").show();
                                }
                            }
                        });
                        $("#sub-myacc a").click(function(){
                            var set = $(this).attr('href');
                            $('#agree-redirect').attr('data-set',set);
                            var id = $(this).parent('li').attr('id');
                            $('#agree-redirect').attr('data-id',id);
                        });
                        $("#sub-lesson-manager a").click(function(){
                            var set = $(this).attr('href');
                            $('#agree-redirect').attr('data-set',set);
                            var id = $(this).parent('li').attr('id');
                            $('#agree-redirect').attr('data-id',id);
                        });
                        $("#sub-class-manager #manage-class-red").click(function(){
                            var set = $("#manage-class-li").attr('href');
                            $('#agree-redirect').attr('data-set',set);
                            var id = $("#manage-class-li").parent('li').attr('id');
                            $('#agree-redirect').attr('data-id',id);
                        });
                        $('#agree-redirect').click(function () {
                            $("#my-account-modal input:not(:checkbox, .input-current)").val("");
                            tinyMCE.activeEditor.setContent('');
                            $(".option-input-2").attr("checked", false);
                            $('#modal-redirect-alert').hide();
                            $('a[data-toggle="tab"]').removeClass("disabled");
                            var set = $(this).attr('data-set');
                            $(set).addClass('active in');
                            var id = $(this).attr('data-id');
                            $('#'+id).addClass('active');
                            $("#create-class").removeClass("active in");
                            $("#create-class-red").removeClass("active");
                        });
                        $('#disagree-redirect').click(function () {
                            $('#modal-redirect-alert').hide();
                            $('#my-account-modal').modal('show');
                            $("#create-class").addClass("active in");
                            $(".tab-pane").not("#create-class").removeClass("active in");
                        });
                        $("#cancel-create").click(function(){
                            var clas = $("#group-name2").val();
                            var pass = $("#type-password2").val();
                            var re = $("#retype-password2").val();
                            var desc = $('#post_message2_ifr').contents().find('#tinymce').text();
                            var cbo = $('#select-type-explain-classSelectBoxItText').attr("data-val");
                            var chk = $(".option-input-2").is(":checked");
                            var selected = new Array();
                            var tutor = new Array();
                            $(".class_homework:checked").each(function () {
                                var price = $(this).closest("tr").find(".price-homework").val();
                                if($.trim(price) != ''){
                                    selected.push({price: price});
                                }
                            });
                            $(".check-toggle:checked").each(function () {
                                var price = $(this).closest(".option-tutoring2").find(".price_subject").val();
                                var name = $(this).closest(".option-tutoring2").find(".add-subject-tutor").val();   
                                if($.trim(price) != '' || $.trim(name) != ''){
                                    tutor.push({price: price, name: name});
                                }
                            });
                            
                            if($("#create-class").hasClass("active")){
                                if(clas == "" && pass == "" && re == "" && desc == "" && !cbo && selected.length == 0 && tutor.length == 0 && !chk){
                                    $("#modal-redirect-alert").hide();
                                    $('a[data-toggle="tab"]').removeClass("disabled");
                                } 
                                else {
                                    $("#modal-redirect-alert").show();
                                }
                            }
                        });
                        
                        $(".set-default-list").click(function(){
                            var type = $(".clear-list").attr('data-type');
                            var id = $("#manage-msg-class-name").attr("data-gid");
                            get_message_class(id);
                            if(type == "posting"){
                                $("#posting-btn").click();
                            }
                            if(type == "receive"){
                                $("#received-message").click();
                            }
                        });     

                        $('.view-detail-tutoring').live("click",function(){
                            var subject = $(this).attr("data-subject");
                            var private_subject = $(this).attr("data-private-subject");
                            var student_name = $(this).attr("data-student-name");
                            var date = $(this).attr("data-date");
                            var message = $(this).attr("data-message");
                            var time = $(this).attr("data-time");
                            var location = $(this).attr("data-location");
                            var confirmed = $(this).attr("data-confirmed");
                            var id = $(this).attr("data-id");
                            var status = $(this).attr("data-status");
                            var icon = $(this).attr("data-icon");
                            var create_on = $(this).attr("data-create-on");
                            var date_schedule = $(this).attr("data-date-schedule");

                            if(confirmed == 0){
                                var status_request = 'Waiting for Acceptance';
                                var icon_status = 'icon_12_Icon_Waiting_Acceptance.png';
                                var confirm_text = 'Accept and Confirm';
                            }
                            else{
                                var status_request = 'Confirmed';
                                var icon_status = 'icon_09_Icon_Acceptance.png';
                                var confirm_text = 'Start Tutoring';
                            }
                            
                            $('.title-request-detail').text(private_subject);
                            $('.by-request').text(student_name);
                            $('.posted-on-request').text(create_on);
                            $('.content-request-detail').html(message);
                            $('#label-status-request').text(status_request);
                            $('#label-subject-request').html(subject + ' - ' + private_subject);
                            $('#label-time-request').text(time + ' / ' + date);
                            $('#label-location-request').text(location);
                            $('.icon-request').attr('src','<?php echo get_template_directory_uri(); ?>/library/images/' + icon);
                            $('.status-request').attr('src','<?php echo get_template_directory_uri(); ?>/library/images/' + icon_status);
                            $('#accept-confirm-btn').text(confirm_text);
                            $('#accept-confirm-btn').attr('data-id',id);
                            $('#accept-confirm-btn').attr('data-confirmed',confirmed);
                            $("#chk-schedule-btn").attr('data-day',date_schedule);

                            $(".new-request-detail").removeClass("hidden");
                            $(".sethide-detail").not(".new-request-detail").addClass("hidden");
                        });

                        $('.view-detail-schedule').live("click",function(){
                            var subject = $(this).attr("data-subject");
                            var private_subject = $(this).attr("data-private-subject");
                            var student_name = $(this).attr("data-student-name");
                            var date = $(this).attr("data-date");
                            var message = $(this).attr("data-message");
                            var time = $(this).attr("data-time");
                            var location = $(this).attr("data-location");
                            var confirmed = $(this).attr("data-confirmed");
                            var id = $(this).attr("data-id");
                            var status = $(this).attr("data-status");
                            var icon = $(this).attr("data-icon");
                            var create_on = $(this).attr("data-create-on");

                            if(confirmed == 0){
                                var status_request = 'Waiting for Acceptance';
                                var icon_status = 'icon_12_Icon_Waiting_Acceptance.png';
                                var confirm_text = 'Accept and Confirm';
                            }
                            else{
                                var status_request = 'Confirmed';
                                var icon_status = 'icon_09_Icon_Acceptance.png';
                                var confirm_text = 'Start Tutoring';
                            }
                            
                            $('.title-my-detail').text(private_subject);
                            $('.by-my').text(student_name);
                            $('.posted-on-my').text(create_on);
                            $('.content-my-detail').html(message);
                            $('#label-status-my').text(status_request);
                            $('#label-subject-my').html(subject + ' - ' + private_subject);
                            $('#label-time-my').text(time + ' / ' + date);
                            $('#label-location-my').text(location);
                            $('.icon-my').attr('src','<?php echo get_template_directory_uri(); ?>/library/images/' + icon);
                            $('.status-my').attr('src','<?php echo get_template_directory_uri(); ?>/library/images/' + icon_status);
                            $('#accept-confirm-my-btn').text(confirm_text);
                            $('#accept-confirm-my-btn').attr('data-id',id);
                            $('#accept-confirm-my-btn').attr('data-confirmed',confirmed);

                            $(".my-scheduled-detail").removeClass("hidden");
                            $(".body-my-scheduled").addClass("hidden");
                            $(".header-schedule").addClass('header-detail-schedule');
                        });

                        $(".close-request-icon-detail").click(function(){
                            get_tutoring_plan();

                            $(".table-class-request").removeClass("hidden");
                            $(".sethide-detail").not(".table-class-request").addClass("hidden");
                        });

                        $(".close-my-icon-detail").click(function(){
                            $(".my-scheduled-detail").addClass("hidden");
                            $(".body-my-scheduled").removeClass("hidden");
                            $(".header-schedule").removeClass('header-detail-schedule');
                        });

                        $("#request-btn").click(function(){
                            get_tutoring_plan();

                            $(".table-class-request").removeClass("hidden");
                            $(".sethide-detail").not(".table-class-request").addClass("hidden");
                        });

                        $("#my-schedule-btn").click(function(){                            
                            get_list_schedule();

                            get_scheduled_day();

                            $(".main-my-schedule").removeClass("hidden");
                            $(".body-my-scheduled").removeClass("hidden");
                            $(".sethide-detail").not(".main-my-schedule").addClass("hidden");
                        });

                        $("#chk-schedule-btn").click(function(){ 
                            var day = $(this).attr("data-day");

                            var today = new Date(day.replace("-", ","));                            
                            var weekday = new Array(7);
                                weekday[0] =  "Sunday";
                                weekday[1] = "Monday";
                                weekday[2] = "Tuesday";
                                weekday[3] = "Wednesday";
                                weekday[4] = "Thursday";
                                weekday[5] = "Friday";
                                weekday[6] = "Saturday";                                
                            var n = weekday[today.getDay()];
                            $('.current-day').text(today.getDate());
                            $('.stuff-day').text(n);

                            var next_d = new Date(day.replace("-", ","));
                            next_d.setDate(next_d.getDate() + 1);

                            var prev_d = new Date(day.replace("-", ","));
                            prev_d.setDate(prev_d.getDate() - 1);
                            var dd = prev_d.getDate();
                            var mm = prev_d.getMonth()+1; //January is 0!
                            var yyyy = prev_d.getFullYear();
                            if(dd < 10) {
                                dd = "0"+dd;
                            }
                            if(mm < 10) {
                                mm = "0"+mm;
                            }

                            var dd_n = next_d.getDate();
                            var mm_n = next_d.getMonth()+1; //January is 0!
                            var yyyy_n = next_d.getFullYear();
                            if(dd_n < 10) {
                                dd_n = "0"+dd_n;
                            }
                            if(mm_n < 10) {
                                mm_n = "0"+mm_n;
                            }
                            
                            $("#summary-btn").attr('data-day',day);
                            $(".schedule-left-btn").attr('data-day',yyyy+'-'+mm+'-'+dd);
                            $(".schedule-right-btn").attr('data-day',yyyy_n+'-'+mm_n+'-'+dd_n);                           
                            get_list_schedule();

                            get_scheduled_day(day);

                            $(".main-my-schedule").removeClass("hidden");
                            $(".body-my-scheduled").removeClass("hidden");
                            $(".sethide-detail").not(".main-my-schedule").addClass("hidden");
                        });

                        $("#accept-confirm-btn, #accept-confirm-my-btn").click(function(){
                            var confirmed = $(this).attr("data-confirmed");
                            var id = $(this).attr("data-id");
                            var status_request = 'Confirmed';
                            var icon_status = 'icon_09_Icon_Acceptance.png';
                            $.get(home_url + "/?r=ajax/accept_confirm_tutoring", {id: id,confirmed:confirmed}, function () {
                                $('.status-my').attr('src','<?php echo get_template_directory_uri(); ?>/library/images/' + icon_status);
                                $('#label-status-my').text(status_request);

                                $('.status-request').attr('src','<?php echo get_template_directory_uri(); ?>/library/images/' + icon_status);
                                $('#label-status-request').text(status_request);
                                $('#accept-confirm-btn').text('Start Tutoring');
                                $('#accept-confirm-my-btn').text('Start Tutoring');
                            });
                        });
                        
                        $('#sandbox-container').datepicker({
                            todayHighlight: true,
                            templates: {
                                leftArrow: '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_01_Button_Arrow_Left.png" height="19">',
                                rightArrow: '<img src="<?php echo get_template_directory_uri(); ?>/library/images/icon_02_Button_Arrow_Right.png" height="19">'
                            },
                            beforeShowDay: function(date){
                                var d = date;
                                var curr_date = d.getDate();
                                var curr_month = d.getMonth() + 1; //Months are zero based
                                if(curr_month < 10) {
                                    curr_month = "0"+curr_month;
                                }
                                var curr_year = d.getFullYear();
                                var formattedDate = curr_year + "-" + curr_month + "-" + curr_date;
                                if($.inArray(formattedDate, active_day) != -1){
                                    return {
                                       classes: 'activeClass'
                                    };
                                }
                                return;
                            }
                        });

                        $('.datepicker-switch').click(function() { return false; });

                        $(".datepicker .datepicker-days").on('click', 'td.activeClass', function (e) {
                            var get_date = $(this).text();
                            var date1 = $(".datepicker-switch").text();
                            var st = date1.split(" ");
                            var month_text = st[0];
                            switch(month_text) {
                                case "January" : 
                                var month = 1; 
                                break;
                                
                                case "February" : 
                                var month = 2; 
                                break;
                                
                                case "March" : 
                                var month = 3; 
                                break;
                                
                                case "April" : 
                                var month = 4; 
                                break;
                                
                                case "May" : 
                                var month = 5; 
                                break;
                                
                                case "June" : 
                                var month = 6; 
                                break;
                                
                                case "July" : 
                                var month = 7; 
                                break;
                                
                                case "August" : 
                                var month = 8; 
                                break;
                                
                                case "September" : 
                                var month = 9; 
                                break;
                                
                                case "October" : 
                                var month = 10; 
                                break;
                                
                                case "November" : 
                                var month = 11; 
                                break;
                                
                                case "December" : 
                                var month = 12; 
                                break;
                            }
                            if(month < 10) {
                                month = "0"+month;
                            }
                            if(get_date < 10) {
                                get_date = "0"+get_date;
                            }
                            var year = st[1].substring(0,4);
                            var full_date = year+"-"+month+"-"+get_date;                            

                            var prev = new Date(year+","+month+","+get_date);
                            prev.setDate(prev.getDate() - 1);

                            var next = new Date(year+","+month+","+get_date);
                            next.setDate(next.getDate() + 1);

                            var day = new Date(year+","+month+","+get_date);
                            var weekday = new Array(7);
                                weekday[0] =  "Sunday";
                                weekday[1] = "Monday";
                                weekday[2] = "Tuesday";
                                weekday[3] = "Wednesday";
                                weekday[4] = "Thursday";
                                weekday[5] = "Friday";
                                weekday[6] = "Saturday";                                
                            var n = weekday[day.getDay()];
                            $('.current-day').text(day.getDate());
                            $('.stuff-day').text(n);

                            var dd = prev.getDate();
                            var mm = prev.getMonth()+1; //January is 0!
                            var yyyy = prev.getFullYear();
                            if(dd < 10) {
                                dd = "0"+dd;
                            }
                            if(mm < 10) {
                                mm = "0"+mm;
                            }

                            var dd_n = next.getDate();
                            var mm_n = next.getMonth()+1; //January is 0!
                            var yyyy_n = next.getFullYear();
                            if(dd_n < 10) {
                                dd_n = "0"+dd_n;
                            }
                            if(mm_n < 10) {
                                mm_n = "0"+mm_n;
                            }
                            
                            $("#summary-btn").attr('data-day',full_date);
                            $(".schedule-left-btn").attr('data-day',yyyy+'-'+mm+'-'+dd);
                            $(".schedule-right-btn").attr('data-day',yyyy_n+'-'+mm_n+'-'+dd_n);
                            get_scheduled_day(full_date,'schedule');
                        });

                        $("#summary-btn").click(function(){
                            var day = $(this).attr("data-day");
                            var type = $(this).attr("data-type");
                            if(type == 'summary')
                                type = 'schedule';
                            else
                                type = 'summary';
                            $(".schedule-left-btn").attr('data-type',type);
                            $(".schedule-right-btn").attr('data-type',type);
                            $(this).attr("data-type",type);
                            get_scheduled_day(day,type);
                        });

                        $(".schedule-left-btn").click(function(){
                            var day = $(this).attr("data-day");
                            var type = $(this).attr("data-type");

                            var today = new Date(day.replace("-", ","));
                            var weekday = new Array(7);
                                weekday[0] =  "Sunday";
                                weekday[1] = "Monday";
                                weekday[2] = "Tuesday";
                                weekday[3] = "Wednesday";
                                weekday[4] = "Thursday";
                                weekday[5] = "Friday";
                                weekday[6] = "Saturday";                                
                            var n = weekday[today.getDay()];
                            $('.current-day').text(today.getDate());
                            $('.stuff-day').text(n);

                            var prev_d = new Date(day.replace("-", ","));
                            prev_d.setDate(prev_d.getDate() - 1);
                            var dd = prev_d.getDate();
                            var mm = prev_d.getMonth()+1; //January is 0!
                            var yyyy = prev_d.getFullYear();
                            if(dd < 10) {
                                dd = "0"+dd;
                            }
                            if(mm < 10) {
                                mm = "0"+mm;
                            }

                            var next_d = new Date(day.replace("-", ","));
                            next_d.setDate(next_d.getDate() + 1); 
                            var dd_n = next_d.getDate();
                            var mm_n = next_d.getMonth()+1; //January is 0!
                            var yyyy_n = next_d.getFullYear();
                            if(dd_n < 10) {
                                dd_n = "0"+dd_n;
                            }
                            if(mm_n < 10) {
                                mm_n = "0"+mm_n;
                            }
                            
                            $("#summary-btn").attr('data-day',day);
                            $(this).attr('data-day',yyyy+'-'+mm+'-'+dd);
                            $(".schedule-right-btn").attr('data-day',yyyy_n+'-'+mm_n+'-'+dd_n);
                            get_scheduled_day(day,type);
                        });

                        $(".schedule-right-btn").click(function(){
                            var day = $(this).attr("data-day");
                            var type = $(this).attr("data-type");
                                                        
                            var today = new Date(day.replace("-", ","));
                            var weekday = new Array(7);
                                weekday[0] =  "Sunday";
                                weekday[1] = "Monday";
                                weekday[2] = "Tuesday";
                                weekday[3] = "Wednesday";
                                weekday[4] = "Thursday";
                                weekday[5] = "Friday";
                                weekday[6] = "Saturday";                                
                            var n = weekday[today.getDay()];
                            $('.current-day').text(today.getDate());
                            $('.stuff-day').text(n);

                            var next_d = new Date(day.replace("-", ","));
                            next_d.setDate(next_d.getDate() + 1);
                            var dd = next_d.getDate();
                            var mm = next_d.getMonth()+1; //January is 0!
                            var yyyy = next_d.getFullYear();
                            if(dd < 10) {
                                dd = "0"+dd;
                            }
                            if(mm < 10) {
                                mm = "0"+mm;
                            }

                            var prev_d = new Date(day.replace("-", ","));
                            prev_d.setDate(prev_d.getDate() - 1);
                            var dd_n = prev_d.getDate();
                            var mm_n = prev_d.getMonth()+1; //January is 0!
                            var yyyy_n = prev_d.getFullYear();
                            if(dd_n < 10) {
                                dd_n = "0"+dd_n;
                            }
                            if(mm_n < 10) {
                                mm_n = "0"+mm_n;
                            }
                            
                            $("#summary-btn").attr('data-day',day);
                            $(this).attr('data-day',yyyy+'-'+mm+'-'+dd);
                            $(".schedule-left-btn").attr('data-day',yyyy_n+'-'+mm_n+'-'+dd_n);
                            get_scheduled_day(day,type);
                        });

                        $('#search-class-tutoring-btn').click(function(){
                            var keyword = $('#search-class-tutoring').val();
                            get_tutoring_plan(keyword);

                            $(".table-class-request").removeClass("hidden");
                            $(".sethide-detail").not(".table-class-request").addClass("hidden");
                        });

                        $('#class-overview').click(function(){
                            $('#popup-message').html('<h3>Overview of Create Class</h3><p class="text-used">Create a class and have students join. With a class name and password, a student can join your class from the list of classes displayed on the student site. You need to select what you will tutor. You may also offer a ready-made lesson in your classroom. You will earn the portion of sales (See the percentage below).</p><ul class="text-percent"><li>There is no cost of setting up a class</li><li>Earn money by offering tutoring, your lessons, and ready-made lessons</li><li>Flexible scheduling for your tutoring</li><li>Hundreds of ready-made worksheets you can use or create your own</li></ul><button id="got-it" type="button" class="btn-orange btn-create-lesson form-control nopadding-r border-btn">Got it</button>');
                            $('#top-popup-message').css("display", "block");                          
                        });

                        $('#create-overview').click(function(){
                            $('#popup-message').html('<h3>Overview of Create Basic Account</h3><p class="text-used">Create a class and have students join. With a class name and password, a student can join your class from the list of classes displayed on the student site. You need to select what you will tutor. You may also offer a ready-made lesson in your classroom. You will earn the portion of sales (See the percentage below).</p><ul class="text-percent"><li>There is no cost of setting up a class</li><li>Earn money by offering tutoring, your lessons, and ready-made lessons</li><li>Flexible scheduling for your tutoring</li><li>Hundreds of ready-made worksheets you can use or create your own</li></ul><button id="got-it" type="button" class="btn-orange btn-create-lesson form-control nopadding-r border-btn">Got it</button>');
                            $('#top-popup-message').css("display", "block");                          
                        });

                        $('#tutor-overview').click(function(){
                            $('#popup-message').html('<h3>Overview of Teacher & Tutor Account</h3><p class="text-used">Create a class and have students join. With a class name and password, a student can join your class from the list of classes displayed on the student site. You need to select what you will tutor. You may also offer a ready-made lesson in your classroom. You will earn the portion of sales (See the percentage below).</p><ul class="text-percent"><li>There is no cost of setting up a class</li><li>Earn money by offering tutoring, your lessons, and ready-made lessons</li><li>Flexible scheduling for your tutoring</li><li>Hundreds of ready-made worksheets you can use or create your own</li></ul><button id="got-it" type="button" class="btn-orange btn-create-lesson form-control nopadding-r border-btn">Got it</button>');
                            $('#top-popup-message').css("display", "block");                          
                        });

                        $('.icon-more-info').click(function(){
                            var type = $(this).attr('data-type');
                            if(type == "explain-class"){
                                $('#popup-message').html('<h3>Explain Class to Your Students</h3><p class="text-used">This section is for Students to see when they deciding which classes they want to join. It consists of Class Name, Types of Class, Descriptions. Teacher can even set passwords to limits who joins and not.</p><button id="got-it" type="button" class="btn-orange btn-create-lesson form-control nopadding-r border-btn">Got it</button>');
                            }else if(type == "tutoring"){
                                $('#popup-message').html('<h3>Tutoring</h3><p class="text-used">If you are a qualified teacher, you can add this feature to your class. If you want to do tutoring, go to <span id="gotoTutor"><a data-toggle="tab" href="#tutor-regis-tab" >Teacher & Tutor Account</a></span> page.</p><button id="got-it" type="button" class="btn-orange btn-create-lesson form-control nopadding-r border-btn">Got it</button>');
                            }else if(type == "class-assignment"){
                                $('#popup-message').html('<h3>Class Assignments</h3><p class="text-used">Add subject or lesson for your classes. They are set collections of lesson or worksheets created by you or from library. If you have not created one, start from <span id="gotoMylib"><a data-toggle="tab" href="#my-library">My Library</a></span> page. You can always add subjects of lessons later.</p><button id="got-it" type="button" class="btn-orange form-control nopadding-r border-btn">Got it</button>');
                            }
                            $('#top-popup-message').css("display", "block");  
                        });

                        $('#btn-sent-tutor').click(function(){
                            var stt = $("#rdo-agreed2").is(":checked");
                            var mobile_number = $('#mobile-number').val();
                            var last_school = $('#last-school').val();
                            var previous_school = $('#previous-school').val();
                            var skype_id = $('#skype-id').val();
                            var user_profession = $('#user-profession').val();

                            var subject_description = $('#subject-description').val();
                            var school_name = $('#school-name').val();
                            var teaching_link = $('#teaching-link').val();

                            var teaching_subject = $('#teaching-subject').val();
                            var student_link = $('#student-link').val();
                            var user_years = $('#user-years').val();
                            var school_attend = $('#school_attend').val();
                            var user_gpa = $('#user-gpa').val();
                            var user_major = $('#user-major').val();

                            var school_name1 = $('#school-name1').val();
                            var school_name2 = $('#school-name2').val();
                            var school_link1 = $('#school-link1').val();
                            var school_link2 = $('#school-link2').val();
                            var any_other = $('#any-other').val();
                            var user_grade = $("#user-gradeSelectBoxItText").attr("data-val");
                            var desc_tell_me = $('#desc_tell_me_ifr').contents().find('#tinymce').text();
                            var subject_type = [];
                            $('input[name="subject_type"]:checked').each(function () {
                                var val = this.value;
                                if(val == '') var val = $(this).attr('data-subject');
                                subject_type.push(val);
                            });
                            var msg = '';                                
                            var form_valid = true;
                            if(mobile_number == '' || $.trim(mobile_number) == ''){
                                msg += 'Please enter Mobile Number</br>';
                                form_valid = false;
                            }
                            if(last_school == '' || $.trim(last_school) == ''){
                                msg += 'Please enter Last School Attended</br>';
                                form_valid = false;
                            }
                            if(user_profession == '' || $.trim(user_profession) == ''){
                                msg += 'Please enter Profession</br>';
                                form_valid = false;
                            }
                            if(desc_tell_me == '' || $.trim(desc_tell_me) == ''){
                                msg += 'Please enter Short description</br>';
                                form_valid = false;
                            }
                            if(subject_type.length == 0){
                                msg += 'Please check the box of Subjects you Interested</br>';
                                form_valid = false;
                            }                            
                            if($.trim(any_other) == '' || $.trim(school_name2) == ''){                
                                if(school_name1 == '' || $.trim(school_name1) == ''){
                                    msg += 'Please enter School Name 1</br>';
                                    form_valid = false;
                                }
                            }
                            if((school_name2 == '' && $.trim(school_name1) == '') || ($.trim(school_name2) == '' && $.trim(school_name1) == '')){
                                msg += 'Please enter School Name 2</br>';
                                form_valid = false;
                            }
                        
                            if((any_other == '' && $.trim(school_name1) == '' && $.trim(school_name2) == '') || ($.trim(any_other) == '' && $.trim(school_name1) == '' && $.trim(school_name2) == '')){
                                msg += 'Please enter Others</br>';
                                form_valid = false;
                            }
                            if (stt == false) {
                                msg += 'Please read and check the box of Terms and Conditions</br>';
                                form_valid = false;
                            }
                            if(form_valid){
                                $.post(home_url + "/?r=ajax/update_info", {                                   
                                    subject_type: subject_type,
                                    desc_tell_me: desc_tell_me,
                                    user_grade: user_grade,
                                    any_other: any_other,
                                    school_link2: school_link2,
                                    school_link1: school_link1,
                                    school_name2: school_name2,
                                    school_name1: school_name1,
                                    user_major: user_major,
                                    user_gpa: user_gpa,
                                    school_attend: school_attend,
                                    user_years: user_years,
                                    student_link: student_link,
                                    teaching_subject: teaching_subject,
                                    teaching_link: teaching_link,
                                    school_name: school_name,
                                    subject_description: subject_description,
                                    last_school: last_school,
                                    previous_school: previous_school,
                                    skype_id: skype_id,
                                    user_profession: user_profession,
                                    mobile_number: mobile_number,
                                    type: "create"
                                }, function (data) {
                                    if ($.trim(data) == '1') {
                                        $('#popup-message').html('<p class="text-used">Teacher & Tutor Account has been created successfully</p><button id="got-profile" type="button" class="btn-orange form-control nopadding-r border-btn" data-id="tutor-regist" data-tab="tutor-regis-tab">Got it</button>');
                                        $('#top-popup-message').css("display", "block");
                                    }                                         
                                });
                            }else{
                                $('#popup-message').html('<p class="text-used">' + msg + '</p><button id="got-it" type="button" class="btn-orange form-control nopadding-r border-btn">OK</button>');
                                $('#top-popup-message').css("display", "block");
                            }
                        });

                        $("#got-it, #got-cancel").live("click", function () {
                            $('#popup-message').html();
                            $('#top-popup-message').css("display", "none");
                        });

                        $("#got-home").live("click", function () {
                            $('#popup-message').html();
                            $('#top-popup-message').css("display", "none");

                            if (redirect == '')
                                window.location.reload();
                            else
                                document.location.href = redirect;
                        });

                        $("#got-profile").live("click", function () {
                            get_profile_info();
                            $('#popup-message').html();
                            $('#top-popup-message').css("display", "none");
                            var id = $(this).attr('data-id');
                            var tab = $(this).attr('data-tab');
                            $('#profile').addClass('active in');
                            $('#sub-profile').addClass('active');
                            $("#" + tab).removeClass("active in");
                            $("#" + id).removeClass("active");
                        });

                        $("#btn-edit").live("click", function () {
                            var lid = $(this).attr('data-lid');
                            var gid = $(this).attr('data-gid');
                            var child = $(this).attr('data-child');
                            var old_desc = $(this).attr('data-desc');
                            var type = $(this).attr('data-type');
                            var prefix = $(this).attr('data-prefix');
                            var name = $(this).text();
                            $('#detail-desc').addClass('hidden');
                            $('#detail-input').removeClass('hidden');
                            $("#btn-edit").text('Save');
                            if(prefix != '') prefix = prefix + '-';
                            if(name == 'Save'){
                                var text = $('#detail-input').val();
                                if(type == "lesson" || type == "lesson_sheet" || type == "lesson_wsheet" || type == "subject_sheet"){
                                    var ajax = "edit_desc_lesson";
                                }else if(type == "subject"){
                                    var ajax = "edit_desc_subject";
                                }else if(type == "list_course"){
                                    var ajax = "edit_desc_list_course"; 
                                    child = 0;
                                    lid = gid;
                                }else if(type == "worksheet_course"){
                                    var ajax = "edit_desc_list_course"; 
                                    lid = gid;
                                }else if(type == "subject_lesson"){
                                    var ajax = "edit_desc_lesson"; 
                                    lid = child;
                                    child = 0;
                                }else{
                                    var ajax = "";
                                }

                                $.post(home_url + "/?r=ajax/" + ajax, {desc: text, lid: lid, child: child, old_desc: old_desc}, function (data) {
                                    data = JSON.parse(data);
                                    if(data.save == 1){   
                                        var desc = text;                                        
                                    }else{
                                        var desc = old_desc;
                                    }

                                    $('#detail-input').val(desc);
                                    $('#detail-desc').text(desc);
                                    $("#btn-edit").text('Edit');
                                    $('#detail-desc').removeClass('hidden');
                                    $('#detail-input').addClass('hidden');
                                    
                                    updateDescList(type, gid, lid, child, desc, prefix);
                                });
                            }
                        });

                        $("#btn-undo").live("click", function () {
                            var lid = $(this).attr('data-lid');
                            var gid = $(this).attr('data-gid');
                            var child = $(this).attr('data-child');
                            var type = $(this).attr('data-type');
                            var old_desc = $(this).attr('data-desc');
                            var prefix = $(this).attr('data-prefix');
                            if(prefix != '') prefix = prefix + '-';

                            if(type == "lesson" || type == "lesson_sheet" || type == "lesson_wsheet" || type == "subject_sheet"){
                                var ajax = "undo_desc_lesson";
                            }else if(type == "subject"){
                                var ajax = "undo_desc_subject"; 
                            }else if(type == "list_course"){
                                var ajax = "undo_desc_list_course"; 
                                child = 0;
                                lid = gid;
                            }else if(type == "worksheet_course"){
                                var ajax = "undo_desc_list_course"; 
                                lid = gid;
                            }else if(type == "subject_lesson"){
                                var ajax = "undo_desc_lesson"; 
                                lid = child;
                                child = 0;
                            }else{
                                var ajax = "";
                            }

                            $.post(home_url + "/?r=ajax/" + ajax, {lid: lid, child: child}, function (data) {
                                data = JSON.parse(data);
                                if(data.save == 1){   
                                    var desc = data.desc;                                        
                                }else{
                                    var desc = old_desc;
                                }

                                $('#detail-input').val(desc);
                                $('#detail-desc').text(desc);
                                $("#btn-edit").attr('data-desc',desc);

                                updateDescList(type, gid, lid, child, desc, prefix);
                            });
                        });

                        $(".popup-detail").live("click", function () {
                            var lid = $(this).attr('data-lid');
                            var gid = $(this).attr('data-gid');
                            var child = $(this).attr('data-child');
                            var title = $(this).attr('data-title');
                            var desc = $(this).attr('data-desc');
                            var type = $(this).attr('data-type');
                            var prefix = $(this).attr('data-prefix');
                            var html = '';
                            if(desc == 'null') desc = '';
                            $('#popup-message').html('');
                            html += '<h3>' + title + '</h3>';
                            html += '<p class="desc-detail text-used" id="detail-desc">' + desc + '</p>';
                            html += '<textarea rows="4" id="detail-input" class="hidden" name="input-detail" >' + desc + '</textarea>';
                            html += '<button id="btn-edit" type="button" class="btn-orange form-control nopadding-r border-btn" data-lid="' + lid + '" data-gid="' + gid + '" data-child="' + child + '" data-desc="' + desc + '" data-type="' + type + '" data-prefix="' + prefix + '">Edit</button>';
                            html += '<button id="btn-undo" type="button" class="btn-orange form-control nopadding-r border-btn" data-lid="' + lid + '" data-gid="' + gid + '" data-child="' + child + '" data-desc="' + desc + '" data-type="' + type + '" data-prefix="' + prefix + '">Undo</button>';
                            html += '<button id="got-cancel" type="button" class="btn-gray form-control nopadding-r border-btn">Cancel</button>';
                            $('#popup-message').html(html);
                            $('#top-popup-message').css("display", "block"); 
                        });

                        $("#btn-open-detail-pra").live("click", function () {
                            if($(this).hasClass('active')){
                                $(this).removeClass('active');
                                $(this).find('img').attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_OPEN-CLOSE_Open.png");
                                $('.table-sub-less-prerequisite-ass').css("display","none");                                
                            }else{
                                $(this).addClass('active');
                                $(this).find('img').attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_OPEN-CLOSE_Close.png");
                                $('.table-sub-less-prerequisite-ass').css("display","block");
                            }
                        });

                        $("#btn-open-detail-npra").live("click", function () {
                            if($(this).hasClass('active')){
                                $(this).removeClass('active');
                                $(this).find('img').attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_OPEN-CLOSE_Open.png");  
                                $('.table-sub-less-ass').css("display","none");                              
                            }else{
                                $(this).addClass('active');
                                $(this).find('img').attr("src","<?php echo get_template_directory_uri(); ?>/library/images/Icon_OPEN-CLOSE_Close.png");
                                $('.table-sub-less-ass').css("display","block");
                            }
                        });
                        
                        function updateDescList(type, gid, lid, child, desc, prefix){
                            var span = $("span.popup-detail");
                            switch(type) {
                                case "lesson":
                                    if($('#lesson-tr'+lid).length){
                                        $('#lesson-tr'+lid).find(span).attr("data-desc",desc);
                                    }
                                    if($('#pra-lesson-tr'+lid).length){
                                        $('#pra-lesson-tr'+lid).find(span).attr("data-desc",desc);
                                    }
                                    if($('#npra-lesson-tr'+lid).length){
                                        $('#npra-lesson-tr'+lid).find(span).attr("data-desc",desc);
                                    }
                                    break;

                                case "lesson_sheet":
                                    if($('#eng-lesson-'+child).length){
                                        $('#eng-lesson-'+child).find(span).attr("data-desc",desc);
                                    }
                                    if($('#pra-eng-lesson-'+child).length){ 
                                        $('#pra-eng-lesson-'+child).find(span).attr("data-desc",desc);
                                    }
                                    if($('#npra-eng-lesson-'+child).length){
                                        $('#npra-eng-lesson-'+child).find(span).attr("data-desc",desc);
                                    }
                                    break;

                                case "lesson_wsheet":
                                    if($('#tr-lesson-'+child).length){
                                        $('#tr-lesson-'+child).find(span).attr("data-desc",desc);
                                    }
                                    if($('#pra-tr-lesson-'+child).length){ 
                                        $('#pra-tr-lesson-'+child).find(span).attr("data-desc",desc);
                                    }
                                    if($('#npra-tr-lesson-'+child).length){
                                        $('#npra-tr-lesson-'+child).find(span).attr("data-desc",desc);
                                    }
                                    break;

                                case "subject":
                                    if($('#subj-tr'+lid).length){
                                        $('#subj-tr'+lid).find(span).attr("data-desc",desc);
                                    }
                                    if($('#pra-subj-tr'+lid).length){ 
                                        $('#pra-subj-tr'+lid).find(span).attr("data-desc",desc);
                                    }
                                    if($('#npra-subj-tr'+lid).length){
                                        $('#npra-subj-tr'+lid).find(span).attr("data-desc",desc);
                                    }
                                    break;

                                case "list_course":
                                    if($('#content-tr'+gid).length){
                                        $('#content-tr'+gid).find(span).attr("data-desc",desc);
                                    }
                                    if($('#pra-content-tr'+gid).length){ 
                                        $('#pra-content-tr'+gid).find(span).attr("data-desc",desc);
                                    }
                                    if($('#npra-content-tr'+gid).length){
                                        $('#npra-content-tr'+gid).find(span).attr("data-desc",desc);
                                    }
                                    break;

                                case "worksheet_course":
                                    if($('#sheet-tr'+child).length){
                                        $('#sheet-tr'+child).find(span).attr("data-desc",desc);
                                    }
                                    if($('#pra-sheet-tr'+child).length){ 
                                        $('#pra-sheet-tr'+child).find(span).attr("data-desc",desc);
                                    }
                                    if($('#npra-sheet-tr'+child).length){
                                        $('#npra-sheet-tr'+child).find(span).attr("data-desc",desc);
                                    }
                                    break;

                                case "subject_lesson":
                                    if($('#lesson-tr'+lid).length){
                                        $('#lesson-tr'+lid).find(span).attr("data-desc",desc);
                                    }
                                    if($('#pra-lesson-tr'+lid).length){ 
                                        $('#pra-lesson-tr'+lid).find(span).attr("data-desc",desc);
                                    }
                                    if($('#npra-lesson-tr'+lid).length){
                                        $('#npra-lesson-tr'+lid).find(span).attr("data-desc",desc);
                                    }
                                    break;

                                case "subject_sheet":
                                    if($('#tr-lesson-'+child).length){
                                        $('#tr-lesson-'+child).find(span).attr("data-desc",desc);
                                    }
                                    if($('#pra-tr-lesson-'+child).length){ 
                                        $('#pra-tr-lesson-'+child).find(span).attr("data-desc",desc);
                                    }
                                    if($('#npra-tr-lesson-'+child).length){
                                        $('#npra-tr-lesson-'+child).find(span).attr("data-desc",desc);
                                    }
                                    break;
                            }
                        }

                        function get_scheduled_day(day = '', type = 'schedule'){
                            if(type == 'schedule'){
                                $('.table-tutoring').removeClass('hide');
                                $('#tutoring-scheduled').removeClass('list-summary');
                                var fl = '';
                                var icon_arrow = '';
                            }else{
                                $('.table-tutoring').addClass('hide');
                                $('#tutoring-scheduled').addClass('list-summary');
                                var fl = '';
                                var icon_arrow = '<img src="<?php echo get_template_directory_uri(); ?>/library/images/Icon_Go_Schedule.png" height="23" style="position: absolute;right: 0px; top: 32%;">';
                            }

                            var ul_scheduled = $("#tutoring-scheduled");
                            var ul_upcoming = $("#upcoming-schedule");
                            ul_scheduled.html("");
                            ul_upcoming.html("");
                            $.get(home_url + "/?r=ajax/get_scheduled_day", {day: day}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);
                                if (data.scheduled.length > 0) {
                                    $.each(data.scheduled, function (i, v) {
                                        var height = 0;
                                        var index_st = $('#'+$.trim(v.start_id)).index();
                                        var index_ed = $('#'+$.trim(v.end_id)).index();
                                        var top = index_st * 25; 
                                        height = index_ed - index_st;

                                        if(v.confirmed == 0){
                                            var cl = ' wait';
                                            var confirmed = 'f4f7f7';                       
                                        }
                                        else{
                                            var cl = '';
                                            var confirmed = 'e2f9e1';
                                        }

                                        if(type == 'schedule'){
                                            var h = height * 25;
                                            var style = 'style="top: ' + (top + 12) + 'px; background: #' + confirmed +';height: ' + ( h + 1 ) + 'px;"';    
                                            var class_type = cl;                             
                                        }else{
                                            var style = ' style="height: 55px;"';
                                            var class_type = ' summary' + cl;
                                        }
                                        var icon = getIconTutoring(v.subject);
                                        var li = '<li class="view-detail-schedule' + class_type + '" ' + style + ' data-id="' + v.id + '" data-subject="' + v.subject + '" data-private-subject="' + v.private_subject + '" data-message="' + v.short_message + '" data-student-name="' + v.student_name + '" data-time="' + v.time + '" data-location="' + v.location + '" data-status="' + v.status + '" data-confirmed="' + v.confirmed + '" data-date="' + v.date + '" data-icon="' + icon + '" data-create-on="' + v.create_on + '"><span ' + fl + '>';
                                        li += '<span class="time-scheduled">' + v.time + '</span>';
                                        li += '<span class="subject-scheduled">' + v.private_subject + '</span>';
                                        li += '</span>' + icon_arrow + '</li>';
                                        ul_scheduled.append(li);
                                    });
                                }

                                if (data.confirmed.length > 0) {
                                    $.each(data.confirmed, function (i, v) {
                                        var li = '<li><span class="time-upcoming">' + v.date + ' / ' + v.time_start + ' - ' + v.time_end + '</span><span>' + v.private_subject + '</span></li>';
                                        ul_upcoming.append(li);
                                    });
                                }
                            });
                        }

                        function get_list_schedule(){
                            var tbody_schedule = $("#table-list-schedule");
                            tbody_schedule.html("");
                            var type = 'am';
                            for (var i = 0; i < 24; i++) {
                                var id = i;
                                if (i > 11){
                                    var j = i - 12;                                    
                                    type = 'pm'; 
                                }else{
                                    var j = i;
                                }

                                if(j == 0) id = j = 12;
                                    
                                var tr_am = '<tr id="' + id + '_00_' + type + '">';
                                tr_am += '<td width="70">' + j + type + '</td>'; 
                                tr_am += '<td><hr/></td>';
                                tr_am += '</tr>';

                                var tr_half = '<tr id="' + id + '_30_' + type + '">';
                                tr_half += '<td></td>'; 
                                tr_half += '<td class="half-time">-</td>';
                                tr_half += '</tr>';
                                tbody_schedule.append(tr_am);
                                tbody_schedule.append(tr_half);
                            }
                            var tr_24 = '<tr id="24_00_pm">';
                                tr_24 += '<td width="70"></td>'; 
                                tr_24 += '<td></td>';
                                tr_24 += '</tr>';
                                tbody_schedule.append(tr_24);
                        }

                        function get_update_info(){
                            $.get(home_url + "/?r=ajax/get_user_info", {userid: ''}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);
                                if(data.chk_teacher == 1)
                                    $('#tutor-regis-update').css("display","block");
                                else
                                    $('#tutor-regis-update').css("display","none");

                                $('#chk-tutor-teacher').val(data.chk_teacher);
                                $('#update_username').val(data.user_email);
                                $('#update_password').val(data.user_password);
                                $('#update_confirmpass').val(data.user_password);
                                $('#update_first_name').val(data.first_name);
                                $('#update_last_name').val(data.last_name);
                                $('#update_birth_y').val(data.birth_y);
                                
                                $('#mobile-number-update').val(data.mobile_number);
                                $('#last-school-update').val(data.last_school);
                                $('#previous-school-update').val(data.previous_school);
                                $('#skype-update').val(data.skype_id);
                                $('#profession-update').val(data.user_profession);

                                $('#description-update').val(data.subject_description);
                                $('#school-name-update').val(data.school_name);
                                $('#teaching-link-update').val(data.teaching_link);

                                $('#subject-update').val(data.teaching_subject);
                                $('#student-link-update').val(data.student_link);
                                $('#years-update').val(data.user_years);
                                $('#school-attend-update').val(data.school_attend);
                                $('#gpa-update').val(data.user_gpa);
                                $('#major-update').val(data.user_major);

                                $('#school-name1-update').val(data.school_name1);
                                $('#school-name2-update').val(data.school_name2);
                                $('#school-link1-update').val(data.school_link1);
                                $('#school-link2-update').val(data.school_link2);
                                $('#any-other-update').val(data.any_other);
                                $('#profile-value').val(data.profile_value); 
                                $("#user-upload-img").attr('src',data.user_avatar);

                                tinyMCE.activeEditor.setContent(data.desc_tell_me);

                                if(data.birth_m != ''){
                                    $("#update_birth_m").selectBoxIt('selectOption',data.birth_m.toString()).data("selectBox-selectBoxIt");
                                    $("#update_birth_m").data("selectBox-selectBoxIt").refresh();
                                }
                                if(data.birth_d != ''){
                                    $("#update_birth_d").selectBoxIt('selectOption',data.birth_d.toString()).data("selectBox-selectBoxIt");
                                    $("#update_birth_d").data("selectBox-selectBoxIt").refresh();
                                }
                                if(data.user_grade != ''){
                                    $("#grade-update").selectBoxIt('selectOption',data.user_grade.toString()).data("selectBox-selectBoxIt");
                                    $("#grade-update").data("selectBox-selectBoxIt").refresh();
                                }

                                var viewport = getViewport();
                                if(viewport.width < 650){
                                    if(data.gender != ''){
                                        $("#update_birth_g_mb").val(data.gender);
                                    }
                                }else{
                                    if(data.gender != ''){
                                        $("#update_birth_g_pc").val(data.gender);
                                    }
                                }
                                $('input[name="update-cb-lang"]').each(function () {
                                    if( $.inArray(this.value, data.cb_lang) >= 0 ) {
                                        $(this).attr("checked",true);
                                    }
                                });
                                $('input[name="subject_type_update"]').each(function () {
                                    if( $.inArray(this.value, data.subject_type) >= 0 ) {
                                        $(this).attr("checked",true);
                                    }
                                });
                            });
                        }

                        function get_profile_info(){
                            $.get(home_url + "/?r=ajax/get_user_profile", {userid: ''}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);                                

                                $('#profile-user-avatar').attr("src",data.user_avatar);
                                $('#profile-my-name').text(data.user_name);
                                $('#profile-point-balance').text(data.user_points);
                                $('#profile-point-earned').text(data.user_earned);
                                $('#profile-english-writting').text(data.english_writting);
                                $('#profile-english-conversation').text(data.english_conversation);
                                $('#profile-math-up').text(data.math_up);
                                $('#profile-math-conversation').text(data.math_conversation);
                                $('#profile-user-email').text(data.uemail);
                                $('#profile-date-birth').text(data.dbirth);
                                $('#profile-language').text(data.langs);
                                $('#profile-mobile-phone').text(data.user_mobile_number);
                                $('#profile-last-attended').text(data.user_last_school);
                                $('#profile-last-tought').text(data.user_previous_school);
                                $('#profile-skype-id').text(data.user_skype_id);
                                $('#profile-profession').text(data.u_profession);
                            });
                        }

                        function get_tutoring_plan(search = ''){
                            var tbody_request = $("#table-new-request");
                            tbody_request.html("");
                            $.get(home_url + "/?r=ajax/get_tutoring_plan", {search: search}, function (data) {
                                //console.log(data);
                                data = JSON.parse(data);
                                if (data.tutorings.length > 0) {
                                    $.each(data.tutorings, function (i, v) {
                                    var tr = '<tr>';
                                    if(v.status == 2)
                                        var subject = '<strong>' + v.private_subject + '</strong>';
                                    else
                                        var subject = v.private_subject;
                                    var icon = getIconTutoring(v.subject);
                                    tr+='<td class="table-img-icon"><img src="<?php echo get_template_directory_uri(); ?>/library/images/' + icon + '" alt="' + v.subject + '"/></td>'; 
                                    tr+='<td class="tit-msg-stl view-detail-tutoring" data-id="' + v.id + '" data-subject="' + v.subject + '" data-private-subject="' + v.private_subject + '" data-message="' + v.short_message + '" data-student-name="' + v.student_name + '" data-time="' + v.time + '" data-location="' + v.location + '" data-status="' + v.status + '" data-confirmed="' + v.confirmed + '" data-date="' + v.date + '" data-date-schedule="' + v.date_schedule + '" data-icon="' + icon + '" data-create-on="' + v.create_on + '">' + subject + '</td>';
                                    tr+='<td><p class="sender-msg-stl">'+v.student_name+'</p></td>';
                                    tr+='<td>' + v.time_start + '</td></tr>';
                                        tbody_request.append(tr);  
                                    });
                                    for(var i = data.tutorings.length;i < 11; i++){
                                        var add_tr = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_request.append(add_tr);
                                    }
                                   
                                }else{
                                    var tr = '<tr><td>There is no class postings.</td><td></td><td></td><td class="no-message"></td></tr>';
                                    tbody_request.append(tr);
                                    for(var i = 0;i < 10; i++){
                                        var add_tr = '<tr><td>&nbsp</td><td></td><td></td><td></td></tr>';
                                        tbody_request.append(add_tr);
                                    }
                                }                                
                                return true;
                            });
                        }   
                        function getIconTutoring(type = ''){
                            var icon = '';
                            switch($.trim(type)) {
                                case 'English':
                                    icon = 'icon_ENGLISH.png';
                                    break;
                                case 'Math':
                                    icon = 'icon_MATH.png';
                                    break;
                                case 'History':
                                    icon = 'Type_History.png';
                                    break;
                                case 'Art and Design':
                                    icon = 'Type_Art_n_Design.png';
                                    break;
                                case 'Science':
                                    icon = 'Type_Science.png';
                                    break;
                                case 'Music':
                                    icon = 'Type_Music.png';
                                    break;
                                case 'Other':
                                    icon = 'Type_Others.png';
                                    break;
                                default:
                                    icon = 'Type_Others.png';
                            }
                            return icon;
                        }

                        function getDistancePlace(text = '', type = ''){
                            var distance = '';
                            switch($.trim(text)) {
                                case 'Mobile Number:':
                                    if(type == 'Firefox')
                                        distance = 29;
                                    else
                                        distance = 35;
                                    break;                               
                                case 'Last School Attended:':
                                    if(type == 'Firefox')
                                        distance = 31;
                                    else
                                        distance = 37;
                                    break;
                                case 'School Taught (if any):':
                                    if(type == 'Firefox')
                                        distance = 30;
                                    else
                                        distance = 35;
                                    break;
                                case 'Skype ID (if any):':
                                    if(type == 'Firefox')
                                        distance = 28;
                                    else 
                                        distance = 30;
                                    break;
                                case 'Profession:':
                                    distance = 25;
                                    break;
                                case 'Description:':
                                    if(type == 'Firefox')
                                        distance = 28;
                                    else
                                        distance = 30;
                                    break;
                                case 'School Name:':
                                    if(type == 'Firefox')
                                        distance = 26;
                                    else
                                        distance = 29;
                                    break;
                                case 'Link (if any):':
                                    if(type == 'Firefox')
                                        distance = 25;
                                    else
                                        distance = 28;
                                    break;
                                case 'Subject:':
                                    if(type == 'Firefox')
                                        distance = 22;
                                    else
                                        distance = 24;
                                    break;
                                case 'Years:':
                                    distance = 20;
                                    break;
                                case 'Attending:':
                                    if(type == 'Firefox')
                                        distance = 26;
                                    else
                                        distance = 29;
                                    break;
                                case 'GPA:':
                                    distance = 18;
                                    break;
                                case 'Major:':
                                    if(type == 'Firefox')
                                        distance = 22;
                                    else
                                        distance = 23;
                                    break;
                                case 'School Name 1:':
                                    if(type == 'Firefox')
                                        distance = 26;
                                    else
                                        distance = 30;
                                    break;
                                case 'School Name 2:':
                                    if(type == 'Firefox')
                                        distance = 26;
                                    else
                                        distance = 30;
                                    break;
                                case 'Others:':
                                    if(type == 'Firefox')
                                        distance = 24;
                                    else
                                        distance = 26;
                                    break;
                                case 'User Name:':
                                    if(type == 'Firefox')
                                        distance = 26;
                                    else
                                        distance = 26;
                                    break;
                                case 'Password:':
                                    if(type == 'Firefox')
                                        distance = 26;
                                    else
                                        distance = 24;
                                    break;
                                case 'Confirm Password:':
                                    if(type == 'Firefox')
                                        distance = 32;
                                    else
                                        distance = 34;
                                    break;
                                case 'First Name:':
                                    if(type == 'Firefox')
                                        distance = 26;
                                    else
                                        distance = 26;
                                    break;
                                case 'Last Name:':
                                    if(type == 'Firefox')
                                        distance = 24;
                                    else
                                        distance = 25;
                                    break;
                                case 'Year:':
                                    if(type == 'Firefox')
                                        distance = 1;
                                    else
                                        distance = 0;
                                    break;
                                default:
                                    distance = 30;
                            }
                            return distance;
                        }  

                    }); //end function
                   
                    
                })(jQuery);

            </script>
            </header>

